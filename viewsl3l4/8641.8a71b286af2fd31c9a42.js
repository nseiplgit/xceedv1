/*! For license information please see 8641.8a71b286af2fd31c9a42.js.LICENSE.txt */
"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[8641,7164,6408],{45332:(e,t,a)=>{a.d(t,{Z:()=>C});var l=a(22122),i=a(81253),n=a(85061),r=a(92950),o=a(86010),d=a(79437),s=a(52543),c=a(83711),m=function(e,t){var a,l,i,r;e&&e.complete&&(e.width/e.height>e.parentElement.offsetWidth/e.parentElement.offsetHeight?((a=e.classList).remove.apply(a,(0,n.Z)(t.imgFullWidth.split(" "))),(l=e.classList).add.apply(l,(0,n.Z)(t.imgFullHeight.split(" ")))):((i=e.classList).remove.apply(i,(0,n.Z)(t.imgFullHeight.split(" "))),(r=e.classList).add.apply(r,(0,n.Z)(t.imgFullWidth.split(" ")))))},p=r.forwardRef((function(e,t){var a=e.children,n=e.classes,s=e.className,p=(e.cols,e.component),C=void 0===p?"li":p,u=(e.rows,(0,i.Z)(e,["children","classes","className","cols","component","rows"])),y=r.useRef(null);return r.useEffect((function(){!function(e,t){e&&(e.complete?m(e,t):e.addEventListener("load",(function(){m(e,t)})))}(y.current,n)})),r.useEffect((function(){var e=(0,d.Z)((function(){m(y.current,n)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[n]),r.createElement(C,(0,l.Z)({className:(0,o.default)(n.root,s),ref:t},u),r.createElement("div",{className:n.tile},r.Children.map(a,(function(e){return r.isValidElement(e)?"img"===e.type||(0,c.Z)(e,["Image"])?r.cloneElement(e,{ref:y}):e:null}))))}));const C=(0,s.Z)({root:{boxSizing:"border-box",flexShrink:0},tile:{position:"relative",display:"block",height:"100%",overflow:"hidden"},imgFullHeight:{height:"100%",transform:"translateX(-50%)",position:"relative",left:"50%"},imgFullWidth:{width:"100%",position:"relative",transform:"translateY(-50%)",top:"50%"}},{name:"MuiGridListTile"})(p)},69685:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(22122),i=a(81253),n=a(92950),r=(a(59864),a(86010)),o=a(52543),d=n.forwardRef((function(e,t){var a=e.cellHeight,o=e.children,d=e.classes,s=e.className,c=e.cols,m=void 0===c?2:c,p=e.component,C=void 0===p?"ul":p,u=e.gap,y=void 0===u?4:u,g=e.rowHeight,T=void 0===g?180:g,D=e.spacing,I=e.style,v=(0,i.Z)(e,["cellHeight","children","classes","className","cols","component","gap","rowHeight","spacing","style"]),x=D||y,f=a||T;return n.createElement(C,(0,l.Z)({className:(0,r.default)(d.root,s),ref:t,style:(0,l.Z)({margin:-x/2},I)},v),n.Children.map(o,(function(e){if(!n.isValidElement(e))return null;var t=e.props.cols||1,a=e.props.rows||1;return n.cloneElement(e,{style:(0,l.Z)({width:"".concat(100/m*t,"%"),height:"auto"===f?"auto":f*a+x,padding:x/2},e.props.style)})})))}));const s=(0,o.Z)({root:{display:"flex",flexWrap:"wrap",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"}},{name:"MuiImageList"})(d)},83173:(e,t,a)=>{var l=a(95318),i=a(20862);t.Z=void 0;var n=i(a(92950)),r=(0,l(a(2108)).default)(n.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11l-6-6zM8 21V7h6v5h5v9H8z"}),"FileCopyOutlined");t.Z=r},92448:(e,t,a)=>{var l=a(95318),i=a(20862);t.Z=void 0;var n=i(a(92950)),r=(0,l(a(2108)).default)(n.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.Z=r},93657:(e,t,a)=>{var l=a(95318),i=a(20862);t.Z=void 0;var n=i(a(92950)),r=(0,l(a(2108)).default)(n.createElement("path",{d:"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt");t.Z=r},53375:(e,t,a)=>{var l=a(95318),i=a(20862);t.Z=void 0;var n=i(a(92950)),r=(0,l(a(2108)).default)(n.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=r},85984:(e,t,a)=>{var l=a(95318),i=a(20862);t.Z=void 0;var n=i(a(92950)),r=(0,l(a(2108)).default)(n.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");t.Z=r},92381:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(40900),i=a(26537),n=a(61956),r=a(35131),o=a.n(r),d=a(25108);function s(e,t,a,r){if("select"==e){const e=l.v.Api+"FP1454S3/",a={data:{p12:t,p29:"GetFavList",p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}};return fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","x-tokenid":i.Z.TokenIDPK,"x-tokenname":i.Z.TokenName,"x-userid":localStorage.getItem("userid"),USER_ID:localStorage.getItem("userid"),FORM_ID:1},body:JSON.stringify(a)}).then((e=>{if(e.ok)return d.log(e,"Response*"),e.json();throw new Error("Something went wrong")}))}if("save"==e){const e=l.v.Api+"FP1454S1/",s={data:[{p1:0,p2:null,p3:r,p4:JSON.stringify(a),p5:null,p6:0,p7:null,p8:0,p9:0,p10:0,p11:!1,p12:t,p13:null,p14:!0,p15:!1,p16:localStorage.getItem("userid"),p17:o()().format("YYYY-MM-DD hh:mm:ss"),p18:localStorage.getItem("userid"),p19:o()().format("YYYY-MM-DD hh:mm:ss")}]};(0,i.Z)(0).then((t=>{(0,n.Z)(e,s,t).then((e=>{200==e[0].status.code?d.log(e,"RES"):d.log("Error")}))}))}}},8687:(e,t,a)=>{function l(e,t,a,l,i,n){try{if("200"==e.Output.status.code&&e.Output.data.length>0){if(e.Output.data){let r=e.Output.data[0];t({type:"IsDraft",payload:a}),t({type:"EditOpen",payload:!1}),t({type:"EditIsDraft",payload:a}),i.ExpandDetail(!1),l?i.AddOpen(r[n],a):t({type:"editData",payload:[r]}),i.loading(!1)}}else i.loading(!1),i.alert({open:!0,color:"warning",message:["There is no Record Found"]})}catch(e){i.loading(!1),i.alert({open:!0,color:"error",message:[e.message]})}}a.d(t,{m:()=>l})},43319:(e,t,a)=>{a.d(t,{E:()=>ke,kN:()=>Ze,ZP:()=>Oe});var l=a(92950),i=a.n(l),n=(a(95866),a(45237)),r=a(36939),o=a(61201),d=a(59009),s=a(51673),c=(a(99058),a(80366)),m=a(282),p=a(868),C=a(78513),u=a(14439),y=a(27848),g=a(40900),T=a(64059),D=a(24038),I=a(8981),v=a(47516),x=a(86893),f=a(33681),F=a(63163),E=a(35131),M=a.n(E),S=a(61956),h=a(93657),N=a(53375),L=a(52663),b=a(66083),P=a(29525),B=a(66856),w=a(39803),A=a(99940),R=a(17149),k=a(62810),Z=a(30553),O=a(92381),G=a(25108);const z=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[n,r]=(0,l.useState)([]),[o,d]=(0,l.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[E,M]=(0,l.useState)(""),[S,z]=(0,l.useState)({}),[K,V]=(0,l.useState)(!0),[_,H]=(0,l.useState)(!1),{cstate:U,cdispatch:j}=e.ContextApi?e.ContextApi:Ze(),[Y,q]=(0,l.useState)(1),[W,$]=(0,l.useState)(0),[J,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)({}),[te,ae]=(0,l.useState)([]),[le,ie]=(0,l.useState)(!0),[ne,re]=(0,l.useState)(!1),[oe,de]=(0,l.useState)(""),[se,ce]=(0,l.useState)(!1),[me,pe]=(0,l.useState)(!1),[Ce,ue]=(0,l.useState)(!1),[ye,ge]=(0,l.useState)(""),Te=(0,l.useRef)(null),[De,Ie]=(0,l.useState)({});let ve=localStorage.getItem("Language");const xe={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let fe=(0,I.Z)();const Fe=e=>fe[e]?fe[e]:e,Ee=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[xe[ve]];function Me(){z({}),ee({}),e.searchData({}),H(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const a=e.userGrid.reduce(((e,t)=>{const a=t.FieldName;return t.IsForeign&&(e[a]||(e[a]=[]),e[a].push(t.FieldDisplay)),e}),{});Ie(a),ae(t)}),[]),(0,l.useEffect)((()=>()=>{Te.current&&Te.current.abort()}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Me()}})));const Se=async(t,a,l,i)=>{Q(!0);try{Te.current&&Te.current.abort();const o=new AbortController;Te.current=o;let c="",m=[],p={};await d((e=>(c=e.name,e))),await z((e=>(m=e,e))),await ee((e=>(p=e,e)));const C=g.v.Api+"FP328S3/",u={data:{p1:"CCMTargetFixDetIDPK"==a?null:await Pe(),p2:"CCMTargetFixDetCode"==c&&l.length>0?"%"+l+"%":null,p3:"LocTargetBy"==c&&l.length>0?"%"+l+"%":null,p4:"MaintenanceDuration"==c&&l.length>0?"%"+l+"%":null,p5:null,p6:"TFDColorSA"==c&&l.length>0?"%"+l+"%":null,p7:"TFDColorCOT"==c&&l.length>0?"%"+l+"%":null,p8:"TFDColorNCOT"==c&&l.length>0?"%"+l+"%":null,p9:"AnaTime"==c&&l.length>0?"%"+l+"%":null,p10:"FixedTime"==c&&l.length>0?"%"+l+"%":null,p11:null,p12:null,p13:e.parentId?e.parentId:"0",p14:"PriorityName"!=c&&m.PriorityName?m.PriorityName.map((e=>e.PriorityIDPK)).toString():null,p15:"CCMTargetTypName"!=c&&m.CCMTargetTypName?m.CCMTargetTypName.map((e=>e.CCMTargetTypeIDPK)).toString():null,p16:e.Dialogview?"1":null,p17:null,p18:"p18"==c&&l.length>0?l:null,p19:null,p20:null,p21:null,p22:null,p23:"ContractName"!=c&&m.ContractName?m.ContractName.map((e=>e.ContractIDPK)).toString():null,p24:"ContractCode"==c&&l.length>0?"%"+l+"%":null,p25:"ContractName"==c&&l.length>0?"%"+l+"%":null,p26:"LocalityName"!=c&&m.LocalityName?m.LocalityName.map((e=>e.LocalityIDPK)).toString():null,p27:"LocalityCode"==c&&l.length>0?"%"+l+"%":null,p28:"LocalityName"==c&&l.length>0?"%"+l+"%":null,p29:"PriorityCode"==c&&l.length>0?"%"+l+"%":null,p30:"PriorityName"==c&&l.length>0?"%"+l+"%":null,p31:"BuildingName"!=c&&m.BuildingName?m.BuildingName.map((e=>e.BuildingIDPK)).toString():null,p32:"BuildingCode"==c&&l.length>0?"%"+l+"%":null,p33:"BuildingName"==c&&l.length>0?"%"+l+"%":null,p34:"LocalityGroupName"!=c&&m.LocalityGroupName?m.LocalityGroupName.map((e=>e.LocalityGroupIDPK)).toString():null,p35:"LocalityGroupCode"==c&&l.length>0?"%"+l+"%":null,p36:"LocalityGroupName"==c&&l.length>0?"%"+l+"%":null,p37:"ServiceTypeName"!=c&&m.ServiceTypeName?m.ServiceTypeName.map((e=>e.ServiceTypeIDPK)).toString():null,p38:"ServiceTypCode"==c&&l.length>0?"%"+l+"%":null,p39:"ServiceTypeName"==c&&l.length>0?"%"+l+"%":null,p40:"CCMComplaintTypeName"!=c&&m.CCMComplaintTypeName?m.CCMComplaintTypeName.map((e=>e.CCMComplaintTypeIDPK)).toString():null,p41:"CCMComplaintTypeCode"==c&&l.length>0?"%"+l+"%":null,p42:"CCMComplaintTypeName"==c&&l.length>0?"%"+l+"%":null,p43:"LocFixedBy"==c&&l.length>0?"%"+l+"%":null,p44:"LocResponseBy"==c&&l.length>0?"%"+l+"%":null,p45:"LocAnalysedBy"==c&&l.length>0?"%"+l+"%":null,p46:"CCMTargetTypCode"==c&&l.length>0?"%"+l+"%":null,p47:"CCMTargetTypName"==c&&l.length>0?"%"+l+"%":null,p48:i||1,p49:10,p50:t,p51:null,p52:null,p53:localStorage.getItem("UserGroupID"),p54:localStorage.getItem("userid")}},y=await(0,s.Z)(C,u,e.token,"",o.signal);if(!y)return!1;const T=y.Output.status.code,D=y.Output.data;if("200"===T)if(D.length>0)if(1===i){let e=Ne(D,c),t=he(e,S[c],a);r(t),$(t.length>0?t[0].TotalCount:S[c].length)}else{let e=[...n,...D],t=Ne(e,c);$(t.length<10?t.length:D[0].TotalCount),r(Ne(t,c))}else E.length>0&&r([]),$(n.length);else e.alertmsg("error",[y.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{Q(!1)}},he=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),Ne=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));function Le(e){let t=e+"PK",a=De[e];if(a){const e=a.flatMap((e=>S[e]?S[e].map((e=>e[t])):[]));return e.toString()}return""}const be=async t=>{let a="",l={};await z((e=>(a=e,e)));let i=[...te],n=[];for(let e of i){let t=a[e]?.map((e=>e.CCMTargetFixDetIDPK)).toString();t&&n.push(t)}await ee((e=>(l=e,e)));let r={CCMTargetFixDetIDPK:n?[...new Set(n)].toString():"",CreatedTtm:l.CreatedTtm?l.CreatedTtm.From:"",CreatedTtmType:l.CreatedTtm?l.CreatedTtm.Type:"",CreatedTtmBetween:l.CreatedTtm?l.CreatedTtm.To:"",AnaTime:l.AnaTime?l.AnaTime.From:"",AnaTimeType:l.AnaTime?l.AnaTime.Type:"",AnaTimeBetween:l.AnaTime?l.AnaTime.To:"",FixedTime:l.FixedTime?l.FixedTime.From:"",FixedTimeType:l.FixedTime?l.FixedTime.Type:"",FixedTimeBetween:l.FixedTime?l.FixedTime.To:"",CCMTargetTypeID:Le("CCMTargetTypeID"),CCMTargetFixID:Le("CCMTargetFixID"),PriorityID:Le("PriorityID")};"saveFav"==t?Ae("save",r):(e.searchData(r),H(!1))};async function Pe(){let e={};await z((t=>(e=t,t)));let t=[...te],a=[];for(let l of t){let t=e[l]?.map((e=>e.CCMTargetFixDetIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function Be(t,a,l,i,n,r){let o={[i]:{From:t,Type:l,To:a}},d={};ee((e=>({...e,...o})));const s={...S};let c=[...te],m=[];for(let e of c){let t=s[e]?.map((e=>e.CCMTargetFixDetIDPK)).toString();t&&m.push(t)}await ee((e=>(d=e,e)));let p={CCMTargetFixDetIDPK:m?[...new Set(m)].toString():"",CreatedTtm:d.CreatedTtm?d.CreatedTtm.From:"",CreatedTtmType:d.CreatedTtm?d.CreatedTtm.Type:"",CreatedTtmBetween:d.CreatedTtm?d.CreatedTtm.To:"",IsActive:"IsActive"==l?n:null,AnaTime:d.AnaTime?d.AnaTime.From:"",AnaTimeType:d.AnaTime?d.AnaTime.Type:"",AnaTimeBetween:d.AnaTime?d.AnaTime.To:"",FixedTime:d.FixedTime?d.FixedTime.From:"",FixedTimeType:d.FixedTime?d.FixedTime.Type:"",FixedTimeBetween:d.FixedTime?d.FixedTime.To:"",CCMTargetTypeID:S.CCMTargetTypName?.map((e=>e.CCMTargetTypeIDPK)).toString(),CCMTargetFixID:S.CCMTargetFixCode?.map((e=>e.CCMTargetFixIDPK)).toString(),PriorityID:S.PriorityName?.map((e=>e.PriorityIDPK)).toString()};e.searchData(p)}function we(){return i().createElement(T.Z,{frmctrlid:"fld328L1TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,i)=>{Be(e,t,a,o.name,l)},keyboardback:()=>{H(!1),d({idpk:"",name:"",type:"",fieldidpk:""})},title:Fe(o.name),fieldname:o.name,save:e=>{alert(!0)}})}const Ae=(t,a)=>{(0,O.Z)(t,e.formID,a,oe).then((e=>{const t=e.Output.data;ge(t)}))};return i().createElement("div",null,i().createElement(L.Z,{onClose:()=>ce(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:se},i().createElement(b.Z,{id:"customized-dialog-title",onClose:()=>ce(!1)},"Add Favorite"),i().createElement(P.Z,{dividers:!0,style:{minWidth:"500px"}},i().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},i().createElement(w.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:oe,onChange:e=>de(e.target.value),fullWidth:!0})),i().createElement(Z.Z,{style:{color:"#337ab7"},control:i().createElement(A.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:i().createElement(R.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:i().createElement(k.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:me,onChange:e=>pe(e.target.checked)}),label:"Quick"}),i().createElement(Z.Z,{style:{color:"#337ab7"},control:i().createElement(A.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:i().createElement(R.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:i().createElement(k.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:Ce,onChange:e=>ue(e.target.checked)}),label:"Dashboard"})),i().createElement(B.Z,null,i().createElement(m.Z,{onClick:()=>{be("saveFav"),ce(!1)},color:"primary"},"Save"))),_?"Created Ttm"===o.name||o.name.includes("Date")?i().createElement(we,null):i().createElement("div",null,i().createElement("div",{className:"columnHeader displayFlex"},i().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},i().createElement(u.Z,null,i().createElement(y.Z,{xs:6,sm:6,md:6,lg:6},i().createElement("p",{className:"columnHeaderp"},Ee(o.idpk)," (",n.length,"/",W,")")),i().createElement(y.Z,{xs:6,sm:6,md:6,lg:6},i().createElement(p.ZP,{title:Fe("Close"),placement:"top"},i().createElement("div",{className:"FilterItemClose",align:"right"},i().createElement(c.Z,{id:"fld328L1TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{H(!1),d({idpk:"",name:"",type:"",fieldidpk:!1}),q(1)}}))),S[o.name]&&i().createElement("div",{className:"FiltercloseAlign",align:"right"},i().createElement(m.Z,{frmctrlid:"fld328L1TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await z((t=>(e=t,G.log("clear fewItems",e),t))),e[o.name]=[],Se(o.type,o.fieldidpk,"",1)})()}},i().createElement("span",{className:"ColumnApplyTitle"},Fe("Clear All")))))))),i().createElement("div",{className:"FilterParentDiv"},i().createElement("div",{"data-list-scroll-container":"true"},i().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},i().createElement("div",{className:"FilterMaximize"},K?i().createElement(p.ZP,{title:"Maximize",placement:"right"},i().createElement("span",null,i().createElement(x.D7o,{className:"FilterMaximizeIcon",onClick:()=>{V(!1)}}))):i().createElement(p.ZP,{title:"Minimize",placement:"right"},i().createElement("span",null,i().createElement(x.dOw,{className:"FilterMaximizeIcon",onClick:()=>{V(!0)}})))),i().createElement("ul",null,S[o.name]&&S[o.name].map(((e,t)=>i().createElement("div",{key:t,tabIndex:"-1",className:K?"filterSelectedItems":"filterSelectedItemsMaximize"},i().createElement("div",{className:"filterSelectedItemNames"},i().createElement("span",null,e[o.name])),i().createElement("div",{className:"filterSelectedItemClose"},i().createElement("div",{id:"fildacls_3_L2_"+e[o.name],onClick:()=>(async(e,t)=>{q(1);let a=S[o.name].filter((t=>t!=e)),l={};await z((e=>(l=e,e))),l[o.name]=a,z(l),r((t=>[e,...t]))})(e)},i().createElement(c.Z,{className:"filterSelectedItemCloseIcon"})))))))),i().createElement("div",{className:"displayFlex width100 FilterSearch"},i().createElement("div",{className:"FilterSearchInputDiv"},i().createElement(D.Z,{frmctrlid:"fld328L1TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:E,placeholder:Fe("Enter ")+" "+Ee(o.idpk),onChange:e=>{M(e),Se(o.type,o.fieldidpk,e,1,Pe())}})),i().createElement("div",{id:"fld328L1TFCFilterGoForward",className:"FilterSearchBtn",onClick:be},i().createElement(p.ZP,{title:"",placement:"top"},i().createElement(m.Z,{className:"ColumnSearchButton"},i().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),J&&i().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},i().createElement(f.Z,{color:"secondary"})),i().createElement("div",{id:"fld328L1TFCScrollYDefault",className:"height65 scrollYDefault"},n.length>0&&n.map(((e,t)=>i().createElement("div",{id:"filda_3_L2_"+e[o.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await z((e=>(l=e,e)));let i=l[o.name];t[o.name]=i?[...a,...i]:a,l={...l,...t},z(l),r((t=>t.filter((t=>t!=e))))})(e)}},i().createElement(C.Z,{className:"DotIcon"}),i().createElement("span",null,e[o.name])))),n.length+0<W&&n.length>0&&i().createElement("div",{id:"fld328L1TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{q(Y+1),Se(o.type,o.fieldidpk,"",Y+1)}},i().createElement("p",null," more... ")),0===n.length&&i().createElement("div",null,i().createElement("div",{className:"NoDataImage"},i().createElement("img",{src:g.v.NoData,alt:"NoImage"})),i().createElement("div",{className:"NoDataDesc"},i().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):i().createElement("div",null,i().createElement("div",{className:"columnHeader displayFlex"},i().createElement("div",{className:"columnHeaderTitle"},i().createElement(v.Ol$,{className:"columnHeaderIcon"}),i().createElement("p",{className:"columnHeaderp"}," ",Fe("Filter")," ",oe.length>0&&`(${oe})`)),i().createElement("div",{className:"columnHeaderbtn",align:"right"},i().createElement(p.ZP,{title:"Favorite List",placement:"top"},ne?i().createElement(c.Z,{className:"favlisticon",onClick:()=>{re(!1),ge(""),Me()}}):i().createElement(h.Z,{className:"favlisticon",onClick:()=>{re(!0),Ae("select"),Me()}})),Object.keys(S).length>0&&i().createElement(p.ZP,{title:"Save Favorites",placement:"top"},i().createElement(N.Z,{className:"favlisticon",onClick:()=>{ce(!0)}})),i().createElement(p.ZP,{title:"",placement:"top"},i().createElement(m.Z,{className:"ColumnApplyButton",onClick:()=>{Me()},id:"fld328L1TFCColumApplyBttn"},i().createElement("span",{className:"ColumnApplyTitle"},Fe("Clear")))),i().createElement(p.ZP,{title:"",placement:"top"},i().createElement(m.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld328L1TFCColumnCloseButton"},i().createElement("span",{className:"ColumnCloseTitle"},Fe("Close")))))),i().createElement("div",{className:"height65"},i().createElement("div",{id:"fld328L1TFCFilItems",className:"FilterItems"},!ye&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return i().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{H(!0),M(""),r([]),$(0);let t=e.IsForeign?e.FieldName+"PK":"CCMTargetFixDetIDPK";d({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterCCMTargetFixDetID",fieldidpk:t}),Se(e.IsForeign?"Filter"+e.FieldName:"FilterCCMTargetFixDetID",t,"",1,Pe())})(e)}},e.FieldName.includes("Date")?i().createElement(i().Fragment,null,Ee(e.AdminUserGridViewIDPK)," ",X[e.FieldName]&&i().createElement("p",{className:"filterdatevalue"},"(",X[e.FieldName]?.From+" to "+X[e.FieldName]?.To,")")):"IsActive"==e.FieldName?i().createElement(i().Fragment,null,i().createElement("span",null,Ee(e.AdminUserGridViewIDPK)),i().createElement(F.Z,{checked:"1"==le,onChange:t=>{ie(t.target.checked),Be("","",e.FieldName,"",t.target.checked)}})):i().createElement(i().Fragment,null,i().createElement("span",null,Ee(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,S[a]?.length>0&&i().createElement("div",{className:"FilterItemDivSelected"},i().createElement("span",{className:"RoundedDivName"},S[a][0][a]),S[a].length>1&&i().createElement("span",{className:"RoundedDivName"},S[a][1][a]),S[a].length>2&&i().createElement("span",{className:"RoundedDivNumber"},"+"+(S[a].length-2))))));var a})),ye&&ye.map((e=>{let t=e.TFFSearchParams,a=JSON.parse(t);return i().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{Se("FilterCCMTargetFixDetID",a),be("")}},i().createElement(i().Fragment,null,e.TableFilterFavName))}))))))}));var K=a(54180),V=a(43031),_=a(85639),H=a(110),U=a(5109),j=a(88995),Y=a(50743),q=a(61657),W=a(51209),$=a(53854),J=a(51649),Q=a(37106),X=a(5434),ee=a(83817),te=a(39327),ae=a(3212),le=a(93521),ie=(a(79117),a(71168)),ne=a.n(ie),re=a(65107),oe=a(94986),de=a(15999);a(11557),window.clickFilter="";const se=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),m=(0,l.useRef)(null),[C]=((0,l.useRef)(null),(0,n.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[u]=(0,l.useState)("328"),[y,T]=(0,l.useState)(!1),[f,F]=(0,l.useState)(!1),[E,M]=(0,l.useState)(0),[S,h]=(0,l.useState)(0),[N,L]=(0,l.useState)(0),[b,P]=(0,l.useState)(0),[B,w]=(0,l.useState)({current:1,pageSize:100}),[A,R]=(0,l.useState)(""),[k,Z]=(0,l.useState)([]),[O,G]=(0,l.useState)({val:"",column:""}),[ie,se]=(0,l.useState)([]),[ce,me]=(0,l.useState)(!1),[pe,Ce]=(0,l.useState)(""),[ue,ye]=(0,l.useState)(""),[ge,Te]=(0,l.useState)(!1),[De,Ie]=(0,l.useState)([]),[ve,xe]=(0,l.useState)([]),[fe,Fe]=(0,l.useState)([]),[Ee,Me]=(0,l.useState)({children:[{name:"CCMTargetFixDetails",children:[]}]}),[Se,he]=(0,l.useState)(!1),Ne=(0,l.useContext)(e.context?e.context:ke),{cstate:Le,cdispatch:be}=e.ContextApi?e.ContextApi:Ze();let Pe={CCMTargetFixDetIDPK:"",CCMTargetFixDetCode:"",LocTargetBy:"",MaintenanceDuration:"",IsDefault:"",TFDColorSA:"",TFDColorCOT:"",TFDColorNCOT:"",AnaTime:"",FixedTime:"",IsDraft:"",Remarks:"",CCMTargetFixID:"",PriorityID:"",CCMTargetTypeID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractID:"",ContractCode:"",ContractName:"",LocalityID:"",LocalityCode:"",LocalityName:"",PriorityCode:"",PriorityName:"",BuildingID:"",BuildingCode:"",BuildingName:"",LocalityGroupID:"",LocalityGroupCode:"",LocalityGroupName:"",ServiceTypeID:"",ServiceTypCode:"",ServiceTypeName:"",CCMComplaintTypeID:"",CCMComplaintTypeCode:"",CCMComplaintTypeName:"",LocFixedBy:"",LocResponseBy:"",LocAnalysedBy:"",CCMTargetTypCode:"",CCMTargetTypName:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[Be,we]=(0,l.useState)(Pe),[Ae,Re]=(0,l.useState)(Pe),[Oe,Ge]=(0,l.useState)(!1),[ze,Ke]=(0,l.useState)(!0),[Ve,_e]=(0,l.useState)(!1),[He,Ue]=(0,l.useState)(!0),[je,Ye]=(0,l.useState)({CCMTargetTypName:"",LocTargetBy:"",CCMTargetFixDetCode:"",MaintenanceDuration:"",TFDColorSA:"",TFDColorCOT:"",TFDColorNCOT:"",AnaTime:"",FixedTime:"",CCMTargetFixCode:"",PriorityName:""}),[qe,We]=(0,l.useState)(!1),[$e,Je]=(0,l.useState)([]),[Qe,Xe]=(0,l.useState)(0),[et,tt]=(0,l.useState)(0),[at,lt]=(0,l.useState)({current:1,pageSize:10}),[it,nt]=(0,l.useState)([]),[rt,ot]=(0,l.useState)([]),[dt,st]=(0,l.useState)(!1),[ct,mt]=(0,l.useState)(!1),[pt,Ct]=(0,l.useState)(!1),[ut,yt]=(0,l.useState)(""),[gt,Tt]=ne()("328"),[Dt,It]=(0,l.useState)({}),vt=[{columns:it,data:A}];let xt=(0,I.Z)();const ft=e=>xt[e]?xt[e]:e,Ft=e=>Le.language?.[e]?Le.language[e]:e;(0,l.useEffect)((()=>{bt(gt)}),[gt]),(0,l.useEffect)((()=>{Le.token.length>0&&(e.parentId?Nt(B,Pe,"CCMTargetFixDetID"):se([]))}),[e.parentId]),(0,l.useEffect)((()=>{!Se&&e.parentId?Nt(B,pe,"CCMTargetFixDetID"):Se&&Re(pe)}),[pe]),(0,l.useImperativeHandle)(t,(()=>({searchItem:e=>{Et(e)},tableRefresh:()=>{Nt(B,Pe,"CCMTargetFixDetID")},DialogTableProps:e=>{F(e)},HideEntryFields:e=>{Ct(!0===e)}})));const Et=e=>{""==e?Nt(B,Pe,Oe?"DraftCCMTargetFixDetID":"CCMTargetFixDetID",Oe&&"DraftPage"):Lt(e,{current:1,pageSize:100}),ye(e)};function Mt(t){Ne.loading(!0);let a=g.v.Api+"FP328S7/",l={data:{p1:"%%",p2:e.parentId?e.parentId:"0",p3:"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,s.Z)(a,l,Le.token[0]).then((e=>{if(200==e.Output.status.code){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,tt(e.Output.data[0].TotalCount)):a=0,10==t.pageSize?Xe(Math.ceil(a)):20==t.pageSize?Xe(Math.ceil(a/2)):50==t.pageSize?Xe(Math.ceil(a/5)):100==t.pageSize&&Xe(Math.ceil(a/10)),Je(e.Output.data),Ne.loading(!1)}}))}function St(e,t){be({type:"editData",payload:[t]}),be({type:"IsDraft",payload:Oe}),be({type:"ShowDetail",payload:!0}),Ne.Expanded(!0),Ve&&Te(!1)}(0,l.useEffect)((()=>{!1===e.cardview&&Ue(e.cardview),e.Dialogview&&(F(e.Dialogview),Ct(!0))}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&Lt(e.searchsafaritext,{current:B.current,pageSize:B.pageSize})}),[e.searchsafaritext]);const ht=()=>{Ne.EditClose(!0),ce?(document.getElementById("CCMTargetFixDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("CCMTargetFixDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("CCMTargetFixDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",me(!1),He?(f||(document.getElementById("CCMTargetFixDetailscoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixDetailscoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),document.getElementById("CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("CCMTargetFixDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("CCMTargetFixDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("CCMTargetFixDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",me(!0),document.getElementById("CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),Te(!1),window.clickFilter=!ce},Nt=(t,a,l,i,n,r)=>{Ne.loading(!0),"DraftPage"!==i&&Ge(Le.IsDraft);let o=g.v.Api+"FP328S3/",d={data:{p1:n||(a&&a.CCMTargetFixDetIDPK?a.CCMTargetFixDetIDPK:null),p2:a&&a.CCMTargetFixDetCode?a.CCMTargetFixDetCode:null,p3:a&&a.LocTargetBy?a.LocTargetBy:null,p4:a&&a.MaintenanceDuration?a.MaintenanceDuration:null,p5:null,p6:a&&a.TFDColorSA?a.TFDColorSA:null,p7:a&&a.TFDColorCOT?a.TFDColorCOT:null,p8:a&&a.TFDColorNCOT?a.TFDColorNCOT:null,p9:a&&a.AnaTime?a.AnaTime:null,p10:a&&a.FixedTime?a.FixedTime:null,p11:"DraftCCMTargetFixDetID"==l?"1":"0",p12:null,p13:e.parentId?Number(e.parentId):0,p14:a&&a.PriorityID?a.PriorityID:null,p15:a&&a.CCMTargetTypeID?a.CCMTargetTypeID:null,p16:a&&a.IsActive,p17:null,p18:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p19:a&&a.CreatedTtm?a.CreatedTtm:null,p20:a&&a.CreatedTtmType?a.CreatedTtmType:null,p21:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p22:null,p23:a&&a.ContractID?a.ContractID:null,p24:a&&a.ContractCode?a.ContractCode:null,p25:a&&a.ContractName?a.ContractName:null,p26:a&&a.LocalityID?a.LocalityID:null,p27:a&&a.LocalityCode?a.LocalityCode:null,p28:a&&a.LocalityName?a.LocalityName:null,p29:a&&a.PriorityCode?a.PriorityCode:null,p30:a&&a.PriorityName?a.PriorityName:null,p31:a&&a.BuildingID?a.BuildingID:null,p32:a&&a.BuildingCode?a.BuildingCode:null,p33:a&&a.BuildingName?a.BuildingName:null,p34:a&&a.LocalityGroupID?a.LocalityGroupID:null,p35:a&&a.LocalityGroupCode?a.LocalityGroupCode:null,p36:a&&a.LocalityGroupName?a.LocalityGroupName:null,p37:a&&a.ServiceTypeID?a.ServiceTypeID:null,p38:a&&a.ServiceTypCode?a.ServiceTypCode:null,p39:a&&a.ServiceTypeName?a.ServiceTypeName:null,p40:a&&a.CCMComplaintTypeID?a.CCMComplaintTypeID:null,p41:a&&a.CCMComplaintTypeCode?a.CCMComplaintTypeCode:null,p42:a&&a.CCMComplaintTypeName?a.CCMComplaintTypeName:null,p43:a&&a.LocFixedBy?a.LocFixedBy:null,p44:a&&a.LocResponseBy?a.LocResponseBy:null,p45:a&&a.LocAnalysedBy?a.LocAnalysedBy:null,p46:a&&a.CCMTargetTypCode?a.CCMTargetTypCode:null,p47:a&&a.CCMTargetTypName?a.CCMTargetTypName:null,p48:n?1:t.current,p49:t.pageSize,p50:l,p51:null,p52:null,p53:localStorage.getItem("UserGroupID"),p54:localStorage.getItem("userid")}};(0,s.Z)(o,d,Le.token[0]).then((o=>{if(n)(0,ee.a)(o,be,i,r,Ne);else if("200"==o.Output.status.code)if(o.Output.data.length>0){if(o.Output.data){let e=0;o.Output.data.length>0?(e=parseFloat(o.Output.data[0].TotalCount,10)/10,L(o.Output.data[0].TotalCount),P(o.Output.data[0].DraftCnt),be({type:"count",payload:o.Output.data[0].TotalCount}),"DraftPage"==i&&P(o.Output.data[0].TotalCount)):e=0,10==t.pageSize?h(Math.ceil(e)):20==t.pageSize?h(Math.ceil(e/2)):50==t.pageSize?h(Math.ceil(e/5)):100==t.pageSize&&h(Math.ceil(e/10)),se(o.Output.data),Ne.loading(!1)}e.Dialogview||(document.getElementById("divCCMTargetFixDetails-Entry").style.height="auto",document.getElementById("divCCMTargetFixDetails-Entry").style.display="block")}else Ne.loading(!1),"DraftCCMTargetFixDetID"===l?(Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Te(!0),Ge(!1)):(se([]),w({current:1,pageSize:10}),h(0),L(0),be({type:"count",payload:"0"}),Object.values(a).some((e=>e))&&Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else Ne.alert({open:!0,color:"warning",message:[o.Output.status.message]}),Ne.loading(!1)}))};function Lt(t,a){Ne.loading(!0);const l=g.v.Api+"FP328S4/",i={data:{p1:"%"+t+"%",p2:e.parentId?e.parentId:"0",p3:Oe?"1":"0",p4:a.current,p5:a.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,s.Z)(l,i,Le.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let t=0;e.Output.data.length>0?(t=parseFloat(e.Output.data[0].TotalCount,10)/10,L(e.Output.data[0].TotalCount),be({type:"count",payload:e.Output.data[0].TotalCount})):t=0,10==a.pageSize?h(Math.ceil(t)):20==a.pageSize?h(Math.ceil(t/2)):50==a.pageSize?h(Math.ceil(t/5)):100==a.pageSize&&h(Math.ceil(t/10)),se(e.Output.data),Ne.loading(!1)}else se([]),h(0),L(0),be({type:"count",payload:"0"}),Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Ne.loading(!1);else Ne.alert({open:!0,color:"warning",message:[e.Output.status.message]}),Ne.loading(!1)}))}function bt(e){let t=[],a=[],l=[],i=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldName&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let n=localStorage.getItem("Language");i.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[n]]})})),be({type:"language",payload:Object.assign({},...i)}),Ye(a.reduce(((e,t)=>(e[t]="",e)),{})),Ie(e),xe(t),Fe(a),nt(l),ot(a)}const Pt=()=>Se?null:i().createElement("div",null,qe?i().createElement(oe.Z,{data:$e,expanded:e=>!f&&Ne.Expanded(e),edit:(e,t,a)=>{f?Ne.select(e):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:t}),be({type:"ShowDetail",payload:a}))}}):i().createElement(re.Z,{ref:m,frmctrlid:"tblcs_328_L1_",id:"CCMTargetFixDetailsTable",headerdata:ve,tablesearchparams:je,searchvalue:e=>{Ye(e),Ce(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...FilteredObj};It(t),w({current:1,pageSize:10}),Nt({current:1,pageSize:10},t,Oe?"DraftCCMTargetFixDetID":"CCMTargetFixDetID",Oe&&"DraftPage")},bodydata:ie,ondrag:St,bodyitem:fe,visibleitem:ve,isdraft:Oe,IsView:!1,IsSub:e.tableview,tableExp:!1,tableID:u,showMore:!1,accessrights:Le.AccessRights,expanded:e=>!f&&Ne.Expanded(e),edit:(e,t,a)=>{f?Ne.select(e):(Object.keys(e).map(((l,i)=>{l.includes("IDPK")&&Nt(B,null,t?"DraftCCMTargetFixDetID":"CCMTargetFixDetID",t&&"DraftPage",e[l],a)})),Ne.hideAddBtn(!0))},viewtoggle:Ne.viewtoggle,isexpanded:!f||Ve,tf:Ft,action:f?"none":"",ViewComp:(e,t)=>{}}));return(0,l.useEffect)((()=>{_e(Le.ExpandTableValue)}),[Le.ExpandTableValue]),i().createElement("div",null,!pt&&!e.tableview&&i().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"0",padding:"0px 4px 0px 0px"}},i().createElement("div",{id:"fld328L1ECSearchBar",className:"searchbar1"},i().createElement(D.Z,{frmctrlid:"fld328L1TCInputSearch",className:"search_input",type:"text",id:"AdminCountryRegistrygridsearch",placeholder:ft("Search"),value:ue,onChange:e=>{ye(e),Ne.searchItem(e)},style:{width:"300px"}}),i().createElement("div",{className:"search_icon"},ue?i().createElement("div",{id:"fld328L1TCCloseIconCommonSearch",onClick:()=>{ye(""),Ne.searchItem("")}},i().createElement(c.Z,{className:"InputSearchIcon"})):i().createElement("div",{id:"fld328L1TCInputSearchIcon"},i().createElement(j.Z,{className:"InputSearchIcon",onClick:()=>{document.getElementById("CCMTargetFixDetailsgridsearch").focus()}})))),i().createElement("div",null,Le.AccessRights.IsAdd?i().createElement(ae.Z,{className:"SaveBtnCommon",frmctrlid:"fld328L1TCAddBtnIsAdd",onClick:()=>{Ne.hideAddBtn(!0),be({type:"editData",payload:[]}),be({type:"ShowDetail",payload:!1}),be({type:"Add",payload:!0})}}):"")),i().createElement(r.Z,{expanded:ze,onChange:()=>()=>{Ke(Ve)}},e.Dialogview&&i().createElement(Y.Z,null,i().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},i().createElement("div",{className:"displayFlex EntryHeader"},i().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.59-3:08:17 PM-18-7[328]"},`${Ft("328")} (${N})`)),!1===e.cardview?null:i().createElement("div",{className:"displayFlex EntryHeaderBtn"},i().createElement("div",{id:"fld328L1TCSearchBar",className:"searchbar",style:{marginTop:"8px"}},i().createElement(D.Z,{frmctrlid:"fld328L1TCInputSearch",className:"search_input",type:"text",placeholder:ft("Search"),value:ue,onChange:e=>{Et(e)}}),i().createElement("div",{className:"search_icon"},ue?i().createElement("div",{id:"fld328L1TCInputCloseIcon",onClick:()=>{Et("")}},i().createElement(c.Z,{className:"InputSearchIcon"})):i().createElement("div",{id:"fld328L1TCInputSearchIcon"},i().createElement(j.Z,{className:"InputSearchIcon"}))))))),i().createElement(o.Z,{className:"AccDetails"},i().createElement("div",{className:"tableCardL1",style:{height:e.tableview?"auto":"fit-content"}},!e.tableview&&i().createElement("div",{id:"CCMTargetFixDetails-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:i().createElement("div",{className:"tableHeaderItems displayFlex"},!Oe&&i().createElement("div",{frmctrlid:"fld328L1TCFilterDataIsDraft",id:"CCMTargetFixDetailsfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{ht()}},i().createElement(p.ZP,{title:ft("Filter Data"),placement:"top"},i().createElement("span",null,i().createElement(v.Ol$,{className:"tableFilterColumnIcon"}))),i().createElement("span",{className:"displayNone"},ft("Filter Data"))),!f&&!Oe&&!Se&&i().createElement(K.Z,{formctrlidprint:"fld328L1TCExportPrint",formctrlidexport:"fld328L1TCExportTable",formctrlidrefresh:"fld328L1TCExportRefresh",title:Ft("328"),data:k,exportData:vt,Items:rt,columnIndex:it,TableVisibleItem:ve,userGridViewFormID:u,TableTotalCount:N,triggerApi:t=>{((t,l,i,n,r)=>{if(0===N)return Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;Ne.loading(!0);let o=g.v.Api+"FP328S3/",d={data:{p1:t&&t.CCMTargetFixDetIDPK?t.CCMTargetFixDetIDPK:null,p2:t&&t.CCMTargetFixDetCode?t.CCMTargetFixDetCode:null,p3:t&&t.LocTargetBy?t.LocTargetBy:null,p4:t&&t.MaintenanceDuration?t.MaintenanceDuration:null,p5:null,p6:t&&t.TFDColorSA?t.TFDColorSA:null,p7:t&&t.TFDColorCOT?t.TFDColorCOT:null,p8:t&&t.TFDColorNCOT?t.TFDColorNCOT:null,p9:t&&t.AnaTime?t.AnaTime:null,p10:t&&t.FixedTime?t.FixedTime:null,p11:Oe?"1":"0",p12:null,p13:e.parentId?Number(e.parentId):0,p14:t&&t.PriorityID?t.PriorityID:null,p15:t&&t.CCMTargetTypeID?t.CCMTargetTypeID:null,p16:t&&t.IsActive,p17:null,p18:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p19:t&&t.CreatedTtm?t.CreatedTtm:null,p20:t&&t.CreatedTtmType?t.CreatedTtmType:null,p21:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p22:null,p23:t&&t.ContractID?t.ContractID:null,p24:t&&t.ContractCode?t.ContractCode:null,p25:t&&t.ContractName?t.ContractName:null,p26:t&&t.LocalityID?t.LocalityID:null,p27:t&&t.LocalityCode?t.LocalityCode:null,p28:t&&t.LocalityName?t.LocalityName:null,p29:t&&t.PriorityCode?t.PriorityCode:null,p30:t&&t.PriorityName?t.PriorityName:null,p31:t&&t.BuildingID?t.BuildingID:null,p32:t&&t.BuildingCode?t.BuildingCode:null,p33:t&&t.BuildingName?t.BuildingName:null,p34:t&&t.LocalityGroupID?t.LocalityGroupID:null,p35:t&&t.LocalityGroupCode?t.LocalityGroupCode:null,p36:t&&t.LocalityGroupName?t.LocalityGroupName:null,p37:t&&t.ServiceTypeID?t.ServiceTypeID:null,p38:t&&t.ServiceTypCode?t.ServiceTypCode:null,p39:t&&t.ServiceTypeName?t.ServiceTypeName:null,p40:t&&t.CCMComplaintTypeID?t.CCMComplaintTypeID:null,p41:t&&t.CCMComplaintTypeCode?t.CCMComplaintTypeCode:null,p42:t&&t.CCMComplaintTypeName?t.CCMComplaintTypeName:null,p43:t&&t.LocFixedBy?t.LocFixedBy:null,p44:t&&t.LocResponseBy?t.LocResponseBy:null,p45:t&&t.LocAnalysedBy?t.LocAnalysedBy:null,p46:t&&t.CCMTargetTypCode?t.CCMTargetTypCode:null,p47:t&&t.CCMTargetTypName?t.CCMTargetTypName:null,p48:B.current,p49:N,p50:Oe?"DraftCCMTargetFixDetID":"CCMTargetFixDetID",p51:null,p52:null,p53:localStorage.getItem("UserGroupID"),p54:localStorage.getItem("userid")}};Ne.loading(!1),Ne.alert({open:!0,color:"success",message:[`${Ft(328)} - ${r.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,s.Z)(o,d,Le.token[0],r).then((e=>{(0,le.PDF_Excel_Generate)(e,Ne,rt,R,a,r)}))})(pe,O.column,0,0,t)},Refresh:()=>{ye(""),w({current:1,pageSize:100}),m.current.clearItem(),Le.IsDraft?Nt({current:1,pageSize:100},Pe,"DraftCCMTargetFixDetID"):Nt({current:1,pageSize:100},Pe,"CCMTargetFixDetID")},disabledPrint:!Le.AccessRights.IsPrint,disabledExport:!Le.AccessRights.IsExport,ref:a,iconinfo:"displayNone"}),!Oe&&!Se&&!f&&i().createElement("div",{className:"buttoncard",onClick:()=>mt(!ct)},i().createElement("span",null,ct?i().createElement(p.ZP,{disableFocusListener:!0,title:ft("Less"),placement:"top"},i().createElement("span",{id:"fld328L1TCLess"},i().createElement($.ldB,{className:"tableFilterColumnIcon"}))):i().createElement(p.ZP,{disableFocusListener:!0,title:ft("More"),placement:"top"},i().createElement("span",{id:"fld328L1TCMore"},i().createElement($.ilJ,{className:"tableFilterColumnIcon"}))))),ct?i().createElement("div",{className:"EntryHeaderMore"},i().createElement("div",{style:{display:"flex"}},Se||!Ve?null:f||!Le.AccessRights.IsAdd||Oe?"":i().createElement("div",null,i().createElement("div",{frmctrlid:"fld328L1TCFilterDataIsAdd",id:"CCMTargetFixDetailscoldiv",className:"buttoncard",onClick:()=>{Ne.EditClose(!0),ge?(document.getElementById("CCMTargetFixDetailsFilterDiv").style.width="0%",document.getElementById("CCMTargetFixDetailsTabDiv").style.width="100%",document.getElementById("CCMTargetFixDetailsFilterDiv").style.display="none",document.getElementById("CCMTargetFixDetailscoldiv").style.width="fit-content",document.getElementById("CCMTargetFixDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",Te(!1)):(document.getElementById("CCMTargetFixDetailsFilterDiv").style.width="25%",document.getElementById("CCMTargetFixDetailsTabDiv").style.width="75%",document.getElementById("CCMTargetFixDetailsFilterDiv").style.display="block",document.getElementById("CCMTargetFixDetailsfildiv").style.width="fit-content",document.getElementById("CCMTargetFixDetailsfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMTargetFixDetailscoldiv").style.width="fit-content",document.getElementById("CCMTargetFixDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",Te(!0)),me(!1)}},i().createElement(p.ZP,{title:ft("Manage Columns"),placement:"top"},i().createElement("div",null,i().createElement(te.gYA,{className:"tableFilterColumnIcon"}))),i().createElement("span",{className:"displayNone"},ft("Manage Columns")))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!f&&Ve&&!Se&&!Oe&&i().createElement("div",null,i().createElement("div",{id:"CCMTargetFixDetailscoldiv",className:"buttoncard",onClick:()=>{qe?We(!1):(We(!0),Mt({current:1,pageSize:100}))}},i().createElement(p.ZP,{title:ft("TableScrollData"),placement:"top"},i().createElement("div",{id:"fld328L1TCTableScrollData"},i().createElement(de.Z,{className:"tableFilterColumnIcon"}))),i().createElement("span",{className:"displayNone"},ft("Table Scroll Data")))),!Se&&Oe?i().createElement("div",{className:"ListHeader displayFlex",onClick:()=>{Ne.hideAddBtn(!1),Ne.ExpandEntry(),Nt({current:1,pageSize:100},Pe,"CCMTargetFixDetID"),Ge(!1),ye(""),be({type:"IsDraft",payload:!1}),w({current:1,pageSize:10})}},i().createElement(p.ZP,{title:ft("List"),placement:"top"},i().createElement("div",{id:"fld328L1TCList"},i().createElement(J.u1R,{className:"backButtonList"}))),i().createElement("p",{className:"DraftP"},ft("Drafts")," ",N)):!f&&!Se&&Le.AccessRights.IsAdd&&i().createElement("div",null,i().createElement(d.Z,{color:"secondary",className:"badge",max:999,badgeContent:b,showZero:!0},i().createElement("div",{id:"fld328L1TCDraftsIcon",className:"buttoncard",style:{marginLeft:"-10px"},onClick:()=>{b>0?(w({current:1,pageSize:100}),M(0),Ne.clear(),ye(""),be({type:"Add",payload:!1}),Nt({current:1,pageSize:10},Pe,"DraftCCMTargetFixDetID"),Ge(!0),be({type:"IsDraft",payload:!0}),Te(!1),Ue(!0),document.getElementById("CCMTargetFixDetailsFilterDiv").style.width="0%",document.getElementById("CCMTargetFixDetailsTabDiv").style.width="100%",document.getElementById("CCMTargetFixDetailsFilterDiv").style.display="none",w({current:1,pageSize:100}),he(!1)):Ne.alert({open:!0,color:"warning",message:[ft("There is no Record Found")]})}},i().createElement(p.ZP,{title:ft("Drafts"),placement:"top"},i().createElement("div",null,i().createElement(Q.rNm,{className:"DraftIcon"}))),i().createElement("span",{className:"displayNoneDraft",style:{fontSize:"0.815rem",fontWeight:"500",color:"#14181F"}},ft("Drafts"))))))):""),!Oe&&!f&&i().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},Se||Oe?null:i().createElement("div",null,i().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"}},i().createElement("div",{className:"b2",id:"button-11"},i().createElement("div",{className:He?"buttonList":"buttonGrid",id:"fld328L1TCListView",onClick:()=>{Ue(!0),st(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},i().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},i().createElement($.umT,null)),i().createElement("span",null,ft("List"))),i().createElement("div",{className:He||dt?"buttonGrid":"buttonList",id:"fld328L1TCCardView",onClick:()=>{Ue(!1),st(!1)}},i().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},i().createElement(x.aCJ,null)),i().createElement("span",null,ft("Card"))),i().createElement("div",{className:dt?"buttonList":"buttonGrid",id:"fld328L1TCTileView",onClick:()=>{st(!0),Ue(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},i().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},i().createElement(X.f_H,null)),i().createElement("span",null,ft("Tile"))))))),Se?null:qe?e.IsCollapse?i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(q.Z,{style:{color:"#777"},id:"fld328L1TCTableTopPagination",rowsPerPageOptions:[],component:"div",count:Number(et),page:E,onPageChange:(e,t)=>{M(t),Mt({current:t+1,pageSize:at.pageSize}),lt({current:t+1,pageSize:at.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(V.Z,{count:Qe,color:"primary",page:at.current,onChange:(e,t)=>{lt({current:t,pageSize:at.pageSize}),Xe(t),Mt({current:t,pageSize:at.pageSize})}}),i().createElement("div",null,i().createElement(H.Z,{className:"BootstrapInputStyle",value:at.pageSize,frmctrlid:"fld328L1TCSelectPagination",onChange:e=>{lt({current:1,pageSize:e.target.value}),Mt({current:1,pageSize:e.target.value})}},i().createElement(_.Z,{value:10},"10"),i().createElement(_.Z,{value:20},"20"),i().createElement(_.Z,{value:50},"50"),i().createElement(_.Z,{value:100},"100"))),Ve&&i().createElement("p",{className:"per-page"},"/ ",ft("RowperpageOf")," (",et,")")):e.IsCollapse?i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(q.Z,{style:{color:"#777"},id:"fld328L1TCTablePagination",rowsPerPageOptions:[],component:"div",count:Number(N),page:E,onPageChange:(e,t)=>{M(t),Nt({current:t+1,pageSize:B.pageSize},Pe,Oe?"DraftCCMTargetFixDetID":"CCMTargetFixDetID",Oe&&"DraftPage"),w({current:t+1,pageSize:B.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(V.Z,{count:S,siblingCount:0,color:"primary",page:B.current,onChange:(e,t)=>{if(w({current:t,pageSize:B.pageSize}),Oe)Nt({current:t,pageSize:B.pageSize},Be,"DraftCCMTargetFixDetID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";ue.length>0?Lt(ue,{current:t,pageSize:B.pageSize}):Nt({current:t,pageSize:B.pageSize},Be,"CCMTargetFixDetID")}}}),i().createElement("div",null,i().createElement(H.Z,{className:"BootstrapInputStyle",value:B.pageSize,id:"fld328L1TCSelectPaging",onChange:e=>{w({current:1,pageSize:e.target.value}),Oe?Nt({current:1,pageSize:e.target.value},Be,"DraftCCMTargetFixDetID","DraftPage"):ue.length>0?Lt(ue,{current:1,pageSize:e.target.value}):Nt({current:1,pageSize:e.target.value},Be,"CCMTargetFixDetID")}},i().createElement(_.Z,{value:10},"10"),i().createElement(_.Z,{value:20},"20"),i().createElement(_.Z,{value:50},"50"),i().createElement(_.Z,{value:100},"100"))),Ve&&i().createElement("p",{className:"per-page"},"/ ",ft("RowperpageOf")," (",N,") "))),i().createElement("div",{id:"CCMTargetFixDetails-TableBody",className:"displayFlex padding0",style:{height:e.tableview?"auto":"66vh",overflow:"auto"}},i().createElement("div",{id:"CCMTargetFixDetailsFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},ce&&i().createElement(z,{parentId:e.parentId,searchData:e=>{Ce(e||Dt),Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)))},formID:u,data:()=>{},visibleData:()=>{},token:Le.token[0],CloseBtnClk:()=>ht(),userGrid:gt,msg:(e,t)=>Ne.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{tableRefresh()}}),ge&&i().createElement(U.Z,{Refresh:e=>{Nt({current:1,pageSize:100},Pe,"CCMTargetFixDetID")},frmctrlid:"fld328L1TCTableColumnOrder",loading:e=>Ne.loading(e),className:"dragCheckboxDivL1",AltMsg:(e,t)=>Ne.alert({open:!0,color:t,message:[e]}),select:ge,userID:C,userGridViewFormID:u,saved:(e,t)=>{e&&bt(t),Tt(t),be({type:"showTableview",payload:t})},Token:Le.token[0]})),i().createElement("div",{id:"CCMTargetFixDetailsTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:e.tableview?"auto":"66vh"}},He?i().createElement(Pt,null):i().createElement(W.Z,{frmctrlid:"fld328L1TCExpandedCardDual",data:ie,id:"CCMTargetFixDetails",title:"CCMPriorityDetCode",cardTile:!!dt,visibleitem:ve,gridCountmdlg:4,gridCountxssm:6,onDoubleClick:(e,t)=>{f?Ne.select(e):("edit"==t?(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:Oe}),be({type:"ShowDetail",payload:!1}),Ne.Expanded(!0)):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:Oe}),be({type:"ShowDetail",payload:!0}),Ne.Expanded(!0),Ne.viewtoggle()),ce?me(!0):ge?Te(!0):(Te(!1),Te(!1))),Ne.hideAddBtn(!0)}})))))))}));var ce=a(37148),me=a(29800),pe=(a(10966),a(21392),a(26537)),Ce=a(44528),ue=a(99090),ye=a(1695),ge=a(61924),Te=a.n(ge),De=a(40826),Ie=a(55490),ve=a(92371);const xe={EnterKeyValues:{CCMTargetFixDetails:["CCMTargetTypName","LocTargetBy","CCMTargetFixDetCode","MaintenanceDuration","TFDColorSA","TFDColorCOT","TFDColorNCOT","AnaTime","FixedTime","CCMTargetFixCode","PriorityName"]},Label:{CCMTargetFixDetails:{CCMTargetTypeID:["CCMTargetTypCode","CCMTargetTypName"],LocTargetBy:["CCMPriorityDetCode"],CCMTargetFixDetCode:["CCMPriorityDetCode"],MaintenanceDuration:["CCMPriorityDetCode"],TFDColorSA:["CCMPriorityDetCode"],TFDColorCOT:["CCMPriorityDetCode"],TFDColorNCOT:["CCMPriorityDetCode"],AnaTime:["CCMPriorityDetCode"],FixedTime:["CCMPriorityDetCode"],CCMTargetFixID:["CCMPriorityDetCode"],PriorityID:["CCMPriorityDetCode"]}},LabelHeader:{CCMTargetFixDetails:{CCMTargetTypeID:["Target Type Code","Target Type Name"],LocTargetBy:["CCMPriorityDetCode"],CCMTargetFixDetCode:["CCMPriorityDetCode"],MaintenanceDuration:["CCMPriorityDetCode"],TFDColorSA:["CCMPriorityDetCode"],TFDColorCOT:["CCMPriorityDetCode"],TFDColorNCOT:["CCMPriorityDetCode"],AnaTime:["CCMPriorityDetCode"],FixedTime:["CCMPriorityDetCode"],CCMTargetFixID:["CCMPriorityDetCode"],PriorityID:["CCMPriorityDetCode"]}},Property:{CCMTargetFixDetails:{CCMTargetTypeID:{id:"fld328_17256",clearID:"CCMTargetFixDetailsCCMTargetTypNameClear",type:"select",labelID:"CCMTargetTypeIDPK",labelname:"Resolution Type",fielddisplayname:"CCMTargetTypName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},LocTargetBy:{id:"fld328_17244",labelID:"LocTargetBy",maxLength:"20",labelname:"Resolution Time",frmctrlid:"fld328_17244",frmctrlidname:"LocTargetBy",type:"text",mandatory:!1,masked:!0,masktype:"Days",disabled:!1,autogen:!1},CCMTargetFixDetCode:{id:"fld328_17243",labelID:"CCMTargetFixDetCode",maxLength:"50",labelname:"CCMTargetFixDetCode",frmctrlid:"fld328_17243",frmctrlidname:"CCMTargetFixDetCode",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},MaintenanceDuration:{id:"fld328_17245",labelID:"MaintenanceDuration",maxLength:"",labelname:"MaintenanceDuration",frmctrlid:"fld328_17245",frmctrlidname:"MaintenanceDuration",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},TFDColorSA:{id:"fld328_17247",labelID:"TFDColorSA",maxLength:"-1",labelname:"TFDColorSA",frmctrlid:"fld328_17247",frmctrlidname:"TFDColorSA",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},TFDColorCOT:{id:"fld328_17248",labelID:"TFDColorCOT",maxLength:"-1",labelname:"TFDColorCOT",frmctrlid:"fld328_17248",frmctrlidname:"TFDColorCOT",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},TFDColorNCOT:{id:"fld328_17249",labelID:"TFDColorNCOT",maxLength:"-1",labelname:"TFDColorNCOT",frmctrlid:"fld328_17249",frmctrlidname:"TFDColorNCOT",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},AnaTime:{id:"fld328_17250",labelID:"AnaTime",maxLength:"",labelname:"AnaTime",frmctrlid:"fld328_17250",frmctrlidname:"AnaTime",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},FixedTime:{id:"fld328_17251",labelID:"FixedTime",maxLength:"",labelname:"FixedTime",frmctrlid:"fld328_17251",frmctrlidname:"FixedTime",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTargetFixID:{id:"fld328_17254",clearID:"CCMTargetFixDetailsCCMTargetFixCodeClear",type:"select",labelID:"CCMTargetFixIDPK",labelname:"CCMTargetFixID",fielddisplayname:"CCMTargetFixCode",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1},PriorityID:{id:"fld328_17255",clearID:"CCMTargetFixDetailsPriorityNameClear",type:"select",labelID:"PriorityIDPK",labelname:"PriorityID",fielddisplayname:"PriorityName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1}}},SubForms:{},POPLabel:{CCMTargetFixDetails:{CCMTargetTypeID:["CCMTargetTypName","IsActive","IsDraft","CCMTargetTypCode","CreatedTtm"],CCMTargetFixID:["ContractName","LocalityName","BuildingName","ServiceTypeName","PriorityName","CCMComplaintTypeName","IsActive","CreatedTtm","UpdatedTtm"],PriorityID:["PriorityCode","PriorityName","TargetMins","MaintenanceMins"]}}};var fe=a(6562),Fe=a(45155),Ee=a(79352),Me=(a(49174),a(38773)),Se=(a(19089),a(16233)),he=a.n(Se);a(82729),a(75355),a(11107);const Ne={CCMTargetFixDetIDPK:"",CCMTargetFixDetCode:"",LocTargetBy:"",MaintenanceDuration:"",IsDefault:!1,TFDColorSA:"",TFDColorCOT:"",TFDColorNCOT:"",AnaTime:"",FixedTime:"",IsDraft:!1,Remarks:"",CCMTargetFixID:null,PriorityID:null,CCMTargetTypeID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractID:null,ContractCode:"",ContractName:"",LocalityID:null,LocalityCode:"",LocalityName:"",PriorityCode:"",PriorityName:"",BuildingID:null,BuildingCode:"",BuildingName:"",LocalityGroupID:null,LocalityGroupCode:"",LocalityGroupName:"",ServiceTypeID:null,ServiceTypCode:"",ServiceTypeName:"",CCMComplaintTypeID:null,CCMComplaintTypeCode:"",CCMComplaintTypeName:"",LocFixedBy:"",LocResponseBy:"",LocAnalysedBy:"",CCMTargetTypCode:"",CCMTargetTypName:"",Type:"CCMTargetFixDetID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid"),LocTargetByDays:""},Le=(0,l.forwardRef)(((e,t)=>{const a=(0,n.useSelector)((e=>e.form)),[d,c]=(0,l.useState)(!1),[m,p]=(0,l.useState)(!0),[C,T]=(0,l.useState)(!1),[D,v]=(0,l.useState)(!1),[x,f]=(0,l.useState)(""),[E,h]=(0,l.useState)(!1),[N,L]=(0,l.useState)([]),[b,P]=(0,l.useState)(null),[B,w]=(0,l.useReducer)(ve.Z,Ne),[A,R]=(0,l.useState)(!1),[k,O]=(0,l.useState)([]),[G,z]=(0,l.useState)(!1),K=(0,l.useContext)(e.context?e.context:ke),{cstate:V,cdispatch:_}=e.ContextApi?e.ContextApi:Ze(),[H,U]=(0,l.useState)(0),[j,q]=(0,l.useState)(""),W=(0,l.useRef)(null),[$,J]=he()("328"),[Q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)(!0),[ae,le]=(0,l.useState)(!0),[ie,ne]=(0,l.useState)(!0),[re,oe]=(0,l.useState)(!0),[de,se]=(0,l.useState)(!0),[me,ge]=(0,l.useState)(""),[Se,Le]=(0,l.useState)(""),[be,Pe]=(0,l.useState)(!1);let Be=(0,I.Z)();const[we,Ae]=(0,l.useState)({}),Re=e=>Be[e]?Be[e]:e,Oe=t=>V.language?.[t]?V.language[t]:e.createEasy?we?.[t]:t;(0,l.useEffect)((()=>{V.PrimaryId&&U(Number(V.PrimaryId))}),[V.PrimaryId]),(0,l.useEffect)((()=>{_e()}),[]),(0,l.useEffect)((()=>{_e()}),[e.parentId]),(0,l.useEffect)((()=>{V.editData.length>0?(X(!1),Ve(V.editData[0],""),T(!0)):V.Add&&(_e(),X(!1),T(!0))}),[V.editData]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),Ae(Object.assign({},...t))}($)}),[$]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{_e()},CreateEasyProps:(e=!0,t)=>{J(!0),t?(Xe(t),T(e)):(_e(),T(e))},AddOpen:e=>{_e(),T(!0)}})));const Ge=e=>{if(e){let a=(t=e)?t.split("-").reverse().join("-"):null;return"Invalid Date"!=new Date(a)?(0,De.format)(new Date(a),"yyyy-MM-dd"):e}return null;var t},ze=e=>{if(!e)return e;if(e){let t=e.split(" "),a=t[0].split("-").reverse().join("-");return 2==t.length?a+" "+t[1]:a}},Ke=e=>{let t=60*Number(e),a=parseInt(t,10),l=Math.floor(a/86400);a-=3600*l*24;let i=Math.floor(a/3600);a-=3600*i;let n=Math.floor(a/60);a-=60*n;let r=l.toString().length;return 2===r?l="0"+l:1===r&&(l="00"+l),1===i.toString().length&&(i="0"+i),1===n.toString().length&&(n="0"+n),l.toString()+i.toString()+n.toString()},Ve=(t,a)=>{Object.keys(t).forEach((function(e){0==t[e]&&(t[e]=null)})),v(t.IsDraft),"SetDefaultCCMTargetFixDetID"==a?q(t.CCMTargetFixDetIDPK):(U(e.primid?Number(e.primid):t.CCMTargetFixDetIDPK?t.CCMTargetFixDetIDPK:0),_({type:"PrimaryId",payload:t.CCMTargetFixDetIDPK})),w({type:"number",name:"CCMTargetTypeID",number:t.CCMTargetTypeID?Number(t.CCMTargetTypeID):0}),w({type:"text",name:"CCMTargetTypName",value:t.CCMTargetTypName}),w({type:"text",name:"LocTargetByDays",value:Ke(t.LocTargetBy)}),w({type:"text",name:"LocTargetBy",value:t.LocTargetBy}),w({type:"text",name:"CCMTargetFixDetCode",value:t.CCMTargetFixDetCode?t.CCMTargetFixDetCode:""}),w({type:"number",name:"MaintenanceDuration",number:t.MaintenanceDuration}),w({type:"boolean",name:"IsDefault",boolean:t.IsDefault}),w({type:"text",name:"TFDColorSA",value:t.TFDColorSA?t.TFDColorSA:""}),w({type:"text",name:"TFDColorCOT",value:t.TFDColorCOT?t.TFDColorCOT:""}),w({type:"text",name:"TFDColorNCOT",value:t.TFDColorNCOT?t.TFDColorNCOT:""}),w({type:"text",name:"AnaTime",value:t.AnaTime?ze(t.AnaTime):null}),w({type:"text",name:"FixedTime",value:t.FixedTime?ze(t.FixedTime):null}),w({type:"number",name:"CCMTargetFixID",number:t.CCMTargetFixID?Number(t.CCMTargetFixID):0}),w({type:"text",name:"CCMTargetFixCode",value:t.CCMTargetFixCode}),w({type:"number",name:"PriorityID",number:t.PriorityID?Number(t.PriorityID):0}),w({type:"text",name:"PriorityName",value:t.PriorityName}),t.IsDraft?p(!0):p(!("1"!=t.IsActive&&!t.IsActive))},_e=()=>{L([]),U(0),q(""),e.createEasy||K.resetImg(),_({type:"PrimaryId",payload:""}),w({type:"text",name:"CCMTargetTypeID",value:null}),w({type:"text",name:"CCMTargetTypName",value:""}),document.getElementById("CCMTargetFixDetailsCCMTargetTypNameClear")&&document.getElementById("CCMTargetFixDetailsCCMTargetTypNameClear").click(),w({type:"text",name:"LocTargetByDays",value:""}),w({type:"text",name:"LocTargetBy",value:""}),w({type:"text",name:"CCMTargetFixDetCode",value:""}),w({type:"number",name:"MaintenanceDuration",number:0}),w({type:"boolean",name:"IsDefault",boolean:!1}),w({type:"text",name:"TFDColorSA",value:""}),w({type:"text",name:"TFDColorCOT",value:""}),w({type:"text",name:"TFDColorNCOT",value:""}),w({type:"text",name:"AnaTime",value:null}),w({type:"text",name:"FixedTime",value:null}),w({type:"text",name:"CCMTargetFixID",value:null}),w({type:"text",name:"CCMTargetFixCode",value:""}),document.getElementById("CCMTargetFixDetailsCCMTargetFixCodeClear")&&document.getElementById("CCMTargetFixDetailsCCMTargetFixCodeClear").click(),w({type:"text",name:"PriorityID",value:null}),w({type:"text",name:"PriorityName",value:""}),document.getElementById("CCMTargetFixDetailsPriorityNameClear")&&document.getElementById("CCMTargetFixDetailsPriorityNameClear").click(),p(!0),f(""),te(!0),le(!0),ne(!0),oe(!0),se(!0)};function He(t,a,l,i){if(!(V.count>0))return K.alert({open:!0,color:"warning",message:[Re("Please save atleast one record")]}),!1;if(!((()=>{const e={...B};return["IsActive","IsDefault","UserGroupKey","UserAccessKey","DeleStat","Type"].map((t=>{delete e[t]})),Object.keys(e).filter((t=>e[t]))})().length>0))return K.alert({open:!0,color:"warning",message:[Re("Please enter the primary fields")]}),!1;{te(!0),le(!0),ne(!0),oe(!0),se(!0),K.loading(!0),K.ConfirmAlert(null),_({type:"IsDraft",payload:!1});const a=g.v.Api+"FP328S1/",l={data:[{p1:"SetDefaultCCMTargetFixDetID"==i?"NORECORDS"!=j&&j?j:0:H,p2:et(B.CCMTargetFixDetCode),p3:B.LocTargetBy?Number(B.LocTargetBy):0,p4:B.MaintenanceDuration?Number(B.MaintenanceDuration):0,p5:B.IsDefault,p6:et(B.TFDColorSA),p7:et(B.TFDColorCOT),p8:et(B.TFDColorNCOT),p9:B.AnaTime?Ge(B.AnaTime):null,p10:B.FixedTime?Ge(B.FixedTime):null,p11:!0,p12:"SetDefaultCCMTargetFixDetID"==i?"SetDefault":null,p13:e.parentId?Number(e.parentId):B.CCMTargetFixID?B.CCMTargetFixID:0,p14:B.PriorityID?B.PriorityID:0,p15:B.CCMTargetTypeID?B.CCMTargetTypeID:0,p16:!1,p17:"SetDefaultCCMTargetFixDetID"==i,p18:localStorage.getItem("userid"),p19:M()().format("YYYY-MM-DD hh:mm:ss"),p20:localStorage.getItem("userid"),p21:M()().format("YYYY-MM-DD hh:mm:ss")}]};(0,pe.Z)(0).then((i=>{(0,S.Z)(a,l,i).then((a=>{const l=a[0].status;200==l.code?(t?K.alert({open:!0,color:"warning",message:[Re("Deleted Successfully")]}):K.alert({open:!0,color:"success",message:[Re("Saved to Draft")]}),K.loading(!1),K.attachmentSave(a[0].Data.IDPK),_e(),K.RefreshTable(),e.clrImgstate(!0)):(K.alert({open:!0,color:"warning",message:[l.message]}),K.loading(!1))}))}))}}function Ue(e){return CreateEasy(e,V,_,K,W),!1}function je(e,a){return AdvanceSearch(e,a,ke,Ze(),We,t),!1}const Ye=(t,a,l,i,n,r)=>{const o=g.v.Api+"FP328S3/",d={data:{p1:null,p2:null,p3:null,p4:null,p5:null,p6:a?"%"+a+"%":null,p7:a?"%"+a+"%":null,p8:a?"%"+a+"%":null,p9:a?"%"+a+"%":null,p10:a?"%"+a+"%":null,p11:null,p12:null,p13:e.parentId?Number(e.parentId):0,p14:"0"==B.PriorityID?null:B.PriorityID,p15:"0"==B.CCMTargetTypeID?null:B.CCMTargetTypeID,p16:e.Dialogview?"1":null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:"0"==B.ContractID?null:B.ContractID,p24:a?"%"+a+"%":null,p25:a?"%"+a+"%":null,p26:"0"==B.LocalityID?null:B.LocalityID,p27:a?"%"+a+"%":null,p28:a?"%"+a+"%":null,p29:a?"%"+a+"%":null,p30:a?"%"+a+"%":null,p31:"0"==B.BuildingID?null:B.BuildingID,p32:a?"%"+a+"%":null,p33:a?"%"+a+"%":null,p34:"0"==B.LocalityGroupID?null:B.LocalityGroupID,p35:a?"%"+a+"%":null,p36:a?"%"+a+"%":null,p37:"0"==B.ServiceTypeID?null:B.ServiceTypeID,p38:a?"%"+a+"%":null,p39:a?"%"+a+"%":null,p40:"0"==B.CCMComplaintTypeID?null:B.CCMComplaintTypeID,p41:a?"%"+a+"%":null,p42:a?"%"+a+"%":null,p43:a?"%"+a+"%":null,p44:a?"%"+a+"%":null,p45:a?"%"+a+"%":null,p46:a?"%"+a+"%":null,p47:a?"%"+a+"%":null,p48:t,p49:10,p50:l,p51:null,p52:null,p53:localStorage.getItem("UserGroupID"),p54:localStorage.getItem("userid")}},c=Object.keys(d.data).slice(0,Object.keys(d.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(d.data).length-8?d.data[t]:null,e)),{});R(!0);const m={data:c};return(0,s.Z)(o,"ClearAll"==l?m:d,"SetDefaultCCMTargetFixDetID"==l&&i?i:V.token[0]).then((e=>{const a=e.Output.status.code,i=e.Output.data;if("200"==a){const e=i.length;if(n)return 1==i.length?i[0]:{};O(1==t?e>0?i:[]:k.concat(i)),"SetDefaultCCMTargetFixDetID"==l&&(e>0?Ve(i[0],"SetDefaultCCMTargetFixDetID"):q("NORECORDS")),R(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),R(!1)}))},qe=(t,l,i)=>{const n=g.v.Api+"FP328S3/",r={data:{p1:null,p2:"CCMTargetFixDetCode"==i&&l?"%"+l+"%":null,p3:"LocTargetBy"==i&&l?"%"+l+"%":null,p4:"MaintenanceDuration"==i&&l?"%"+l+"%":null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:a.CCMTargetFixRegistryCCMTargetFixID?a.CCMTargetFixRegistryCCMTargetFixID:"0",p14:null,p15:null,p16:e.Dialogview?"1":null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:t,p49:10,p50:"CCMTargetFixDetID",p51:null,p52:null,p53:localStorage.getItem("UserGroupID"),p54:localStorage.getItem("userid")}},o={data:Object.keys(r.data).slice(0,Object.keys(r.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(r.data).length-8?r.data[t]:null,e)),{})};R(!0),(0,s.Z)(n,"ClearAll"==i?o:r,V.token[0]).then((e=>{const a=e.Output.status.code,l=e.Output.data;if("200"==a){const e=l.length;1==t?("CCMTargetFixDetCode"==i&&te(e>0),"MaintenanceDuration"==i&&le(e>0),"TFDColorSA"==i&&ne(e>0),"TFDColorCOT"==i&&oe(e>0),"TFDColorNCOT"==i&&se(e>0),O(l)):("CCMTargetFixDetCode"==i&&te(!0),"MaintenanceDuration"==i&&le(!0),"TFDColorSA"==i&&ne(!0),"TFDColorCOT"==i&&oe(!0),"TFDColorNCOT"==i&&se(!0),O(k.concat(l))),R(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),R(!1)}))},We=(0,l.useCallback)((async(e,t,a)=>{"text"==a?w({type:a,name:t,value:e}):"number"==a?w({type:a,name:t,number:Number(e)}):"boolean"==a?w({type:a,name:t,boolean:e}):"date"==a?w({type:"text",name:t,value:e}):"select"==a&&"CCMTargetTypeID"==t&&(w({type:"text",name:"CCMTargetTypeID",value:e.CCMTargetTypeIDPK?e.CCMTargetTypeIDPK:null}),w({type:"text",name:"CCMTargetTypName",value:e.CCMTargetTypName?e.CCMTargetTypName:null}))}),[B]);function $e(e){if("CCMTargetTypeID"==e){if(!B.CCMTargetTypeID)return!1;w({type:"text",name:"CCMTargetTypeID",value:null}),w({type:"text",name:"CCMTargetTypName",value:""}),document.getElementById("CCMTargetFixDetailsCCMTargetTypNameClear")&&document.getElementById("CCMTargetFixDetailsCCMTargetTypNameClear").click()}else if("CCMTargetFixID"==e){if(!B.CCMTargetFixID)return!1}else if("PriorityID"==e&&!B.PriorityID)return!1}function Je(e){if("CCMTargetTypeID"==e){if(!B.CCMTargetTypeID)return!1;w({type:"text",name:"CCMTargetTypeID",value:null})}else if("CCMTargetFixID"==e){if(!B.CCMTargetFixID)return!1}else if("PriorityID"==e&&!B.PriorityID)return!1}const Qe=e=>{K.ConfirmAlert(i().createElement(Te(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Xe(e),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Re("Yes"),cancelBtnText:Re("No"),showCancel:!0},Re("Do you want to update this record?")))};function Xe(e){K.ConfirmAlert(null),v(e.IsDraft),U(Number(e.CCMTargetFixDetIDPK)?Number(e.CCMTargetFixDetIDPK):0),w({type:"number",name:"CCMTargetTypeID",number:e.CCMTargetTypeID?Number(e.CCMTargetTypeID):0}),w({type:"text",name:"CCMTargetTypName",value:e.CCMTargetTypName?e.CCMTargetTypName:""}),w({type:"text",name:"LocTargetBy",value:e.LocTargetBy?e.LocTargetBy:""}),w({type:"text",name:"CCMTargetFixDetCode",value:e.CCMTargetFixDetCode?e.CCMTargetFixDetCode:""}),w({type:"text",name:"MaintenanceDuration",value:e.MaintenanceDuration?e.MaintenanceDuration:""}),w({type:"text",name:"TFDColorSA",value:e.TFDColorSA?e.TFDColorSA:""}),w({type:"text",name:"TFDColorCOT",value:e.TFDColorCOT?e.TFDColorCOT:""}),w({type:"text",name:"TFDColorNCOT",value:e.TFDColorNCOT?e.TFDColorNCOT:""}),w({type:"text",name:"AnaTime",value:e.AnaTime?ze(e.AnaTime):null}),w({type:"text",name:"FixedTime",value:e.FixedTime?ze(e.FixedTime):null}),w({type:"number",name:"CCMTargetFixID",number:e.CCMTargetFixID?Number(e.CCMTargetFixID):0}),w({type:"text",name:"CCMTargetFixCode",value:e.CCMTargetFixCode?e.CCMTargetFixCode:""}),w({type:"number",name:"PriorityID",number:e.PriorityID?Number(e.PriorityID):0}),w({type:"text",name:"PriorityName",value:e.PriorityName?e.PriorityName:""})}const et=e=>"string"==typeof e?e.trim():e;return i().createElement("div",null,i().createElement(r.Z,{expanded:C,onChange:e=>{}},i().createElement(Y.Z,null,i().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},C&&i().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"6px",padding:"0px 4px 0px 0px"}},i().createElement("div",{className:"HeadTxt",title:"10.0.0.59-3:08:17 PM-18-7[328]"}," ",Re("Add "),Oe("328")),i().createElement("div",{className:"displayFlex EntryHeaderBtn"},V.AccessRights.IsDelete&&i().createElement("div",{className:"GridAlign"},i().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},i().createElement(fe.Z,{row:!0},i().createElement(Z.Z,{labelPlacement:"bottom",id:"fld328L1ECEntryCheckbox",control:i().createElement(F.Z,{checked:"1"==m,onChange:e=>p(e.target.checked)}),label:Re(1==m?"Active":"In Active")})))),!e.createEasy&&i().createElement("div",{className:"GridAlign",onClick:()=>{K.AttachExpand(!0)},id:"fld328L1ECIconButton"},i().createElement("div",{className:"Entry-Checkbox"},i().createElement("div",{disableRipple:!0,disabled:!1},i().createElement(Fe.Ypb,{className:"Iconstyles"}))),i().createElement("div",{className:"GridLabel"},i().createElement("p",null,Re("Attach")))),!H&&i().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{_e()},id:"fld328L1ECClearBtn"},i().createElement("div",{className:"Entry-Checkbox"},i().createElement(Fe.pYJ,{className:"Iconstyles"})),i().createElement("div",{className:"GridLabel"},i().createElement("p",null,Re("Reset")))),"1"===D&&H&&i().createElement(ue.Z,{frmctrlid:"fld328L1ECClearBtnIsDraft",disabled:!1,name:"Delete",onClick:()=>{He("draftdel")}}),H&&"1"!==D||e.createEasy?null:V.AccessRights.IsAdd&&i().createElement("div",{className:"GridAlign",onClick:()=>{He()},frmctrlid:"fld328L1ECDraftBtn"},i().createElement("div",{className:"Entry-Checkbox"},i().createElement(Ee.IcR,{className:"Iconstyles"})),i().createElement("div",{className:"GridLabel"},i().createElement("p",null,Re("Draft")))),V.AccessRights.IsAdd||V.AccessRights.IsEdit?i().createElement(ye.Z,{frmctrlid:"fld328L1ECSaveBtnIsAdd",name:Re(H?"Update":"Save"),disabled:!1,onClick:()=>{B.CCMTargetTypeID&&0!=B.CCMTargetTypeID?e.parentId&&0!=e.parentId?(t=>{K.loading(!0),K.ConfirmAlert(null);const a=g.v.Api+"FP328S2/",l={data:[{p1:"SetDefaultCCMTargetFixDetID"==t?"NORECORDS"!=j&&j?j:0:H,p2:et(B.CCMTargetFixDetCode),p3:B.LocTargetBy?Number(B.LocTargetBy):0,p4:B.MaintenanceDuration?Number(B.MaintenanceDuration):0,p5:B.IsDefault,p6:et(B.TFDColorSA),p7:et(B.TFDColorCOT),p8:et(B.TFDColorNCOT),p9:B.AnaTime?Ge(B.AnaTime):null,p10:B.FixedTime?Ge(B.FixedTime):null,p11:!1,p12:"SetDefaultCCMTargetFixDetID"==t?"SetDefault":null,p13:e.parentId?Number(e.parentId):B.CCMTargetFixID?B.CCMTargetFixID:0,p14:B.PriorityID?B.PriorityID:0,p15:B.CCMTargetTypeID?B.CCMTargetTypeID:0,p16:m,p17:"SetDefaultCCMTargetFixDetID"==t,p18:localStorage.getItem("userid"),p19:M()().format("YYYY-MM-DD hh:mm:ss"),p20:localStorage.getItem("userid"),p21:M()().format("YYYY-MM-DD hh:mm:ss")}]};(0,pe.Z)(0).then((t=>{(0,s.Z)(a,l,t).then((t=>{const a=t.Output[0].status;let l=t.Output[0].Data,i=new Array,n=new Array;"200"===a.code?(l.map((e=>{e&&(i.push(e.IsAlert),n.push(e.AlertMessage),e.AlertMessage)})),i.some((e=>"1"==e))?(K.alert({open:!0,color:"warning",message:n}),K.loading(!1)):(t=>{te(!0),le(!0),ne(!0),oe(!0),se(!0),K.loading(!0),K.ConfirmAlert(null),_({type:"IsDraft",payload:!1});const a=g.v.Api+"FP328S1/",l={data:[{p1:H,p2:et(B.CCMTargetFixDetCode),p3:B.LocTargetBy?Number(B.LocTargetBy):0,p4:B.MaintenanceDuration?Number(B.MaintenanceDuration):0,p5:B.IsDefault,p6:et(B.TFDColorSA),p7:et(B.TFDColorCOT),p8:et(B.TFDColorNCOT),p9:B.AnaTime?Ge(B.AnaTime):null,p10:B.FixedTime?Ge(B.FixedTime):null,p11:!1,p12:null,p13:e.parentId?Number(e.parentId):B.CCMTargetFixID?B.CCMTargetFixID:0,p14:B.PriorityID?B.PriorityID:0,p15:B.CCMTargetTypeID?B.CCMTargetTypeID:0,p16:m,p17:!1,p18:localStorage.getItem("userid"),p19:M()().format("YYYY-MM-DD hh:mm:ss"),p20:localStorage.getItem("userid"),p21:M()().format("YYYY-MM-DD hh:mm:ss")}]};(0,pe.Z)(0).then((t=>{(0,S.Z)(a,l,t).then((t=>{const a=t[0].status;200==a.code?(K.alert({open:!0,color:"success",message:[a.message]}),document.getElementById("overlayimgAttCCMTargetFixDetails"),K.loading(!1),_({type:"PrimaryId",payload:t[0].Data.IDPK}),e.createEasy||(K.RefreshTable(),K.attachmentSave(t[0].Data.IDPK)),_e(),V.AccessRights.IsApproval&&K.Approval(!0),document.getElementById("overlayimgAttCCMTargetFixDetails")&&(document.getElementById("overlayimgAttCCMTargetFixDetails").style.width="0%",document.getElementById("overlayimgAttCCMTargetFixDetails").style.display="none",document.getElementById("divCCMTargetFixDetails-Entry").style.width="100%"),e.createEasy||(document.getElementById("CCMTargetFixDetails-MainTable").style.display="block")):(K.alert({open:!0,color:"warning",message:[a.message]}),K.loading(!1)),T(!0)}))}))})()):(K.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),K.loading(!1))}))}))})(undefined):K.alert({open:!0,color:"warning",message:[Re("Please select the ")+" "+Oe("CCMTargetFixID")]}):K.alert({open:!0,color:"warning",message:[Re("Please select the ")+" "+Oe("CCMTargetTypeID")]})}}):null,!e.createEasy&&i().createElement(ce.Z,{frmctrlid:"fld328L1ECCloseBtn",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{_e(),T(!1),K.EditClose(!0),K.hideAddBtn(!1),_({type:"Add",payload:!1})}}))))),i().createElement(o.Z,null,i().createElement("div",{id:"CCMTargetFixDetails-Main",className:"width100 displayFlex componentMainDiv cardDiv"},i().createElement("div",{id:"CCMTargetFixDetails-Detail",className:"detailCard detailDiv"},i().createElement("div",{id:"CCMTargetFixDetails-MainBody",className:"padding paddingLeft "},i().createElement("div",null,i().createElement(u.Z,{spacing:2},i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(Ie.Z,{json:xe,id:B.CCMTargetTypeID,"data-testid":B.CCMTargetTypeID,value:B.CCMTargetTypName,SPName:"CCMTargetFixDetails",FieldName:"CCMTargetTypeID",tfLabel:Oe("CCMTargetTypeID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>We(e,"CCMTargetTypeID","select"),onChange:(e,t)=>{Ye(e,t,"CCMTargetTypeIDPK")},KeyBack:e=>{Je("CCMTargetTypeID")},fieldorder:"1",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,openSlide:()=>{Ue("330")},Tabledialog:()=>je("330","CCMTargetTypeID"),loading:A,clear:e=>{e&&$e("CCMTargetTypeID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(Ce.Z,{json:xe,"data-testid":B.LocTargetBy,SPName:"CCMTargetFixDetails",FieldName:"LocTargetBy",tfLabel:Oe("LocTargetBy"),frmctrlid:"fld328_17244",fieldorder:"2",onChange:e=>{w({type:"text",name:"LocTargetBy",value:e.Days}),w({type:"text",name:"LocTargetByDays",value:e.val})},clear:e=>{e&&(w({type:"text",name:"LocTargetBy",value:""}),w({type:"text",name:"LocTargetByDays",value:""}))},placeholder:"DDD:MM:YY",value:B.LocTargetByDays})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{"data-testid":B.CCMTargetFixDetCode,json:xe,SPName:"CCMTargetFixDetails",FieldName:"CCMTargetFixDetCode",tfLabel:Oe("CCMTargetFixDetCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Qe(t),onClick:()=>{ee&&qe(1,"","ClearAll"),te(!0)},frmctrlid:"fld328_17243",frmctrlidName:"CCMTargetFixDetCode",fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,onChange:(e,t)=>{ee&&qe(e,t,"CCMTargetFixDetCode"),We(t,"CCMTargetFixDetCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||te(!0)},showList:ee,SideEntryView:!1,KeyBack:e=>{},value:B.CCMTargetFixDetCode,loading:A,clear:e=>{e&&(w({type:"text",name:"CCMTargetFixDetCode",value:""}),te(!0))}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{"data-testid":B.MaintenanceDuration,json:xe,SPName:"CCMTargetFixDetails",FieldName:"MaintenanceDuration",tfLabel:Oe("MaintenanceDuration"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Qe(t),onClick:()=>{ae&&qe(1,"","ClearAll"),le(!0)},frmctrlid:"fld328_17245",frmctrlidName:"MaintenanceDuration",fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,onChange:(e,t)=>{ae&&qe(e,t,"MaintenanceDuration"),We(t,"MaintenanceDuration","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||le(!0)},showList:ae,SideEntryView:!1,KeyBack:e=>{},value:B.MaintenanceDuration,loading:A,clear:e=>{e&&(w({type:"text",name:"MaintenanceDuration",value:""}),le(!0))}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{"data-testid":B.TFDColorSA,json:xe,SPName:"CCMTargetFixDetails",FieldName:"TFDColorSA",tfLabel:Oe("TFDColorSA"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Qe(t),onClick:()=>{ie&&qe(1,"","ClearAll"),ne(!0)},frmctrlid:"fld328_17247",frmctrlidName:"TFDColorSA",fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,onChange:(e,t)=>{ie&&qe(e,t,"TFDColorSA"),We(t,"TFDColorSA","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||ne(!0)},showList:ie,SideEntryView:!1,KeyBack:e=>{},value:B.TFDColorSA,loading:A,clear:e=>{e&&(w({type:"text",name:"TFDColorSA",value:""}),ne(!0))}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{"data-testid":B.TFDColorCOT,json:xe,SPName:"CCMTargetFixDetails",FieldName:"TFDColorCOT",tfLabel:Oe("TFDColorCOT"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Qe(t),onClick:()=>{re&&qe(1,"","ClearAll"),oe(!0)},frmctrlid:"fld328_17248",frmctrlidName:"TFDColorCOT",fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,onChange:(e,t)=>{re&&qe(e,t,"TFDColorCOT"),We(t,"TFDColorCOT","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||oe(!0)},showList:re,SideEntryView:!1,KeyBack:e=>{},value:B.TFDColorCOT,loading:A,clear:e=>{e&&(w({type:"text",name:"TFDColorCOT",value:""}),oe(!0))}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{"data-testid":B.TFDColorNCOT,json:xe,SPName:"CCMTargetFixDetails",FieldName:"TFDColorNCOT",tfLabel:Oe("TFDColorNCOT"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Qe(t),onClick:()=>{de&&qe(1,"","ClearAll"),se(!0)},frmctrlid:"fld328_17249",frmctrlidName:"TFDColorNCOT",fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,onChange:(e,t)=>{de&&qe(e,t,"TFDColorNCOT"),We(t,"TFDColorNCOT","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||se(!0)},showList:de,SideEntryView:!1,KeyBack:e=>{},value:B.TFDColorNCOT,loading:A,clear:e=>{e&&(w({type:"text",name:"TFDColorNCOT",value:""}),se(!0))}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Me.Z,{"data-testid":B.AnaTime,onErr:e=>{ge(e)},value:B.AnaTime,onChange:e=>{We(e,"AnaTime","date")},label:Oe("AnaTime"),frmctrlid:"fld328_17250",frmctrlidName:"AnaTime",fieldorder:"2"})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Me.Z,{"data-testid":B.FixedTime,onErr:e=>{Le(e)},value:B.FixedTime,onChange:e=>{We(e,"FixedTime","date")},label:Oe("FixedTime"),frmctrlid:"fld328_17251",frmctrlidName:"FixedTime",fieldorder:"2"})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{json:xe,id:B.CCMTargetFixID,"data-testid":B.CCMTargetFixID,value:B.CCMTargetFixCode,SPName:"CCMTargetFixDetails",FieldName:"CCMTargetFixID",tfLabel:Oe("CCMTargetFixID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>We(e,"CCMTargetFixID","select"),onChange:(e,t)=>{Ye(e,t,"CCMTargetFixIDPK")},KeyBack:e=>{Je("CCMTargetFixID")},fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,openSlide:()=>{Ue("329")},Tabledialog:()=>je("329","CCMTargetFixID"),loading:A,clear:e=>{e&&$e("CCMTargetFixID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(Ie.Z,{json:xe,id:B.PriorityID,"data-testid":B.PriorityID,value:B.PriorityName,SPName:"CCMTargetFixDetails",FieldName:"PriorityID",tfLabel:Oe("PriorityID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>We(e,"PriorityID","select"),onChange:(e,t)=>{Ye(e,t,"PriorityIDPK")},KeyBack:e=>{Je("PriorityID")},fieldorder:"2",data:k,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:k.length>0?k[0].TotalCount:0,openSlide:()=>{Ue("62")},Tabledialog:()=>je("62","PriorityID"),loading:A,clear:e=>{e&&$e("PriorityID")}})))),i().createElement("div",{id:"CCMTargetFixDetailsSideBar",className:"sidenav"},i().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("CCMTargetFixDetailsSideBar").style.width="0",void h(!1))},""),E&&i().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},b))))))))}));a(77366),a(97829);var be=a(65197);const Pe=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),[d,c]=((0,n.useSelector)((e=>e.form)),(0,l.useState)([])),[m,p]=(0,l.useState)(!0),[C,u]=(0,l.useState)(e.showDetail),[y,T]=(0,l.useState)(""),[D,v]=i().useState(!1),[x,f]=i().useState(""),[F,E]=i().useState(!1),M=(0,l.useContext)(ke),{cstate:S,cdispatch:h}=Ze(),[N,L]=(0,l.useState)(!1),[b,P]=(0,l.useState)(""),[B,w]=(0,l.useState)(""),[A,R]=(0,l.useState)("");let k=(0,I.Z)();(0,l.useEffect)((()=>{S.editData.length>0&&(c(S.editData),v(!1),h({type:"PrimaryId",payload:S.editData[0].CCMTargetFixDetIDPK}))}),[S.editData]),(0,l.useEffect)((()=>{S.showTableview&&R(S.showTableview)}),[S.showTableview]),(0,l.useEffect)((()=>{p(S.ExpandDetailValue)}),[S.ExpandDetailValue]),(0,l.useEffect)((()=>{p(S.ExpandDetailValue)}),[e.L3data]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{p(e),v(null)},viewtoggle:()=>{v(!1)},viewlistProps:(t,a)=>{!function(t,a=!1){let l=g.v.Api+"FP328S3/",i={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:e.Dialogview?"1":null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:1,p49:10,p50:S.IsDraft?"DraftCCMTargetFixDetID":"CCMTargetFixDetID",p51:null,p52:null,p53:localStorage.getItem("UserGroupID"),p54:localStorage.getItem("userid")}};(0,pe.Z)(0).then((e=>{(0,s.Z)(l,i,e).then((e=>{M.loading(!1),"200"==e.Output.status.code&&c(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===D&&a.current.clear()}})));const Z=e=>k?.[e]?k?.[e]:e,O=e=>S.language?.[e]?S.language[e]:e;function G(e,t){}const z=(e,t)=>(a,l)=>{f(F?Object.assign(...d.filter((e=>e.CCMTargetFixDetIDPK==t)).map((e=>e))):S.editData),v(!l&&e)};return i().createElement("div",null,i().createElement(r.Z,{expanded:m,onChange:()=>()=>{e.expandTable&&p(!m)}},!D&&i().createElement(Y.Z,null,i().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},m?i().createElement("div",{className:"displayFlex EntryViewHeader"},i().createElement("p",{className:"ListP"},S.IsDraft?Z("Draft"):"",O("CCMTargetFixDetails"),e.viewonly?" ":"("+S.count+")")):"",m?i().createElement("div",{className:"displayFlex EntryHeaderBtn"},!e.viewonly&&S.AccessRights.IsAdd?i().createElement(ae.Z,{name:Z("Add"),frmctrlid:"fld328L1VCAddBtn",className:"AddBtnCommon boxShadowNone",onClick:()=>{M.hideAddBtn(!0),h({type:"editData",payload:[]}),h({type:"ShowDetail",payload:!1}),h({type:"Add",payload:!0})},disabled:!1}):"",!e.viewonly&&S.AccessRights.IsEdit?i().createElement(me.Z,{frmctrlid:"fld328L1VCEditBtn",onClick:z("panel0",""),disabled:!1}):S.IsDraft&&S.AccessRights.IsAdd&&i().createElement(me.Z,{frmctrlid:"fld328L1VCEditBtnIsAdd",onClick:()=>{z("panel","")},disabled:!1}),!e.viewonly&&i().createElement(ce.Z,{disabled:!1,className:"L1AddBtnCommon",frmctrlid:"fld328L1VCCloseBtn",onClick:()=>{p(!1),M.hideAddBtn(!1),F&&(h({type:"editData",payload:[]}),c([]))}})):"")),i().createElement(o.Z,{style:{display:"block"}},d.map(((t,l)=>i().createElement("div",{key:l},D==="panel"+l?i().createElement(Le,{ref:a,parentId:e.parentId}):i().createElement(i().Fragment,null,i().createElement(be.Z,{tableName:"CCMTargetFixDetails",tableID:328,parentID:t.CCMTargetFixDetIDPK,fldid:"fld328L1VCContainer",OpenSlideComponent:G,index:l,refresh:A,val:t,tf:O,t:Z,title:"10.0.0.59-3:08:17 PM-18-7[328]"}))))))))}));var Be=a(67698),we=a(55995),Ae=a(45965),Re=a(41722);a(9175);const ke=(0,l.createContext)(),Ze=()=>{const e=(0,l.useContext)(ke);if(void 0===e)throw new Error("useCont must be used within  CCMTargetFixDetailsContext Provider");return e},Oe=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),r=(0,l.useRef)(),o=(0,l.useRef)(),d=(0,l.useRef)(),s=(0,l.useRef)(),[c,m]=(0,l.useState)(!0),[p,C]=(0,l.useState)(),u=((0,n.useSelector)((e=>e.form)),(0,n.useDispatch)()),[y,g]=(0,l.useState)(0),[T,D]=(0,l.useReducer)(Re.D,Re.E),[I,v]=(0,l.useState)(""),[x,f]=(0,l.useState)([]),[F,E]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e.loading(!0),e.tableview||r.current.clear(),document.getElementById("divCCMTargetFixDetails-Entry").style.width="100%",document.getElementById("CCMTargetFixDetails-MainTable").style.width="100%",document.getElementById("CCMTargetFixDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{m(!0),document.getElementById("divCCMTargetFixDetails-Entry").style.width="100%",document.getElementById("CCMTargetFixDetails-MainTable").style.width="100%",document.getElementById("CCMTargetFixDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{e.editData&&(D({type:"editData",payload:[e.editData]}),D({type:"ShowDetail",payload:!0}))}),[e.editData]),(0,l.useImperativeHandle)(t,(()=>({AddOpen:(e,t)=>{D(t?{type:"AccessRights",payload:{IsAdd:!0,IsEdit:!0,IsView:!0,IsDelete:!0,IsPrint:!0,IsExport:!0}}:{type:"AccessRights",payload:{IsAdd:!1,IsEdit:!1,IsView:!1,IsDelete:!0,IsPrint:!0,IsExport:!0}}),r.current.AddOpen(e),setTimeout((()=>a.current.HideEntryFields(!0)),500)},AddClose:()=>{setTimeout((()=>a.current.HideEntryFields(!0)),500)}})));const M=e=>{f([]),document.getElementById("divCCMTargetFixDetails-Entry").style.width="100%",document.getElementById("CCMTargetFixDetailsEntryTable").style.width="100%",document.getElementById("CCMTargetFixDetails-MainEntry").style.width="100%",document.getElementById("CCMTargetFixDetails-MainEntry").style.display="block",document.getElementById("CCMTargetFixDetails-MainDiv").classList.add("displayFlex"),document.getElementById("CCMTargetFixDetails-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMTargetFixDetails").style.width="0%",document.getElementById("overlayimgAttCCMTargetFixDetails").style.display="none"};(0,l.useEffect)((()=>{u((e=>{(0,pe.Z)(1).then((e=>{var t=new Array;t.push(e),D({type:"token",payload:t}),g(t.length),S(e)}))}))}),[]);const S=e=>{(0,Ae.Z)(e,329).then((e=>D({type:"AccessRights",payload:e})))};return i().createElement("div",{style:{width:"100%"}},i().createElement(ke.Provider,{value:{cstate:T,cdispatch:D,ContextApi:Ze,loading:t=>e.loading(t),alert:t=>e.alertmsg(t),ShareTab:(t,a)=>e.TabShare(t,a),ConfirmAlert:t=>e.ConfirmAlert(t),SlideComponentType:t=>e.SlideComponentType(t),openNav:t=>e.openNav(t),RefreshTable:()=>{a.current.tableRefresh()},searchItem:e=>{0!==y&&a.current.searchItem(e)},openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t),attachmentSave:e=>{s.current.tempsave(e,x),f([])},EditClose:e=>M(),AttachExpand:e=>(d.current.AttachmentData(T.PrimaryId),void(c&&(document.getElementById("overlayPreviewCCMTargetFixDetails").style.width="50%",document.getElementById("divCCMTargetFixDetails-Entry").style.width="100%",document.getElementById("CCMTargetFixDetails-MainTable").style.width="100%",document.getElementById("CCMTargetFixDetails-MainEntry").style.width="100%",document.getElementById("CCMTargetFixDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixDetails-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttCCMTargetFixDetails").style.display="block",document.getElementById("overlayimgAttCCMTargetFixDetails").style.width="25%"))),Expanded:e=>{T.ShowDetail&&o.current.tableClick(e),D({type:"ExpandDetailValue",payload:e})},viewtoggle:()=>{T.ShowDetail&&o.current.viewtoggle()},clear:e=>{D({type:"ShowDetail",payload:!1}),D({type:"editData",payload:[]}),T.ShowDetail?o.current.clear(e):r.current.clear(e)},hideAddBtn:e=>{a.current.HideEntryFields(e)},ExpandEntry:()=>{T.ShowDetail?o.current.tableClick(!1):r.current.CreateEasyProps(!1)},resetImg:()=>{s.current.tempClear(),d.current.clrImgstate(!0)}}},i().createElement("div",{id:"CCMTargetFixDetails-MainDiv",className:"MainDivStyles displayFlex",style:{height:e.subForm&&"fit-content"}},i().createElement("div",{id:"CCMTargetFixDetails-MainEntry",className:"",style:{background:"#fff"}},i().createElement("div",{style:{display:"flex"}},i().createElement("div",{id:"CCMTargetFixDetailsEntryTable",style:{width:"100%"}},T.ShowDetail?i().createElement("div",null,i().createElement("div",{className:"displayFlex width100"},i().createElement("div",{id:"divCCMTargetFixDetails-Entry",style:{width:"100%"}},0!==y?i().createElement(Pe,{ref:o,IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}):null)),i().createElement(we.Z,{ref:s,menurefID:328,fileId:"LogoImgCCMTargetFixDetails",imgloading:t=>{t||T.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:T.PrimaryId,AttachmentVal:e=>d.current.AttachmentData(e),previd:"overlayPreviewCCMTargetFixDetails",frmctrlid:"PvwIm_328_L1_",tempImg:e=>{T.PrimaryId?d.current.AttachmentData(T.PrimaryId):d.current.tempImg(e),f(e)},clearTempData:T.Add})):i().createElement("div",null,i().createElement("div",{className:"displayFlex width100"},i().createElement("div",{id:"divCCMTargetFixDetails-Entry",style:{width:"100%"}},!e.tableview&&i().createElement(Le,{ref:r,clrImgstate:e=>d.current.clrImgstate(e),IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}))),i().createElement(we.Z,{ref:s,menurefID:328,fileId:"LogoImgCCMTargetFixDetails",imgloading:t=>{t||T.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:T.PrimaryId,AttachmentVal:e=>d.current.AttachmentData(e),previd:"overlayPreviewCCMTargetFixDetails",frmctrlid:"PvwIm_328_L1_",tempImg:e=>{T.PrimaryId?d.current.AttachmentData(T.PrimaryId):d.current.tempImg(e),f(e)},clearTempData:T.Add})),i().createElement("div",{id:"CCMTargetFixDetails-MainTable"},0!==y?i().createElement(se,{ref:a,parentId:e.parentId,IsCollapse:e.IsCollapse,tableview:e.tableview}):null)),i().createElement(Be.Z,{ImgAttachment:e=>M(),menurefID:328,fileId:"AttImgCCMTargetFixDetails",imgid:"overlayimgAttCCMTargetFixDetails",valueIDPK:T.PrimaryId,PriviewData:(e,t,a,l)=>{s.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewCCMTargetFixDetails",ref:d,imgloading:p,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_328_L1_",timglist:e=>{s.current.timglist(e),f(e)},clearTempData:T.Add}))),i().createElement("div",{id:"CCMTargetFixDetails-DetailDiv",style:{display:"none",height:"81vh",overflowY:"auto"}}))))}))},39302:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R,saveComponent:()=>Z,trimFunc:()=>k});var l=a(92950),i=a.n(l),n=a(45237),r=a(36939),o=a(61201),d=a(50743),s=(a(3212),a(10966),a(30553)),c=(a(99090),a(44528)),m=a(37148),p=a(61956),C=a(51673),u=(a(96071),a(14439)),y=a(27848),g=(a(49174),a(38773),a(19089),a(1695)),T=(a(13235),a(61924)),D=a.n(T),I=a(26537),v=a(40900),x=a(35131),f=a.n(x),F=a(55490),E=(a(2493),a(92371));a(82729),a(75355),a(11107),a(40826);const M={EnterKeyValues:{CCMTargetFixRegistry:["ContractName","LocalityGroupName","LocalityName","BuildingName","ServiceTypeName","CCMComplaintTypeName","PriorityName","LocResponseBy","LocAnalysedBy","LocFixedBy","CCMTargetFixCode","IsServiceRequest"]},Label:{CCMTargetFixRegistry:{ContractID:["ContractCode","ContractName"],LocalityGroupID:["LocalityGroupCode","LocalityGroupName"],LocalityID:["LocalityCode","LocalityName"],BuildingID:["CCMTargetFixCode"],ServiceTypeID:["ServiceTypeName"],CCMComplaintTypeID:["CCMComplaintTypeName"],PriorityID:["PriorityName"],LocResponseBy:["CCMTargetFixCode"],LocAnalysedBy:["CCMTargetFixCode"],LocFixedBy:["CCMTargetFixCode"],CCMTargetFixCode:["CCMTargetFixCode"],IsServiceRequest:["CCMTargetFixCode"]}},LabelHeader:{CCMTargetFixRegistry:{ContractID:["Contract Code","Contract Name"],LocalityGroupID:["Location(Site) Group Code","Location(Site)Group Name"],LocalityID:["Location Code","Location Name"],BuildingID:["CCMTargetFixCode"],ServiceTypeID:["Service Name"],CCMComplaintTypeID:["Complaint Type Name"],PriorityID:["Priority Name"],LocResponseBy:["CCMTargetFixCode"],LocAnalysedBy:["CCMTargetFixCode"],LocFixedBy:["CCMTargetFixCode"],CCMTargetFixCode:["CCMTargetFixCode"],IsServiceRequest:["CCMTargetFixCode"]}},Property:{CCMTargetFixRegistry:{ContractID:{id:"fld329_15127",clearID:"CCMTargetFixRegistryContractNameClear",type:"select",labelID:"ContractIDPK",labelname:"Contract",fielddisplayname:"ContractName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},LocalityGroupID:{id:"fld329_15131",clearID:"CCMTargetFixRegistryLocalityGroupNameClear",type:"select",labelID:"LocalityGroupIDPK",labelname:"Location Group",fielddisplayname:"LocalityGroupName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1},LocalityID:{id:"fld329_15128",clearID:"CCMTargetFixRegistryLocalityNameClear",type:"select",labelID:"LocalityIDPK",labelname:"Location",fielddisplayname:"LocalityName",foreignFld:["Locality Group Name"],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},BuildingID:{id:"fld329_15130",clearID:"CCMTargetFixRegistryBuildingNameClear",type:"select",labelID:"BuildingIDPK",labelname:"Building",fielddisplayname:"BuildingName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1},ServiceTypeID:{id:"fld329_15132",clearID:"CCMTargetFixRegistryServiceTypeNameClear",type:"select",labelID:"ServiceTypeIDPK",labelname:"Service Type",fielddisplayname:"ServiceTypeName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1},CCMComplaintTypeID:{id:"fld329_15133",clearID:"CCMTargetFixRegistryCCMComplaintTypeNameClear",type:"select",labelID:"CCMComplaintTypeIDPK",labelname:"Complaint Type",fielddisplayname:"CCMComplaintTypeName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},PriorityID:{id:"fld329_15129",clearID:"CCMTargetFixRegistryPriorityNameClear",type:"select",labelID:"PriorityIDPK",labelname:"Priority",fielddisplayname:"PriorityName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},LocResponseBy:{id:"fld329_15122",labelID:"LocResponseBy",maxLength:"15",labelname:"Response Time",frmctrlid:"fld329_15122",frmctrlidname:"LocResponseBy",type:"text",mandatory:!0,masked:!0,masktype:"Days",disabled:!1,autogen:!1},LocAnalysedBy:{id:"fld329_15123",labelID:"LocAnalysedBy",maxLength:"15",labelname:"Analysed By",frmctrlid:"fld329_15123",frmctrlidname:"LocAnalysedBy",type:"text",mandatory:!0,masked:!0,masktype:"Days",disabled:!1,autogen:!1},LocFixedBy:{id:"fld329_15120",labelID:"LocFixedBy",maxLength:"15",labelname:"Fixed By",frmctrlid:"fld329_15120",frmctrlidname:"LocFixedBy",type:"text",mandatory:!0,masked:!0,masktype:"Days",disabled:!1,autogen:!1},CCMTargetFixCode:{id:"fld329_15119",labelID:"CCMTargetFixCode",maxLength:"50",labelname:"CCMTargetFixCode",frmctrlid:"fld329_15119",frmctrlidname:"CCMTargetFixCode",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},IsServiceRequest:{id:"fld329_15121",labelID:"IsServiceRequest",maxLength:"",labelname:"IsServiceRequest",frmctrlid:"fld329_15121",frmctrlidname:"IsServiceRequest",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1}}},SubForms:{},POPLabel:{CCMTargetFixRegistry:{ContractID:["ContractCode","ContractName","CustomerName","ContractCategName","ContractTypeName"],LocalityGroupID:["LocalityGroupCode","LocalityGroupName"],LocalityID:["LocalityCode","LocalityName","CityName","LocalityGroupName"],BuildingID:["BuildingCode","BuildingName","BuildingNo","LocalityName","AssBuildingTypeName"],ServiceTypeID:["ServiceTypCode","ServiceTypeName"],CCMComplaintTypeID:["CCMComplaintTypeName","CCMComplaintTypeCode"],PriorityID:["PriorityCode","PriorityName","TargetMins","MaintenanceMins"]}}};a(42258),a(97829),a(79117);var S=a(56173),h=a(8981),N=a(63163),L=a(45155),b=a(51649),P=a(16233),B=a.n(P);a(74095);const w={CCMTargetFixIDPK:"",CCMTargetFixCode:"",LocFixedBy:"",IsServiceRequest:!1,LocResponseBy:"",LocAnalysedBy:"",IsDefault:!1,IsDraft:!1,Remarks:"",ContractID:null,LocalityID:null,PriorityID:null,BuildingID:null,LocalityGroupID:null,ServiceTypeID:null,CCMComplaintTypeID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractGroupID:null,ContractGroupCode:"",ContractGroupName:"",TaxID:null,TaxCode:"",TaxName:"",TaxValue:"",CustomerID:null,CustomerCode:"",CustomerName:"",ContractTypeID:null,ContractTypCode:"",ContractTypeName:"",ContractCategID:null,ContractCategCode:"",ContractCategName:"",ConPaymentTermsID:null,ConPaymentTermsName:"",ContractCode:"",ContractName:"",LocalityGroupCode:"",LocalityGroupName:"",CityID:null,CityCode:"",CityName:"",AdminLocalityTypeID:null,AdminLocalityTypeCode:"",AdminLocalityTypeName:"",LocalityCode:"",LocalityName:"",PriorityCode:"",PriorityName:"",ServiceTypCode:"",ServiceTypeName:"",CCMComplaintTypeCode:"",CCMComplaintTypeName:"",Type:"CCMTargetFixID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid"),LocResponseByDays:"",LocAnalysedByDays:"",LocFixedByDays:""},A=(0,l.forwardRef)(((e,t)=>{(0,n.useSelector)((e=>e.form));const[a,T]=(0,l.useState)(!1),[x,P]=(0,l.useState)(!0),[A,R]=(0,l.useState)(!1),[k,O]=(0,l.useState)(!1),[G,z]=(0,l.useState)(!1),[K,V]=(0,l.useState)(!1),[_,H]=(0,l.useState)([]),[U,j]=(0,l.useState)(null),[Y,q]=(0,l.useReducer)(E.Z,w),[W,$]=(0,l.useState)(!1),[J,Q]=(0,l.useState)([]),[X,ee]=(0,l.useState)(0),[te,ae]=(0,l.useState)(""),[le,ie]=(0,l.useState)(!0),ne=(0,l.useContext)(S.CCMTargetFixRegistryContext),{cstate:re,cdispatch:oe}=(0,S.ContextApi)(),[de]=(0,l.useState)(localStorage.getItem("Language")),[se]=(0,l.useState)(localStorage.getItem("Language")),[ce,me]=(0,l.useState)([]),[pe,Ce]=(0,l.useState)(null),[ue,ye]=(0,l.useState)(!1),[ge,Te]=(0,l.useState)(""),De=(0,l.useRef)(null),[Ie,ve]=B()("329"),[xe,fe]=(0,l.useState)(""),[Fe,Ee]=(0,l.useState)(!1),[Me,Se]=(0,l.useState)([]),he=(0,l.useRef)(null);let Ne=(0,h.Z)();const[Le,be]=(0,l.useState)({}),Pe=e=>Ne?.[e]?Ne[e]:e,Be=t=>re.language?.[t]?re.language[t]:e.createEasy?Le?.[t]:t;(0,l.useEffect)((()=>{re.PrimaryId&&ee(Number(re.PrimaryId))}),[re.PrimaryId]),(0,l.useEffect)((()=>{re.editData.length<0&&(0,I.Z)(1).then((e=>{Ve(1,null,"SetDefaultCCMTargetFixID",e)}))}),[]),(0,l.useEffect)((()=>{re.editData.length>0?(Ae(re.editData[0],""),O(!0)):re.Add&&(ee(0),O(!0))}),[re.editData,re.Add]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),be(Object.assign({},...t))}(Ie)}),[Ie]),(0,l.useImperativeHandle)(t,(()=>({getAlert(e){O(!0),R(!1)},CreateEasyProps:(e=!0,t)=>{ve(!0),t?(Ye(t),O(e)):(Re(),O(e))},clear:()=>{Re()}})));const we=e=>{let t=60*Number(e),a=parseInt(t,10),l=Math.floor(a/86400);a-=3600*l*24;let i=Math.floor(a/3600);a-=3600*i;let n=Math.floor(a/60);a-=60*n;let r=l.toString().length;2===r?l="0"+l:1===r&&(l="00"+l),1===i.toString().length&&(i="0"+i),1===n.toString().length&&(n="0"+n);let o=(l.toString()+i.toString()+n.toString()).replace(/\D/g,"").match(/(\d{0,3})(\d{0,2})(\d{0,2})/);return o[2]?o[1]+": "+o[2]+(o[3]?":"+o[3]:""):o[1]},Ae=(t,a,l)=>{let i=t;Object.keys(i).forEach((function(e){0==i[e]&&(i[e]=null)})),z(i.IsDraft),oe({type:"EditIsDraft",payload:"1"==i.IsDraft}),"SetDefaultCCMTargetFixID"==a?ae(i.CCMTargetFixIDPK):(ee(e.primid?Number(e.primid):i.CCMTargetFixIDPK?i.CCMTargetFixIDPK:0),oe({type:"PrimaryId",payload:i.CCMTargetFixIDPK})),q({type:"number",name:"ContractID",number:i.ContractID?Number(i.ContractID):0}),q({type:"text",name:"ContractName",value:i.ContractName}),q({type:"number",name:"LocalityGroupID",number:i.LocalityGroupID?Number(i.LocalityGroupID):0}),q({type:"text",name:"LocalityGroupName",value:i.LocalityGroupName}),q({type:"number",name:"LocalityID",number:i.LocalityID?Number(i.LocalityID):0}),q({type:"text",name:"LocalityName",value:i.LocalityName}),q({type:"number",name:"BuildingID",number:i.BuildingID?Number(i.BuildingID):0}),q({type:"text",name:"BuildingName",value:i.BuildingName}),q({type:"number",name:"ServiceTypeID",number:i.ServiceTypeID?Number(i.ServiceTypeID):0}),q({type:"text",name:"ServiceTypeName",value:i.ServiceTypeName}),q({type:"number",name:"CCMComplaintTypeID",number:i.CCMComplaintTypeID?Number(i.CCMComplaintTypeID):0}),q({type:"text",name:"CCMComplaintTypeName",value:i.CCMComplaintTypeName}),q({type:"number",name:"PriorityID",number:i.PriorityID?Number(i.PriorityID):0}),q({type:"text",name:"PriorityName",value:i.PriorityName}),q({type:"text",name:"LocResponseByDays",value:we(i.LocResponseBy)}),q({type:"text",name:"LocResponseBy",value:i.LocResponseBy}),q({type:"text",name:"LocAnalysedByDays",value:we(i.LocAnalysedBy)}),q({type:"text",name:"LocAnalysedBy",value:i.LocAnalysedBy}),q({type:"text",name:"LocFixedByDays",value:we(i.LocFixedBy)}),q({type:"text",name:"LocFixedBy",value:i.LocFixedBy}),q({type:"text",name:"CCMTargetFixCode",value:i.CCMTargetFixCode?i.CCMTargetFixCode:""}),q({type:"number",name:"IsServiceRequest",number:i.IsServiceRequest}),q({type:"boolean",name:"IsDefault",boolean:i.IsDefault}),i.IsDraft?P(!0):P(!("1"!=i.IsActive&&!i.IsActive))},Re=()=>{H([]),ee(0),ae(""),ie(!0),oe({type:"PrimaryId",payload:""}),q({type:"text",name:"ContractID",value:null}),q({type:"text",name:"ContractName",value:""}),document.getElementById("CCMTargetFixRegistryContractNameClear")&&document.getElementById("CCMTargetFixRegistryContractNameClear").click(),q({type:"text",name:"LocalityGroupID",value:null}),q({type:"text",name:"LocalityGroupName",value:""}),document.getElementById("CCMTargetFixRegistryLocalityGroupNameClear")&&document.getElementById("CCMTargetFixRegistryLocalityGroupNameClear").click(),q({type:"text",name:"LocalityID",value:null}),q({type:"text",name:"LocalityName",value:""}),document.getElementById("CCMTargetFixRegistryLocalityNameClear")&&document.getElementById("CCMTargetFixRegistryLocalityNameClear").click(),document.getElementById("CCMTargetFixRegistryLocalityIDClear")&&document.getElementById("CCMTargetFixRegistryLocalityIDClear").click(),Se([]),q({type:"text",name:"BuildingID",value:null}),q({type:"text",name:"BuildingName",value:""}),document.getElementById("CCMTargetFixRegistryBuildingNameClear")&&document.getElementById("CCMTargetFixRegistryBuildingNameClear").click(),q({type:"text",name:"ServiceTypeID",value:null}),q({type:"text",name:"ServiceTypeName",value:""}),document.getElementById("CCMTargetFixRegistryServiceTypeNameClear")&&document.getElementById("CCMTargetFixRegistryServiceTypeNameClear").click(),q({type:"text",name:"CCMComplaintTypeID",value:null}),q({type:"text",name:"CCMComplaintTypeName",value:""}),document.getElementById("CCMTargetFixRegistryCCMComplaintTypeNameClear")&&document.getElementById("CCMTargetFixRegistryCCMComplaintTypeNameClear").click(),q({type:"text",name:"PriorityID",value:null}),q({type:"text",name:"PriorityName",value:""}),document.getElementById("CCMTargetFixRegistryPriorityNameClear")&&document.getElementById("CCMTargetFixRegistryPriorityNameClear").click(),q({type:"text",name:"LocResponseByDays",value:""}),q({type:"text",name:"LocResponseBy",value:""}),q({type:"text",name:"LocAnalysedByDays",value:""}),q({type:"text",name:"LocAnalysedBy",value:""}),q({type:"text",name:"LocFixedByDays",value:""}),q({type:"text",name:"LocFixedBy",value:""}),q({type:"text",name:"CCMTargetFixCode",value:""}),q({type:"number",name:"IsServiceRequest",number:0}),q({type:"boolean",name:"IsDefault",boolean:!1}),P(!0),fe("")},ke=()=>{const e={...Y};return["IsActive","IsDefault","UserGroupKey","UserAccessKey","DeleStat","Type"].map((t=>{delete e[t]})),Object.keys(e).filter((t=>e[t]))},Ze=()=>{ne.ConfirmAlert(i().createElement(D(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:Pe("Are you sure?"),onConfirm:()=>Oe(),onCancel:()=>ne.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Pe("Yes"),cancelBtnText:Pe("Cancel"),showCancel:!0},re.PrimaryId?Pe("Do you want to Update?"):Pe("Do you want to Save?")))},Oe=(e,t)=>{ne.loading(!0),ne.ConfirmAlert(null),oe({type:"IsDraft",payload:!1}),Z({url:v.v.Api+"FP329S2/",PrimID:X,ParamType:e,state:Y,active:x,token:re.token[0],DefaultPrimaryId:te}).then((t=>{const a=t[0].status;let l=t[0].Data,i=new Array,n=new Array;"200"===a.code?(l.map((e=>{e&&(i.push(e.IsAlert),n.push(e.AlertMessage),e.AlertMessage)})),i.some((e=>"1"==e))?(ne.alert({open:!0,color:"warning",message:n}),ne.loading(!1)):Ge(e)):(ne.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),ne.loading(!1))}))},Ge=(t,a)=>{ie(!0),ne.loading(!0),ne.ConfirmAlert(null),Z({url:v.v.Api+"FP329S1/",PrimID:X,ParamType:t,state:Y,active:x,token:re.token[0],DefaultPrimaryId:te}).then((a=>{const l=a[0].status;200==l.code?(oe({type:"PrimaryId",payload:a[0].Data.IDPK}),ne.AddOpen(a[0].Data.IDPK),"SetDefaultCCMTargetFixID"==t?ne.alert({open:!0,color:"success",message:["Default Record Configured"]}):ne.alert({open:!0,color:"success",message:[l.message]}),ne.attachmentSave(a[0].Data.IDPK),ne.loading(!1),re.AccessRights.IsApproval&&ne.Approval(!0),e.createEasy,oe({type:"EditOpen",payload:!1}),oe({type:"EditIsDraft",payload:!1}),document.getElementById("overlayimgAttCCMTargetFixRegistry")&&(document.getElementById("overlayimgAttCCMTargetFixRegistry").style.width="0%",document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="none",document.getElementById("divCCMTargetFixRegistry-Entry").style.width="100%"),document.getElementById("CCMTargetFixRegistry-MainTable").style.display="none"):(ne.alert({open:!0,color:"warning",message:[l.message]}),ne.loading(!1),e.enableSave(!0)),e.clrImgstate(!0),"SetDefaultCCMTargetFixID"==t&&(O(!0),Ve(1,null,"SetDefaultCCMTargetFixID",re.token[0]))}))};function ze(e){return CreateEasy(e,re,oe,ne,De),!1}function Ke(e,a){return AdvanceSearch(e,a,S.CCMTargetFixRegistryContext,(0,S.ContextApi)(),He,t),!1}(0,l.useEffect)((()=>{O(re.ExpandDetailValue)}),[re.ExpandDetailValue]);const Ve=(t,a,l,i,n,r)=>{const o=v.v.Api+"FP329S3/",d={data:{p1:null,p2:null,p3:null,p4:1==Y.IsServiceRequest,p5:a?"%"+a+"%":null,p6:a?"%"+a+"%":null,p7:null,p8:null,p9:null,p10:"0"==Y.ContractID?null:Y.ContractID,p11:"0"==Y.LocalityID?null:Y.LocalityID?Y.LocalityID:Me.map((e=>e.LocalityIDPK)).toString(),p12:"0"==Y.PriorityID?null:Y.PriorityID,p13:"0"==Y.BuildingID?null:Y.BuildingID,p14:"0"==Y.LocalityGroupID?null:Y.LocalityGroupID,p15:"0"==Y.ServiceTypeID?null:Y.ServiceTypeID,p16:"0"==Y.CCMComplaintTypeID?null:Y.CCMComplaintTypeID,p17:e.Dialogview?"1":null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:"0"==Y.ContractGroupID?null:Y.ContractGroupID,p25:a?"%"+a+"%":null,p26:a?"%"+a+"%":null,p27:"0"==Y.TaxID?null:Y.TaxID,p28:a?"%"+a+"%":null,p29:a?"%"+a+"%":null,p30:a?"%"+a+"%":null,p31:"0"==Y.CustomerID?null:Y.CustomerID,p32:a?"%"+a+"%":null,p33:a?"%"+a+"%":null,p34:"0"==Y.ContractTypeID?null:Y.ContractTypeID,p35:a?"%"+a+"%":null,p36:a?"%"+a+"%":null,p37:"0"==Y.ContractCategID?null:Y.ContractCategID,p38:a?"%"+a+"%":null,p39:a?"%"+a+"%":null,p40:"0"==Y.ConPaymentTermsID?null:Y.ConPaymentTermsID,p41:a?"%"+a+"%":null,p42:a?"%"+a+"%":null,p43:a?"%"+a+"%":null,p44:a?"%"+a+"%":null,p45:a?"%"+a+"%":null,p46:"0"==Y.CityID?null:Y.CityID,p47:a?"%"+a+"%":null,p48:a?"%"+a+"%":null,p49:"0"==Y.AdminLocalityTypeID?null:Y.AdminLocalityTypeID,p50:a?"%"+a+"%":null,p51:a?"%"+a+"%":null,p52:a?"%"+a+"%":null,p53:a?"%"+a+"%":null,p54:a?"%"+a+"%":null,p55:a?"%"+a+"%":null,p56:a?"%"+a+"%":null,p57:a?"%"+a+"%":null,p58:a?"%"+a+"%":null,p59:a?"%"+a+"%":null,p60:t,p61:r||10,p62:l,p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}},s=Object.keys(d.data).slice(0,Object.keys(d.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(d.data).length-8?d.data[t]:null,e)),{});$(!0);const c={data:s};(0,C.Z)(o,"ClearAll"==l?c:d,"PKDrag"==i?n:re.token[0]).then((e=>{const a=e.Output.status.code,i=e.Output.data;if("200"==a){const e=i.length;1==t?e>0?(Q(i),r&&"LocalityIDPK"==l&&(he.current.checkedAll(i),ne.loading(!1))):Q([]):Q(J.concat(i)),"SetDefaultCCMTargetFixID"==l&&(e>0?Ae(i[0],"SetDefaultCCMTargetFixID"):ae("NORECORDS")),$(!1)}else ne.alert({open:!0,color:"warning",message:[e.Output.status.message]}),$(!1)}))},_e=(t,a,l)=>{const i=v.v.Api+"FP329S3/",n={data:{p1:null,p2:"CCMTargetFixCode"==l&&a?"%"+a+"%":null,p3:"LocFixedBy"==l&&a?"%"+a+"%":null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:e.Dialogview?"1":null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:null,p51:null,p52:null,p53:null,p54:null,p55:null,p56:null,p57:null,p58:null,p59:null,p60:t,p61:10,p62:"CCMTargetFixID",p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}},r={data:Object.keys(n.data).slice(0,Object.keys(n.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(n.data).length-8?n.data[t]:null,e)),{})};$(!0),(0,C.Z)(i,"ClearAll"==l?r:n,re.token[0]).then((e=>{const a=e.Output.status.code,i=e.Output.data;if("200"==a){const e=i.length;1==t?("CCMTargetFixCode"==l&&ie(e>0),Q(i)):("CCMTargetFixCode"==l&&ie(!0),Q(J.concat(i))),$(!1)}else ne.alert({open:!0,color:"warning",message:[e.Output.status.message]}),$(!1)}))},He=(0,l.useCallback)((async(e,t,a)=>{"text"==a?q({type:a,name:t,value:e}):"number"==a?q({type:a,name:t,number:Number(e)}):"boolean"==a?q({type:a,name:t,boolean:e}):"date"==a?q({type:"text",name:t,value:e}):"select"==a&&("ContractID"==t?(q({type:"text",name:"ContractID",value:e.ContractIDPK?e.ContractIDPK:null}),q({type:"text",name:"ContractName",value:e.ContractName?e.ContractName:null})):"LocalityGroupID"==t||("LocalityID"==t?(q({type:"text",name:"LocalityID",value:e.LocalityIDPK?e.LocalityIDPK:null}),q({type:"text",name:"LocalityName",value:e.LocalityName?e.LocalityName:null}),fe(e.LocalityGroupName?e.LocalityGroupName:null)):"BuildingID"==t||("ServiceTypeID"==t?(q({type:"text",name:"ServiceTypeID",value:e.ServiceTypeIDPK?e.ServiceTypeIDPK:null}),q({type:"text",name:"ServiceTypeName",value:e.ServiceTypeName?e.ServiceTypeName:null})):"CCMComplaintTypeID"==t?(q({type:"text",name:"CCMComplaintTypeID",value:e.CCMComplaintTypeIDPK?e.CCMComplaintTypeIDPK:null}),q({type:"text",name:"CCMComplaintTypeName",value:e.CCMComplaintTypeName?e.CCMComplaintTypeName:null})):"PriorityID"==t&&(q({type:"text",name:"PriorityID",value:e.PriorityIDPK?e.PriorityIDPK:null}),q({type:"text",name:"PriorityName",value:e.PriorityName?e.PriorityName:null})))))}),[Y]);function Ue(e){if("ContractID"==e){if(!Y.ContractID)return!1;q({type:"text",name:"ContractID",value:null}),q({type:"text",name:"ContractName",value:""}),document.getElementById("CCMTargetFixRegistryContractNameClear")&&document.getElementById("CCMTargetFixRegistryContractNameClear").click()}else if("LocalityGroupID"==e){if(!Y.LocalityGroupID)return!1}else if("LocalityID"==e){if(!Y.LocalityID)return!1;q({type:"text",name:"LocalityID",value:null}),q({type:"text",name:"LocalityName",value:""}),document.getElementById("CCMTargetFixRegistryLocalityIDClear")&&document.getElementById("CCMTargetFixRegistryLocalityIDClear").click(),Se([]),document.getElementById("CCMTargetFixRegistryLocalityNameClear")&&document.getElementById("CCMTargetFixRegistryLocalityNameClear").click(),fe("")}else if("BuildingID"==e){if(!Y.BuildingID)return!1}else if("ServiceTypeID"==e){if(!Y.ServiceTypeID)return!1;q({type:"text",name:"ServiceTypeID",value:null}),q({type:"text",name:"ServiceTypeName",value:""}),document.getElementById("CCMTargetFixRegistryServiceTypeNameClear")&&document.getElementById("CCMTargetFixRegistryServiceTypeNameClear").click()}else if("CCMComplaintTypeID"==e){if(!Y.CCMComplaintTypeID)return!1;q({type:"text",name:"CCMComplaintTypeID",value:null}),q({type:"text",name:"CCMComplaintTypeName",value:""}),document.getElementById("CCMTargetFixRegistryCCMComplaintTypeNameClear")&&document.getElementById("CCMTargetFixRegistryCCMComplaintTypeNameClear").click()}else if("PriorityID"==e){if(!Y.PriorityID)return!1;q({type:"text",name:"PriorityID",value:null}),q({type:"text",name:"PriorityName",value:""}),document.getElementById("CCMTargetFixRegistryPriorityNameClear")&&document.getElementById("CCMTargetFixRegistryPriorityNameClear").click()}}function je(e){if("ContractID"==e){if(!Y.ContractID)return!1;q({type:"text",name:"ContractID",value:null})}else if("LocalityGroupID"==e){if(!Y.LocalityGroupID)return!1}else if("LocalityID"==e){if(!Y.LocalityID)return!1;q({type:"text",name:"LocalityID",value:null}),fe("")}else if("BuildingID"==e){if(!Y.BuildingID)return!1}else if("ServiceTypeID"==e){if(!Y.ServiceTypeID)return!1;q({type:"text",name:"ServiceTypeID",value:null})}else if("CCMComplaintTypeID"==e){if(!Y.CCMComplaintTypeID)return!1;q({type:"text",name:"CCMComplaintTypeID",value:null})}else if("PriorityID"==e){if(!Y.PriorityID)return!1;q({type:"text",name:"PriorityID",value:null})}}function Ye(t){ne.ConfirmAlert(null),z(t.IsDraft),e.createEasy||(oe({type:"editData",payload:[t]}),oe({type:"PrimaryId",payload:t.CCMTargetFixIDPK})),ee(Number(t.CCMTargetFixIDPK)?Number(t.CCMTargetFixIDPK):0),q({type:"number",name:"ContractID",number:t.ContractID?Number(t.ContractID):0}),q({type:"text",name:"ContractName",value:t.ContractName?t.ContractName:""}),q({type:"number",name:"LocalityGroupID",number:t.LocalityGroupID?Number(t.LocalityGroupID):0}),q({type:"text",name:"LocalityGroupName",value:t.LocalityGroupName?t.LocalityGroupName:""}),q({type:"number",name:"LocalityID",number:t.LocalityID?Number(t.LocalityID):0}),q({type:"text",name:"LocalityName",value:t.LocalityName?t.LocalityName:""}),q({type:"number",name:"BuildingID",number:t.BuildingID?Number(t.BuildingID):0}),q({type:"text",name:"BuildingName",value:t.BuildingName?t.BuildingName:""}),q({type:"number",name:"ServiceTypeID",number:t.ServiceTypeID?Number(t.ServiceTypeID):0}),q({type:"text",name:"ServiceTypeName",value:t.ServiceTypeName?t.ServiceTypeName:""}),q({type:"number",name:"CCMComplaintTypeID",number:t.CCMComplaintTypeID?Number(t.CCMComplaintTypeID):0}),q({type:"text",name:"CCMComplaintTypeName",value:t.CCMComplaintTypeName?t.CCMComplaintTypeName:""}),q({type:"number",name:"PriorityID",number:t.PriorityID?Number(t.PriorityID):0}),q({type:"text",name:"PriorityName",value:t.PriorityName?t.PriorityName:""}),q({type:"text",name:"LocResponseBy",value:t.LocResponseBy?t.LocResponseBy:""}),q({type:"text",name:"LocAnalysedBy",value:t.LocAnalysedBy?t.LocAnalysedBy:""}),q({type:"text",name:"LocFixedBy",value:t.LocFixedBy?t.LocFixedBy:""}),q({type:"text",name:"CCMTargetFixCode",value:t.CCMTargetFixCode?t.CCMTargetFixCode:""}),q({type:"boolean",name:"IsServiceRequest",boolean:!!t.IsServiceRequest&&t.IsServiceRequest})}const qe=e=>"string"==typeof e?e.trim():e;return i().createElement("div",null,i().createElement(r.Z,{expanded:k,onChange:e=>{}},i().createElement(d.Z,null,i().createElement("div",{className:"displayFlex backgroundLight borderRadiusTop width100"},i().createElement("div",{className:"displayFlex EntryHeader"},!e.createEasy&&i().createElement("span",{style:{cursor:"pointer"}},i().createElement(b.u1R,{className:"backButtonList",onClick:()=>{ne.ShowTableDiv(),setIndirectRecord(!1)}})),i().createElement("p",{id:"fld329L3ECListP",className:"ListP",title:"10.0.0.59-3:08:17 PM-18-7[329]",onClick:()=>re.ExpandTableValue&&O(!k)},X?"Edit ":"New ",Be("329")," (",re.count,")")),k&&i().createElement("div",{className:"displayFlex EntryHeaderBtn"},re.AccessRights.IsDelete&&i().createElement("div",{className:"GridAlign"},i().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},i().createElement(s.Z,{labelPlacement:"bottom",frmctrlid:"fld329L3ECEntryCheckbox",control:i().createElement(N.Z,{checked:"1"==x,onChange:e=>P(e.target.checked)}),label:Pe(1==x?"Active":"In Active")}))),!e.createEasy&&i().createElement("div",{className:"GridAlign",onClick:()=>{ne.AttachExpand(!0)},id:"fld329L3ECAttachment",disableRipple:!0,disabled:!X},i().createElement("div",{className:"Entry-Checkbox"},i().createElement("div",null,i().createElement(L.Ypb,{className:"Iconstyles"}))),i().createElement("div",{className:"GridLabel"},i().createElement("p",null,"Attach"))),!e.createEasy&&(!X||!re.editData.length>0)&&i().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{Re()},id:"fld329L3ECClearBtn"},i().createElement("div",{className:"Entry-Checkbox"},i().createElement(L.pYJ,{className:"Iconstyles"})),i().createElement("div",{className:"GridLabel"},i().createElement("p",null,"Reset"))),re.AccessRights.IsAdd&&i().createElement(g.Z,{name:X?"Update":"Next",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{return t=X?"update":"next",Y.ContractID&&0!=Y.ContractID?Y.LocalityID&&0!=Y.LocalityID?Y.CCMComplaintTypeID&&0!=Y.CCMComplaintTypeID?Y.PriorityID&&0!=Y.PriorityID?qe(Y.LocResponseByDays)?qe(Y.LocAnalysedByDays)?qe(Y.LocFixedByDays)?void("next"==t?function(t,a,l,i){if(ke().length>0){ie(!0),ne.loading(!0),ne.ConfirmAlert(null),oe({type:"IsDraft",payload:!1});const t=v.v.Api+"FP329S1/",a={data:[{p1:X,p2:qe(Y.CCMTargetFixCode),p3:Y.LocFixedBy?Number(Y.LocFixedBy):0,p4:Y.IsServiceRequest,p5:Y.LocResponseBy?Number(Y.LocResponseBy):0,p6:Y.LocAnalysedBy?Number(Y.LocAnalysedBy):0,p7:Y.IsDefault,p8:!0,p9:null,p10:Y.ContractID?Y.ContractID:0,p11:Y.LocalityID?Y.LocalityID:0,p12:Y.PriorityID?Y.PriorityID:0,p13:Y.BuildingID?Y.BuildingID:0,p14:Y.LocalityGroupID?Y.LocalityGroupID:0,p15:Y.ServiceTypeID?Y.ServiceTypeID:0,p16:Y.CCMComplaintTypeID?Y.CCMComplaintTypeID:0,p17:!1,p18:!1,p19:localStorage.getItem("userid"),p20:f()().format("YYYY-MM-DD hh:mm:ss"),p21:localStorage.getItem("userid"),p22:f()().format("YYYY-MM-DD hh:mm:ss")}]};(0,I.Z)(0).then((l=>{(0,p.Z)(t,a,l).then((t=>{const a=t[0].status;200==a.code?(ne.alert({open:!0,color:"success",message:["Saved to Draft"]}),oe({type:"EditIsDraft",payload:!0}),ne.attachmentSave(t[0].Data.IDPK),ne.loading(!1),Re(),e.clrImgstate(!0),ne.AddOpen(t[0].Data.IDPK,"1")):(ne.alert({open:!0,color:"warning",message:[a.message]}),ne.loading(!1))}))}))}else ne.alert({open:!0,color:"warning",message:["Please enter the primary fields"]})}():Ze(t)):(ne.alert({open:!0,color:"warning",message:[Pe("Please enter the")+""+Be("LocFixedBy")]}),!1):(ne.alert({open:!0,color:"warning",message:[Pe("Please enter the")+""+Be("LocAnalysedBy")]}),!1):(ne.alert({open:!0,color:"warning",message:[Pe("Please enter the")+""+Be("LocResponseBy")]}),!1):(ne.alert({open:!0,color:"warning",message:[Pe("Please select the ")+" "+Be("PriorityID")]}),!1):(ne.alert({open:!0,color:"warning",message:[Pe("Please select the ")+" "+Be("CCMComplaintTypeID")]}),!1):(ne.alert({open:!0,color:"warning",message:[Pe("Please select the ")+" "+Be("LocalityID")]}),!1):(ne.alert({open:!0,color:"warning",message:[Pe("Please select the ")+" "+Be("ContractID")]}),!1);var t}}),X?i().createElement(m.Z,{disabled:!1,frmctrlid:"fld329L3ECCloseBtn",onClick:()=>{ne.detailview(!0,X)}}):null))),i().createElement(o.Z,null,re.AccessRights.IsAdd?null:re.AccessRights.IsEdit?!re.PrimaryId&&i().createElement("div",{className:"divdisable"}):i().createElement("div",{className:"divdisable"}),i().createElement("div",{id:"CCMTargetFixRegistry-Main",className:"width100 displayFlex componentMainDiv cardDiv"},i().createElement("div",{id:"CCMTargetFixRegistry-Detail",className:"detailCard detailDiv"},i().createElement("div",{id:"CCMTargetFixRegistry-MainBody",className:"padding paddingLeft "},i().createElement("div",null,i().createElement(u.Z,{spacing:2},i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(F.Z,{json:M,id:Y.ContractID,"data-testid":Y.ContractID,value:Y.ContractName,SPName:"CCMTargetFixRegistry",FieldName:"ContractID",tfLabel:Be("ContractID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>He(e,"ContractID","select"),onChange:(e,t)=>{Ve(e,t,"ContractIDPK")},KeyBack:e=>{je("ContractID")},fieldorder:"1",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("156")},Tabledialog:()=>Ke("156","ContractID"),loading:W,clear:e=>{e&&Ue("ContractID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(F.Z,{json:M,id:Y.LocalityGroupID,"data-testid":Y.LocalityGroupID,value:Y.LocalityGroupName,SPName:"CCMTargetFixRegistry",FieldName:"LocalityGroupID",tfLabel:Be("LocalityGroupID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>He(e,"LocalityGroupID","select"),onChange:(e,t)=>{Ve(e,t,"LocalityGroupIDPK")},KeyBack:e=>{je("LocalityGroupID")},fieldorder:"1",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("260")},Tabledialog:()=>Ke("260","LocalityGroupID"),loading:W,clear:e=>{e&&Ue("LocalityGroupID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(F.Z,{json:M,id:Y.LocalityID,"data-testid":Y.LocalityID,value:Y.LocalityName,SPName:"CCMTargetFixRegistry",FieldName:"LocalityID",tfLabel:Be("LocalityID"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:e=>He(e,"LocalityID","select"),onChange:(e,t)=>{Ve(e,t,"LocalityIDPK")},KeyBack:e=>{je("LocalityID")},fieldorder:"2",data:J,foreign:!re.PrimaryId,foreignName:xe?[xe]:["Locality Group Name"],foreignClick:t=>e.openSlideView("LocalityID",Y.LocalityID?Y.LocalityID:t),totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("12")},Tabledialog:()=>Ke("12","LocalityID"),loading:W,clear:e=>{e&&Ue("LocalityID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(F.Z,{json:M,id:Y.BuildingID,"data-testid":Y.BuildingID,value:Y.BuildingName,SPName:"CCMTargetFixRegistry",FieldName:"BuildingID",tfLabel:Be("BuildingID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>He(e,"BuildingID","select"),onChange:(e,t)=>{Ve(e,t,"BuildingIDPK")},KeyBack:e=>{je("BuildingID")},fieldorder:"2",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("30")},Tabledialog:()=>Ke("30","BuildingID"),loading:W,clear:e=>{e&&Ue("BuildingID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(F.Z,{json:M,id:Y.ServiceTypeID,"data-testid":Y.ServiceTypeID,value:Y.ServiceTypeName,SPName:"CCMTargetFixRegistry",FieldName:"ServiceTypeID",tfLabel:Be("ServiceTypeID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>He(e,"ServiceTypeID","select"),onChange:(e,t)=>{Ve(e,t,"ServiceTypeIDPK")},KeyBack:e=>{je("ServiceTypeID")},fieldorder:"3",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("17")},Tabledialog:()=>Ke("17","ServiceTypeID"),loading:W,clear:e=>{e&&Ue("ServiceTypeID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(F.Z,{json:M,id:Y.CCMComplaintTypeID,"data-testid":Y.CCMComplaintTypeID,value:Y.CCMComplaintTypeName,SPName:"CCMTargetFixRegistry",FieldName:"CCMComplaintTypeID",tfLabel:Be("CCMComplaintTypeID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>He(e,"CCMComplaintTypeID","select"),onChange:(e,t)=>{Ve(e,t,"CCMComplaintTypeIDPK")},KeyBack:e=>{je("CCMComplaintTypeID")},fieldorder:"4",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("691")},Tabledialog:()=>Ke("691","CCMComplaintTypeID"),loading:W,clear:e=>{e&&Ue("CCMComplaintTypeID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(F.Z,{json:M,id:Y.PriorityID,"data-testid":Y.PriorityID,value:Y.PriorityName,SPName:"CCMTargetFixRegistry",FieldName:"PriorityID",tfLabel:Be("PriorityID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>He(e,"PriorityID","select"),onChange:(e,t)=>{Ve(e,t,"PriorityIDPK")},KeyBack:e=>{je("PriorityID")},fieldorder:"1",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,openSlide:()=>{ze("62")},Tabledialog:()=>Ke("62","PriorityID"),loading:W,clear:e=>{e&&Ue("PriorityID")}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(c.Z,{json:M,"data-testid":Y.LocResponseBy,SPName:"CCMTargetFixRegistry",FieldName:"LocResponseBy",tfLabel:Be("LocResponseBy"),frmctrlid:"fld329_15122",fieldorder:"2",onChange:e=>{q({type:"text",name:"LocResponseBy",value:e.Days}),q({type:"text",name:"LocResponseByDays",value:e.val})},clear:e=>{e&&(q({type:"text",name:"LocResponseBy",value:""}),q({type:"text",name:"LocResponseByDays",value:""}))},placeholder:"DDD:HH:MM",value:Y.LocResponseByDays})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(c.Z,{json:M,"data-testid":Y.LocAnalysedBy,SPName:"CCMTargetFixRegistry",FieldName:"LocAnalysedBy",tfLabel:Be("LocAnalysedBy"),frmctrlid:"fld329_15123",fieldorder:"3",onChange:e=>{q({type:"text",name:"LocAnalysedBy",value:e.Days}),q({type:"text",name:"LocAnalysedByDays",value:e.val})},clear:e=>{e&&(q({type:"text",name:"LocAnalysedBy",value:""}),q({type:"text",name:"LocAnalysedByDays",value:""}))},placeholder:"DDD:HH:MM",value:Y.LocAnalysedByDays})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},i().createElement(c.Z,{json:M,"data-testid":Y.LocFixedBy,SPName:"CCMTargetFixRegistry",FieldName:"LocFixedBy",tfLabel:Be("LocFixedBy"),frmctrlid:"fld329_15120",fieldorder:"4",onChange:e=>{q({type:"text",name:"LocFixedBy",value:e.Days}),q({type:"text",name:"LocFixedByDays",value:e.val})},clear:e=>{e&&(q({type:"text",name:"LocFixedBy",value:""}),q({type:"text",name:"LocFixedByDays",value:""}))},placeholder:"DDD:HH:MM",value:Y.LocFixedByDays})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement(F.Z,{"data-testid":Y.CCMTargetFixCode,json:M,SPName:"CCMTargetFixRegistry",FieldName:"CCMTargetFixCode",tfLabel:Be("CCMTargetFixCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&(e=>{ne.ConfirmAlert(i().createElement(D(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Ye(e),onCancel:()=>ne.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Pe("Yes"),cancelBtnText:Pe("No"),showCancel:!0},Pe("Do you want to update this record?")))})(t),onClick:()=>{le&&_e(1,"","ClearAll"),ie(!0)},frmctrlid:"fld329_15119",frmctrlidName:"CCMTargetFixCode",fieldorder:"4",data:J,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:J.length>0?J[0].TotalCount:0,onChange:(e,t)=>{le&&_e(e,t,"CCMTargetFixCode"),He(t,"CCMTargetFixCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||ie(!0)},showList:le,SideEntryView:!1,KeyBack:e=>{},value:Y.CCMTargetFixCode,loading:W,clear:e=>{e&&(q({type:"text",name:"CCMTargetFixCode",value:""}),ie(!0))}})),i().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},i().createElement("div",{className:"EntryView-Checkbox"},i().createElement(s.Z,{style:{color:"#337ab7"},"data-testid":Y.IsServiceRequest,labelPlacement:"end",control:i().createElement(N.Z,{checked:"1"==Y.IsServiceRequest,onChange:e=>{He(e.target.checked,"IsServiceRequest","boolean")},frmctrlid:"fld329_15121",frmctrlidname:"IsServiceRequest",fieldorder:"4",tfLabel:Be("IsServiceRequest")}),label:i().createElement("p",{className:"ToggleSwitchLabel",style:{color:Y.IsServiceRequest?"#21446F":"#999"}},Be("IsServiceRequest"))}))))),i().createElement("div",{id:"CCMTargetFixRegistrySideBar",className:"sidenav"},i().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("CCMTargetFixRegistrySideBar").style.width="0",void V(!1))},""),K&&i().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},U))))))))})),R=A,k=e=>"string"==typeof e?e.trim():e;function Z(e){const{url:t,PrimID:a,ParamType:l,state:i,active:n,token:r,DefaultPrimaryId:o}=e,d={data:[{p1:"SetDefaultCCMTargetFixID"==l?"NORECORDS"!=o&&o?o:0:a,p2:k(i.CCMTargetFixCode),p3:i.LocFixedBy?Number(i.LocFixedBy):0,p4:i.IsServiceRequest,p5:i.LocResponseBy?Number(i.LocResponseBy):0,p6:i.LocAnalysedBy?Number(i.LocAnalysedBy):0,p7:i.IsDefault,p8:!1,p9:"SetDefaultCCMTargetFixID"==l?"SetDefault":null,p10:i.ContractID?i.ContractID:0,p11:i.LocalityID?i.LocalityID:0,p12:i.PriorityID?i.PriorityID:0,p13:i.BuildingID?i.BuildingID:0,p14:i.LocalityGroupID?i.LocalityGroupID:0,p15:i.ServiceTypeID?i.ServiceTypeID:0,p16:i.CCMComplaintTypeID?i.CCMComplaintTypeID:0,p17:n,p18:"SetDefaultCCMTargetFixID"==l,p19:localStorage.getItem("userid"),p20:f()().format("YYYY-MM-DD hh:mm:ss"),p21:localStorage.getItem("userid"),p22:f()().format("YYYY-MM-DD hh:mm:ss")}]};return(0,p.Z)(t,d,r).then((e=>e))}},56173:(e,t,a)=>{a.r(t),a.d(t,{CCMTargetFixRegistryContext:()=>T,ContextApi:()=>D,default:()=>I});var l=a(92950),i=a.n(l),n=a(45237),r=a(23108),o=a(48598),d=a(39302),s=a(67698),c=a(55995),m=a(26537),p=(a(35131),a(45965)),C=a(73668),u=(a(37274),a(9175)),y=a.n(u),g=a(43319);const T=(0,l.createContext)();function D(){const e=i().useContext(T);if(void 0===e)throw new Error("useCount must be used within a CountProvider");return e}const I=function(e){const t=(0,l.useRef)(),a=(0,l.useRef)(),u=(0,l.useRef)(),I=(0,l.useRef)(),v=(0,l.useRef)(),x=(0,l.useRef)(),f=((0,n.useSelector)((e=>e.form)),(0,n.useDispatch)()),[F,E]=(0,l.useState)(0),[M,S]=i().useReducer(C.I,C.E),[h,N]=(0,l.useState)(""),[L,b]=(0,l.useState)(""),[P,B]=(0,l.useState)([]),w=(0,l.useRef)(),[A,R]=(0,l.useState)(!1);function k(e){S({type:"IsExPView",payload:!0}),S({type:"IsCollapse",payload:!1}),document.getElementById("CCMTargetFixRegistry-MainTable").style.margin="0",document.getElementById("divCCMTargetFixRegistry-Entry").style.margin="0",document.getElementById("divCCMTargetFixRegistry-Entry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainTable").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display="none",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayGrid"),S({type:"ExpandDetailValue",payload:!1}),document.getElementById("overlayimgAttCCMTargetFixRegistry")&&(document.getElementById("overlayimgAttCCMTargetFixRegistry").style.width="0%",document.getElementById("overlayPreviewCCMTargetFixRegistry").style.width="0%",document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="none")}(0,l.useEffect)((()=>{e.loading(!0),k(),S({type:"IsDraft",payload:!1}),S({type:"ShowDetail",payload:!1}),S({type:"Add",payload:!0}),S({type:"editData",payload:[]})}),[]),(0,l.useEffect)((()=>{e.editData&&S({type:"editData",payload:[e.editData]})}),[e.editData]);const Z=e=>{S({type:"IsCollapse",payload:!0}),document.getElementById("CCMTargetFixRegistry-MainTable").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("divCCMTargetFixRegistry-Entry").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("CCMTargetFixRegistry-MainTable").style.width="0%",document.getElementById("CCMTargetFixRegistry-MainTable").style.display="none",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display="block",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayGrid"),S({type:"ExpandDetailValue",payload:!0}),S({type:"PrimaryId",payload:""}),t.current.clear(),e&&x.current.AddClose()},O=t=>{M.IsCollapse?(document.getElementById("CCMTargetFixRegistry-MainEntry").style.width=e.inboxdata?"0":"50%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display=e.inboxdata?"none":"block",document.getElementById("divCCMTargetFixRegistry-Entry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display="block",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMTargetFixRegistry").style.width="0%",document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="none"):(document.getElementById("overlayimgAttCCMTargetFixRegistry").style.width="0%",document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="none",document.getElementById("divCCMTargetFixRegistry-Entry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainTable").style.width="auto",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayGrid"))};(0,l.useEffect)((()=>{f((e=>{(0,m.Z)(1).then((e=>{var t=new Array;t.push(e),S({type:"token",payload:t}),E(t.length),G(e)}))}))}),[]);const G=e=>{(0,p.Z)(e,329).then((e=>S({type:"AccessRights",payload:e})))};return(0,l.useEffect)((()=>{e.inboxdata&&(S({type:"ShowDetail",payload:!0}),S({type:"PrimaryId",payload:e.inboxdata.id}),setTimeout((()=>{a.current.viewlistProps(e.inboxdata.id)}),500))}),[e.inboxdata]),i().createElement("div",null,i().createElement(T.Provider,{value:{cstate:M,cdispatch:S,ContextApi:D,loading:t=>e.loading(t),ShareTab:(t,a)=>e.TabShare(t,a),alert:t=>e.alertmsg(t),SlideComponentType:t=>e.SlideComponentType(t),ConfirmAlert:t=>e.ConfirmAlert(t),openNav:t=>e.openNav(t),Approval:e=>R(e),openDialog:t=>e.openDialog(t),AppropenDialog:(t,a)=>e.openDialogAppr(t,a),DialogComponentType:t=>e.DialogComponentType(t),ExpandTable:e=>k(),viewtoggle:()=>{M.ShowDetail&&a.current.viewtoggle()},ExpandDetail:e=>Z(e),AttachExpand:t=>(u.current.AttachmentData(M.PrimaryId),void(M.ExpandTableValue?(document.getElementById("overlayimgAttCCMTargetFixRegistry").style.width="28%",document.getElementById("divCCMTargetFixRegistry-Entry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainTable").style.width="auto",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="block"):(document.getElementById("CCMTargetFixRegistry-MainEntry").style.width=e.inboxdata?"0":"40%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display=e.inboxdata?"none":"block",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display="block",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMTargetFixRegistry").style.width="28%",document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="block"))),RefreshTable:()=>{v.current.tableRefresh()},floatRefresh:()=>w.current.countRefresh(),expand:()=>document.getElementById("overlayimgAttCCMTargetFixRegistry").style.display="none",attachmentSave:e=>{I.current.tempsave(e,L),b([])},detailview:(e,t)=>{v.current.viewrecord(t),S({type:"ShowDetail",payload:e}),S({type:"EditOpen",payload:!0}),M.ShowDetail&&a.current.viewtoggle()},clear:e=>{M.ShowDetail?(S({type:"ShowDetail",payload:!1}),S({type:"editData",payload:[]})):t.current.CreateEasyProps(e)},edit:(e,t,a,l)=>{var i,n,r;i=e,r=l,S({type:"IsDraft",payload:n=t}),S({type:"EditOpen",payload:!1}),S({type:"EditIsDraft",payload:n}),Z(),S({type:"editData",payload:[i]}),S({type:"screenType",payload:r})},AddOpen:(e,t)=>((e,t)=>{S({type:"ShowDetail",payload:!0}),S({type:"PrimaryId",payload:e}),setTimeout((()=>{t&&x.current.AddOpen(e,t),a.current.viewlistProps(e,t)}),100)})(e,t),ShowTableDiv:()=>(S({type:"ShowDetail",payload:!1}),S({type:"ExpandTableValue",payload:!0}),v.current.tableRefresh(),document.getElementById("CCMTargetFixRegistry-MainTable").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("divCCMTargetFixRegistry-Entry").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("CCMTargetFixRegistry-MainTable").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainTable").style.display="block",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="0%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.display="none",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayGrid"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixRegistryTabDiv").style.width="100%",document.getElementById("CCMTargetFixRegistryFilterDiv").style.display="none",void(document.getElementById("CCMTargetFixRegistryFilterDiv").style.width="0%"))}},i().createElement("div",{id:"CCMTargetFixRegistry-MainDiv",className:"MainDivStyles displayFlex",style:{width:"100%"}},!M.ExpandTableValue&&i().createElement("div",{id:"CCMTargetFixRegistry-MainTable",className:"Maincontent"},0!==F?i().createElement(r.default,{ref:v}):null),i().createElement("div",{id:"CCMTargetFixRegistry-MainEntry",className:"Maincontent",style:{overflow:"auto",marginLeft:"0",height:"85vh"}},M.ShowDetail?i().createElement("div",{className:"displayFlex width100"},i().createElement("div",{id:"divCCMTargetFixRegistry-Entry",style:{width:"100%",display:"flex"}},i().createElement(o.default,{inboxdata:e.inboxdata,openDialog:(t,a)=>e.LevelComponentHTMLopenDialogAppr(t,a),parentId:M.PrimaryId,ref:a}),i().createElement("div",{style:{width:"70%"}},i().createElement(g.ZP,{ref:x,loading:t=>e.loading(t),alertmsg:t=>e.alertmsg(t),ConfirmAlert:t=>{e.ConfirmAlert(t)},data:M.editData,AddOpen:M.EditOpen,parentId:M.PrimaryId,IsDraft:M.EditIsDraft,openNav:t=>e.openNav(t),SlideComponentType:t=>e.SlideComponentType(t),IsCollapse:M.IsCollapse,openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t)})),i().createElement(c.Z,{ref:I,menurefID:329,fileId:"LogoImgCCMTargetFixRegistry",imgloading:e=>N(e),valueIDPK:M.PrimaryId,AttachmentVal:e=>u.current.AttachmentData(e),previd:"overlayPreviewCCMTargetFixRegistry",AccessRights:M.AccessRights,frmctrlid:"PvwIm_329_L3_",formCtrlIDSave:"attachsave1438",formCtrlIDClose:"attachclose1438",tempImg:e=>{M.PrimaryId?u.current.AttachmentData(M.PrimaryId):u.current.tempImg(e),b(e)},clearTempData:M.Add})),i().createElement(s.Z,{ImgAttachment:e=>O(),menurefID:329,fileId:"AttImgCCMTargetFixRegistry",imgid:"overlayimgAttCCMTargetFixRegistry",valueIDPK:M.PrimaryId,PriviewData:(e,t,a,l)=>{I.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewCCMTargetFixRegistry",ref:u,imgloading:h,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_329_L3_",timglist:e=>I.current.timglist(e)})):i().createElement("div",{className:"displayFlex width100"},i().createElement("div",{id:"divCCMTargetFixRegistry-Entry",style:{width:"100%"}},i().createElement(d.default,{inboxdata:e.inboxdata,ref:t,clrImgstate:e=>u.current.clrImgstate(e)}),i().createElement(g.ZP,{ref:x,Action:"none",loading:t=>e.loading(t),alertmsg:t=>e.alertmsg(t),ConfirmAlert:t=>{e.ConfirmAlert(t)},data:M.editData,AddOpen:M.EditOpen,parentId:M.PrimaryId,IsDraft:M.EditIsDraft,openNav:t=>e.openNav(t),SlideComponentType:t=>e.SlideComponentType(t),IsCollapse:M.IsCollapse,openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t)}),i().createElement(c.Z,{ref:I,menurefID:329,fileId:"LogoImgCCMTargetFixRegistry",imgloading:e=>N(e),valueIDPK:M.PrimaryId,AttachmentVal:e=>u.current.AttachmentData(e),previd:"overlayPreviewCCMTargetFixRegistry",FormCtrlIDSave:"attachsave1438",FormCtrlIDClose:"attachclose1438",tempImg:e=>{M.PrimaryId?u.current.AttachmentData(M.PrimaryId):u.current.tempImg(e),b(e)},clearTempData:M.Add})),i().createElement(s.Z,{ImgAttachment:e=>O(),menurefID:329,fileId:"AttImgCCMTargetFixRegistry",imgid:"overlayimgAttCCMTargetFixRegistry",valueIDPK:M.PrimaryId,PriviewData:(e,t,a,l)=>{I.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewCCMTargetFixRegistry",ref:u,imgloading:h,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_329_L3_",timglist:e=>I.current.timglist(e),clearTempData:M.Add}))),M.ExpandTableValue&&i().createElement("div",{id:"CCMTargetFixRegistry-MainTable",className:"Maincontent"},0!==F?i().createElement(r.default,{ref:v}):null)),A&&i().createElement(y(),{openDialog:A,closeDialog:e=>R(e),formID:329,PrimID:M.PrimaryId,alert:(e,t,a)=>{},loading:t=>{e.loading(t)}})))}},23108:(e,t,a)=>{a.r(t),a.d(t,{CCMTargetFixRegistryPopUpTable:()=>_,default:()=>V}),a(95866);var l=a(92950),i=a.n(l),n=a(45237),r=a(36939),o=a(61201),d=a(50743),s=a(59009),c=a(80366),m=a(51673),p=a(7589),C=a(54180),u=a(47516),y=a(39327),g=(a(14439),a(27848),a(42258),a(40900)),T=(a(83032),a(44117),a(56173)),D=a(43031),I=a(110),v=a(88995),x=a(5109),f=a(61657),F=a(868),E=a(24038),M=a(51209),S=a(8981),h=a(3212),N=a(86893),L=a(53854),b=a(51649),P=a(37106),B=a(5434),w=a(93521),A=a(8687),R=(a(79117),a(43319)),k=a(71168),Z=a.n(k),O=a(65107),G=a(79352),z=a(94986),K=a(15999);a(11557),window.clickFilter="";const V=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),k=((0,l.useRef)(null),(0,l.useRef)(null)),[V]=((0,n.useSelector)((e=>e.form)),(0,n.useDispatch)(),(0,l.useState)(localStorage.getItem("userid"))),[_]=(0,l.useState)("329"),[H,U]=(0,l.useState)(!1),[j,Y]=(0,l.useState)(!1),[q,W]=(0,l.useState)(0),[$,J]=(0,l.useState)(0),[Q,X]=(0,l.useState)(0),[ee,te]=(0,l.useState)({current:1,pageSize:100}),[ae,le]=(0,l.useState)(""),[ie,ne]=(0,l.useState)([]),[re,oe]=(0,l.useState)({val:"",column:""}),[de,se]=(0,l.useState)([]),[ce,me]=(0,l.useState)(!1),[pe,Ce]=(0,l.useState)(""),[ue,ye]=(0,l.useState)(""),[ge,Te]=(0,l.useState)(!1),[De,Ie]=(0,l.useState)(!1),[ve,xe]=(0,l.useState)([]),[fe,Fe]=(0,l.useState)([]),[Ee,Me]=(0,l.useState)([]),[Se,he]=(0,l.useState)(!1),Ne=(0,l.useContext)(e.context?e.context:T.CCMTargetFixRegistryContext),{cstate:Le,cdispatch:be}=e.ContextApi?e.ContextApi:(0,T.ContextApi)(),[Pe,Be]=(0,l.useState)({children:[{name:"CCMTargetFixRegistry",children:[]}]}),[we,Ae]=(0,l.useState)(!1);let Re={CCMTargetFixIDPK:"",CCMTargetFixCode:"",LocFixedBy:"",IsServiceRequest:"",LocResponseBy:"",LocAnalysedBy:"",IsDefault:"",IsDraft:"",Remarks:"",ContractID:"",LocalityID:"",PriorityID:"",BuildingID:"",LocalityGroupID:"",ServiceTypeID:"",CCMComplaintTypeID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractGroupID:"",ContractGroupCode:"",ContractGroupName:"",TaxID:"",TaxCode:"",TaxName:"",TaxValue:"",CustomerID:"",CustomerCode:"",CustomerName:"",ContractTypeID:"",ContractTypCode:"",ContractTypeName:"",ContractCategID:"",ContractCategCode:"",ContractCategName:"",ConPaymentTermsID:"",ConPaymentTermsName:"",ContractCode:"",ContractName:"",LocalityGroupCode:"",LocalityGroupName:"",CityID:"",CityCode:"",CityName:"",AdminLocalityTypeID:"",AdminLocalityTypeCode:"",AdminLocalityTypeName:"",LocalityCode:"",LocalityName:"",PriorityCode:"",PriorityName:"",ServiceTypCode:"",ServiceTypeName:"",CCMComplaintTypeCode:"",CCMComplaintTypeName:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[ke,Ze]=(0,l.useState)(Re),[Oe,Ge]=(0,l.useState)(Re),[ze,Ke]=(0,l.useState)(Re),[Ve,_e]=(0,l.useState)(Re),[He,Ue]=(0,l.useState)("asc"),[je,Ye]=(0,l.useState)(""),[qe,We]=(0,l.useState)(!1),[$e,Je]=(0,l.useState)(!0),[Qe,Xe]=(0,l.useState)(!0),[et,tt]=(0,l.useState)(!1),[at,lt]=(0,l.useState)(!0),[it,nt]=(0,l.useState)(0),[rt,ot]=(0,l.useState)({ContractName:"",LocalityGroupName:"",LocalityName:"",BuildingName:"",ServiceTypeName:"",CCMComplaintTypeName:"",PriorityName:"",LocResponseBy:"",LocAnalysedBy:"",LocFixedBy:"",CCMTargetFixCode:"",IsServiceRequest:""}),[dt,st]=(0,l.useState)(!1),[ct,mt]=(0,l.useState)([]),[pt,Ct]=(0,l.useState)(0),[ut,yt]=(0,l.useState)(0),[gt,Tt]=(0,l.useState)({current:1,pageSize:10}),[Dt,It]=(0,l.useState)([]),[vt,xt]=(0,l.useState)([]),[ft,Ft]=(0,l.useState)(!1),[Et]=(0,l.useState)(localStorage.getItem("Language")),[Mt]=(0,l.useState)(localStorage.getItem("Language")),[St,ht]=Z()("329"),[Nt,Lt]=(0,l.useState)({}),[bt,Pt]=(0,l.useState)({}),Bt=[{columns:Dt,data:ae}];let wt=(0,S.Z)();const At=e=>wt?.[e]?wt[e]:e,Rt=e=>Le.language?.[e]?Le.language[e]:e;(0,l.useEffect)((()=>{zt(St)}),[St]),(0,l.useEffect)((()=>{Le.token.length>0&&(Le.IsDraft?Ot(ee,Re,"DraftCCMTargetFixID"):Ot(ee,Re,"CCMTargetFixID"))}),[]),(0,l.useEffect)((()=>{De||Se||we||!pe?De?Ge(pe):Se?Ke(pe):we&&_e(pe):Le.IsDraft?Ot(ee,pe,"DraftCCMTargetFixID"):Ot(ee,pe,"CCMTargetFixID")}),[pe]),(0,l.useEffect)((()=>{!1===e.cardview&&lt(e.cardview),e.Dialogview&&Y(e.Dialogview)}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&Gt(e.searchsafaritext,{current:ee.current,pageSize:ee.pageSize})}),[e.searchsafaritext]),(0,l.useImperativeHandle)(t,(()=>({tableRefresh:()=>{kt()},viewrecord:e=>{de.map(((t,a)=>{t.CCMTargetFixIDPK==e&&be({type:"editData",payload:[de[a]]})}))}})));const kt=()=>{Le.IsDraft?Ot(ee,Re,"DraftCCMTargetFixID"):Ot(ee,Re,"CCMTargetFixID")};function Zt(e){Ne.loading(!0);let t=g.v.Api+"FP329S7/",a={data:{p1:"%%",p2:"0",p3:"0",p4:e.current,p5:e.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,m.Z)(t,a,Le.token[0]).then((t=>{if(200==t.Output.status.code){let a=0;t.Output.data.length>0?(a=parseFloat(t.Output.data[0].TotalCount,10)/10,yt(t.Output.data[0].TotalCount)):(a=0,Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Ne.loading(!1)),10==e.pageSize?Ct(Math.ceil(a)):20==e.pageSize?Ct(Math.ceil(a/2)):50==e.pageSize?Ct(Math.ceil(a/5)):100==e.pageSize&&Ct(Math.ceil(a/10)),mt(t.Output.data),Ne.loading(!1)}}))}const Ot=(e,t,a,l,i,n)=>{Ne.loading(!0),"DraftPage"!==l&&We(Le.IsDraft);let r=g.v.Api+"FP329S3/",o={data:{p1:i||(t&&t.CCMTargetFixIDPK?t.CCMTargetFixIDPK:null),p2:t&&t.CCMTargetFixCode?t.CCMTargetFixCode:null,p3:t&&t.LocFixedBy?t.LocFixedBy:null,p4:null,p5:t&&t.LocResponseBy?t.LocResponseBy:null,p6:t&&t.LocAnalysedBy?t.LocAnalysedBy:null,p7:null,p8:"DraftCCMTargetFixID"==a?"1":"0",p9:null,p10:t&&t.ContractID?t.ContractID:null,p11:t&&t.LocalityID?t.LocalityID:null,p12:t&&t.PriorityID?t.PriorityID:null,p13:t&&t.BuildingID?t.BuildingID:null,p14:t&&t.LocalityGroupID?t.LocalityGroupID:null,p15:t&&t.ServiceTypeID?t.ServiceTypeID:null,p16:t&&t.CCMComplaintTypeID?t.CCMComplaintTypeID:null,p17:t&&t.IsActive,p18:null,p19:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p20:t&&t.CreatedTtm?t.CreatedTtm:null,p21:t&&t.CreatedTtmType?t.CreatedTtmType:null,p22:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p23:null,p24:t&&t.ContractGroupID?t.ContractGroupID:null,p25:t&&t.ContractGroupCode?t.ContractGroupCode:null,p26:t&&t.ContractGroupName?t.ContractGroupName:null,p27:t&&t.TaxID?t.TaxID:null,p28:t&&t.TaxCode?t.TaxCode:null,p29:t&&t.TaxName?t.TaxName:null,p30:t&&t.TaxValue?t.TaxValue:null,p31:t&&t.CustomerID?t.CustomerID:null,p32:t&&t.CustomerCode?t.CustomerCode:null,p33:t&&t.CustomerName?t.CustomerName:null,p34:t&&t.ContractTypeID?t.ContractTypeID:null,p35:t&&t.ContractTypCode?t.ContractTypCode:null,p36:t&&t.ContractTypeName?t.ContractTypeName:null,p37:t&&t.ContractCategID?t.ContractCategID:null,p38:t&&t.ContractCategCode?t.ContractCategCode:null,p39:t&&t.ContractCategName?t.ContractCategName:null,p40:t&&t.ConPaymentTermsID?t.ConPaymentTermsID:null,p41:t&&t.ConPaymentTermsName?t.ConPaymentTermsName:null,p42:t&&t.ContractCode?t.ContractCode:null,p43:t&&t.ContractName?t.ContractName:null,p44:t&&t.LocalityGroupCode?t.LocalityGroupCode:null,p45:t&&t.LocalityGroupName?t.LocalityGroupName:null,p46:t&&t.CityID?t.CityID:null,p47:t&&t.CityCode?t.CityCode:null,p48:t&&t.CityName?t.CityName:null,p49:t&&t.AdminLocalityTypeID?t.AdminLocalityTypeID:null,p50:t&&t.AdminLocalityTypeCode?t.AdminLocalityTypeCode:null,p51:t&&t.AdminLocalityTypeName?t.AdminLocalityTypeName:null,p52:t&&t.LocalityCode?t.LocalityCode:null,p53:t&&t.LocalityName?t.LocalityName:null,p54:t&&t.PriorityCode?t.PriorityCode:null,p55:t&&t.PriorityName?t.PriorityName:null,p56:t&&t.ServiceTypCode?t.ServiceTypCode:null,p57:t&&t.ServiceTypeName?t.ServiceTypeName:null,p58:t&&t.CCMComplaintTypeCode?t.CCMComplaintTypeCode:null,p59:t&&t.CCMComplaintTypeName?t.CCMComplaintTypeName:null,p60:i?1:e.current,p61:e.pageSize,p62:a,p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}};(0,m.Z)(r,o,Le.token[0]).then((r=>{if(i)(0,A.m)(r,be,l,n,Ne,"CCMTargetFixIDPK");else if("200"==r.Output.status.code)if(r.Output.data.length>0){if(r.Output.data){let t=0;r.Output.data.length>0?(t=parseFloat(r.Output.data[0].TotalCount,10)/10,J(r.Output.data[0].TotalCount),be({type:"count",payload:r.Output.data[0].TotalCount}),X(r.Output.data[0].DraftCnt),"DraftPage"==l&&X(r.Output.data[0].TotalCount)):t=0,10==e.pageSize?W(Math.ceil(t)):20==e.pageSize?W(Math.ceil(t/2)):50==e.pageSize?W(Math.ceil(t/5)):100==e.pageSize&&W(Math.ceil(t/10)),Le.ExpandTableValue&&(Le.ExpandDetailValue?document.getElementById("CCMTargetFixRegistry-MainTable").style.display="block":(document.getElementById("CCMTargetFixRegistry-MainTable").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainEntry").style.width="100%",document.getElementById("CCMTargetFixRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMTargetFixRegistry-MainDiv").classList.add("displayGrid"))),se(r.Output.data),Ne.loading(!1),document.getElementById("divCCMTargetFixRegistry-Entry").style.height="auto"}}else Ne.loading(!1),"DraftCCMTargetFixID"===a?(Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Te(!0),We(!1)):(se([]),te({current:1,pageSize:10}),W(0),J(0),be({type:"count",payload:0}),Object.values(t).some((e=>e))&&Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else Ne.alert({open:!0,color:"warning",message:[r.Output.status.message]}),Ne.loading(!1)}))};function Gt(e,t){Ne.loading(!0);const a=g.v.Api+"FP329S4/",l={data:{p1:"%"+e+"%",p2:"0",p3:qe?"1":"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,m.Z)(a,l,Le.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,J(e.Output.data[0].TotalCount),be({type:"count",payload:e.Output.data[0].TotalCount})):a=0,10==t.pageSize?W(Math.ceil(a)):20==t.pageSize?W(Math.ceil(a/2)):50==t.pageSize?W(Math.ceil(a/5)):100==t.pageSize&&W(Math.ceil(a/10)),se(e.Output.data),Ne.loading(!1)}else se([]),W(0),J(0),be({type:"count",payload:0}),Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Ne.loading(!1);else Ne.alert({open:!0,color:"warning",message:[e.Output.status.message]}),Ne.loading(!1)}))}function zt(e){let t=[],a=[],l=[],i=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldDisplay&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let n=localStorage.getItem("Language");i.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[n]]})})),be({type:"language",payload:Object.assign({},...i)}),ot(a.reduce(((e,t)=>(e[t]="",e)),{})),xe(e),Fe(t),Me(a),It(l),xt(a)}const Kt=(e,t,a)=>{be({type:"IsDraft",payload:t}),be({type:"EditOpen",payload:!1}),be({type:"EditIsDraft",payload:t}),Ne.ExpandDetail(!1),a?Ne.AddOpen(e.CCMTargetFixIDPK,t):be({type:"editData",payload:[e]})},Vt=()=>{ce?(document.getElementById("CCMTargetFixRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("CCMTargetFixRegistryTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("CCMTargetFixRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",me(!1),De?(document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):at?Se?(document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMTargetFixRegistrycoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistrycoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("CCMTargetFixRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("CCMTargetFixRegistryTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("CCMTargetFixRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",me(!0),De?(document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):at?Se?(document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMTargetFixRegistrycoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistrycoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")),Te(!1),window.clickFilter=!ce};return i().createElement("div",null,i().createElement(r.Z,{expanded:$e,onChange:()=>()=>{Je(Qe)}},i().createElement(d.Z,null,i().createElement("div",{className:"padding displayFlex backgroundDark borderRadiusTop width100",style:{padding:"0.6rem"}},i().createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",height:"35px",alignItems:"center"}},i().createElement("div",{className:"displayFlex"},we||De||!qe?i().createElement("div",{className:"ListHeader displayFlex"},i().createElement("p",{className:"ListP",title:"10.0.0.59-3:08:17 PM-18-7[329]"},`${Rt("329")} (${$})`)):i().createElement("div",{className:"ListHeader displayFlex"},i().createElement(F.ZP,{title:"List",placement:"top"},i().createElement("div",{id:"fld329L3TCList",onClick:()=>{Qe||(be({type:"Add",payload:!0}),be({type:"Add",payload:!0})),Ne.clear();var e=document.getElementsByClassName("ClearIconbtn")[0];e?(e.click(),setTimeout((function(){Ot({current:1,pageSize:100},Re,"CCMTargetFixID"),We(!1),be({type:"IsDraft",payload:!1})}),500)):(Ot({current:1,pageSize:100},Re,"CCMTargetFixID"),We(!1),be({type:"IsDraft",payload:!1})),te({current:1,pageSize:100})}},i().createElement(b.u1R,{className:"backButtonList"}))),i().createElement("p",{className:"DraftP"},"Drafts(",$,")")))),i().createElement("div",{style:{display:"flex"}},De||Se||we?null:i().createElement("div",{className:"searchbar",id:"fld329L3TCSearchBar"},i().createElement(E.Z,{className:"search_input",type:"text",id:"CCMTargetFixRegistrygridsearch",placeholder:"Search",value:ue,onChange:e=>{if(ye(e),"0"==e.length)return Ot(ee,Re,qe?"DraftCCMTargetFixID":"CCMTargetFixID",qe&&"DraftPage"),!1;Gt(e,{current:1,pageSize:100})}}),i().createElement("div",{className:"search_icon"},ue?i().createElement("div",{id:"fld329L3TCCloseIcon",onClick:()=>{ye(""),kt()}},i().createElement(c.Z,{className:"InputSearchIcon"})):i().createElement("div",{id:"fld329L3TCInputSearchIcon",onClick:()=>{document.getElementById("CCMTargetFixRegistrygridsearch").focus()}},i().createElement(v.Z,{className:"InputSearchIcon"})))),i().createElement("div",{style:{marginLeft:"5px"}},Le.AccessRights.IsAdd&&i().createElement(h.Z,{className:"SaveBtnCommon",disabled:!1,onClick:()=>{Ne.ExpandDetail(!0),Ne.Approval(!1)}}))))),i().createElement(o.Z,{className:"AccDetails"},i().createElement("div",{className:"tableCard"},i().createElement("div",{id:"CCMTargetFixRegistry-HeaderItems",className:"displayFlex padding"},i().createElement("div",{className:"tableHeaderItems displayFlex"},!qe&&i().createElement("div",{frmctrlid:"fld329L3TCFilterDataIsDraft",id:"CCMTargetFixRegistryfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>Vt()},i().createElement(F.ZP,{title:At("Filter Data"),placement:"top"},i().createElement(u.Ol$,{className:"tableFilterColumnIcon"})),i().createElement("span",{className:"iconinfo"},At("Filter Data"))),j||De||we||qe?null:i().createElement(C.Z,{title:"329",formctrlidprint:"fld329L3TCExportPrint",formctrlidexport:"fld329L3TCExportTable",formctrlidrefresh:"fld329L3TCExportRefresh",data:ie,exportData:Bt,Items:vt,columnIndex:Dt,TableVisibleItem:fe,userGridViewFormID:_,TableTotalCount:$,triggerApi:e=>{((e,t,l,i,n)=>{if(0===$)return Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;Ne.loading(!0);let r=g.v.Api+"FP329S3/",o={data:{p1:e&&e.CCMTargetFixIDPK?e.CCMTargetFixIDPK:null,p2:e&&e.CCMTargetFixCode?e.CCMTargetFixCode:null,p3:e&&e.LocFixedBy?e.LocFixedBy:null,p4:null,p5:e&&e.LocResponseBy?e.LocResponseBy:null,p6:e&&e.LocAnalysedBy?e.LocAnalysedBy:null,p7:null,p8:qe?"1":"0",p9:null,p10:e&&e.ContractID?e.ContractID:null,p11:e&&e.LocalityID?e.LocalityID:null,p12:e&&e.PriorityID?e.PriorityID:null,p13:e&&e.BuildingID?e.BuildingID:null,p14:e&&e.LocalityGroupID?e.LocalityGroupID:null,p15:e&&e.ServiceTypeID?e.ServiceTypeID:null,p16:e&&e.CCMComplaintTypeID?e.CCMComplaintTypeID:null,p17:e&&e.IsActive,p18:null,p19:e&&e.CreatedUserID_varchar?e.CreatedUserID_varchar:null,p20:e&&e.CreatedTtm?e.CreatedTtm:null,p21:e&&e.CreatedTtmType?e.CreatedTtmType:null,p22:e&&e.CreatedTtmBetween?e.CreatedTtmBetween:null,p23:null,p24:e&&e.ContractGroupID?e.ContractGroupID:null,p25:e&&e.ContractGroupCode?e.ContractGroupCode:null,p26:e&&e.ContractGroupName?e.ContractGroupName:null,p27:e&&e.TaxID?e.TaxID:null,p28:e&&e.TaxCode?e.TaxCode:null,p29:e&&e.TaxName?e.TaxName:null,p30:e&&e.TaxValue?e.TaxValue:null,p31:e&&e.CustomerID?e.CustomerID:null,p32:e&&e.CustomerCode?e.CustomerCode:null,p33:e&&e.CustomerName?e.CustomerName:null,p34:e&&e.ContractTypeID?e.ContractTypeID:null,p35:e&&e.ContractTypCode?e.ContractTypCode:null,p36:e&&e.ContractTypeName?e.ContractTypeName:null,p37:e&&e.ContractCategID?e.ContractCategID:null,p38:e&&e.ContractCategCode?e.ContractCategCode:null,p39:e&&e.ContractCategName?e.ContractCategName:null,p40:e&&e.ConPaymentTermsID?e.ConPaymentTermsID:null,p41:e&&e.ConPaymentTermsName?e.ConPaymentTermsName:null,p42:e&&e.ContractCode?e.ContractCode:null,p43:e&&e.ContractName?e.ContractName:null,p44:e&&e.LocalityGroupCode?e.LocalityGroupCode:null,p45:e&&e.LocalityGroupName?e.LocalityGroupName:null,p46:e&&e.CityID?e.CityID:null,p47:e&&e.CityCode?e.CityCode:null,p48:e&&e.CityName?e.CityName:null,p49:e&&e.AdminLocalityTypeID?e.AdminLocalityTypeID:null,p50:e&&e.AdminLocalityTypeCode?e.AdminLocalityTypeCode:null,p51:e&&e.AdminLocalityTypeName?e.AdminLocalityTypeName:null,p52:e&&e.LocalityCode?e.LocalityCode:null,p53:e&&e.LocalityName?e.LocalityName:null,p54:e&&e.PriorityCode?e.PriorityCode:null,p55:e&&e.PriorityName?e.PriorityName:null,p56:e&&e.ServiceTypCode?e.ServiceTypCode:null,p57:e&&e.ServiceTypeName?e.ServiceTypeName:null,p58:e&&e.CCMComplaintTypeCode?e.CCMComplaintTypeCode:null,p59:e&&e.CCMComplaintTypeName?e.CCMComplaintTypeName:null,p60:ee.current,p61:$,p62:qe?"DraftCCMTargetFixID":"CCMTargetFixID",p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}};Ne.loading(!1),Ne.alert({open:!0,color:"success",message:[`${Rt(329)} - ${n.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,m.Z)(r,o,Le.token[0],n).then((e=>{(0,w.PDF_Excel_Generate)(e,Ne,vt,le,a,n)}))})(pe,re.column,0,0,e)},Refresh:()=>{ye(""),k.current.clearItem(),te({current:1,pageSize:100}),Le.IsDraft?Ot({current:1,pageSize:100},Re,"DraftCCMTargetFixID"):Ot({current:1,pageSize:100},Re,"CCMTargetFixID")},disabledPrint:!Le.AccessRights.IsPrint,disabledExport:!Le.AccessRights.IsExport,ref:a}),De||Se||we||!Qe?null:!qe&&Le.AccessRights.IsAdd&&i().createElement("div",{id:"CCMTargetFixRegistrycoldiv",className:"buttoncard",onClick:()=>{ge?(document.getElementById("CCMTargetFixRegistryFilterDiv").style.width="0%",document.getElementById("CCMTargetFixRegistryTabDiv").style.width="100%",document.getElementById("CCMTargetFixRegistryFilterDiv").style.display="none",document.getElementById("CCMTargetFixRegistrycoldiv").style.width="fit-content",document.getElementById("CCMTargetFixRegistrycoldiv").getElementsByTagName("svg")[0].style.padding="4px",Te(!1)):(document.getElementById("CCMTargetFixRegistryFilterDiv").style.width="25%",document.getElementById("CCMTargetFixRegistryTabDiv").style.width="75%",document.getElementById("CCMTargetFixRegistryFilterDiv").style.display="block",document.getElementById("CCMTargetFixRegistryfildiv").style.width="fit-content",document.getElementById("CCMTargetFixRegistryfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMTargetFixRegistrycoldiv").style.width="fit-content",document.getElementById("CCMTargetFixRegistrycoldiv").getElementsByTagName("svg")[0].style.padding="4px",Te(!0)),me(!1)}},i().createElement(F.ZP,{title:"{t('Manage Columns')}",placement:"top"},i().createElement("span",null,i().createElement(y.gYA,{className:"tableFilterColumnIcon",frmctrlid:"fld329L3TCFilterDataIsAdd"}))),i().createElement("span",{className:"iconinfo"},At("Manage Columns"))),!qe&&H&&!De&&!we&&!j&&Qe&&i().createElement("div",{id:"fld329L3TCExpMigSlide",className:"buttoncard",onClick:()=>MigrationSlide()},i().createElement(F.ZP,{title:At("Migration"),placement:"top"},i().createElement("span",null,i().createElement(G.ncH,{className:"tableFilterColumnIcon"}))),i().createElement("span",{className:"iconinfo"},At("Migration"))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!j&&Qe&&!we&&!De&&!qe&&i().createElement("div",null,i().createElement("div",{id:"CCMTargetFixRegistrycoldiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{dt?st(!1):(st(!0),Zt({current:1,pageSize:100}))}},i().createElement("div",{id:"fld329L3TCTableScrollData"},i().createElement(F.ZP,{title:At("Table Scroll Data"),placement:"top"},i().createElement(K.Z,{className:"tableFilterColumnIcon"}))),i().createElement("span",{className:"iconinfo"},At("Table Scroll Data")))),Le.AccessRights.IsAdd&&!we&&!De&&!qe&&i().createElement(s.Z,{color:"secondary",className:"badge",max:999,badgeContent:Q,showZero:!0},i().createElement("div",{className:"buttoncard",style:{marginLeft:"-10px"},onClick:()=>{if(Q>0){nt(0),te({current:1,pageSize:100}),Qe||(be({type:"Add",payload:!0}),be({type:"Add",payload:!0})),Ne.clear();var e=document.getElementsByClassName("ClearIconbtn")[0];e?(e.click(),setTimeout((function(){Ot({current:1,pageSize:100},Re,"DraftCCMTargetFixID"),We(!0),be({type:"IsDraft",payload:!0}),Te(!1),lt(!0),Ie(!1),he(!1)}),500)):(Ot({current:1,pageSize:100},Re,"DraftCCMTargetFixID"),We(!0),be({type:"IsDraft",payload:!0}),Te(!1),lt(!0),Ie(!1),he(!1)),document.getElementById("CCMTargetFixRegistryFilterDiv").style.width="0%",document.getElementById("CCMTargetFixRegistryTabDiv").style.width="100%",document.getElementById("CCMTargetFixRegistryFilterDiv").style.display="none"}else Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]})}},i().createElement(F.ZP,{title:At("Drafts"),placement:"top"},i().createElement("div",null,i().createElement(P.rNm,{className:"DraftIcon"}))),i().createElement("span",{className:"iconinfoDraft",style:{fontSize:"0.815rem",fontWeight:"500",color:"#14181F"}},At("Drafts"))))),De||Se||we||qe?null:i().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},we||qe?null:i().createElement("div",null,Qe&&i().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"},formctrlid:"listcard3"},i().createElement("div",{className:"b2",id:"button-11"},i().createElement("div",{id:"fld329L3TCListView",className:at?"buttonList":"buttonGrid",onClick:()=>{me(!0),lt(!0),Ft(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},i().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},i().createElement(L.umT,null)),i().createElement("span",null,"List")),i().createElement("div",{id:"fld329L3TCGridView",className:at||ft?"buttonGrid":"buttonList",onClick:()=>{lt(!1),Ft(!1)}},i().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},i().createElement(N.aCJ,null)),i().createElement("span",null,"Card")),i().createElement("div",{className:ft?"buttonList":"buttonGrid",id:"fld329L3TCTileView",onClick:()=>{Ft(!0),lt(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},i().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},i().createElement(B.f_H,null)),i().createElement("span",null,"Tile"))))))),i().createElement("div",{id:"CCMTargetFixRegistry-TableBody",className:"displayFlex padding0",style:{height:"66vh",overflow:"auto"}},i().createElement("div",{id:"CCMTargetFixRegistryFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},ce&&i().createElement(p.default,{CloseBtnClk:()=>Vt(),searchData:e=>{Ce(e||Nt);const t=Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)));Pt(t)},formID:_,data:()=>{},visibleData:()=>{},token:Le.token[0],userGrid:St,msg:(e,t)=>Ne.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{kt()}}),ge&&!De&&!Se&&i().createElement(x.Z,{frmctrlid:"fld329L3TCTableColumnOrder",loading:e=>Ne.loading(e),AltMsg:(e,t)=>Ne.alert({open:!0,color:t,message:[e]}),select:ge,userID:V,userGridViewFormID:_,saved:(e,t)=>{e&&zt(t),ht(t)},Token:Le.token[0]})),i().createElement("div",{id:"CCMTargetFixRegistryTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:"66vh"}},at?i().createElement("div",null,De&&i().createElement(ListComponent,{onLoad:De,data:(e,t)=>{!function(e,t){be({type:"editData",payload:[e]}),me(!1),document.getElementById("CCMTargetFixRegistry-TabView").classList.add("ViewBtnAct"),document.getElementById("CCMTargetFixRegistry-GridView").classList.remove("ViewBtnAct"),document.getElementById("CCMTargetFixRegistry-ShareView").classList.remove("ViewBtnAct"),Ie(!1),he(!1),Ae(!1);let a={ContractID:"",LocalityGroupID:"",LocalityID:"",BuildingID:"",ServiceTypeID:"",CCMComplaintTypeID:"",PriorityID:"",LocResponseBy:"",LocAnalysedBy:"",LocFixedBy:"",CCMTargetFixCode:"",IsServiceRequest:""};Ze(a),Ot({current:1,pageSize:100},a,"CCMTargetFixID")}(e)},json:Oe}),!De&&!we&&i().createElement("div",null,dt?i().createElement(z.Z,{data:ct,expanded:()=>{},edit:(e,t,a)=>{Kt(e,t,a),Ne.ExpandTable(!1),be({type:"EditIsDraft",payload:t}),be({type:"EditOpen",payload:!1})}}):i().createElement(O.Z,{ref:k,frmctrlid:"tblcs_329_L3_",id:"CCMTargetFixRegistry-MainTable",headerdata:fe,tablesearchparams:rt,searchvalue:e=>{ot(e),Ce(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...bt};Lt(t),te({current:1,pageSize:10}),Ot({current:1,pageSize:10},t,qe?"DraftCCMTargetFixID":"CCMTargetFixID",qe&&"DraftPage")},bodydata:de,ondrag:(e,t)=>{Kt(t,qe,!0)},bodyitem:Ee,visibleitem:fe,isdraft:qe,IsView:!0,IsEditNone:!0,tableExp:!0,tableID:_,accessrights:Le.AccessRights,expanded:()=>{},edit:(e,t,a)=>{Object.keys(e).map(((l,i)=>{l.includes("IDPK")&&Ot(ee,null,t?"DraftCCMTargetFixID":"CCMTargetFixID",t&&"DraftPage",e[l],a)}))},viewtoggle:Ne.viewtoggle,isexpanded:!0,ViewComp:(e,t)=>{if(e)return i().createElement(R.ZP,{loading:e=>Ne.loading(e),alertmsg:e=>Ne.alert(e),ConfirmAlert:e=>{Ne.ConfirmAlert(e)},data:Le.editData,AddOpen:Le.EditOpen,parentId:t.CCMTargetFixIDPK,IsDraft:Le.EditIsDraft,tableview:e})}}))):i().createElement(M.Z,{frmctrlid:"fld329L3TCExpandedCardDual",data:de,id:"CCMTargetFixRegistry",title:"Location Wise SLA-TAT",cardTile:!!ft,visibleitem:fe,gridCountmdlg:Qe?4:12,gridCountxssm:Qe?6:12,expanded:()=>{},edit:Kt,viewtoggle:Ne.viewtoggle,onDoubleClick:(e,t)=>{j?Ne.select(e):("edit"==t?(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:qe}),be({type:"ShowDetail",payload:!1}),Ne.ExpandDetail(!0)):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:qe}),be({type:"ShowDetail",payload:!0}),Ne.ExpandDetail(!0),Ne.viewtoggle()),Qe&&(me(!1),Te(!1)))}})))))),De||Se||we?null:Qe?dt?i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(D.Z,{count:pt,color:"primary",page:gt.current,onChange:(e,t)=>{Tt({current:t,pageSize:gt.pageSize}),Ct(t),Zt({current:t,pageSize:gt.pageSize})}}),i().createElement("div",null,i().createElement(I.Z,{value:gt.pageSize,frmctrlid:"fld329L3TCSelectPagination",onChange:e=>{Tt({current:1,pageSize:e.target.value}),Zt({current:1,pageSize:e.target.value})},className:"BootstrapInputStyle2"},i().createElement("option",{value:10},"10"),i().createElement("option",{value:20},"20"),i().createElement("option",{value:50},"50"),i().createElement("option",{value:100},"100"))),Qe&&i().createElement("p",{className:"per-page"},"/ per page Of (",ut,")")):i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(D.Z,{count:q,siblingCount:0,color:"primary",page:ee.current,onChange:(e,t)=>{if(te({current:t,pageSize:ee.pageSize}),qe)Ot({current:t,pageSize:ee.pageSize},pe,"DraftCCMTargetFixID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";ue.length>0?Gt(ue,{current:t,pageSize:ee.pageSize}):Ot({current:t,pageSize:ee.pageSize},pe,"CCMTargetFixID")}}}),i().createElement("div",null,i().createElement(I.Z,{value:ee.pageSize,frmctrlid:"fld329L3TCSelectPagination",onChange:e=>{te({current:1,pageSize:e.target.value}),qe?Ot({current:1,pageSize:e.target.value},ke,"DraftCCMTargetFixID","DraftPage"):ue.length>0?Gt(ue,{current:1,pageSize:e.target.value}):Ot({current:1,pageSize:e.target.value},ke,"CCMTargetFixID")},className:"BootstrapInputStyle2"},i().createElement("option",{value:10},"10"),i().createElement("option",{value:20},"20"),i().createElement("option",{value:50},"50"),i().createElement("option",{value:100},"100"))),Qe&&i().createElement("p",{className:"per-page "},"/ per page Of (",$,") ")):i().createElement("div",{style:{position:"absolute",right:"0%",display:"flex",marginTop:"-7px"}},i().createElement(f.Z,{style:{color:"#777"},rowsPerPageOptions:[],component:"div",count:Number($),page:it,onPageChange:(e,t)=>{nt(t),Ot({current:t+1,pageSize:ee.pageSize},Re,qe?"DraftCCMTargetFixID":"CCMTargetFixID",qe&&"DraftPage"),te({current:t+1,pageSize:ee.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onRowsPerPageChange:e=>{nt(0)}})))})),_=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),s=(0,l.useRef)(null),c=(0,l.useRef)(null),[p]=((0,n.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[u,y]=Z()("329"),[v,x]=(0,l.useState)(!1),[f,F]=(0,l.useState)(0),[E,M]=(0,l.useState)(0),[h,N]=(0,l.useState)({current:1,pageSize:100}),[L,b]=(0,l.useState)(""),[P,B]=(0,l.useState)([]),[A,R]=(0,l.useState)({val:"",column:""}),[k,G]=(0,l.useState)([]),[z,K]=(0,l.useState)(!1),[V,_]=(0,l.useState)(""),[H,U]=(0,l.useState)([]),[j,Y]=(0,l.useState)([]),[q,W]=(0,l.useState)([]),$=(0,l.useContext)(T.CCMTargetFixRegistryContext),{cstate:J,cdispatch:Q}=(0,T.ContextApi)();let X={CCMTargetFixIDPK:"",CCMTargetFixCode:"",LocFixedBy:"",IsServiceRequest:"",LocResponseBy:"",LocAnalysedBy:"",IsDefault:"",IsDraft:"",Remarks:"",ContractID:"",LocalityID:"",PriorityID:"",BuildingID:"",LocalityGroupID:"",ServiceTypeID:"",CCMComplaintTypeID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractGroupID:"",ContractGroupCode:"",ContractGroupName:"",TaxID:"",TaxCode:"",TaxName:"",TaxValue:"",CustomerID:"",CustomerCode:"",CustomerName:"",ContractTypeID:"",ContractTypCode:"",ContractTypeName:"",ContractCategID:"",ContractCategCode:"",ContractCategName:"",ConPaymentTermsID:"",ConPaymentTermsName:"",ContractCode:"",ContractName:"",LocalityGroupCode:"",LocalityGroupName:"",CityID:"",CityCode:"",CityName:"",AdminLocalityTypeID:"",AdminLocalityTypeCode:"",AdminLocalityTypeName:"",LocalityCode:"",LocalityName:"",PriorityCode:"",PriorityName:"",ServiceTypCode:"",ServiceTypeName:"",CCMComplaintTypeCode:"",CCMComplaintTypeName:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[ee,te]=(0,l.useState)(!1),[ae,le]=(0,l.useState)(!0),[ie,ne]=(0,l.useState)(!1),[re,oe]=(0,l.useState)(!0),[de,se]=(0,l.useState)(0),[ce,me]=(0,l.useState)({ContractName:"",LocalityGroupName:"",LocalityName:"",BuildingName:"",ServiceTypeName:"",CCMComplaintTypeName:"",PriorityName:"",LocResponseBy:"",LocAnalysedBy:"",LocFixedBy:"",CCMTargetFixCode:"",IsServiceRequest:""}),[pe,Ce]=(0,l.useState)([]),[ue,ye]=(0,l.useState)([]),[ge,Te]=(0,l.useState)([]),[De,Ie]=(0,l.useState)(!1),[ve,xe]=(0,l.useState)("");let fe=(0,S.Z)();const Fe=[{columns:pe,data:L}];(0,l.useEffect)((()=>{!function(e){let t=[],a=[],l=[],i=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldDisplay&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let n=localStorage.getItem("Language");i.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[n]]})})),Q({type:"language",payload:Object.assign({},...i)}),me(a.reduce(((e,t)=>(e[t]="",e)),{})),U(e),Y(t),W(a),Ce(l),ye(a)}(u)}),[u]),(0,l.useImperativeHandle)(t,(()=>({tableRefresh:()=>{Ee()},viewrecord:e=>{k.map(((t,a)=>{t.CCMTargetFixIDPK==e&&Q({type:"editData",payload:[k[a]]})}))},DialogTableProps:e=>{x(e)},searchData:(t,a,l)=>{$.loading(!0),s.current&&s.current.clearItem(),xe(l),N({current:1,pageSize:10}),X=e.ApiParamType.params,Me({current:1,pageSize:100},a,l),c.current&&c.current.clearItem()}}))),(0,l.useEffect)((()=>{!1===e.cardview&&oe(e.cardview),e.Dialogview&&x(e.Dialogview)}),[e.cardview,e.Dialogview]);const Ee=()=>{J.IsDraft?Me(h,X,"DraftCCMTargetFixID"):Me(h,X,"CCMTargetFixID")},Me=async(t,a,l,i)=>{if(J.token[0]){if($.loading(!0),"DraftPage"!==i&&te(J.IsDraft),await xe((e=>(l=e,e))),a&&Object.keys(a).length>0){let e=Object.keys(a),t={},l=[],i=Object.values(a);e.map((e=>{l.push(e.split("_")[0])}));for(let e=0;e<l.length;e++)t[l[e]]=i[e];a=t}_(a);let n=g.v.Api+`${e.ApiType}/`,r={data:{p1:a&&a.CCMTargetFixIDPK?a.CCMTargetFixIDPK:null,p2:a&&a.CCMTargetFixCode?a.CCMTargetFixCode:null,p3:a&&a.LocFixedBy?a.LocFixedBy:null,p4:null,p5:a&&a.LocResponseBy?a.LocResponseBy:null,p6:a&&a.LocAnalysedBy?a.LocAnalysedBy:null,p7:null,p8:"DraftCCMTargetFixID"==l?"1":"0",p9:null,p10:a&&a.ContractID?a.ContractID:null,p11:a&&a.LocalityID?a.LocalityID:null,p12:a&&a.PriorityID?a.PriorityID:null,p13:a&&a.BuildingID?a.BuildingID:null,p14:a&&a.LocalityGroupID?a.LocalityGroupID:null,p15:a&&a.ServiceTypeID?a.ServiceTypeID:null,p16:a&&a.CCMComplaintTypeID?a.CCMComplaintTypeID:null,p17:a&&a.IsActive,p18:null,p19:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p20:a&&a.CreatedTtm?a.CreatedTtm:null,p21:a&&a.CreatedTtmType?a.CreatedTtmType:null,p22:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p23:null,p24:a&&a.ContractGroupID?a.ContractGroupID:null,p25:a&&a.ContractGroupCode?a.ContractGroupCode:null,p26:a&&a.ContractGroupName?a.ContractGroupName:null,p27:a&&a.TaxID?a.TaxID:null,p28:a&&a.TaxCode?a.TaxCode:null,p29:a&&a.TaxName?a.TaxName:null,p30:a&&a.TaxValue?a.TaxValue:null,p31:a&&a.CustomerID?a.CustomerID:null,p32:a&&a.CustomerCode?a.CustomerCode:null,p33:a&&a.CustomerName?a.CustomerName:null,p34:a&&a.ContractTypeID?a.ContractTypeID:null,p35:a&&a.ContractTypCode?a.ContractTypCode:null,p36:a&&a.ContractTypeName?a.ContractTypeName:null,p37:a&&a.ContractCategID?a.ContractCategID:null,p38:a&&a.ContractCategCode?a.ContractCategCode:null,p39:a&&a.ContractCategName?a.ContractCategName:null,p40:a&&a.ConPaymentTermsID?a.ConPaymentTermsID:null,p41:a&&a.ConPaymentTermsName?a.ConPaymentTermsName:null,p42:a&&a.ContractCode?a.ContractCode:null,p43:a&&a.ContractName?a.ContractName:null,p44:a&&a.LocalityGroupCode?a.LocalityGroupCode:null,p45:a&&a.LocalityGroupName?a.LocalityGroupName:null,p46:a&&a.CityID?a.CityID:null,p47:a&&a.CityCode?a.CityCode:null,p48:a&&a.CityName?a.CityName:null,p49:a&&a.AdminLocalityTypeID?a.AdminLocalityTypeID:null,p50:a&&a.AdminLocalityTypeCode?a.AdminLocalityTypeCode:null,p51:a&&a.AdminLocalityTypeName?a.AdminLocalityTypeName:null,p52:a&&a.LocalityCode?a.LocalityCode:null,p53:a&&a.LocalityName?a.LocalityName:null,p54:a&&a.PriorityCode?a.PriorityCode:null,p55:a&&a.PriorityName?a.PriorityName:null,p56:a&&a.ServiceTypCode?a.ServiceTypCode:null,p57:a&&a.ServiceTypeName?a.ServiceTypeName:null,p58:a&&a.CCMComplaintTypeCode?a.CCMComplaintTypeCode:null,p59:a&&a.CCMComplaintTypeName?a.CCMComplaintTypeName:null,p60:t.current,p61:t.pageSize,p62:l,p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}};(0,m.Z)(n,r,J.token[0]).then((e=>{if($.loading(!1),"200"==e.Output.status.code)if(e.Output.data.length>0){if(e.Output.data){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,M(e.Output.data[0].TotalCount?e.Output.data[0].TotalCount:e.Output.data.length),Q({type:"count",payload:e.Output.data[0].TotalCount})):a=0,10==t.pageSize?F(Math.ceil(a)):20==t.pageSize?F(Math.ceil(a/2)):50==t.pageSize?F(Math.ceil(a/5)):100==t.pageSize&&F(Math.ceil(a/10)),G(e.Output.data)}}else $.alert({open:!0,color:"warning",message:[(a="There is no Record Found",fe?.[a]?fe[a]:a)]}),G([]),F(0),M(0),Q({type:"count",payload:0});var a}))}};return(0,l.useEffect)((()=>{ne(J.ExpandTableValue)}),[J.ExpandTableValue]),i().createElement("div",null,i().createElement(r.Z,{expanded:ae,onChange:()=>()=>{le(ie)}},i().createElement(d.Z,null,i().createElement("div",{className:"padding displayFlex backgroundDark borderRadiusTop width100"},i().createElement("div",{style:{width:"60%"}},i().createElement("div",{className:"displayFlex"},i().createElement("div",{className:"ListHeader displayFlex"},i().createElement("p",{className:"ListP"}," ",e.CardName," (",E,")")))))),i().createElement(o.Z,{className:"AccDetails"},i().createElement("div",{className:"tableCard"},i().createElement("div",{id:"CCMTargetFixRegistry-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:i().createElement("div",{className:"tableHeaderItems displayFlex"},i().createElement(C.Z,{formctrlidprint:"fld329L3TCExportPrint",formctrlidexport:"fld329L3TCExportTable",formctrlidrefresh:"fld329L3TCExportRefresh",title:"329",data:P,exportData:Fe,Items:ue,columnIndex:pe,triggerApi:t=>{((t,l,i)=>{if(0===E)return $.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;$.loading(!0);let n=g.v.Api+`${e.ApiType}/`,r={data:{p1:t||(t&&t.CCMTargetFixIDPK?t.CCMTargetFixIDPK:null),p2:t&&t.CCMTargetFixCode?t.CCMTargetFixCode:null,p3:t&&t.LocFixedBy?t.LocFixedBy:null,p4:null,p5:t&&t.LocResponseBy?t.LocResponseBy:null,p6:t&&t.LocAnalysedBy?t.LocAnalysedBy:null,p7:null,p8:ee?"1":"0",p9:null,p10:t&&t.ContractID?t.ContractID:null,p11:t&&t.LocalityID?t.LocalityID:null,p12:t&&t.PriorityID?t.PriorityID:null,p13:t&&t.BuildingID?t.BuildingID:null,p14:t&&t.LocalityGroupID?t.LocalityGroupID:null,p15:t&&t.ServiceTypeID?t.ServiceTypeID:null,p16:t&&t.CCMComplaintTypeID?t.CCMComplaintTypeID:null,p17:t&&t.IsActive,p18:null,p19:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p20:t&&t.CreatedTtm?t.CreatedTtm:null,p21:t&&t.CreatedTtmType?t.CreatedTtmType:null,p22:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p23:null,p24:t&&t.ContractGroupID?t.ContractGroupID:null,p25:t&&t.ContractGroupCode?t.ContractGroupCode:null,p26:t&&t.ContractGroupName?t.ContractGroupName:null,p27:t&&t.TaxID?t.TaxID:null,p28:t&&t.TaxCode?t.TaxCode:null,p29:t&&t.TaxName?t.TaxName:null,p30:t&&t.TaxValue?t.TaxValue:null,p31:t&&t.CustomerID?t.CustomerID:null,p32:t&&t.CustomerCode?t.CustomerCode:null,p33:t&&t.CustomerName?t.CustomerName:null,p34:t&&t.ContractTypeID?t.ContractTypeID:null,p35:t&&t.ContractTypCode?t.ContractTypCode:null,p36:t&&t.ContractTypeName?t.ContractTypeName:null,p37:t&&t.ContractCategID?t.ContractCategID:null,p38:t&&t.ContractCategCode?t.ContractCategCode:null,p39:t&&t.ContractCategName?t.ContractCategName:null,p40:t&&t.ConPaymentTermsID?t.ConPaymentTermsID:null,p41:t&&t.ConPaymentTermsName?t.ConPaymentTermsName:null,p42:t&&t.ContractCode?t.ContractCode:null,p43:t&&t.ContractName?t.ContractName:null,p44:t&&t.LocalityGroupCode?t.LocalityGroupCode:null,p45:t&&t.LocalityGroupName?t.LocalityGroupName:null,p46:t&&t.CityID?t.CityID:null,p47:t&&t.CityCode?t.CityCode:null,p48:t&&t.CityName?t.CityName:null,p49:t&&t.AdminLocalityTypeID?t.AdminLocalityTypeID:null,p50:t&&t.AdminLocalityTypeCode?t.AdminLocalityTypeCode:null,p51:t&&t.AdminLocalityTypeName?t.AdminLocalityTypeName:null,p52:t&&t.LocalityCode?t.LocalityCode:null,p53:t&&t.LocalityName?t.LocalityName:null,p54:t&&t.PriorityCode?t.PriorityCode:null,p55:t&&t.PriorityName?t.PriorityName:null,p56:t&&t.ServiceTypCode?t.ServiceTypCode:null,p57:t&&t.ServiceTypeName?t.ServiceTypeName:null,p58:t&&t.CCMComplaintTypeCode?t.CCMComplaintTypeCode:null,p59:t&&t.CCMComplaintTypeName?t.CCMComplaintTypeName:null,p60:1,p61:E,p62:ve,p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}};var o;$.loading(!1),$.alert({open:!0,color:"success",message:[`${o="329",J.language?.[o]?J.language[o]:o} - ${i.alertName}, Once you have downloaded the file, you will be notified`]}),(0,m.Z)(n,r,J.token[0],i).then((e=>{(0,w.PDF_Excel_Generate)(e,$,ue,b,a,i)}))})(V,A.column,t)},TableVisibleItem:j,userGridViewFormID:"329",TableTotalCount:E,Refresh:()=>{Me({current:1,pageSize:100},V,ve),N({current:1,pageSize:100}),c.current&&c.current.clearItem(),s.current&&s.current.clearItem()},disabledPrint:!J.AccessRights.IsPrint,disabledExport:!J.AccessRights.IsExport,ref:a})),i().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},i().createElement(D.Z,{count:f,siblingCount:0,color:"primary",page:h.current,onChange:(e,t)=>{if(N({current:t,pageSize:h.pageSize}),ee)Me({current:t,pageSize:h.pageSize},V,"DraftCCMTargetFixID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";Me({current:t,pageSize:h.pageSize},V,"CCMTargetFixID")}}}),i().createElement("div",null,i().createElement(I.Z,{value:h.pageSize,onChange:e=>{N({current:1,pageSize:e.target.value}),Me({current:1,pageSize:e.target.value},V,"CCMTargetFixID")},className:"BootstrapInputStyle2"},i().createElement("option",{value:10},"10"),i().createElement("option",{value:20},"20"),i().createElement("option",{value:50},"50"),i().createElement("option",{value:100},"100"))),ie&&i().createElement("p",{className:"per-page"},"/ per page Of (",E,")"))),i().createElement("div",{id:"CCMTargetFixRegistry-TableBodyPopUp",className:"displayFlex padding0",style:{height:"61vh",overflow:"auto"}},i().createElement("div",{id:"CCMTargetFixRegistryTabDivPopUp",style:{width:"100%",position:"relative",height:"61vh"}},"MultiSelect"==e.Cardtype?i().createElement(MUITableMulti,{ref:c,type:e.viewtype,id:"CCMTargetFixRegistry",headerdata:j,tablesearchparams:ce,searchvalue:e=>{me(e),N({current:1,pageSize:100}),Me({current:1,pageSize:100},e,ee?"DraftCCMTargetFixID":"CCMTargetFixID",ee&&"DraftPage")},bodydata:k,ondrag:(e,t)=>{Q({type:"editData",payload:[t]}),Q({type:"IsDraft",payload:ee}),Q({type:"ShowDetail",payload:!0})},bodyitem:q,visibleitem:j,isdraft:ee,accessrights:J.AccessRights,expanded:()=>{},edit:(t,a,l)=>{v?$.select(t):(e.editdata(t,"view"),"viewonly"==e.viewtype?$.edit(t,a,l):$.edit(t,a,!1))},viewtoggle:()=>{},IsSub:e.IsSub,multi:!0,showData:!0,multiselect:e=>{G(e)},color:!0,isexpanded:!1}):i().createElement(O.Z,{frmctrlid:"tblcs_329_L3_",ref:s,id:"CCMTargetFixRegistryTable",type:e.viewtype,headerdata:j,tablesearchparams:ce,searchvalue:e=>{let t={...V,...e};me(e),_(t),N({current:1,pageSize:100}),Me(h,t,ve)},bodydata:k,ondrag:(e,t)=>{Q({type:"editData",payload:[t]}),Q({type:"IsDraft",payload:ee}),Q({type:"ShowDetail",payload:!0})},bodyitem:q,visibleitem:j,isdraft:ee,accessrights:J.AccessRights,expanded:()=>{},edit:(t,a,l)=>{v?$.select(t):(e.editdata(t,"view"),$.edit(t,a,1!=t.Entry))},viewtoggle:$.viewtoggle,IsSub:e.IsSub})))))))}))},7589:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A}),a(95866),a(99058);var l=a(92950),i=a.n(l),n=a(80366),r=a(51673),o=a(282),d=a(868),s=a(78513),c=a(14439),m=a(27848),p=a(40900),C=a(64059),u=a(24038),y=a(8981),g=a(47516),T=a(86893),D=a(56173),I=a(33681),v=a(63163),x=(a(35131),a(61956),a(93657)),f=a(53375),F=a(52663),E=a(66083),M=a(29525),S=a(66856),h=a(39803),N=a(99940),L=a(17149),b=a(62810),P=a(30553),B=a(92381),w=a(25108);const A=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[A,R]=(0,l.useState)([]),[k,Z]=(0,l.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[O,G]=(0,l.useState)(""),[z,K]=(0,l.useState)({}),[V,_]=(0,l.useState)(!0),[H,U]=(0,l.useState)(!1),{cstate:j,cdispatch:Y}=e.ContextApi?e.ContextApi:(0,D.ContextApi)(),[q,W]=(0,l.useState)(1),[$,J]=(0,l.useState)(0),[Q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)({}),[ae,le]=(0,l.useState)([]),[ie,ne]=(0,l.useState)(!0),[re,oe]=(0,l.useState)(!1),[de,se]=(0,l.useState)(""),[ce,me]=(0,l.useState)(!1),[pe,Ce]=(0,l.useState)(!1),[ue,ye]=(0,l.useState)(!1),[ge,Te]=(0,l.useState)(""),De=(0,l.useRef)(null),[Ie,ve]=(0,l.useState)({});let xe=localStorage.getItem("Language");const fe={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let Fe=(0,y.Z)();const Ee=e=>Fe[e]?Fe[e]:e,Me=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[fe[xe]];function Se(){K({}),te({}),e.searchData({}),U(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const a=e.userGrid.reduce(((e,t)=>{const a=t.FieldName;return t.IsForeign&&(e[a]||(e[a]=[]),e[a].push(t.FieldDisplay)),e}),{});ve(a),le(t)}),[]),(0,l.useEffect)((()=>()=>{De.current&&De.current.abort()}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Se()}})));const he=async(t,a,l,i)=>{X(!0);try{De.current&&De.current.abort();const n=new AbortController;De.current=n;let o="",d=[],s={};await Z((e=>(o=e.name,e))),await K((e=>(d=e,e))),await te((e=>(s=e,e)));const c=p.v.Api+"FP329S3/",m={data:{p1:"CCMTargetFixIDPK"==a?null:await Be(),p2:"CCMTargetFixCode"==o&&l.length>0?"%"+l+"%":null,p3:"LocFixedBy"==o&&l.length>0?"%"+l+"%":null,p4:"IsServiceRequest"==o&&l.length>0?"%"+l+"%":null,p5:"LocResponseBy"==o&&l.length>0?"%"+l+"%":null,p6:"LocAnalysedBy"==o&&l.length>0?"%"+l+"%":null,p7:null,p8:null,p9:null,p10:"ContractName"!=o&&d.ContractName?d.ContractName.map((e=>e.ContractIDPK)).toString():null,p11:"LocalityName"!=o&&d.LocalityName?d.LocalityName.map((e=>e.LocalityIDPK)).toString():null,p12:"PriorityName"!=o&&d.PriorityName?d.PriorityName.map((e=>e.PriorityIDPK)).toString():null,p13:"BuildingName"!=o&&d.BuildingName?d.BuildingName.map((e=>e.BuildingIDPK)).toString():null,p14:"LocalityGroupName"!=o&&d.LocalityGroupName?d.LocalityGroupName.map((e=>e.LocalityGroupIDPK)).toString():null,p15:"ServiceTypeName"!=o&&d.ServiceTypeName?d.ServiceTypeName.map((e=>e.ServiceTypeIDPK)).toString():null,p16:"CCMComplaintTypeName"!=o&&d.CCMComplaintTypeName?d.CCMComplaintTypeName.map((e=>e.CCMComplaintTypeIDPK)).toString():null,p17:e.Dialogview?"1":null,p18:null,p19:"p19"==o&&l.length>0?l:null,p20:null,p21:null,p22:null,p23:null,p24:"ContractGroupName"!=o&&d.ContractGroupName?d.ContractGroupName.map((e=>e.ContractGroupIDPK)).toString():null,p25:"ContractGroupCode"==o&&l.length>0?"%"+l+"%":null,p26:"ContractGroupName"==o&&l.length>0?"%"+l+"%":null,p27:"TaxName"!=o&&d.TaxName?d.TaxName.map((e=>e.TaxIDPK)).toString():null,p28:"TaxCode"==o&&l.length>0?"%"+l+"%":null,p29:"TaxName"==o&&l.length>0?"%"+l+"%":null,p30:"TaxValue"==o&&l.length>0?"%"+l+"%":null,p31:"CustomerName"!=o&&d.CustomerName?d.CustomerName.map((e=>e.CustomerIDPK)).toString():null,p32:"CustomerCode"==o&&l.length>0?"%"+l+"%":null,p33:"CustomerName"==o&&l.length>0?"%"+l+"%":null,p34:"ContractTypeName"!=o&&d.ContractTypeName?d.ContractTypeName.map((e=>e.ContractTypeIDPK)).toString():null,p35:"ContractTypCode"==o&&l.length>0?"%"+l+"%":null,p36:"ContractTypeName"==o&&l.length>0?"%"+l+"%":null,p37:"ContractCategName"!=o&&d.ContractCategName?d.ContractCategName.map((e=>e.ContractCategIDPK)).toString():null,p38:"ContractCategCode"==o&&l.length>0?"%"+l+"%":null,p39:"ContractCategName"==o&&l.length>0?"%"+l+"%":null,p40:"ConPaymentTermsName"!=o&&d.ConPaymentTermsName?d.ConPaymentTermsName.map((e=>e.ConPaymentTermsIDPK)).toString():null,p41:"ConPaymentTermsName"==o&&l.length>0?"%"+l+"%":null,p42:"ContractCode"==o&&l.length>0?"%"+l+"%":null,p43:"ContractName"==o&&l.length>0?"%"+l+"%":null,p44:"LocalityGroupCode"==o&&l.length>0?"%"+l+"%":null,p45:"LocalityGroupName"==o&&l.length>0?"%"+l+"%":null,p46:"CityName"!=o&&d.CityName?d.CityName.map((e=>e.CityIDPK)).toString():null,p47:"CityCode"==o&&l.length>0?"%"+l+"%":null,p48:"CityName"==o&&l.length>0?"%"+l+"%":null,p49:"AdminLocalityTypeName"!=o&&d.AdminLocalityTypeName?d.AdminLocalityTypeName.map((e=>e.AdminLocalityTypeIDPK)).toString():null,p50:"AdminLocalityTypeCode"==o&&l.length>0?"%"+l+"%":null,p51:"AdminLocalityTypeName"==o&&l.length>0?"%"+l+"%":null,p52:"LocalityCode"==o&&l.length>0?"%"+l+"%":null,p53:"LocalityName"==o&&l.length>0?"%"+l+"%":null,p54:"PriorityCode"==o&&l.length>0?"%"+l+"%":null,p55:"PriorityName"==o&&l.length>0?"%"+l+"%":null,p56:"ServiceTypCode"==o&&l.length>0?"%"+l+"%":null,p57:"ServiceTypeName"==o&&l.length>0?"%"+l+"%":null,p58:"CCMComplaintTypeCode"==o&&l.length>0?"%"+l+"%":null,p59:"CCMComplaintTypeName"==o&&l.length>0?"%"+l+"%":null,p60:i||1,p61:10,p62:t,p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}},C=await(0,r.Z)(c,m,e.token,"",n.signal);if(!C)return!1;const u=C.Output.status.code,y=C.Output.data;if("200"===u)if(y.length>0)if(1===i){let e=Le(y,o),t=Ne(e,z[o],a);R(t),J(t.length>0?t[0].TotalCount:z[o].length)}else{let e=[...A,...y],t=Le(e,o);J(t.length<10?t.length:y[0].TotalCount),R(Le(t,o))}else O.length>0&&R([]),J(A.length);else e.alertmsg("error",[C.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{X(!1)}},Ne=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),Le=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));function be(e){let t=e+"PK",a=Ie[e];if(a){const e=a.flatMap((e=>z[e]?z[e].map((e=>e[t])):[]));return e.toString()}return""}const Pe=async t=>{let a="",l={};await K((e=>(a=e,e)));let i=[...ae],n=[];for(let e of i){let t=a[e]?.map((e=>e.CCMTargetFixIDPK)).toString();t&&n.push(t)}await te((e=>(l=e,e)));let r={CCMTargetFixIDPK:n?[...new Set(n)].toString():"",CreatedTtm:l.CreatedTtm?l.CreatedTtm.From:"",CreatedTtmType:l.CreatedTtm?l.CreatedTtm.Type:"",CreatedTtmBetween:l.CreatedTtm?l.CreatedTtm.To:"",ContractID:be("ContractID"),LocalityGroupID:be("LocalityGroupID"),LocalityID:be("LocalityID"),BuildingID:be("BuildingID"),ServiceTypeID:be("ServiceTypeID"),CCMComplaintTypeID:be("CCMComplaintTypeID"),PriorityID:be("PriorityID")};"saveFav"==t?Re("save",r):(e.searchData(r),U(!1))};async function Be(){let e={};await K((t=>(e=t,t)));let t=[...ae],a=[];for(let l of t){let t=e[l]?.map((e=>e.CCMTargetFixIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function we(t,a,l,i,n,r){let o={[i]:{From:t,Type:l,To:a}},d={};te((e=>({...e,...o})));const s={...z};let c=[...ae],m=[];for(let e of c){let t=s[e]?.map((e=>e.CCMTargetFixIDPK)).toString();t&&m.push(t)}await te((e=>(d=e,e)));let p={CCMTargetFixIDPK:m?[...new Set(m)].toString():"",CreatedTtm:d.CreatedTtm?d.CreatedTtm.From:"",CreatedTtmType:d.CreatedTtm?d.CreatedTtm.Type:"",CreatedTtmBetween:d.CreatedTtm?d.CreatedTtm.To:"",IsActive:"IsActive"==l?n:null,ContractID:z.ContractName?.map((e=>e.ContractIDPK)).toString(),LocalityGroupID:z.LocalityGroupName?.map((e=>e.LocalityGroupIDPK)).toString(),LocalityID:z.LocalityName?.map((e=>e.LocalityIDPK)).toString(),BuildingID:z.BuildingName?.map((e=>e.BuildingIDPK)).toString(),ServiceTypeID:z.ServiceTypeName?.map((e=>e.ServiceTypeIDPK)).toString(),CCMComplaintTypeID:z.CCMComplaintTypeName?.map((e=>e.CCMComplaintTypeIDPK)).toString(),PriorityID:z.PriorityName?.map((e=>e.PriorityIDPK)).toString()};e.searchData(p)}function Ae(){return i().createElement(C.Z,{frmctrlid:"fld329L3TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,i)=>{we(e,t,a,k.name,l)},keyboardback:()=>{U(!1),Z({idpk:"",name:"",type:"",fieldidpk:""})},title:Ee(k.name),fieldname:k.name,save:e=>{alert(!0)}})}const Re=(t,a)=>{(0,B.Z)(t,e.formID,a,de).then((e=>{const t=e.Output.data;Te(t)}))};return i().createElement("div",null,i().createElement(F.Z,{onClose:()=>me(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:ce},i().createElement(E.Z,{id:"customized-dialog-title",onClose:()=>me(!1)},"Add Favorite"),i().createElement(M.Z,{dividers:!0,style:{minWidth:"500px"}},i().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},i().createElement(h.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:de,onChange:e=>se(e.target.value),fullWidth:!0})),i().createElement(P.Z,{style:{color:"#337ab7"},control:i().createElement(N.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:i().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:i().createElement(b.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:pe,onChange:e=>Ce(e.target.checked)}),label:"Quick"}),i().createElement(P.Z,{style:{color:"#337ab7"},control:i().createElement(N.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:i().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:i().createElement(b.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:ue,onChange:e=>ye(e.target.checked)}),label:"Dashboard"})),i().createElement(S.Z,null,i().createElement(o.Z,{onClick:()=>{Pe("saveFav"),me(!1)},color:"primary"},"Save"))),H?"Created Ttm"===k.name||k.name.includes("Date")?i().createElement(Ae,null):i().createElement("div",null,i().createElement("div",{className:"columnHeader displayFlex"},i().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},i().createElement(c.Z,null,i().createElement(m.Z,{xs:6,sm:6,md:6,lg:6},i().createElement("p",{className:"columnHeaderp"},Me(k.idpk)," (",A.length,"/",$,")")),i().createElement(m.Z,{xs:6,sm:6,md:6,lg:6},i().createElement(d.ZP,{title:Ee("Close"),placement:"top"},i().createElement("div",{className:"FilterItemClose",align:"right"},i().createElement(n.Z,{id:"fld329L3TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{U(!1),Z({idpk:"",name:"",type:"",fieldidpk:!1}),W(1)}}))),z[k.name]&&i().createElement("div",{className:"FiltercloseAlign",align:"right"},i().createElement(o.Z,{frmctrlid:"fld329L3TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await K((t=>(e=t,w.log("clear fewItems",e),t))),e[k.name]=[],he(k.type,k.fieldidpk,"",1)})()}},i().createElement("span",{className:"ColumnApplyTitle"},Ee("Clear All")))))))),i().createElement("div",{className:"FilterParentDiv"},i().createElement("div",{"data-list-scroll-container":"true"},i().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},i().createElement("div",{className:"FilterMaximize"},V?i().createElement(d.ZP,{title:"Maximize",placement:"right"},i().createElement("span",null,i().createElement(T.D7o,{className:"FilterMaximizeIcon",onClick:()=>{_(!1)}}))):i().createElement(d.ZP,{title:"Minimize",placement:"right"},i().createElement("span",null,i().createElement(T.dOw,{className:"FilterMaximizeIcon",onClick:()=>{_(!0)}})))),i().createElement("ul",null,z[k.name]&&z[k.name].map(((e,t)=>i().createElement("div",{key:t,tabIndex:"-1",className:V?"filterSelectedItems":"filterSelectedItemsMaximize"},i().createElement("div",{className:"filterSelectedItemNames"},i().createElement("span",null,e[k.name])),i().createElement("div",{className:"filterSelectedItemClose"},i().createElement("div",{id:"fildacls_3_L2_"+e[k.name],onClick:()=>(async(e,t)=>{W(1);let a=z[k.name].filter((t=>t!=e)),l={};await K((e=>(l=e,e))),l[k.name]=a,K(l),R((t=>[e,...t]))})(e)},i().createElement(n.Z,{className:"filterSelectedItemCloseIcon"})))))))),i().createElement("div",{className:"displayFlex width100 FilterSearch"},i().createElement("div",{className:"FilterSearchInputDiv"},i().createElement(u.Z,{frmctrlid:"fld329L3TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:O,placeholder:Ee("Enter ")+" "+Me(k.idpk),onChange:e=>{G(e),he(k.type,k.fieldidpk,e,1,Be())}})),i().createElement("div",{id:"fld329L3TFCFilterGoForward",className:"FilterSearchBtn",onClick:Pe},i().createElement(d.ZP,{title:"",placement:"top"},i().createElement(o.Z,{className:"ColumnSearchButton"},i().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),Q&&i().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},i().createElement(I.Z,{color:"secondary"})),i().createElement("div",{id:"fld329L3TFCScrollYDefault",className:"height65 scrollYDefault"},A.length>0&&A.map(((e,t)=>i().createElement("div",{id:"filda_3_L2_"+e[k.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await K((e=>(l=e,e)));let i=l[k.name];t[k.name]=i?[...a,...i]:a,l={...l,...t},K(l),R((t=>t.filter((t=>t!=e))))})(e)}},i().createElement(s.Z,{className:"DotIcon"}),i().createElement("span",null,e[k.name])))),A.length+0<$&&A.length>0&&i().createElement("div",{id:"fld329L3TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{W(q+1),he(k.type,k.fieldidpk,"",q+1)}},i().createElement("p",null," more... ")),0===A.length&&i().createElement("div",null,i().createElement("div",{className:"NoDataImage"},i().createElement("img",{src:p.v.NoData,alt:"NoImage"})),i().createElement("div",{className:"NoDataDesc"},i().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):i().createElement("div",null,i().createElement("div",{className:"columnHeader displayFlex"},i().createElement("div",{className:"columnHeaderTitle"},i().createElement(g.Ol$,{className:"columnHeaderIcon"}),i().createElement("p",{className:"columnHeaderp"}," ",Ee("Filter")," ",de.length>0&&`(${de})`)),i().createElement("div",{className:"columnHeaderbtn",align:"right"},i().createElement(d.ZP,{title:"Favorite List",placement:"top"},re?i().createElement(n.Z,{className:"favlisticon",onClick:()=>{oe(!1),Te(""),Se()}}):i().createElement(x.Z,{className:"favlisticon",onClick:()=>{oe(!0),Re("select"),Se()}})),Object.keys(z).length>0&&i().createElement(d.ZP,{title:"Save Favorites",placement:"top"},i().createElement(f.Z,{className:"favlisticon",onClick:()=>{me(!0)}})),i().createElement(d.ZP,{title:"",placement:"top"},i().createElement(o.Z,{className:"ColumnApplyButton",onClick:()=>{Se()},id:"fld329L3TFCColumApplyBttn"},i().createElement("span",{className:"ColumnApplyTitle"},Ee("Clear")))),i().createElement(d.ZP,{title:"",placement:"top"},i().createElement(o.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld329L3TFCColumnCloseButton"},i().createElement("span",{className:"ColumnCloseTitle"},Ee("Close")))))),i().createElement("div",{className:"height65"},i().createElement("div",{id:"fld329L3TFCFilItems",className:"FilterItems"},!ge&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return i().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{U(!0),G(""),R([]),J(0);let t=e.IsForeign?e.FieldName+"PK":"CCMTargetFixIDPK";Z({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterCCMTargetFixID",fieldidpk:t}),he(e.IsForeign?"Filter"+e.FieldName:"FilterCCMTargetFixID",t,"",1,Be())})(e)}},e.FieldName.includes("Date")?i().createElement(i().Fragment,null,Me(e.AdminUserGridViewIDPK)," ",ee[e.FieldName]&&i().createElement("p",{className:"filterdatevalue"},"(",ee[e.FieldName]?.From+" to "+ee[e.FieldName]?.To,")")):"IsActive"==e.FieldName?i().createElement(i().Fragment,null,i().createElement("span",null,Me(e.AdminUserGridViewIDPK)),i().createElement(v.Z,{checked:"1"==ie,onChange:t=>{ne(t.target.checked),we("","",e.FieldName,"",t.target.checked)}})):i().createElement(i().Fragment,null,i().createElement("span",null,Me(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,z[a]?.length>0&&i().createElement("div",{className:"FilterItemDivSelected"},i().createElement("span",{className:"RoundedDivName"},z[a][0][a]),z[a].length>1&&i().createElement("span",{className:"RoundedDivName"},z[a][1][a]),z[a].length>2&&i().createElement("span",{className:"RoundedDivNumber"},"+"+(z[a].length-2))))));var a})),ge&&ge.map((e=>{let t=e.TFFSearchParams,a=JSON.parse(t);return i().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{he("FilterCCMTargetFixID",a),Pe("")}},i().createElement(i().Fragment,null,e.TableFilterFavName))}))))))}))},48598:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var l=a(92950),i=a.n(l),n=a(45237),r=(a(37148),a(3212)),o=a(29800),d=a(14439),s=a(27848),c=(a(10966),a(36939)),m=a(61201),p=a(50743),C=a(56173),u=(a(21392),a(51673)),y=a(40900),g=a(26537),T=(a(24038),a(39302)),D=(a(77366),a(97829),a(8981)),I=(a(63163),a(1695)),v=(a(79117),a(99216)),x=(a(35131),a(61956),a(51649)),f=a(61924),F=a.n(f),E=a(25108);const M=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),[f,M]=((0,n.useSelector)((e=>e.form)),(0,l.useState)([])),[S,h]=(0,l.useState)(!0),[N,L]=(0,l.useState)(e.showDetail),[b,P]=(0,l.useState)(""),[B,w]=i().useState(!1),[A,R]=i().useState(""),[k,Z]=i().useState(!1),O=(0,l.useContext)(C.CCMTargetFixRegistryContext),{cstate:G,cdispatch:z}=(0,C.ContextApi)(),[K,V]=(0,l.useState)(!1),[_,H]=(0,l.useState)(""),[U,j]=(0,l.useState)(""),[Y,q]=(0,l.useState)("");let W=(0,D.Z)();(0,l.useEffect)((()=>{G.editData.length>0&&(M(G.editData),w(!1),z({type:"PrimaryId",payload:G.editData[0].CCMTargetFixIDPK}))}),[G.editData]),(0,l.useEffect)((()=>{G.showTableview&&q(G.showTableview)}),[G.showTableview]),(0,l.useEffect)((()=>{h(G.ExpandDetailValue)}),[G.ExpandDetailValue]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{h(e),w(null)},viewtoggle:()=>{w(!1)},viewlistProps:(t,a)=>{!function(t,a){let l=y.v.Api+"FP329S3/",i={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:e.Dialogview?"1":null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:null,p51:null,p52:null,p53:null,p54:null,p55:null,p56:null,p57:null,p58:null,p59:null,p60:1,p61:10,p62:a?"DraftCCMTargetFixID":"CCMTargetFixID",p63:null,p64:null,p65:localStorage.getItem("UserGroupID"),p66:localStorage.getItem("userid")}};(0,g.Z)(0).then((e=>{(0,u.Z)(l,i,e).then((e=>{O.loading(!1),"200"==e.Output.status.code&&M(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===B&&a.current.clear()}})));const $=e=>W?.[e]?W?.[e]:e,J=e=>G.language?.[e]?G.language[e]:e;function Q(e,t){}const X=e=>(E.log("CCMTargetFixRegistrydata",f),f[0].ContractID&&0!=f[0].ContractID?f[0].LocalityID&&0!=f[0].LocalityID?f[0].CCMComplaintTypeID&&0!=f[0].CCMComplaintTypeID?f[0].PriorityID&&0!=f[0].PriorityID?(0,T.trimFunc)(f[0].LocResponseBy)?(0,T.trimFunc)(f[0].LocAnalysedBy)?(0,T.trimFunc)(f[0].LocFixedBy)?void O.ConfirmAlert(i().createElement(F(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:$("Are you sure?"),onConfirm:()=>(()=>{O.loading(!0),O.ConfirmAlert(null),z({type:"IsDraft",payload:!1});let e={url:y.v.Api+"FP329S2/",PrimID:f[0].CCMTargetFixIDPK,ParamType:"",state:f[0],active:1,token:G.token[0],DefaultPrimaryId:""};(0,T.saveComponent)(e).then((e=>{const t=e[0].status;let a=e[0].Data,l=new Array,i=new Array;"200"===t.code&&(a.map((e=>{e&&(l.push(e.IsAlert),i.push(e.AlertMessage),e.AlertMessage)})),l.some((e=>"1"==e))?(O.alert({open:!0,color:"warning",message:i}),O.loading(!1)):(()=>{O.loading(!0);let e={url:y.v.Api+"FP329S1/",PrimID:f[0].CCMTargetFixIDPK,ParamType:"",state:f[0],active:1,token:G.token[0],DefaultPrimaryId:""};(0,T.saveComponent)(e).then((e=>{const t=e[0].status;200==t.code&&(O.alert({open:!0,color:"success",message:[t.message]}),O.loading(!1),O.ShowTableDiv(),O.RefreshTable(),O.Approval(!0))}))})())}))})(),onCancel:()=>O.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:$("Yes"),cancelBtnText:$("Cancel"),showCancel:!0},G.PrimaryId?$("Do you want to Update?"):$("Do you want to Save?"))):(O.alert({open:!0,color:"warning",message:[$("Please enter the")+""+J("LocFixedBy")]}),!1):(O.alert({open:!0,color:"warning",message:[$("Please enter the")+""+J("LocAnalysedBy")]}),!1):(O.alert({open:!0,color:"warning",message:[$("Please enter the")+""+J("LocResponseBy")]}),!1):(O.alert({open:!0,color:"warning",message:[$("Please select the ")+" "+J("PriorityID")]}),!1):(O.alert({open:!0,color:"warning",message:[$("Please select the ")+" "+J("CCMComplaintTypeID")]}),!1):(O.alert({open:!0,color:"warning",message:[$("Please select the ")+" "+J("LocalityID")]}),!1):(O.alert({open:!0,color:"warning",message:[$("Please select the ")+" "+J("ContractID")]}),!1));return i().createElement("div",{className:"SubContent_1"},i().createElement(c.Z,{expanded:S,onChange:()=>()=>{e.expandTable&&h(!S)}},!B&&i().createElement(p.Z,null,i().createElement(d.Z,{container:!0},i().createElement(s.Z,{item:!0,sm:12,md:12,lg:12,xs:12},i().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},i().createElement("div",{className:"displayFlex EntryViewHeader"},i().createElement("span",{style:{cursor:"pointer"}},i().createElement(x.u1R,{className:"backButtonList",onClick:()=>{O.ShowTableDiv(),O.RefreshTable()}})),i().createElement("p",{className:"DListP"},G.IsDraft?"Draft ":"",J("329"))))))),i().createElement(m.Z,{style:{display:"block"}},f.map(((e,t)=>i().createElement("div",{key:t},i().createElement(v.Z,{tableName:"CCMTargetFixRegistry",tableID:329,parentID:e.CCMTargetFixIDPK,fldid:"fld329L3VCContainer",OpenSlideComponent:Q,index:t,val:e,tf:J,t:$,title:"10.0.0.59-3:08:17 PM-18-7[329]"}))))),i().createElement("div",{className:"displayFlex EntryHeaderBtn"},e.viewonly&&G.AccessRights.IsAdd&&i().createElement(r.Z,{className:"L1AddBtnCommon",onClick:()=>{z({type:"ShowDetail",payload:!1}),z({type:"Add",payload:!0}),z({type:"editData",payload:[]}),z({type:"PrimaryId",payload:G.editData[0].CCMTargetFixIDPK})},disabled:!1}),G.IsDraft&&i().createElement(o.Z,{onClick:()=>{z({type:"ShowDetail",payload:!1}),z({type:"Add",payload:!0}),z({type:"editData",payload:f}),z({type:"PrimaryId",payload:G.editData[0].CCMTargetFixIDPK})},disabled:!1}),i().createElement(I.Z,{name:G.PrimaryId?"Update":"Save",disabled:!1,frmctrlid:"fld329L3ECSaveBtnApprovalStatus",onClick:()=>{X()}}))))}))}}]);