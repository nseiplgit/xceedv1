"use strict";(self.webpackChunk_shared_routing_dashboard=self.webpackChunk_shared_routing_dashboard||[]).push([[90285],{63042:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(92950),n=a.n(s),l=a(71168),i=a.n(l),r=a(49375),o=a(14439),c=a(27848),u=a(40900),d=a(24522),m=a(25108);const g=[{name:"Material",id:0,active:"btnactvtab",width:"25%",IsConflict:"0",count:0}],f=function(e){const{classes:t}=e,a=(0,s.useRef)(null),[l,f]=(0,s.useState)(""),[p,b]=(0,s.useState)(""),[M,h]=(0,s.useState)([]),[v,E]=(0,s.useState)([]),[y,S]=(0,s.useState)(0),[C,I]=(0,s.useState)([]),[w,N]=(0,s.useState)({}),[O,x]=(0,s.useState)(g);var k=[...g];const[D,_]=(0,s.useState)(!0),[B,F]=(0,s.useState)(!1),[T,R]=i()("663");function Z(t){if("200"!=t.Output.status.code)return e.loading(!1),e.alertmsg({open:!0,color:"error",message:[t.Output.status.message]}),!1;{a.current.conflictStage(),e.loading(!0);const s={Material:{setter:I}};Object.keys(t.Output.data).forEach((e=>{const a=t.Output.data[e],n=a.filter((e=>"1"===e.IsConflict));n.length>0&&((e,t)=>{const a=g.filter((t=>t.id==e)),s={name:a[0].name,id:a[0].id,active:a[0].active,width:a[0].width,IsConflict:"1",count:t},n=[...k],l=n.findIndex((t=>t.id==e)),i=n[l];n.splice(l,1,{...i,...s}),k=n,x(n)})(0,n.length),e in s&&s[e].setter(a)})),e.loading(!1)}}return n().createElement("div",null,n().createElement("div",{id:"MaterialMig-MainDiv",className:"MainDivStyles displayFlex"},n().createElement("div",{id:"MaterialMig-MainEntry",className:"Maincontent",style:{width:"100%"}},n().createElement(o.Z,null,n().createElement(c.Z,{sm:12},n().createElement(r.Z,{MigType:"MaterialMigration",alertmsg:t=>e.alertmsg(t),conflictFinalData:{Material:C},data:e=>Z(e),reset:()=>(I([]),x(g),_(!0),F(!1),f(""),void b("")),filename:e=>f(e),fileData:e=>b(e),importSave:t=>function(t){if(!p)return e.alertmsg({open:!0,color:"error",message:["Kindly Upload file to Import"]}),!1;e.loading(!0);let a=new FileReader;a.readAsDataURL(p[0]),a.onload=()=>{let a=u.v.Api+"uploadExcel/",s=new FormData;s.append("uploadExcel",p[0]),fetch(a,{method:"POST",headers:{"x-userid":localStorage.getItem("userid"),"mig-type":"MaterialMigration","mig-btn-type":t,FORM_ID:1},body:s}).then((e=>e.json())).then((a=>{"200"==a.Output.status.code?(Z(a),e.loading(!1),e.alertmsg({open:!0,color:"Success",message:[a.Output.status.message]}),"process"!=t&&(f(""),b(""))):(e.loading(!1),e.alertmsg({open:!0,color:"error",message:[a.Output.status.message]}))})).catch((t=>{e.loading(!1),m.error(t)}))}}(t),NameFile:l,excelfile:u.v.excel+"MaterialMigration.xlsx",SheetCount:11,ref:a,importdisabled:O.filter((e=>"1"==e.IsConflict)).length>0}))),n().createElement("div",{className:"MaterialMig-formtabs formtabs"},O.map(((e,t)=>n().createElement("button",{key:t,disabled:!1,style:{width:e.width,background:"1"==e.IsConflict?"#fad6a5":"#fff"},className:e.active+" secondaryMenuBtn ",onClick:()=>function(e){var t=O.length;for(let e=0;e<t;e++)document.getElementsByClassName("MaterialMig-formtabs")[0].getElementsByTagName("button")[e].classList.remove("btnactvtab");document.getElementsByClassName("MaterialMig-formtabs")[0].getElementsByTagName("button")[e].classList.add("btnactvtab"),S(e)}(e.id)},e.name,n().createElement("span",null," "),n().createElement("span",null,Number(e.count)>0?"("+e.count+")":""))))),0==y&&n().createElement(d.Z,{tableData:C,TableVisibleItem:M,TableBodyItem:v,n:!0}))))}}}]);