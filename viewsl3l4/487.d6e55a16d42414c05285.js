/*! For license information please see 487.d6e55a16d42414c05285.js.LICENSE.txt */
"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[487],{92381:(e,t,a)=>{a.d(t,{Z:()=>u});var l=a(40900),n=a(26537),i=a(61956),o=a(35131),r=a.n(o),C=a(25108);function u(e,t,a,o){if("select"==e){const e=l.v.Api+"FP1454S3/",a={data:{p12:t,p29:"GetFavList",p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}};return fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","x-tokenid":n.Z.TokenIDPK,"x-tokenname":n.Z.TokenName,"x-userid":localStorage.getItem("userid"),USER_ID:localStorage.getItem("userid"),FORM_ID:1},body:JSON.stringify(a)}).then((e=>{if(e.ok)return C.log(e,"Response*"),e.json();throw new Error("Something went wrong")}))}if("save"==e){const e=l.v.Api+"FP1454S1/",u={data:[{p1:0,p2:null,p3:o,p4:JSON.stringify(a),p5:null,p6:0,p7:null,p8:0,p9:0,p10:0,p11:!1,p12:t,p13:null,p14:!0,p15:!1,p16:localStorage.getItem("userid"),p17:r()().format("YYYY-MM-DD hh:mm:ss"),p18:localStorage.getItem("userid"),p19:r()().format("YYYY-MM-DD hh:mm:ss")}]};(0,n.Z)(0).then((t=>{(0,i.Z)(e,u,t).then((e=>{200==e[0].status.code?C.log(e,"RES"):C.log("Error")}))}))}}},8687:(e,t,a)=>{function l(e,t,a,l,n,i){try{if("200"==e.Output.status.code&&e.Output.data.length>0){if(e.Output.data){let o=e.Output.data[0];t({type:"IsDraft",payload:a}),t({type:"EditOpen",payload:!1}),t({type:"EditIsDraft",payload:a}),n.ExpandDetail(!1),l?n.AddOpen(o[i],a):t({type:"editData",payload:[o]}),n.loading(!1)}}else n.loading(!1),n.alert({open:!0,color:"warning",message:["There is no Record Found"]})}catch(e){n.loading(!1),n.alert({open:!0,color:"error",message:[e.message]})}}a.d(t,{m:()=>l})},23501:(e,t,a)=>{a.d(t,{ls:()=>Re,kN:()=>Ze,ZP:()=>Le});var l=a(92950),n=a.n(l),i=(a(95866),a(45237)),o=a(36939),r=a(61201),C=a(51673),u=(a(99058),a(80366)),s=a(282),d=a(868),m=a(78513),c=a(14439),p=a(27848),g=a(40900),y=a(64059),M=a(24038),D=a(8981),I=a(47516),f=a(86893),E=a(33681),v=a(63163),T=a(35131),Q=a.n(T),S=a(61956),h=a(93657),N=a(53375),x=a(52663),b=a(66083),w=a(29525),A=a(66856),k=a(39803),F=a(99940),P=a(17149),B=a(62810),R=a(30553),Z=a(92381),L=a(25108);const O=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[i,o]=(0,l.useState)([]),[r,T]=(0,l.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[Q,S]=(0,l.useState)(""),[O,z]=(0,l.useState)({}),[K,V]=(0,l.useState)(!0),[G,_]=(0,l.useState)(!1),{cstate:U,cdispatch:j}=e.ContextApi?e.ContextApi:Ze(),[H,Y]=(0,l.useState)(1),[$,W]=(0,l.useState)(0),[J,q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)({}),[te,ae]=(0,l.useState)([]),[le,ne]=(0,l.useState)(!0),[ie,oe]=(0,l.useState)(!1),[re,Ce]=(0,l.useState)(""),[ue,se]=(0,l.useState)(!1),[de,me]=(0,l.useState)(!1),[ce,pe]=(0,l.useState)(!1),[ge,ye]=(0,l.useState)(""),Me=(0,l.useRef)(null),[De,Ie]=(0,l.useState)({});let fe=localStorage.getItem("Language");const Ee={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let ve=(0,D.Z)();const Te=e=>ve[e]?ve[e]:e,Qe=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[Ee[fe]];function Se(){Ce(""),ye(""),z({}),ee({}),e.searchData({}),_(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const a=e.userGrid.reduce(((e,t)=>{const a=t.FieldName;return t.IsForeign&&(e[a]||(e[a]=[]),e[a].push(t.FieldDisplay)),e}),{});Ie(a),ae(t)}),[]),(0,l.useEffect)((()=>()=>{Me.current&&Me.current.abort()}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Se()}})));const he=async(t,a,l,n)=>{q(!0);try{Me.current&&Me.current.abort();const r=new AbortController;Me.current=r;let u="",s=[],d={};await T((e=>(u=e.name,e))),await z((e=>(s=e,e))),await ee((e=>(d=e,e)));const m=g.v.Api+"FP1645S3/",c={data:{p1:"CCMQuationDetIDPK"==a?null:await Ae(),p2:"CCMQuationCode"==u&&l.length>0?"%"+l+"%":null,p3:"CCMQuationName"==u&&l.length>0?"%"+l+"%":null,p4:"CCMTansStatus"==u&&l.length>0?"%"+l+"%":null,p5:"CCMMaterialName"==u&&l.length>0?"%"+l+"%":null,p6:"CCMQty"==u&&l.length>0?"%"+l+"%":null,p7:"CCMAmount"==u&&l.length>0?"%"+l+"%":null,p8:"CCMTotalAmount"==u&&l.length>0?"%"+l+"%":null,p9:"CCMTypeStatus"==u&&l.length>0?"%"+l+"%":null,p10:"CCMQSubTotal"==u&&l.length>0?"%"+l+"%":null,p11:"CCMQTaxAmount"==u&&l.length>0?"%"+l+"%":null,p12:"CCMQTaxValue"==u&&l.length>0?"%"+l+"%":null,p13:"CCMQGrandTotal"==u&&l.length>0?"%"+l+"%":null,p14:null,p15:null,p16:null,p17:e.parentId?e.parentId:"0",p18:"ComplaintNo"!=u&&s.ComplaintNo?s.ComplaintNo.map((e=>e.ComplaintIDPK)).toString():null,p19:"TaxName"!=u&&s.TaxName?s.TaxName.map((e=>e.TaxIDPK)).toString():null,p20:e.Dialogview?"1":null,p21:null,p22:"p22"==u&&l.length>0?l:null,p23:null,p24:null,p25:null,p26:null,p27:n||1,p28:10,p29:t,p30:null,p31:null,p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}},p=await(0,C.Z)(m,c,e.token,"",r.signal);if(!p)return!1;const y=p.Output.status.code,M=p.Output.data;if("200"===y)if(M.length>0)if(1===n){let e=xe(M,u),t=Ne(e,O[u],a);o(t),W(t.length>0?t[0].TotalCount:O[u].length)}else{let e=[...i,...M],t=xe(e,u);W(t.length<10?t.length:M[0].TotalCount),o(xe(t,u))}else Q.length>0&&o([]),W(i.length);else e.alertmsg("error",[p.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{q(!1)}},Ne=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),xe=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));function be(e){let t=e+"PK",a=De[e];if(a){const e=a.flatMap((e=>O[e]?O[e].map((e=>e[t])):[]));return e.toString()}return""}const we=async(t,a)=>{let l="",n={};await z((e=>(l=e,e)));let i=[...te],o=[];for(let e of i){let t=l[e]?.map((e=>e.CCMQuationDetIDPK)).toString();t&&o.push(t)}await ee((e=>(n=e,e)));let r={CCMQuationDetIDPK:a?a.CCMQuationDetIDPK:o?[...new Set(o)].toString():"",CreatedTtm:n.CreatedTtm?n.CreatedTtm.From:"",CreatedTtmType:n.CreatedTtm?n.CreatedTtm.Type:"",CreatedTtmBetween:n.CreatedTtm?n.CreatedTtm.To:"",CCMQuationID:be("CCMQuationID"),ComplaintID:be("ComplaintID")};"saveFav"==t?Pe("save",r):(e.searchData(r),_(!1))};async function Ae(){let e={};await z((t=>(e=t,t)));let t=[...te],a=[];for(let l of t){let t=e[l]?.map((e=>e.CCMQuationDetIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function ke(t,a,l,n,i,o){let r={[n]:{From:t,Type:l,To:a}},C={};ee((e=>({...e,...r})));const u={...O};let s=[...te],d=[];for(let e of s){let t=u[e]?.map((e=>e.CCMQuationDetIDPK)).toString();t&&d.push(t)}await ee((e=>(C=e,e)));let m={CCMQuationDetIDPK:d?[...new Set(d)].toString():"",CreatedTtm:C.CreatedTtm?C.CreatedTtm.From:"",CreatedTtmType:C.CreatedTtm?C.CreatedTtm.Type:"",CreatedTtmBetween:C.CreatedTtm?C.CreatedTtm.To:"",IsActive:"IsActive"==l?i:null,CCMQuationID:O.CCMQuationCode?.map((e=>e.CCMQuationIDPK)).toString(),ComplaintID:O.ComplaintNo?.map((e=>e.ComplaintIDPK)).toString()};e.searchData(m)}function Fe(){return n().createElement(y.Z,{frmctrlid:"fld1645L1TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,n)=>{ke(e,t,a,r.name,l)},keyboardback:()=>{_(!1),T({idpk:"",name:"",type:"",fieldidpk:""})},title:Te(r.name),fieldname:r.name,save:e=>{alert(!0)}})}const Pe=(t,a)=>{(0,Z.Z)(t,e.formID,a,re).then((e=>{const t=e.Output.data;ye(t)}))};return n().createElement("div",null,n().createElement(x.Z,{onClose:()=>se(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:ue},n().createElement(b.Z,{id:"customized-dialog-title",onClose:()=>se(!1)},"Add Favorite"),n().createElement(w.Z,{dividers:!0,style:{minWidth:"500px"}},n().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},n().createElement(k.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:re,onChange:e=>Ce(e.target.value),fullWidth:!0})),n().createElement(R.Z,{style:{color:"#337ab7"},control:n().createElement(F.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(P.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(B.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:de,onChange:e=>me(e.target.checked)}),label:"Quick"}),n().createElement(R.Z,{style:{color:"#337ab7"},control:n().createElement(F.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(P.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(B.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:ce,onChange:e=>pe(e.target.checked)}),label:"Dashboard"})),n().createElement(A.Z,null,n().createElement(s.Z,{onClick:()=>{we("saveFav"),se(!1)},color:"primary"},"Save"))),G?"Created Ttm"===r.name||r.name.includes("Date")?n().createElement(Fe,null):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},n().createElement(c.Z,null,n().createElement(p.Z,{xs:6,sm:6,md:6,lg:6},n().createElement("p",{className:"columnHeaderp"},Qe(r.idpk)," (",i.length,"/",$,")")),n().createElement(p.Z,{xs:6,sm:6,md:6,lg:6},n().createElement(d.ZP,{title:Te("Close"),placement:"top"},n().createElement("div",{className:"FilterItemClose",align:"right"},n().createElement(u.Z,{id:"fld1645L1TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{_(!1),T({idpk:"",name:"",type:"",fieldidpk:!1}),Y(1)}}))),O[r.name]&&n().createElement("div",{className:"FiltercloseAlign",align:"right"},n().createElement(s.Z,{frmctrlid:"fld1645L1TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await z((t=>(e=t,L.log("clear fewItems",e),t))),e[r.name]=[],he(r.type,r.fieldidpk,"",1)})()}},n().createElement("span",{className:"ColumnApplyTitle"},Te("Clear All")))))))),n().createElement("div",{className:"FilterParentDiv"},n().createElement("div",{"data-list-scroll-container":"true"},n().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},n().createElement("div",{className:"FilterMaximize"},K?n().createElement(d.ZP,{title:"Maximize",placement:"right"},n().createElement("span",null,n().createElement(f.D7o,{className:"FilterMaximizeIcon",onClick:()=>{V(!1)}}))):n().createElement(d.ZP,{title:"Minimize",placement:"right"},n().createElement("span",null,n().createElement(f.dOw,{className:"FilterMaximizeIcon",onClick:()=>{V(!0)}})))),n().createElement("ul",null,O[r.name]&&O[r.name].map(((e,t)=>n().createElement("div",{key:t,tabIndex:"-1",className:K?"filterSelectedItems":"filterSelectedItemsMaximize"},n().createElement("div",{className:"filterSelectedItemNames"},n().createElement("span",null,e[r.name])),n().createElement("div",{className:"filterSelectedItemClose"},n().createElement("div",{id:"fildacls_3_L2_"+e[r.name],onClick:()=>(async(e,t)=>{Y(1);let a=O[r.name].filter((t=>t!=e)),l={};await z((e=>(l=e,e))),l[r.name]=a,z(l),o((t=>[e,...t]))})(e)},n().createElement(u.Z,{className:"filterSelectedItemCloseIcon"})))))))),n().createElement("div",{className:"displayFlex width100 FilterSearch"},n().createElement("div",{className:"FilterSearchInputDiv"},n().createElement(M.Z,{frmctrlid:"fld1645L1TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:Q,placeholder:Te("Enter ")+" "+Qe(r.idpk),onChange:e=>{S(e),he(r.type,r.fieldidpk,e,1,Ae())}})),n().createElement("div",{id:"fld1645L1TFCFilterGoForward",className:"FilterSearchBtn",onClick:we},n().createElement(d.ZP,{title:"",placement:"top"},n().createElement(s.Z,{className:"ColumnSearchButton"},n().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),J&&n().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},n().createElement(E.Z,{color:"secondary"})),n().createElement("div",{id:"fld1645L1TFCScrollYDefault",className:"height65 scrollYDefault"},i.length>0&&i.map(((e,t)=>n().createElement("div",{id:"filda_3_L2_"+e[r.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await z((e=>(l=e,e)));let n=l[r.name];t[r.name]=n?[...a,...n]:a,l={...l,...t},z(l),o((t=>t.filter((t=>t!=e))))})(e)}},n().createElement(m.Z,{className:"DotIcon"}),n().createElement("span",null,e[r.name])))),i.length+0<$&&i.length>0&&n().createElement("div",{id:"fld1645L1TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{Y(H+1),he(r.type,r.fieldidpk,"",H+1)}},n().createElement("p",null," more... ")),0===i.length&&n().createElement("div",null,n().createElement("div",{className:"NoDataImage"},n().createElement("img",{src:g.v.NoData,alt:"NoImage"})),n().createElement("div",{className:"NoDataDesc"},n().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnHeaderTitle"},n().createElement(I.Ol$,{className:"columnHeaderIcon"}),n().createElement("p",{className:"columnHeaderp"}," ",Te("Filter")," ",re.length>0&&`(${re})`)),n().createElement("div",{className:"columnHeaderbtn",align:"right"},n().createElement(d.ZP,{title:"Favorite List",placement:"top"},ie?n().createElement(u.Z,{className:"favlisticon",onClick:()=>{oe(!1),Se()}}):n().createElement(h.Z,{className:"favlisticon",onClick:()=>{oe(!0),Pe("select"),Se()}})),Object.keys(O).length>0&&n().createElement(d.ZP,{title:"Save Favorites",placement:"top"},n().createElement(N.Z,{className:"favlisticon",onClick:()=>{se(!0)}})),n().createElement(d.ZP,{title:"",placement:"top"},n().createElement(s.Z,{className:"ColumnApplyButton",onClick:()=>{Se()},id:"fld1645L1TFCColumApplyBttn"},n().createElement("span",{className:"ColumnApplyTitle"},Te("Clear")))),n().createElement(d.ZP,{title:"",placement:"top"},n().createElement(s.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld1645L1TFCColumnCloseButton"},n().createElement("span",{className:"ColumnCloseTitle"},Te("Close")))))),n().createElement("div",{className:"height65"},n().createElement("div",{id:"fld1645L1TFCFilItems",className:"FilterItems"},!ge&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return n().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{_(!0),S(""),o([]),W(0);let t=e.IsForeign?e.FieldName+"PK":"CCMQuationDetIDPK";T({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterCCMQuationDetID",fieldidpk:t}),he(e.IsForeign?"Filter"+e.FieldName:"FilterCCMQuationDetID",t,"",1,Ae())})(e)}},e.FieldName.includes("Date")?n().createElement(n().Fragment,null,Qe(e.AdminUserGridViewIDPK)," ",X[e.FieldName]&&n().createElement("p",{className:"filterdatevalue"},"(",X[e.FieldName]?.From+" to "+X[e.FieldName]?.To,")")):"IsActive"==e.FieldName?n().createElement(n().Fragment,null,n().createElement("span",null,Qe(e.AdminUserGridViewIDPK)),n().createElement(v.Z,{checked:"1"==le,onChange:t=>{ne(t.target.checked),ke("","",e.FieldName,"",t.target.checked)}})):n().createElement(n().Fragment,null,n().createElement("span",null,Qe(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,O[a]?.length>0&&n().createElement("div",{className:"FilterItemDivSelected"},n().createElement("span",{className:"RoundedDivName"},O[a][0][a]),O[a].length>1&&n().createElement("span",{className:"RoundedDivName"},O[a][1][a]),O[a].length>2&&n().createElement("span",{className:"RoundedDivNumber"},"+"+(O[a].length-2))))));var a})),ge&&ge.map((e=>{let t=e.TFFSearchParams,a=JSON.parse(t);return n().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{he("FilterCCMQuationDetID",a),we("",a)}},n().createElement(n().Fragment,null,e.TableFilterFavName))}))))))}));var z=a(54180),K=a(43031),V=a(85639),G=a(110),_=a(5109),U=a(88995),j=a(50743),H=a(61657),Y=a(51209),$=a(53854),W=a(5434),J=a(83817),q=a(39327),X=a(3212),ee=a(93521),te=a(71168),ae=a.n(te),le=a(65107),ne=a(94986),ie=a(15999);a(11557),window.clickFilter="";const oe=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),s=(0,l.useRef)(null),[m]=((0,l.useRef)(null),(0,i.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[c]=(0,l.useState)("1645"),[p,y]=(0,l.useState)(!1),[E,v]=(0,l.useState)(!1),[T,Q]=(0,l.useState)(0),[S,h]=(0,l.useState)(0),[N,x]=(0,l.useState)(0),[b,w]=(0,l.useState)(0),[A,k]=(0,l.useState)({current:1,pageSize:100}),[F,P]=(0,l.useState)(""),[B,R]=(0,l.useState)([]),[Z,L]=(0,l.useState)({val:"",column:""}),[te,oe]=(0,l.useState)([]),[re,Ce]=(0,l.useState)(!1),[ue,se]=(0,l.useState)(""),[de,me]=(0,l.useState)(""),[ce,pe]=(0,l.useState)(!1),[ge,ye]=(0,l.useState)([]),[Me,De]=(0,l.useState)([]),[Ie,fe]=(0,l.useState)([]),[Ee,ve]=(0,l.useState)({children:[{name:"CCMQuationDetails",children:[]}]}),[Te,Qe]=(0,l.useState)(!1),Se=(0,l.useContext)(e.context?e.context:Re),{cstate:he,cdispatch:Ne}=e.ContextApi?e.ContextApi:Ze();let xe={CCMQuationDetIDPK:"",CCMQuationCode:"",CCMQuationName:"",CCMTansStatus:"",CCMMaterialName:"",CCMQty:"",CCMAmount:"",CCMTotalAmount:"",CCMTypeStatus:"",CCMQSubTotal:"",CCMQTaxAmount:"",CCMQTaxValue:"",CCMQGrandTotal:"",IsDefault:"",IsDraft:"",Remarks:"",CCMQuationID:"",ComplaintID:"",TaxID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[be,we]=(0,l.useState)(xe),[Ae,ke]=(0,l.useState)(xe),[Fe,Pe]=(0,l.useState)(!1),[Be,Le]=(0,l.useState)(!0),[Oe,ze]=(0,l.useState)(!1),[Ke,Ve]=(0,l.useState)(!0),[Ge,_e]=(0,l.useState)({CCMQuationCode:"",ComplaintNo:"",CCMQuationCode:"",CCMQuationName:"",CCMTansStatus:"",CCMMaterialName:"",CCMQty:"",CCMAmount:"",CCMTotalAmount:"",CCMTypeStatus:""}),[Ue,je]=(0,l.useState)(!1),[He,Ye]=(0,l.useState)([]),[$e,We]=(0,l.useState)(0),[Je,qe]=(0,l.useState)(0),[Xe,et]=(0,l.useState)({current:1,pageSize:10}),[tt,at]=(0,l.useState)([]),[lt,nt]=(0,l.useState)([]),[it,ot]=(0,l.useState)(!1),[rt,Ct]=(0,l.useState)(!1),[ut,st]=(0,l.useState)(!1),[dt,mt]=(0,l.useState)(""),[ct,pt]=ae()("1645"),[gt,yt]=(0,l.useState)({}),Mt=[{columns:tt,data:F}];let Dt=(0,D.Z)();const It=e=>Dt[e]?Dt[e]:e,ft=e=>he.language?.[e]?he.language[e]:e;(0,l.useEffect)((()=>{Nt(ct)}),[ct]),(0,l.useEffect)((()=>{he.token.length>0&&(e.parentId?St(A,xe,"CCMQuationDetID"):oe([]))}),[e.parentId]),(0,l.useEffect)((()=>{!Te&&e.parentId?St(A,ue,"CCMQuationDetID"):Te&&ke(ue)}),[ue]),(0,l.useImperativeHandle)(t,(()=>({searchItem:e=>{Et(e)},tableRefresh:()=>{St(A,xe,"CCMQuationDetID")},DialogTableProps:e=>{v(e)},HideEntryFields:e=>{st(!0===e)}})));const Et=e=>{""==e?St(A,xe,Fe?"DraftCCMQuationDetID":"CCMQuationDetID",Fe&&"DraftPage"):ht(e,{current:1,pageSize:100}),me(e)};function vt(t){Se.loading(!0);let a=g.v.Api+"FP1645S7/",l={data:{p1:"%%",p2:e.parentId?e.parentId:"0",p3:"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,C.Z)(a,l,he.token[0]).then((e=>{if(200==e.Output.status.code){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,qe(e.Output.data[0].TotalCount)):a=0,10==t.pageSize?We(Math.ceil(a)):20==t.pageSize?We(Math.ceil(a/2)):50==t.pageSize?We(Math.ceil(a/5)):100==t.pageSize&&We(Math.ceil(a/10)),Ye(e.Output.data),Se.loading(!1)}}))}function Tt(e,t){Ne({type:"editData",payload:[t]}),Ne({type:"IsDraft",payload:Fe}),Ne({type:"ShowDetail",payload:!0}),Se.Expanded(!0),Oe&&pe(!1)}(0,l.useEffect)((()=>{!1===e.cardview&&Ve(e.cardview),e.Dialogview&&(v(e.Dialogview),st(!0))}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&ht(e.searchsafaritext,{current:A.current,pageSize:A.pageSize})}),[e.searchsafaritext]);const Qt=()=>{Se.EditClose(!0),re?(document.getElementById("CCMQuationDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("CCMQuationDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("CCMQuationDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",Ce(!1),Ke?(E||(document.getElementById("CCMQuationDetailscoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationDetailscoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),document.getElementById("CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("CCMQuationDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("CCMQuationDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("CCMQuationDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",Ce(!0),document.getElementById("CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),pe(!1),window.clickFilter=!re},St=(t,a,l,n,i,o)=>{Se.loading(!0),"DraftPage"!==n&&Pe(he.IsDraft);let r=g.v.Api+"FP1645S3/",u={data:{p1:i||(a&&a.CCMQuationDetIDPK?a.CCMQuationDetIDPK:null),p2:a&&a.CCMQuationCode?a.CCMQuationCode:null,p3:a&&a.CCMQuationName?a.CCMQuationName:null,p4:a&&a.CCMTansStatus?a.CCMTansStatus:null,p5:a&&a.CCMMaterialName?a.CCMMaterialName:null,p6:a&&a.CCMQty?a.CCMQty:null,p7:a&&a.CCMAmount?a.CCMAmount:null,p8:a&&a.CCMTotalAmount?a.CCMTotalAmount:null,p9:a&&a.CCMTypeStatus?a.CCMTypeStatus:null,p10:a&&a.CCMQSubTotal?a.CCMQSubTotal:null,p11:a&&a.CCMQTaxAmount?a.CCMQTaxAmount:null,p12:a&&a.CCMQTaxValue?a.CCMQTaxValue:null,p13:a&&a.CCMQGrandTotal?a.CCMQGrandTotal:null,p14:null,p15:"DraftCCMQuationDetID"==l?"1":"0",p16:null,p17:e.parentId?Number(e.parentId):0,p18:a&&a.ComplaintID?a.ComplaintID:null,p19:a&&a.TaxID?a.TaxID:null,p20:a&&a.IsActive,p21:null,p22:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p23:a&&a.CreatedTtm?a.CreatedTtm:null,p24:a&&a.CreatedTtmType?a.CreatedTtmType:null,p25:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p26:null,p27:i?1:t.current,p28:t.pageSize,p29:l,p30:null,p31:null,p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}};(0,C.Z)(r,u,he.token[0]).then((a=>{if(i)(0,J.a)(a,Ne,n,o,Se);else if("200"==a.Output.status.code)if(a.Output.data.length>0){if(a.Output.data){let e=0;a.Output.data.length>0?(e=parseFloat(a.Output.data[0].TotalCount,10)/10,x(a.Output.data[0].TotalCount),w(a.Output.data[0].DraftCnt),Ne({type:"count",payload:a.Output.data[0].TotalCount}),"DraftPage"==n&&w(a.Output.data[0].TotalCount)):e=0,10==t.pageSize?h(Math.ceil(e)):20==t.pageSize?h(Math.ceil(e/2)):50==t.pageSize?h(Math.ceil(e/5)):100==t.pageSize&&h(Math.ceil(e/10)),oe(a.Output.data),Se.loading(!1)}e.Dialogview||(document.getElementById("divCCMQuationDetails-Entry").style.height="auto",document.getElementById("divCCMQuationDetails-Entry").style.display="block")}else Se.loading(!1),"DraftCCMQuationDetID"===l?(Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}),pe(!0),Pe(!1)):(oe([]),k({current:1,pageSize:10}),h(0),x(0),Ne({type:"count",payload:"0"}));else Se.alert({open:!0,color:"warning",message:[a.Output.status.message]}),Se.loading(!1)}))};function ht(t,a){if(!e.parentId)return!1;Se.loading(!0);const l=g.v.Api+"FP1645S4/",n={data:{p1:"%"+t+"%",p2:e.parentId?e.parentId:"0",p3:Fe?"1":"0",p4:a.current,p5:a.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,C.Z)(l,n,he.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let t=0;e.Output.data.length>0?(t=parseFloat(e.Output.data[0].TotalCount,10)/10,x(e.Output.data[0].TotalCount),Ne({type:"count",payload:e.Output.data[0].TotalCount})):t=0,10==a.pageSize?h(Math.ceil(t)):20==a.pageSize?h(Math.ceil(t/2)):50==a.pageSize?h(Math.ceil(t/5)):100==a.pageSize&&h(Math.ceil(t/10)),oe(e.Output.data),Se.loading(!1)}else oe([]),h(0),x(0),Ne({type:"count",payload:"0"}),Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Se.loading(!1);else Se.alert({open:!0,color:"warning",message:[e.Output.status.message]}),Se.loading(!1)}))}function Nt(e){let t=[],a=[],l=[],n=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldName&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let i=localStorage.getItem("Language");n.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[i]]})})),Ne({type:"language",payload:Object.assign({},...n)}),_e(a.reduce(((e,t)=>(e[t]="",e)),{})),ye(e),De(t),fe(a),at(l),nt(a)}const xt=()=>Te?null:n().createElement("div",null,Ue?n().createElement(ne.Z,{data:He,expanded:e=>!E&&Se.Expanded(e),edit:(e,t,a)=>{E?Se.select(e):(Ne({type:"editData",payload:[e]}),Ne({type:"IsDraft",payload:t}),Ne({type:"ShowDetail",payload:a}))}}):n().createElement(le.Z,{ref:s,frmctrlid:"tblcs_1645_L1_",id:"CCMQuationDetailsTable",headerdata:Me,tablesearchparams:Ge,searchvalue:e=>{_e(e),se(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...FilteredObj};yt(t),k({current:1,pageSize:10}),St({current:1,pageSize:10},t,Fe?"DraftCCMQuationDetID":"CCMQuationDetID",Fe&&"DraftPage")},bodydata:te,ondrag:Tt,bodyitem:Ie,visibleitem:Me,isdraft:Fe,IsView:!1,IsSub:e.tableview,tableExp:!1,tableID:c,showMore:!1,accessrights:he.AccessRights,expanded:e=>!E&&Se.Expanded(e),edit:(e,t,a)=>{E?Se.select(e):(Object.keys(e).map(((l,n)=>{l.includes("IDPK")&&St(A,null,t?"DraftCCMQuationDetID":"CCMQuationDetID",t&&"DraftPage",e[l],a)})),Se.hideAddBtn(!0))},viewtoggle:Se.viewtoggle,isexpanded:!E||Oe,tf:ft,action:E?"none":"",ViewComp:(e,t)=>{}}));return(0,l.useEffect)((()=>{ze(he.ExpandTableValue)}),[he.ExpandTableValue]),n().createElement("div",null,!ut&&!e.tableview&&n().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"0",padding:"0px 4px 0px 0px"}},n().createElement("div",{id:"fld1645L1ECSearchBar",className:"searchbar1"},n().createElement(M.Z,{frmctrlid:"fld1645L1TCInputSearch",className:"search_input",type:"text",id:"AdminCountryRegistrygridsearch",placeholder:It("Search"),value:de,onChange:e=>{me(e),Se.searchItem(e)},style:{width:"300px"}}),n().createElement("div",{className:"search_icon"},de?n().createElement("div",{id:"fld1645L1TCCloseIconCommonSearch",onClick:()=>{me(""),Se.searchItem("")}},n().createElement(u.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld1645L1TCInputSearchIcon"},n().createElement(U.Z,{className:"InputSearchIcon",onClick:()=>{document.getElementById("CCMQuationDetailsgridsearch").focus()}})))),n().createElement("div",{style:{width:"100%"}},he.AccessRights.IsAdd?n().createElement(X.Z,{className:"SaveBtnCommon flotright",frmctrlid:"fld1645L1TCAddBtnIsAdd",onClick:()=>{Se.hideAddBtn(!0),Ne({type:"editData",payload:[]}),Ne({type:"ShowDetail",payload:!1}),Ne({type:"Add",payload:!0})},disabled:!e.parentId}):"")),n().createElement(o.Z,{expanded:Be,onChange:()=>()=>{Le(Oe)}},e.Dialogview&&n().createElement(j.Z,null,n().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},n().createElement("div",{className:"displayFlex EntryHeader"},n().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.82-3:45:06 PM-19-8[1645]"},`${ft("1645")} (${N})`)),!1===e.cardview?null:n().createElement("div",{className:"displayFlex EntryHeaderBtn"},n().createElement("div",{id:"fld1645L1TCSearchBar",className:"searchbar",style:{marginTop:"8px"}},n().createElement(M.Z,{frmctrlid:"fld1645L1TCInputSearch",className:"search_input",type:"text",placeholder:It("Search"),value:de,onChange:e=>{Et(e)}}),n().createElement("div",{className:"search_icon"},de?n().createElement("div",{id:"fld1645L1TCInputCloseIcon",onClick:()=>{Et("")}},n().createElement(u.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld1645L1TCInputSearchIcon"},n().createElement(U.Z,{className:"InputSearchIcon"}))))))),n().createElement(r.Z,{className:"AccDetails"},n().createElement("div",{className:"tableCardL1",style:{height:e.tableview?"auto":"fit-content"}},!e.tableview&&n().createElement("div",{id:"CCMQuationDetails-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:n().createElement("div",{className:"tableHeaderItems displayFlex"},!Fe&&n().createElement("div",{frmctrlid:"fld1645L1TCFilterDataIsDraft",id:"CCMQuationDetailsfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{Qt()}},n().createElement(d.ZP,{title:It("Filter Data"),placement:"top"},n().createElement("span",null,n().createElement(I.Ol$,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},It("Filter Data"))),!E&&!Fe&&!Te&&n().createElement(z.Z,{formctrlidprint:"fld1645L1TCExportPrint",formctrlidexport:"fld1645L1TCExportTable",formctrlidrefresh:"fld1645L1TCExportRefresh",title:ft("1645"),data:B,exportData:Mt,Items:lt,columnIndex:tt,TableVisibleItem:Me,userGridViewFormID:c,TableTotalCount:N,triggerApi:t=>{((t,l,n,i,o)=>{if(0===N)return Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;Se.loading(!0);let r=g.v.Api+"FP1645S3/",u={data:{p1:t&&t.CCMQuationDetIDPK?t.CCMQuationDetIDPK:null,p2:t&&t.CCMQuationCode?t.CCMQuationCode:null,p3:t&&t.CCMQuationName?t.CCMQuationName:null,p4:t&&t.CCMTansStatus?t.CCMTansStatus:null,p5:t&&t.CCMMaterialName?t.CCMMaterialName:null,p6:t&&t.CCMQty?t.CCMQty:null,p7:t&&t.CCMAmount?t.CCMAmount:null,p8:t&&t.CCMTotalAmount?t.CCMTotalAmount:null,p9:t&&t.CCMTypeStatus?t.CCMTypeStatus:null,p10:t&&t.CCMQSubTotal?t.CCMQSubTotal:null,p11:t&&t.CCMQTaxAmount?t.CCMQTaxAmount:null,p12:t&&t.CCMQTaxValue?t.CCMQTaxValue:null,p13:t&&t.CCMQGrandTotal?t.CCMQGrandTotal:null,p14:null,p15:Fe?"1":"0",p16:null,p17:e.parentId?Number(e.parentId):0,p18:t&&t.ComplaintID?t.ComplaintID:null,p19:t&&t.TaxID?t.TaxID:null,p20:t&&t.IsActive,p21:null,p22:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p23:t&&t.CreatedTtm?t.CreatedTtm:null,p24:t&&t.CreatedTtmType?t.CreatedTtmType:null,p25:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p26:null,p27:A.current,p28:N,p29:Fe?"DraftCCMQuationDetID":"CCMQuationDetID",p30:null,p31:null,p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}};Se.loading(!1),Se.alert({open:!0,color:"success",message:[`${ft(1645)} - ${o.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,C.Z)(r,u,he.token[0],o).then((e=>{(0,ee.PDF_Excel_Generate)(e,Se,lt,P,a,o)}))})(ue,Z.column,0,0,t)},Refresh:()=>{me(""),k({current:1,pageSize:100}),s.current.clearItem(),he.IsDraft?St({current:1,pageSize:100},xe,"DraftCCMQuationDetID"):St({current:1,pageSize:100},xe,"CCMQuationDetID")},disabledPrint:!he.AccessRights.IsPrint,disabledExport:!he.AccessRights.IsExport,ref:a,iconinfo:"displayNone"}),!Fe&&!Te&&!E&&n().createElement("div",{className:"buttoncard",onClick:()=>Ct(!rt)},n().createElement("span",null,rt?n().createElement(d.ZP,{disableFocusListener:!0,title:It("Less"),placement:"top"},n().createElement("span",{id:"fld1645L1TCLess"},n().createElement($.ldB,{className:"tableFilterColumnIcon"}))):n().createElement(d.ZP,{disableFocusListener:!0,title:It("More"),placement:"top"},n().createElement("span",{id:"fld1645L1TCMore"},n().createElement($.ilJ,{className:"tableFilterColumnIcon"}))))),rt?n().createElement("div",{className:"EntryHeaderMore"},n().createElement("div",{style:{display:"flex"}},Te||!Oe?null:E||!he.AccessRights.IsAdd||Fe?"":n().createElement("div",null,n().createElement("div",{frmctrlid:"fld1645L1TCFilterDataIsAdd",id:"CCMQuationDetailscoldiv",className:"buttoncard",onClick:()=>{Se.EditClose(!0),ce?(document.getElementById("CCMQuationDetailsFilterDiv").style.width="0%",document.getElementById("CCMQuationDetailsTabDiv").style.width="100%",document.getElementById("CCMQuationDetailsFilterDiv").style.display="none",document.getElementById("CCMQuationDetailscoldiv").style.width="fit-content",document.getElementById("CCMQuationDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",pe(!1)):(document.getElementById("CCMQuationDetailsFilterDiv").style.width="25%",document.getElementById("CCMQuationDetailsTabDiv").style.width="75%",document.getElementById("CCMQuationDetailsFilterDiv").style.display="block",document.getElementById("CCMQuationDetailsfildiv").style.width="fit-content",document.getElementById("CCMQuationDetailsfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMQuationDetailscoldiv").style.width="fit-content",document.getElementById("CCMQuationDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",pe(!0)),Ce(!1)}},n().createElement(d.ZP,{title:It("Manage Columns"),placement:"top"},n().createElement("div",null,n().createElement(q.gYA,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},It("Manage Columns")))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!E&&Oe&&!Te&&!Fe&&n().createElement("div",null,n().createElement("div",{id:"CCMQuationDetailscoldiv",className:"buttoncard",onClick:()=>{Ue?je(!1):(je(!0),vt({current:1,pageSize:100}))}},n().createElement(d.ZP,{title:It("TableScrollData"),placement:"top"},n().createElement("div",{id:"fld1645L1TCTableScrollData"},n().createElement(ie.Z,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},It("Table Scroll Data")))))):""),!Fe&&!E&&n().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},Te||Fe?null:n().createElement("div",null,n().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"}},n().createElement("div",{className:"b2",id:"button-11"},n().createElement("div",{className:Ke?"buttonList":"buttonGrid",id:"fld1645L1TCListView",onClick:()=>{Ve(!0),ot(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement($.umT,null)),n().createElement("span",null,It("List"))),n().createElement("div",{className:Ke||it?"buttonGrid":"buttonList",id:"fld1645L1TCCardView",onClick:()=>{Ve(!1),ot(!1)}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(f.aCJ,null)),n().createElement("span",null,It("Card"))),n().createElement("div",{className:it?"buttonList":"buttonGrid",id:"fld1645L1TCTileView",onClick:()=>{ot(!0),Ve(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(W.f_H,null)),n().createElement("span",null,It("Tile"))))))),Te?null:Ue?e.IsCollapse?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(H.Z,{style:{color:"#777"},id:"fld1645L1TCTableTopPagination",rowsPerPageOptions:[],component:"div",count:Number(Je),page:T,onPageChange:(e,t)=>{Q(t),vt({current:t+1,pageSize:Xe.pageSize}),et({current:t+1,pageSize:Xe.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(K.Z,{count:$e,color:"primary",page:Xe.current,onChange:(e,t)=>{et({current:t,pageSize:Xe.pageSize}),We(t),vt({current:t,pageSize:Xe.pageSize})}}),n().createElement("div",null,n().createElement(G.Z,{className:"BootstrapInputStyle",value:Xe.pageSize,frmctrlid:"fld1645L1TCSelectPagination",onChange:e=>{et({current:1,pageSize:e.target.value}),vt({current:1,pageSize:e.target.value})}},n().createElement(V.Z,{value:10},"10"),n().createElement(V.Z,{value:20},"20"),n().createElement(V.Z,{value:50},"50"),n().createElement(V.Z,{value:100},"100"))),Oe&&n().createElement("p",{className:"per-page"},"/ ",It("RowperpageOf")," (",Je,")")):e.IsCollapse?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(H.Z,{style:{color:"#777"},id:"fld1645L1TCTablePagination",rowsPerPageOptions:[],component:"div",count:Number(N),page:T,onPageChange:(e,t)=>{Q(t),St({current:t+1,pageSize:A.pageSize},xe,Fe?"DraftCCMQuationDetID":"CCMQuationDetID",Fe&&"DraftPage"),k({current:t+1,pageSize:A.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(K.Z,{count:S,siblingCount:0,color:"primary",page:A.current,onChange:(e,t)=>{if(k({current:t,pageSize:A.pageSize}),Fe)St({current:t,pageSize:A.pageSize},be,"DraftCCMQuationDetID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";de.length>0?ht(de,{current:t,pageSize:A.pageSize}):St({current:t,pageSize:A.pageSize},be,"CCMQuationDetID")}}}),n().createElement("div",null,n().createElement(G.Z,{className:"BootstrapInputStyle",value:A.pageSize,id:"fld1645L1TCSelectPaging",onChange:e=>{k({current:1,pageSize:e.target.value}),Fe?St({current:1,pageSize:e.target.value},be,"DraftCCMQuationDetID","DraftPage"):de.length>0?ht(de,{current:1,pageSize:e.target.value}):St({current:1,pageSize:e.target.value},be,"CCMQuationDetID")}},n().createElement(V.Z,{value:10},"10"),n().createElement(V.Z,{value:20},"20"),n().createElement(V.Z,{value:50},"50"),n().createElement(V.Z,{value:100},"100"))),Oe&&n().createElement("p",{className:"per-page"},"/ ",It("RowperpageOf")," (",N,") "))),n().createElement("div",{id:"CCMQuationDetails-TableBody",className:"displayFlex padding0",style:{height:e.tableview?"auto":"66vh",overflow:"auto"}},n().createElement("div",{id:"CCMQuationDetailsFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},re&&n().createElement(O,{parentId:e.parentId,searchData:e=>{se(e||gt),Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)))},formID:c,data:()=>{},visibleData:()=>{},token:he.token[0],CloseBtnClk:()=>Qt(),userGrid:ct,msg:(e,t)=>Se.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{tableRefresh()}}),ce&&n().createElement(_.Z,{Refresh:e=>{St({current:1,pageSize:100},xe,"CCMQuationDetID")},frmctrlid:"fld1645L1TCTableColumnOrder",loading:e=>Se.loading(e),className:"dragCheckboxDivL1",AltMsg:(e,t)=>Se.alert({open:!0,color:t,message:[e]}),select:ce,userID:m,userGridViewFormID:c,saved:(e,t)=>{e&&Nt(t),pt(t),Ne({type:"showTableview",payload:t})},Token:he.token[0]})),n().createElement("div",{id:"CCMQuationDetailsTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:e.tableview?"auto":"66vh"}},Ke?n().createElement(xt,null):n().createElement(Y.Z,{frmctrlid:"fld1645L1TCExpandedCardDual",data:te,id:"CCMQuationDetails",title:"CCMMaterialName",cardTile:!!it,visibleitem:Me,gridCountmdlg:4,gridCountxssm:6,onDoubleClick:(e,t)=>{E?Se.select(e):("edit"==t?(Ne({type:"editData",payload:[e]}),Ne({type:"IsDraft",payload:Fe}),Ne({type:"ShowDetail",payload:!1}),Se.Expanded(!0)):(Ne({type:"editData",payload:[e]}),Ne({type:"IsDraft",payload:Fe}),Ne({type:"ShowDetail",payload:!0}),Se.Expanded(!0),Se.viewtoggle()),re?Ce(!0):ce?pe(!0):(pe(!1),pe(!1))),Se.hideAddBtn(!0)}})))))))}));var re=a(37148),Ce=a(29800),ue=(a(10966),a(21392),a(26537)),se=(a(44528),a(99090),a(1695)),de=a(61924),me=a.n(de),ce=(a(40826),a(55490)),pe=a(92371);const ge={EnterKeyValues:{CCMQuationDetails:[,"CCMQuationCode","ComplaintNo","CCMQuationCode","CCMQuationName","CCMTansStatus","CCMMaterialName","CCMQty","CCMAmount","CCMTotalAmount","CCMTypeStatus"]},Label:{CCMQuationDetails:{CCMQuationID:["CCMMaterialName","CCMQuationCode","CCMQuationName"],ComplaintID:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMQuationCode:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMQuationName:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMTansStatus:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMMaterialName:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMQty:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMAmount:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMTotalAmount:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMTypeStatus:["CCMMaterialName","CCMQuationCode","CCMQuationName"]}},LabelHeader:{CCMQuationDetails:{CCMQuationID:["CCMMaterialName","CCM Quation Code","CCM Quation Name"],ComplaintID:["CCMMaterialName","CCMQuationCode","CCMQuationName"],CCMQuationCode:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMQuationName:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMTansStatus:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMMaterialName:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMQty:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMAmount:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMTotalAmount:["CCM Material Name","CCM Quation Code","CCM Quation Name"],CCMTypeStatus:["CCM Material Name","CCM Quation Code","CCM Quation Name"]}},Property:{CCMQuationDetails:{CCMQuationID:{id:"fld1645_41707",clearID:"CCMQuationDetailsCCMQuationCodeClear",type:"select",labelID:"CCMQuationIDPK",labelname:"CCM Quation",fielddisplayname:"CCMQuationCode",foreignName:[],createEasy:!0,advanceSearch:!0,disabled:!1,mandatory:!0},ComplaintID:{id:"fld1645_41708",clearID:"CCMQuationDetailsComplaintNoClear",type:"select",labelID:"ComplaintIDPK",labelname:"Complaint",fielddisplayname:"ComplaintNo",foreignName:[],createEasy:!0,advanceSearch:!0,disabled:!1,mandatory:!0},CCMQuationCode:{id:"fld1645_41696",labelID:"CCMQuationCode",maxLength:"50",labelname:"CCM Quation Code",frmctrlid:"fld1645_41696",frmctrlidname:"CCMQuationCode",type:"text",mandatory:!0,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMQuationName:{id:"fld1645_41697",labelID:"CCMQuationName",maxLength:"50",labelname:"CCM Quation Name",frmctrlid:"fld1645_41697",frmctrlidname:"CCMQuationName",type:"text",mandatory:!0,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTansStatus:{id:"fld1645_41698",labelID:"CCMTansStatus",maxLength:"50",labelname:"CCM Tans Status",frmctrlid:"fld1645_41698",frmctrlidname:"CCMTansStatus",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMMaterialName:{id:"fld1645_41699",labelID:"CCMMaterialName",maxLength:"50",labelname:"CCM Material Name",frmctrlid:"fld1645_41699",frmctrlidname:"CCMMaterialName",type:"text",mandatory:!0,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMQty:{id:"fld1645_41700",labelID:"CCMQty",maxLength:"50",labelname:"CCM Qty",frmctrlid:"fld1645_41700",frmctrlidname:"CCMQty",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMAmount:{id:"fld1645_41701",labelID:"CCMAmount",maxLength:"50",labelname:"CCM Amount",frmctrlid:"fld1645_41701",frmctrlidname:"CCMAmount",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTotalAmount:{id:"fld1645_41702",labelID:"CCMTotalAmount",maxLength:"50",labelname:"CCM Total Amount",frmctrlid:"fld1645_41702",frmctrlidname:"CCMTotalAmount",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTypeStatus:{id:"fld1645_41703",labelID:"CCMTypeStatus",maxLength:"50",labelname:"CCM Type Status",frmctrlid:"fld1645_41703",frmctrlidname:"CCMTypeStatus",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1}}},SubForms:{},POPLabel:{CCMQuationDetails:{CCMQuationID:[""],ComplaintID:[""]}}};var ye=a(99263),Me=a(99323),De=a(6562),Ie=a(45155),fe=(a(49174),a(38773),a(19089),a(16233)),Ee=a.n(fe),ve=a(82729),Te=a(75355),Qe=a(11107);const Se={CCMQuationDetIDPK:"",CCMQuationCode:"",CCMQuationName:"",CCMTansStatus:"",CCMMaterialName:"",CCMQty:"",CCMAmount:"",CCMTotalAmount:"",CCMTypeStatus:"",CCMQSubTotal:"",CCMQTaxAmount:"",CCMQTaxValue:"",CCMQGrandTotal:"",IsDefault:!1,IsDraft:!1,Remarks:"",CCMQuationID:null,ComplaintID:null,TaxID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",Type:"CCMQuationDetID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")},he=(0,l.forwardRef)(((e,t)=>{const a=(0,i.useSelector)((e=>e.form)),[u,s]=(0,l.useState)(!1),[d,m]=((0,l.useRef)(),(0,l.useRef)(),(0,l.useState)(!0)),[y,M]=(0,l.useState)(!1),[I,f]=(0,l.useState)(!1),[E,T]=(0,l.useState)(""),[h,N]=(0,l.useState)(!1),[x,b]=(0,l.useState)([]),[w,A]=(0,l.useState)(null),[k,F]=(0,l.useReducer)(pe.Z,Se),[P,B]=(0,l.useState)(!1),[Z,L]=(0,l.useState)([]),[O,z]=(0,l.useState)(!1),K=(0,l.useContext)(e.context?e.context:Re),{cstate:V,cdispatch:G}=e.ContextApi?e.ContextApi:Ze(),[_,U]=(0,l.useState)(0),[H,Y]=(0,l.useState)(""),$=(0,l.useRef)(null),[W,J]=Ee()("1645"),[q,X]=(0,l.useState)(!0),[ee,te]=(0,l.useState)(!0),[ae,le]=(0,l.useState)(!0),[ne,ie]=(0,l.useState)(!0),[oe,Ce]=(0,l.useState)(!0),[de,fe]=(0,l.useState)(!0),[he,Ne]=(0,l.useState)(!0),[xe,be]=(0,l.useState)(!0),[we,Ae]=(0,l.useState)(!1);let ke=(0,D.Z)();const[Fe,Pe]=(0,l.useState)({}),Be=e=>ke[e]?ke[e]:e,Le=t=>V.language?.[t]?V.language[t]:e.createEasy?Fe?.[t]:t;(0,l.useEffect)((()=>{ze()}),[]),(0,l.useEffect)((()=>{ze()}),[e.parentId]),(0,l.useEffect)((()=>{V.editData.length>0?(Oe(V.editData[0],""),M(!0)):V.Add&&(ze(),_e(1,null,"SetDefaultCCMQuationDetID",V.token[0]),M(!0))}),[V.editData]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),Pe(Object.assign({},...t))}(W)}),[W]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{ze()},CreateEasyProps:(e=!0,t)=>{J(!0),t?(We(t),M(e)):(ze(),M(e))},AddOpen:e=>{ze(),M(!0)}})));const Oe=(t,a)=>{Object.keys(t).forEach((function(e){0==t[e]&&(t[e]=null)})),f(t.IsDraft),"SetDefaultCCMQuationDetID"==a?Y(t.CCMQuationDetIDPK):(U(e.primid?Number(e.primid):t.CCMQuationDetIDPK?t.CCMQuationDetIDPK:0),G({type:"PrimaryId",payload:t.CCMQuationDetIDPK})),F({type:"boolean",name:"IsDefault",boolean:t.IsDefault}),F({type:"number",name:"CCMQuationID",number:t.CCMQuationID?Number(t.CCMQuationID):0}),F({type:"text",name:"CCMQuationCode",value:t.CCMQuationCode}),F({type:"number",name:"ComplaintID",number:t.ComplaintID?Number(t.ComplaintID):0}),F({type:"text",name:"ComplaintNo",value:t.ComplaintNo}),F({type:"text",name:"CCMQuationCode",value:t.CCMQuationCode?t.CCMQuationCode:""}),F({type:"text",name:"CCMQuationName",value:t.CCMQuationName?t.CCMQuationName:""}),F({type:"number",name:"CCMTansStatus",number:t.CCMTansStatus}),F({type:"text",name:"CCMMaterialName",value:t.CCMMaterialName?t.CCMMaterialName:""}),F({type:"number",name:"CCMQty",number:Number(t.CCMQty)}),F({type:"number",name:"CCMAmount",number:Number(t.CCMAmount)}),F({type:"number",name:"CCMTotalAmount",number:Number(t.CCMTotalAmount)}),F({type:"number",name:"CCMTypeStatus",number:t.CCMTypeStatus}),t.IsDraft?m(!0):m(!("1"!=t.IsActive&&!t.IsActive))},ze=()=>{b([]),U(0),Y(""),e.createEasy||K.resetImg(),G({type:"PrimaryId",payload:""}),F({type:"boolean",name:"IsDefault",boolean:!1}),F({type:"text",name:"CCMQuationID",value:null}),F({type:"text",name:"CCMQuationCode",value:""}),document.getElementById("CCMQuationDetailsCCMQuationCodeClear")&&document.getElementById("CCMQuationDetailsCCMQuationCodeClear").click(),F({type:"text",name:"ComplaintID",value:null}),F({type:"text",name:"ComplaintNo",value:""}),document.getElementById("CCMQuationDetailsComplaintNoClear")&&document.getElementById("CCMQuationDetailsComplaintNoClear").click(),F({type:"text",name:"CCMQuationCode",value:""}),F({type:"text",name:"CCMQuationName",value:""}),F({type:"number",name:"CCMTansStatus",number:0}),F({type:"text",name:"CCMMaterialName",value:""}),F({type:"number",name:"CCMQty",number:0}),F({type:"number",name:"CCMAmount",number:0}),F({type:"number",name:"CCMTotalAmount",number:0}),F({type:"number",name:"CCMTypeStatus",number:0}),m(!0),T(""),X(!0),te(!0),le(!0),ie(!0),Ce(!0),fe(!0),Ne(!0),be(!0)},Ke=t=>{K.loading(!0),K.ConfirmAlert(null);const a=g.v.Api+"FP1645S2/",l={data:[{p1:"SetDefaultCCMQuationDetID"==t?"NORECORDS"!=H&&H?H:0:_,p2:Je(k.CCMQuationCode),p3:Je(k.CCMQuationName),p4:k.CCMTansStatus?Number(k.CCMTansStatus):0,p5:Je(k.CCMMaterialName),p6:k.CCMQty?Number(k.CCMQty):0,p7:k.CCMAmount?Number(k.CCMAmount):0,p8:k.CCMTotalAmount?Number(k.CCMTotalAmount):0,p9:k.CCMTypeStatus?Number(k.CCMTypeStatus):0,p10:k.CCMQSubTotal?Number(k.CCMQSubTotal):0,p11:k.CCMQTaxAmount?Number(k.CCMQTaxAmount):0,p12:k.CCMQTaxValue?Number(k.CCMQTaxValue):0,p13:k.CCMQGrandTotal?Number(k.CCMQGrandTotal):0,p14:k.IsDefault,p15:!1,p16:"SetDefaultCCMQuationDetID"==t?"SetDefault":null,p17:e.parentId?Number(e.parentId):k.CCMQuationID?k.CCMQuationID:0,p18:k.ComplaintID?k.ComplaintID:0,p19:k.TaxID?k.TaxID:0,p20:d,p21:"SetDefaultCCMQuationDetID"==t,p22:localStorage.getItem("userid"),p23:Q()().format("YYYY-MM-DD hh:mm:ss"),p24:localStorage.getItem("userid"),p25:Q()().format("YYYY-MM-DD hh:mm:ss")}]};(0,ue.Z)(0).then((t=>{(0,C.Z)(a,l,t).then((t=>{const a=t.Output[0].status;let l=t.Output[0].Data,n=new Array,i=new Array;"200"===a.code?(l.map((e=>{e&&(n.push(e.IsAlert),i.push(e.AlertMessage),e.AlertMessage)})),n.some((e=>"1"==e))?(K.alert({open:!0,color:"warning",message:i}),K.loading(!1)):(t=>{X(!0),te(!0),le(!0),ie(!0),Ce(!0),fe(!0),Ne(!0),be(!0),K.loading(!0),K.ConfirmAlert(null),G({type:"IsDraft",payload:!1});const a=g.v.Api+"FP1645S1/",l={data:[{p1:_,p2:Je(k.CCMQuationCode),p3:Je(k.CCMQuationName),p4:k.CCMTansStatus?Number(k.CCMTansStatus):0,p5:Je(k.CCMMaterialName),p6:k.CCMQty?Number(k.CCMQty):0,p7:k.CCMAmount?Number(k.CCMAmount):0,p8:k.CCMTotalAmount?Number(k.CCMTotalAmount):0,p9:k.CCMTypeStatus?Number(k.CCMTypeStatus):0,p10:k.CCMQSubTotal?Number(k.CCMQSubTotal):0,p11:k.CCMQTaxAmount?Number(k.CCMQTaxAmount):0,p12:k.CCMQTaxValue?Number(k.CCMQTaxValue):0,p13:k.CCMQGrandTotal?Number(k.CCMQGrandTotal):0,p14:k.IsDefault,p15:!1,p16:null,p17:e.parentId?Number(e.parentId):k.CCMQuationID?k.CCMQuationID:0,p18:k.ComplaintID?k.ComplaintID:0,p19:k.TaxID?k.TaxID:0,p20:d,p21:!1,p22:localStorage.getItem("userid"),p23:Q()().format("YYYY-MM-DD hh:mm:ss"),p24:localStorage.getItem("userid"),p25:Q()().format("YYYY-MM-DD hh:mm:ss")}]};(0,ue.Z)(0).then((t=>{(0,S.Z)(a,l,t).then((t=>{const a=t[0].status;200==a.code?(K.alert({open:!0,color:"success",message:[a.message]}),document.getElementById("overlayimgAttCCMQuationDetails"),K.loading(!1),G({type:"PrimaryId",payload:t[0].Data.IDPK}),e.createEasy||(K.RefreshTable(),K.attachmentSave(t[0].Data.IDPK)),ze(),V.AccessRights.IsApproval&&K.Approval(!0),document.getElementById("overlayimgAttCCMQuationDetails")&&(document.getElementById("overlayimgAttCCMQuationDetails").style.width="0%",document.getElementById("overlayimgAttCCMQuationDetails").style.display="none",document.getElementById("divCCMQuationDetails-Entry").style.width="100%"),e.createEasy||(document.getElementById("CCMQuationDetails-MainTable").style.display="block")):(K.alert({open:!0,color:"warning",message:[a.message]}),K.loading(!1)),M(!0)}))}))})()):(K.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),K.loading(!1))}))}))};function Ve(e){return(0,ye.CreateEasy)(e,V,G,K,$),!1}function Ge(e,a){return(0,Me.AdvanceSearch)(e,a,Re,Ze(),je,t),!1}const _e=(t,a,l,n,i,o)=>{const r=g.v.Api+"FP1645S3/",u={data:{p1:null,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:e.parentId?Number(e.parentId):0,p18:"0"==k.ComplaintID?null:k.ComplaintID,p19:"0"==k.TaxID?null:k.TaxID,p20:e.Dialogview?"1":null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:t,p28:10,p29:l,p30:null,p31:null,p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}},s=Object.keys(u.data).slice(0,Object.keys(u.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(u.data).length-8?u.data[t]:null,e)),{});B(!0);const d={data:s};return(0,C.Z)(r,"ClearAll"==l?d:u,"SetDefaultCCMQuationDetID"==l&&n?n:V.token[0]).then((e=>{const a=e.Output.status.code,n=e.Output.data;if("200"==a){const e=n.length;if(i)return 1==n.length?n[0]:{};L(1==t?e>0?n:[]:Z.concat(n)),"SetDefaultCCMQuationDetID"==l&&(e>0?Oe(n[0],"SetDefaultCCMQuationDetID"):Y("NORECORDS")),B(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),B(!1)}))},Ue=(t,l,n)=>{const i=g.v.Api+"FP1645S3/",o={data:{p1:null,p2:"CCMQuationCode"==n&&l?"%"+l+"%":null,p3:"CCMQuationName"==n&&l?"%"+l+"%":null,p4:"CCMTansStatus"==n&&l?"%"+l+"%":null,p5:"CCMMaterialName"==n&&l?"%"+l+"%":null,p6:"CCMQty"==n&&l?"%"+l+"%":null,p7:"CCMAmount"==n&&l?"%"+l+"%":null,p8:"CCMTotalAmount"==n&&l?"%"+l+"%":null,p9:"CCMTypeStatus"==n&&l?"%"+l+"%":null,p10:"CCMQSubTotal"==n&&l?"%"+l+"%":null,p11:"CCMQTaxAmount"==n&&l?"%"+l+"%":null,p12:"CCMQTaxValue"==n&&l?"%"+l+"%":null,p13:"CCMQGrandTotal"==n&&l?"%"+l+"%":null,p14:null,p15:null,p16:null,p17:a.CCMQuationRegistryCCMQuationID?a.CCMQuationRegistryCCMQuationID:"0",p18:null,p19:null,p20:e.Dialogview?"1":null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:t,p28:10,p29:"CCMQuationDetID",p30:null,p31:null,p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}},r={data:Object.keys(o.data).slice(0,Object.keys(o.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(o.data).length-8?o.data[t]:null,e)),{})};B(!0),(0,C.Z)(i,"ClearAll"==n?r:o,V.token[0]).then((e=>{const a=e.Output.status.code,l=e.Output.data;if("200"==a){const e=l.length;1==t?("CCMQuationCode"==n&&X(e>0),"CCMQuationName"==n&&te(e>0),"CCMTansStatus"==n&&le(e>0),"CCMMaterialName"==n&&ie(e>0),"CCMQty"==n&&Ce(e>0),"CCMAmount"==n&&fe(e>0),"CCMTotalAmount"==n&&Ne(e>0),"CCMTypeStatus"==n&&be(e>0),L(l)):("CCMQuationCode"==n&&X(!0),"CCMQuationName"==n&&te(!0),"CCMTansStatus"==n&&le(!0),"CCMMaterialName"==n&&ie(!0),"CCMQty"==n&&Ce(!0),"CCMAmount"==n&&fe(!0),"CCMTotalAmount"==n&&Ne(!0),"CCMTypeStatus"==n&&be(!0),L(Z.concat(l))),B(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),B(!1)}))},je=(0,l.useCallback)((async(e,t,a)=>{"text"==a?F({type:a,name:t,value:e}):"number"==a?F({type:a,name:t,number:Number(e)}):"boolean"==a?F({type:a,name:t,boolean:e}):"date"==a?F({type:"text",name:t,value:e}):"select"==a&&("CCMQuationID"==t?(F({type:"text",name:"CCMQuationID",value:e.CCMQuationIDPK?e.CCMQuationIDPK:null}),F({type:"text",name:"CCMQuationCode",value:e.CCMQuationCode?e.CCMQuationCode:null}),F({type:"text",name:"ComplaintID",value:e.ComplaintID?e.ComplaintID:null}),F({type:"text",name:"ComplaintNo",value:e.ComplaintNo?e.ComplaintNo:null})):"ComplaintID"==t&&(F({type:"text",name:"ComplaintID",value:e.ComplaintIDPK?e.ComplaintIDPK:null}),F({type:"text",name:"ComplaintNo",value:e.ComplaintNo?e.ComplaintNo:null}),F({type:"text",name:"CCMQuationID",value:e.CCMQuationID?e.CCMQuationID:null}),F({type:"text",name:"CCMQuationCode",value:e.CCMQuationCode?e.CCMQuationCode:null})))}),[k]);function He(e){if("CCMQuationID"==e){if(!k.CCMQuationID)return!1;F({type:"text",name:"CCMQuationID",value:null}),F({type:"text",name:"CCMQuationCode",value:""}),document.getElementById("CCMQuationDetailsCCMQuationCodeClear")&&document.getElementById("CCMQuationDetailsCCMQuationCodeClear").click(),F({type:"text",name:"ComplaintID",value:null}),F({type:"text",name:"ComplaintNo",value:""}),document.getElementById("CCMQuationDetailsComplaintNoClear")&&document.getElementById("CCMQuationDetailsComplaintNoClear").click()}else if("ComplaintID"==e){if(!k.ComplaintID)return!1;F({type:"text",name:"ComplaintID",value:null}),F({type:"text",name:"ComplaintNo",value:""}),document.getElementById("CCMQuationDetailsComplaintNoClear")&&document.getElementById("CCMQuationDetailsComplaintNoClear").click(),F({type:"text",name:"CCMQuationID",value:null}),F({type:"text",name:"CCMQuationCode",value:""}),document.getElementById("CCMQuationDetailsCCMQuationCodeClear")&&document.getElementById("CCMQuationDetailsCCMQuationCodeClear").click()}}function Ye(e){if("CCMQuationID"==e){if(!k.CCMQuationID)return!1;F({type:"text",name:"CCMQuationID",value:null}),F({type:"text",name:"ComplaintID",value:null})}else if("ComplaintID"==e){if(!k.ComplaintID)return!1;F({type:"text",name:"ComplaintID",value:null}),F({type:"text",name:"CCMQuationID",value:null})}}const $e=e=>{K.ConfirmAlert(n().createElement(me(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>We(e),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Be("Yes"),cancelBtnText:Be("No"),showCancel:!0},Be("Do you want to update this record?")))};function We(e){K.ConfirmAlert(null),f(e.IsDraft),U(Number(e.CCMQuationDetIDPK)?Number(e.CCMQuationDetIDPK):0),F({type:"number",name:"CCMQuationID",number:e.CCMQuationID?Number(e.CCMQuationID):0}),F({type:"text",name:"CCMQuationCode",value:e.CCMQuationCode?e.CCMQuationCode:""}),F({type:"number",name:"ComplaintID",number:e.ComplaintID?Number(e.ComplaintID):0}),F({type:"text",name:"ComplaintNo",value:e.ComplaintNo?e.ComplaintNo:""}),F({type:"text",name:"CCMQuationCode",value:e.CCMQuationCode?e.CCMQuationCode:""}),F({type:"text",name:"CCMQuationName",value:e.CCMQuationName?e.CCMQuationName:""}),F({type:"text",name:"CCMTansStatus",value:e.CCMTansStatus?e.CCMTansStatus:""}),F({type:"text",name:"CCMMaterialName",value:e.CCMMaterialName?e.CCMMaterialName:""}),F({type:"text",name:"CCMQty",value:e.CCMQty?e.CCMQty:""}),F({type:"text",name:"CCMAmount",value:e.CCMAmount?e.CCMAmount:""}),F({type:"text",name:"CCMTotalAmount",value:e.CCMTotalAmount?e.CCMTotalAmount:""}),F({type:"text",name:"CCMTypeStatus",value:e.CCMTypeStatus?e.CCMTypeStatus:""})}const Je=e=>"string"==typeof e?e.trim():e;return n().createElement("div",null,n().createElement(o.Z,{expanded:y,onChange:e=>{}},n().createElement(j.Z,null,n().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},n().createElement("div",{className:"displayFlex EntryHeader"},n().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.82-3:45:06 PM-19-8[1645]"},`${Le("1645")} (${V.count})`)),y&&n().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"6px",padding:"0px 4px 0px 0px"}},n().createElement("div",{className:"HeadTxt",title:"10.0.0.82-3:45:06 PM-19-8[1645]"}," ",Be("Add "),Le("1645")),n().createElement("div",{className:"displayFlex EntryHeaderBtn"},V.AccessRights.IsDelete&&n().createElement("div",{className:"GridAlign"},n().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},n().createElement(De.Z,{row:!0},n().createElement(R.Z,{labelPlacement:"bottom",id:"fld1645L1ECEntryCheckbox",control:n().createElement(v.Z,{checked:"1"==d,onChange:e=>m(e.target.checked)}),label:Be(1==d?"Active":"In Active")})))),!e.createEasy&&n().createElement("div",{className:"GridAlign",onClick:()=>{K.AttachExpand(!0)},id:"fld1645L1ECIconButton"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement("div",{disableRipple:!0,disabled:!1},n().createElement(Ie.Ypb,{className:"Iconstyles"}))),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,Be("Attach")))),!_&&n().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{ze()},id:"fld1645L1ECClearBtn"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement(Ie.pYJ,{className:"Iconstyles"})),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,Be("Reset")))),V.AccessRights.IsAdd||V.AccessRights.IsEdit?n().createElement(se.Z,{frmctrlid:"fld1645L1ECSaveBtnIsAdd",name:Be(_?"Update":"Save"),disabled:!1,onClick:()=>{e.parentId&&0!=e.parentId?k.ComplaintID&&0!=k.ComplaintID?Je(k.CCMQuationCode)?Je(k.CCMQuationName)?Je(k.CCMMaterialName)?K.ConfirmAlert(n().createElement(me(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:Be("Are you sure?"),onConfirm:()=>Ke(),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Be("Yes"),cancelBtnText:Be("Cancel"),showCancel:!0},Be(_?"Do you want to Update?":"Do you want to Save?"))):K.alert({open:!0,color:"warning",message:[Be("Please enter the")+""+Le("CCMMaterialName")]}):K.alert({open:!0,color:"warning",message:[Be("Please enter the")+""+Le("CCMQuationName")]}):K.alert({open:!0,color:"warning",message:[Be("Please enter the")+""+Le("CCMQuationCode")]}):K.alert({open:!0,color:"warning",message:[Be("Please select the ")+" "+Le("ComplaintID")]}):K.alert({open:!0,color:"warning",message:[Be("Please select the ")+" "+Le("CCMQuationID")]})}}):null,!e.createEasy&&n().createElement(re.Z,{frmctrlid:"fld1645L1ECCloseBtn",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{ze(),M(!1),K.EditClose(!0),K.hideAddBtn(!1),G({type:"Add",payload:!1})}}))))),n().createElement(r.Z,null,n().createElement("div",{id:"CCMQuationDetails-Main",className:"width100 displayFlex componentMainDiv cardDiv"},n().createElement("div",{id:"CCMQuationDetails-Detail",className:"detailCard detailDiv"},n().createElement("div",{id:"CCMQuationDetails-MainBody",className:"padding paddingLeft "},n().createElement("div",null,n().createElement(ve.Z,null,n().createElement(Qe.Z,{color:"info",icon:!0,className:"cardheadvh",style:{display:"none"}},n().createElement(c.Z,null,n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement("div",{className:"GrpViewHeadingTitle"},n().createElement("p",null))))),n().createElement(Te.Z,{style:{padding:"5px 20px 15px"}},n().createElement(c.Z,{spacing:2}))),n().createElement(ve.Z,null,n().createElement(Qe.Z,{color:"info",icon:!0,className:"cardheadvh"},n().createElement(c.Z,null,n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement("div",{className:"GrpViewHeadingTitle"},n().createElement("p",null))))),n().createElement(Te.Z,{style:{padding:"5px 20px 15px"}},n().createElement(c.Z,{spacing:2},n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{json:ge,id:k.CCMQuationID,"data-testid":k.CCMQuationID,value:k.CCMQuationCode,SPName:"CCMQuationDetails",FieldName:"CCMQuationID",tfLabel:Le("CCMQuationID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>je(e,"CCMQuationID","select"),onChange:(e,t)=>{_e(e,t,"CCMQuationIDPK")},KeyBack:e=>{Ye("CCMQuationID")},fieldorder:"1",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,openSlide:()=>{Ve("1646")},Tabledialog:()=>Ge("1646","CCMQuationID"),loading:P,clear:e=>{e&&He("CCMQuationID")}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{json:ge,id:k.ComplaintID,"data-testid":k.ComplaintID,value:k.ComplaintNo,SPName:"CCMQuationDetails",FieldName:"ComplaintID",tfLabel:Le("ComplaintID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>je(e,"ComplaintID","select"),onChange:(e,t)=>{_e(e,t,"ComplaintIDPK")},KeyBack:e=>{Ye("ComplaintID")},fieldorder:"2",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,openSlide:()=>{Ve("1630")},Tabledialog:()=>Ge("1630","ComplaintID"),loading:P,clear:e=>{e&&He("ComplaintID")}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMQuationCode,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMQuationCode",tfLabel:Le("CCMQuationCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{q&&Ue(1,"","ClearAll"),X(!0)},frmctrlid:"fld1645_41696",frmctrlidName:"CCMQuationCode",fieldorder:"3",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{q&&Ue(e,t,"CCMQuationCode"),je(t,"CCMQuationCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||X(!0)},showList:q,SideEntryView:!1,KeyBack:e=>{},value:k.CCMQuationCode,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMQuationCode",value:""}),X(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMQuationName,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMQuationName",tfLabel:Le("CCMQuationName"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{ee&&Ue(1,"","ClearAll"),te(!0)},frmctrlid:"fld1645_41697",frmctrlidName:"CCMQuationName",fieldorder:"4",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{ee&&Ue(e,t,"CCMQuationName"),je(t,"CCMQuationName","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||te(!0)},showList:ee,SideEntryView:!1,KeyBack:e=>{},value:k.CCMQuationName,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMQuationName",value:""}),te(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMTansStatus,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMTansStatus",tfLabel:Le("CCMTansStatus"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{ae&&Ue(1,"","ClearAll"),le(!0)},frmctrlid:"fld1645_41698",frmctrlidName:"CCMTansStatus",fieldorder:"1",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{ae&&Ue(e,t,"CCMTansStatus"),je(t,"CCMTansStatus","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||le(!0)},showList:ae,SideEntryView:!1,KeyBack:e=>{},value:k.CCMTansStatus,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMTansStatus",value:""}),le(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMMaterialName,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMMaterialName",tfLabel:Le("CCMMaterialName"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{ne&&Ue(1,"","ClearAll"),ie(!0)},frmctrlid:"fld1645_41699",frmctrlidName:"CCMMaterialName",fieldorder:"2",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{ne&&Ue(e,t,"CCMMaterialName"),je(t,"CCMMaterialName","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||ie(!0)},showList:ne,SideEntryView:!1,KeyBack:e=>{},value:k.CCMMaterialName,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMMaterialName",value:""}),ie(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMQty,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMQty",tfLabel:Le("CCMQty"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{oe&&Ue(1,"","ClearAll"),Ce(!0)},frmctrlid:"fld1645_41700",frmctrlidName:"CCMQty",fieldorder:"3",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{oe&&Ue(e,t,"CCMQty"),je(t,"CCMQty","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Ce(!0)},showList:oe,SideEntryView:!1,KeyBack:e=>{},value:k.CCMQty,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMQty",value:""}),Ce(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMAmount,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMAmount",tfLabel:Le("CCMAmount"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{de&&Ue(1,"","ClearAll"),fe(!0)},frmctrlid:"fld1645_41701",frmctrlidName:"CCMAmount",fieldorder:"4",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{de&&Ue(e,t,"CCMAmount"),je(t,"CCMAmount","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||fe(!0)},showList:de,SideEntryView:!1,KeyBack:e=>{},Iscurr:!0,value:k.CCMAmount,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMAmount",value:""}),fe(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMTotalAmount,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMTotalAmount",tfLabel:Le("CCMTotalAmount"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{he&&Ue(1,"","ClearAll"),Ne(!0)},frmctrlid:"fld1645_41702",frmctrlidName:"CCMTotalAmount",fieldorder:"1",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{he&&Ue(e,t,"CCMTotalAmount"),je(t,"CCMTotalAmount","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Ne(!0)},showList:he,SideEntryView:!1,KeyBack:e=>{},Iscurr:!0,value:k.CCMTotalAmount,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMTotalAmount",value:""}),Ne(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(ce.Z,{"data-testid":k.CCMTypeStatus,json:ge,SPName:"CCMQuationDetails",FieldName:"CCMTypeStatus",tfLabel:Le("CCMTypeStatus"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&$e(t),onClick:()=>{xe&&Ue(1,"","ClearAll"),be(!0)},frmctrlid:"fld1645_41703",frmctrlidName:"CCMTypeStatus",fieldorder:"2",data:Z,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:Z.length>0?Z[0].TotalCount:0,onChange:(e,t)=>{xe&&Ue(e,t,"CCMTypeStatus"),je(t,"CCMTypeStatus","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||be(!0)},showList:xe,SideEntryView:!1,KeyBack:e=>{},value:k.CCMTypeStatus,loading:P,clear:e=>{e&&(F({type:"text",name:"CCMTypeStatus",value:""}),be(!0))}})))))),n().createElement("div",{id:"CCMQuationDetailsSideBar",className:"sidenav"},n().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("CCMQuationDetailsSideBar").style.width="0",void N(!1))},""),h&&n().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},w))))))))}));a(77366),a(97829);var Ne=a(65197),xe=a(549),be=a.n(xe),we=a(48819);const Ae=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),u=((0,i.useSelector)((e=>e.form)),(0,l.useRef)()),[s,d]=(0,l.useState)([]),[m,c]=(0,l.useState)(!0),[p,y]=(0,l.useState)(e.showDetail),[M,I]=(0,l.useState)(""),[f,E]=n().useState(!1),[v,T]=n().useState(""),[Q,S]=n().useState(!1),h=(0,l.useContext)(Re),{cstate:N,cdispatch:x}=Ze(),[b,w]=(0,l.useState)(!1),[A,k]=(0,l.useState)(""),[F,P]=(0,l.useState)(""),[B,R]=(0,l.useState)("");let Z=(0,D.Z)();(0,l.useEffect)((()=>{N.editData.length>0&&(d(N.editData),E(!1),x({type:"PrimaryId",payload:N.editData[0].CCMQuationDetIDPK}))}),[N.editData]),(0,l.useEffect)((()=>{N.showTableview&&R(N.showTableview)}),[N.showTableview]),(0,l.useEffect)((()=>{c(N.ExpandDetailValue)}),[N.ExpandDetailValue]),(0,l.useEffect)((()=>{c(N.ExpandDetailValue)}),[e.L3data]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{c(e),E(null)},viewtoggle:()=>{E(!1)},viewlistProps:(t,a)=>{!function(t,a=!1){let l=g.v.Api+"FP1645S3/",n={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:e.Dialogview?"1":null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:1,p28:10,p29:N.IsDraft?"DraftCCMQuationDetID":"CCMQuationDetID",p30:null,p31:null,p32:localStorage.getItem("UserGroupID"),p33:localStorage.getItem("userid")}};(0,ue.Z)(0).then((e=>{(0,C.Z)(l,n,e).then((e=>{h.loading(!1),"200"==e.Output.status.code&&d(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===f&&a.current.clear()}})));const L=e=>Z?.[e]?Z?.[e]:e,O=e=>N.language?.[e]?N.language[e]:e;function z(e,t){"CCMQuationIDPK"===e&&(h.openNav(),setTimeout((function(){u.current.viewlistProps(t)}),1e3),h.SlideComponentType(n().createElement("div",{id:"divCCMQuationRegistry-View",style:{width:"100%"}},n().createElement(we.CCMQuationRegistryContext.Provider,{value:{cstate:N,cdispatch:x,loading:e=>h.loading(e),alert:e=>h.alert(e),openNav:()=>h.openNav(),SlideComponentType:e=>h.SlideComponentType(e)}},n().createElement(be(),{viewonly:!0,ref:u})))))}const K=(e,t)=>(a,l)=>{T(Q?Object.assign(...s.filter((e=>e.CCMQuationDetIDPK==t)).map((e=>e))):N.editData),E(!l&&e)};return n().createElement("div",null,n().createElement(o.Z,{expanded:m,onChange:()=>()=>{e.expandTable&&c(!m)}},!f&&n().createElement(j.Z,null,n().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},m?n().createElement("div",{className:"displayFlex EntryViewHeader"},n().createElement("p",{className:"ListP"},N.IsDraft?L("Draft"):"",O("CCMQuationDetails"),e.viewonly?" ":"("+N.count+")")):"",m?n().createElement("div",{className:"displayFlex EntryHeaderBtn"},!e.viewonly&&N.AccessRights.IsAdd?n().createElement(X.Z,{name:L("Add"),frmctrlid:"fld1645L1VCAddBtn",className:"AddBtnCommon boxShadowNone",onClick:()=>{h.hideAddBtn(!0),x({type:"editData",payload:[]}),x({type:"ShowDetail",payload:!1}),x({type:"Add",payload:!0})},disabled:!1}):"",!e.viewonly&&N.AccessRights.IsEdit?n().createElement(Ce.Z,{frmctrlid:"fld1645L1VCEditBtn",onClick:K("panel0",""),disabled:!1}):N.IsDraft&&N.AccessRights.IsAdd&&n().createElement(Ce.Z,{frmctrlid:"fld1645L1VCEditBtnIsAdd",onClick:()=>{K("panel","")},disabled:!1}),!e.viewonly&&n().createElement(re.Z,{disabled:!1,className:"L1AddBtnCommon",frmctrlid:"fld1645L1VCCloseBtn",onClick:()=>{c(!1),h.hideAddBtn(!1),Q&&(x({type:"editData",payload:[]}),d([]))}})):"")),n().createElement(r.Z,{style:{display:"block"}},s.map(((t,l)=>n().createElement("div",{key:l},f==="panel"+l?n().createElement(he,{ref:a,parentId:e.parentId}):n().createElement(n().Fragment,null,n().createElement(Ne.Z,{tableName:"CCMQuationDetails",tableID:1645,parentID:t.CCMQuationDetIDPK,fldid:"fld1645L1VCContainer",OpenSlideComponent:z,index:l,refresh:B,val:t,tf:O,t:L,title:"10.0.0.82-3:45:06 PM-19-8[1645]"}))))))))}));var ke=a(67698),Fe=a(55995),Pe=a(45965),Be=a(41722);a(9175);const Re=(0,l.createContext)(),Ze=()=>{const e=(0,l.useContext)(Re);if(void 0===e)throw new Error("useCont must be used within  CCMQuationDetailsContext Provider");return e},Le=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),o=(0,l.useRef)(),r=(0,l.useRef)(),C=(0,l.useRef)(),u=(0,l.useRef)(),[s,d]=(0,l.useState)(!0),[m,c]=(0,l.useState)(),p=((0,i.useSelector)((e=>e.form)),(0,i.useDispatch)()),[g,y]=(0,l.useState)(0),[M,D]=(0,l.useReducer)(Be.D,Be.E),[I,f]=(0,l.useState)(""),[E,v]=(0,l.useState)([]),[T,Q]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e.loading(!0),e.tableview||o.current.clear(),document.getElementById("divCCMQuationDetails-Entry").style.width="100%",document.getElementById("CCMQuationDetails-MainTable").style.width="100%",document.getElementById("CCMQuationDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{d(!0),document.getElementById("divCCMQuationDetails-Entry").style.width="100%",document.getElementById("CCMQuationDetails-MainTable").style.width="100%",document.getElementById("CCMQuationDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{e.editData&&(D({type:"editData",payload:[e.editData]}),D({type:"ShowDetail",payload:!0}))}),[e.editData]),(0,l.useImperativeHandle)(t,(()=>({AddOpen:(e,t)=>{o.current.AddOpen(e),setTimeout((()=>a.current.HideEntryFields(!0)),500)},AddClose:()=>{setTimeout((()=>a.current.HideEntryFields(!0)),500)}})));const S=e=>{v([]),document.getElementById("divCCMQuationDetails-Entry").style.width="100%",document.getElementById("CCMQuationDetailsEntryTable").style.width="100%",document.getElementById("CCMQuationDetails-MainEntry").style.width="100%",document.getElementById("CCMQuationDetails-MainEntry").style.display="block",document.getElementById("CCMQuationDetails-MainDiv").classList.add("displayFlex"),document.getElementById("CCMQuationDetails-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMQuationDetails").style.width="0%",document.getElementById("overlayimgAttCCMQuationDetails").style.display="none"};(0,l.useEffect)((()=>{p((e=>{(0,ue.Z)(1).then((e=>{var t=new Array;t.push(e),D({type:"token",payload:t}),y(t.length),h(e)}))}))}),[]);const h=e=>{(0,Pe.Z)(e,1646).then((e=>D({type:"AccessRights",payload:e})))};return n().createElement("div",{style:{width:"100%"}},n().createElement(Re.Provider,{value:{cstate:M,cdispatch:D,ContextApi:Ze,loading:t=>e.loading(t),alert:t=>e.alertmsg(t),ShareTab:(t,a)=>e.TabShare(t,a),ConfirmAlert:t=>e.ConfirmAlert(t),SlideComponentType:t=>e.SlideComponentType(t),openNav:t=>e.openNav(t),RefreshTable:()=>{a.current.tableRefresh()},searchItem:e=>{0!==g&&a.current.searchItem(e)},openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t),attachmentSave:e=>{u.current.tempsave(e,E),v([])},EditClose:e=>S(),AttachExpand:e=>(C.current.AttachmentData(M.PrimaryId),void(s&&(document.getElementById("overlayPreviewCCMQuationDetails").style.width="50%",document.getElementById("divCCMQuationDetails-Entry").style.width="100%",document.getElementById("CCMQuationDetails-MainTable").style.width="100%",document.getElementById("CCMQuationDetails-MainEntry").style.width="100%",document.getElementById("CCMQuationDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationDetails-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttCCMQuationDetails").style.display="block",document.getElementById("overlayimgAttCCMQuationDetails").style.width="25%"))),Expanded:e=>{M.ShowDetail&&r.current.tableClick(e),D({type:"ExpandDetailValue",payload:e})},viewtoggle:()=>{M.ShowDetail&&r.current.viewtoggle()},clear:e=>{D({type:"ShowDetail",payload:!1}),D({type:"editData",payload:[]}),M.ShowDetail?r.current.clear(e):o.current.clear(e)},hideAddBtn:e=>{a.current.HideEntryFields(e)},ExpandEntry:()=>{M.ShowDetail?r.current.tableClick(!1):o.current.CreateEasyProps(!1)},resetImg:()=>{u.current.tempClear(),C.current.clrImgstate(!0)}}},n().createElement("div",{id:"CCMQuationDetails-MainDiv",className:"MainDivStyles displayFlex",style:{height:e.subForm&&"fit-content"}},n().createElement("div",{id:"CCMQuationDetails-MainEntry",className:"",style:{background:"#fff"}},n().createElement("div",{style:{display:"flex"}},n().createElement("div",{id:"CCMQuationDetailsEntryTable",style:{width:"100%"}},M.ShowDetail?n().createElement("div",null,n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divCCMQuationDetails-Entry",style:{width:"100%"}},0!==g?n().createElement(Ae,{ref:r,IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}):null)),n().createElement(Fe.Z,{ref:u,menurefID:1645,fileId:"LogoImgCCMQuationDetails",imgloading:t=>{t||M.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:M.PrimaryId,AttachmentVal:e=>C.current.AttachmentData(e),previd:"overlayPreviewCCMQuationDetails",frmctrlid:"PvwIm_1645_L1_",tempImg:e=>{M.PrimaryId?C.current.AttachmentData(M.PrimaryId):C.current.tempImg(e),v(e)},clearTempData:M.Add})):n().createElement("div",null,n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divCCMQuationDetails-Entry",style:{width:"100%"}},!e.tableview&&n().createElement(he,{ref:o,clrImgstate:e=>C.current.clrImgstate(e),IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}))),n().createElement(Fe.Z,{ref:u,menurefID:1645,fileId:"LogoImgCCMQuationDetails",imgloading:t=>{t||M.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:M.PrimaryId,AttachmentVal:e=>C.current.AttachmentData(e),previd:"overlayPreviewCCMQuationDetails",frmctrlid:"PvwIm_1645_L1_",tempImg:e=>{M.PrimaryId?C.current.AttachmentData(M.PrimaryId):C.current.tempImg(e),v(e)},clearTempData:M.Add})),n().createElement("div",{id:"CCMQuationDetails-MainTable"},0!==g?n().createElement(oe,{ref:a,parentId:e.parentId,IsCollapse:e.IsCollapse,tableview:e.tableview}):null)),n().createElement(ke.Z,{ImgAttachment:e=>S(),menurefID:1645,fileId:"AttImgCCMQuationDetails",imgid:"overlayimgAttCCMQuationDetails",valueIDPK:M.PrimaryId,PriviewData:(e,t,a,l)=>{u.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewCCMQuationDetails",ref:C,imgloading:m,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_1645_L1_",timglist:e=>{u.current.timglist(e),v(e)},clearTempData:M.Add}))),n().createElement("div",{id:"CCMQuationDetails-DetailDiv",style:{display:"none",height:"81vh",overflowY:"auto"}}))))}))},27239:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L,saveComponent:()=>z,trimFunc:()=>O});var l=a(92950),n=a.n(l),i=a(45237),o=a(36939),r=a(61201),C=a(50743),u=(a(3212),a(10966),a(30553)),s=(a(99090),a(44528),a(37148)),d=a(61956),m=a(51673),c=(a(96071),a(14439)),p=a(27848),g=a(49174),y=(a(38773),a(19089),a(1695)),M=(a(13235),a(61924)),D=a.n(M),I=a(26537),f=a(40900),E=a(35131),v=a.n(E),T=a(55490),Q=(a(2493),a(92371)),S=a(82729),h=a(75355),N=a(11107);a(40826);const x={EnterKeyValues:{CCMQuationRegistry:[,"ContractName","TaxName","CCMQuationCode","CCMQuationName","CCMQuationNo","CcMQuationDate","CCMTotalAmount","CCMTaxValu","CCMTaxAmount","CCMSubTotal","CCMGrandTotal"]},Label:{CCMQuationRegistry:{ContractID:["CCMQuationCode","CCMQuationName"],TaxID:["CCMQuationCode","CCMQuationName"],CCMQuationCode:["CCMQuationCode","CCMQuationName"],CCMQuationName:["CCMQuationCode","CCMQuationName"],CCMQuationNo:["CCMQuationCode","CCMQuationName"],CcMQuationDate:["CCMQuationCode","CCMQuationName"],CCMTotalAmount:["CCMQuationCode","CCMQuationName"],CCMTaxValu:["CCMQuationCode","CCMQuationName"],CCMTaxAmount:["CCMQuationCode","CCMQuationName"],CCMSubTotal:["CCMQuationCode","CCMQuationName"],CCMGrandTotal:["CCMQuationCode","CCMQuationName"]}},LabelHeader:{CCMQuationRegistry:{ContractID:["CCMQuationCode","CCMQuationName"],TaxID:["CCMQuationCode","CCMQuationName"],CCMQuationCode:["CCM Quation Code","CCM Quation Name"],CCMQuationName:["CCM Quation Code","CCM Quation Name"],CCMQuationNo:["CCM Quation Code","CCM Quation Name"],CcMQuationDate:["CCM Quation Code","CCM Quation Name"],CCMTotalAmount:["CCM Quation Code","CCM Quation Name"],CCMTaxValu:["CCM Quation Code","CCM Quation Name"],CCMTaxAmount:["CCM Quation Code","CCM Quation Name"],CCMSubTotal:["CCM Quation Code","CCM Quation Name"],CCMGrandTotal:["CCM Quation Code","CCM Quation Name"]}},Property:{CCMQuationRegistry:{ContractID:{id:"fld1646_41728",clearID:"CCMQuationRegistryContractNameClear",type:"select",labelID:"ContractIDPK",labelname:"Contrat",fielddisplayname:"ContractName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},TaxID:{id:"fld1646_41729",clearID:"CCMQuationRegistryTaxNameClear",type:"select",labelID:"TaxIDPK",labelname:"Tax",fielddisplayname:"TaxName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},CCMQuationCode:{id:"fld1646_41716",labelID:"CCMQuationCode",maxLength:"50",labelname:"CCM Quation Code",frmctrlid:"fld1646_41716",frmctrlidname:"CCMQuationCode",type:"text",mandatory:!0,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMQuationName:{id:"fld1646_41717",labelID:"CCMQuationName",maxLength:"50",labelname:"CCM Quation Name",frmctrlid:"fld1646_41717",frmctrlidname:"CCMQuationName",type:"text",mandatory:!0,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMQuationNo:{id:"fld1646_41718",labelID:"CCMQuationNo",maxLength:"50",labelname:"CCM Quation No",frmctrlid:"fld1646_41718",frmctrlidname:"CCMQuationNo",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CcMQuationDate:{id:"fld1646_41719",labelID:"CcMQuationDate",maxLength:"50",labelname:"Cc M Quation Date",frmctrlid:"fld1646_41719",frmctrlidname:"CcMQuationDate",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTotalAmount:{id:"fld1646_41720",labelID:"CCMTotalAmount",maxLength:"50",labelname:"CCM Total Amount",frmctrlid:"fld1646_41720",frmctrlidname:"CCMTotalAmount",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTaxValu:{id:"fld1646_41721",labelID:"CCMTaxValu",maxLength:"50",labelname:"CCM Tax Valu",frmctrlid:"fld1646_41721",frmctrlidname:"CCMTaxValu",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMTaxAmount:{id:"fld1646_41722",labelID:"CCMTaxAmount",maxLength:"50",labelname:"CCM Tax Amount",frmctrlid:"fld1646_41722",frmctrlidname:"CCMTaxAmount",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMSubTotal:{id:"fld1646_41723",labelID:"CCMSubTotal",maxLength:"50",labelname:"CCM Sub Total",frmctrlid:"fld1646_41723",frmctrlidname:"CCMSubTotal",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMGrandTotal:{id:"fld1646_41724",labelID:"CCMGrandTotal",maxLength:"50",labelname:"CCM Grand Total",frmctrlid:"fld1646_41724",frmctrlidname:"CCMGrandTotal",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1}}},SubForms:{},POPLabel:{CCMQuationRegistry:{ContractID:["ContractCode","ContractName","CustomerName","ContractCategName","ContractTypeName"],TaxID:["TaxCode","TaxName","TaxValue"]}}};a(42258),a(97829);var b=a(60487),w=a(8981),A=a(63163),k=a(45155),F=a(51649),P=a(16233),B=a.n(P);const R={CCMQuationIDPK:"",CCMQuationCode:"",CCMQuationName:"",CCMQuationNo:"",CcMQuationDate:"",CcMQuationDateType:"",CcMQuationDateBetween:"",CCMTotalAmount:"",CCMTaxValu:"",CCMTaxAmount:"",CCMSubTotal:"",CCMGrandTotal:"",IsDefault:!1,IsDraft:!1,Remarks:"",ContratID:null,TaxID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",Type:"CCMQuationID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")},Z=(0,l.forwardRef)(((e,t)=>{(0,i.useSelector)((e=>e.form));const[a,M]=(0,l.useState)(!1),[E,P]=(0,l.useState)(!0),[Z,L]=(0,l.useState)(!1),[O,K]=(0,l.useState)(!1),[V,G]=(0,l.useState)(!1),[_,U]=(0,l.useState)(!1),[j,H]=(0,l.useState)([]),[Y,$]=(0,l.useState)(null),[W,J]=(0,l.useReducer)(Q.Z,R),[q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)([]),[ae,le]=(0,l.useState)(0),[ne,ie]=(0,l.useState)(""),[oe,re]=(0,l.useState)(!0),[Ce,ue]=(0,l.useState)(!0),[se,de]=(0,l.useState)(!0),[me,ce]=(0,l.useState)(""),[pe,ge]=(0,l.useState)(!0),[ye,Me]=(0,l.useState)(!0),[De,Ie]=(0,l.useState)(!0),[fe,Ee]=(0,l.useState)(!0),[ve,Te]=(0,l.useState)(!0),Qe=(0,l.useContext)(b.CCMQuationRegistryContext),{cstate:Se,cdispatch:he}=(0,b.ContextApi)(),[Ne]=(0,l.useState)(localStorage.getItem("Language")),[xe]=(0,l.useState)(localStorage.getItem("Language")),[be,we]=(0,l.useState)([]),[Ae,ke]=(0,l.useState)(null),[Fe,Pe]=(0,l.useState)(!1),[Be,Re]=(0,l.useState)(""),Ze=(0,l.useRef)(null),[Le,Oe]=B()("1646"),[ze,Ke]=(0,l.useState)(!1);let Ve=(0,w.Z)();const[Ge,_e]=(0,l.useState)({}),Ue=e=>Ve?.[e]?Ve[e]:e,je=t=>Se.language?.[t]?Se.language[t]:e.createEasy?Ge?.[t]:t;(0,l.useEffect)((()=>{Se.PrimaryId&&le(Number(Se.PrimaryId))}),[Se.PrimaryId]),(0,l.useEffect)((()=>{Se.editData.length<0&&(0,I.Z)(1).then((e=>{at(1,null,"SetDefaultCCMQuationID",e)}))}),[]),(0,l.useEffect)((()=>{Se.editData.length>0?(Ye(Se.editData[0],""),K(!0)):Se.Add&&(le(0),K(!0))}),[Se.editData,Se.Add]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),_e(Object.assign({},...t))}(Le)}),[Le]),(0,l.useImperativeHandle)(t,(()=>({getAlert(e){K(!0),L(!1)},CreateEasyProps:(e=!0,t)=>{Oe(!0),t?(Ct(t),K(e)):($e(),K(e))},clear:()=>{$e()}})));const He=e=>e?e.split("-").reverse().join("-"):null,Ye=(t,a,l)=>{let n=t;Object.keys(n).forEach((function(e){0==n[e]&&(n[e]=null)})),G(n.IsDraft),he({type:"EditIsDraft",payload:"1"==n.IsDraft}),"SetDefaultCCMQuationID"==a?ie(n.CCMQuationIDPK):(le(e.primid?Number(e.primid):n.CCMQuationIDPK?n.CCMQuationIDPK:0),he({type:"PrimaryId",payload:n.CCMQuationIDPK})),J({type:"boolean",name:"IsDefault",boolean:n.IsDefault}),J({type:"number",name:"ContractID",number:n.ContractID?Number(n.ContractID):0}),J({type:"text",name:"ContractName",value:n.ContractName}),J({type:"number",name:"TaxID",number:n.TaxID?Number(n.TaxID):0}),J({type:"text",name:"TaxName",value:n.TaxName}),J({type:"text",name:"CCMQuationCode",value:n.CCMQuationCode?n.CCMQuationCode:""}),J({type:"text",name:"CCMQuationName",value:n.CCMQuationName?n.CCMQuationName:""}),J({type:"text",name:"CCMQuationNo",value:n.CCMQuationNo?n.CCMQuationNo:""}),J({type:"text",name:"CcMQuationDate",value:n.CcMQuationDate?He(n.CcMQuationDate):null}),J({type:"number",name:"CCMTotalAmount",number:Number(n.CCMTotalAmount)}),J({type:"number",name:"CCMTaxValu",number:Number(n.CCMTaxValu)}),J({type:"number",name:"CCMTaxAmount",number:Number(n.CCMTaxAmount)}),J({type:"number",name:"CCMSubTotal",number:Number(n.CCMSubTotal)}),J({type:"number",name:"CCMGrandTotal",number:Number(n.CCMGrandTotal)}),n.IsDraft?P(!0):P(!("1"!=n.IsActive&&!n.IsActive))},$e=()=>{H([]),le(0),ie(""),re(!0),ue(!0),de(!0),ge(!0),Me(!0),Ie(!0),Ee(!0),Te(!0),he({type:"PrimaryId",payload:""}),J({type:"boolean",name:"IsDefault",boolean:!1}),J({type:"text",name:"ContractID",value:null}),J({type:"text",name:"ContractName",value:""}),document.getElementById("CCMQuationRegistryContractNameClear")&&document.getElementById("CCMQuationRegistryContractNameClear").click(),J({type:"text",name:"TaxID",value:null}),J({type:"text",name:"TaxName",value:""}),document.getElementById("CCMQuationRegistryTaxNameClear")&&document.getElementById("CCMQuationRegistryTaxNameClear").click(),J({type:"text",name:"CCMQuationCode",value:""}),J({type:"text",name:"CCMQuationName",value:""}),J({type:"text",name:"CCMQuationNo",value:""}),J({type:"text",name:"CcMQuationDate",value:""}),J({type:"number",name:"CCMTotalAmount",number:0}),J({type:"number",name:"CCMTaxValu",number:0}),J({type:"number",name:"CCMTaxAmount",number:0}),J({type:"number",name:"CCMSubTotal",number:0}),J({type:"number",name:"CCMGrandTotal",number:0}),P(!0)},We=()=>{const e={...W};return["IsActive","IsDefault","UserGroupKey","UserAccessKey","DeleStat","Type"].map((t=>{delete e[t]})),Object.keys(e).filter((t=>e[t]))},Je=()=>{Qe.ConfirmAlert(n().createElement(D(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:Ue("Are you sure?"),onConfirm:()=>qe(),onCancel:()=>Qe.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Ue("Yes"),cancelBtnText:Ue("Cancel"),showCancel:!0},Se.PrimaryId?Ue("Do you want to Update?"):Ue("Do you want to Save?")))},qe=(e,t)=>{Qe.loading(!0),Qe.ConfirmAlert(null),he({type:"IsDraft",payload:!1}),z({url:f.v.Api+"FP1646S2/",PrimID:ae,ParamType:e,state:W,active:E,token:Se.token[0],DefaultPrimaryId:ne}).then((t=>{const a=t[0].status;let l=t[0].Data,n=new Array,i=new Array;"200"===a.code?(l.map((e=>{e&&(n.push(e.IsAlert),i.push(e.AlertMessage),e.AlertMessage)})),n.some((e=>"1"==e))?(Qe.alert({open:!0,color:"warning",message:i}),Qe.loading(!1)):Xe(e)):(Qe.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),Qe.loading(!1))}))},Xe=(t,a)=>{re(!0),ue(!0),de(!0),ge(!0),Me(!0),Ie(!0),Ee(!0),Te(!0),Qe.loading(!0),Qe.ConfirmAlert(null),z({url:f.v.Api+"FP1646S1/",PrimID:ae,ParamType:t,state:W,active:E,token:Se.token[0],DefaultPrimaryId:ne}).then((a=>{const l=a[0].status;200==l.code?(he({type:"PrimaryId",payload:a[0].Data.IDPK}),Qe.AddOpen(a[0].Data.IDPK),"SetDefaultCCMQuationID"==t?Qe.alert({open:!0,color:"success",message:["Default Record Configured"]}):Qe.alert({open:!0,color:"success",message:[l.message]}),Qe.attachmentSave(a[0].Data.IDPK),Qe.loading(!1),Se.AccessRights.IsApproval&&Qe.Approval(!0),e.createEasy,he({type:"EditOpen",payload:!1}),he({type:"EditIsDraft",payload:!1}),document.getElementById("overlayimgAttCCMQuationRegistry")&&(document.getElementById("overlayimgAttCCMQuationRegistry").style.width="0%",document.getElementById("overlayimgAttCCMQuationRegistry").style.display="none",document.getElementById("divCCMQuationRegistry-Entry").style.width="100%"),document.getElementById("CCMQuationRegistry-MainTable").style.display="none"):(Qe.alert({open:!0,color:"warning",message:[l.message]}),Qe.loading(!1),e.enableSave(!0)),e.clrImgstate(!0),"SetDefaultCCMQuationID"==t&&(K(!0),at(1,null,"SetDefaultCCMQuationID",Se.token[0]))}))};function et(e){return CreateEasy(e,Se,he,Qe,Ze),!1}function tt(e,a){return AdvanceSearch(e,a,b.CCMQuationRegistryContext,(0,b.ContextApi)(),nt,t),!1}(0,l.useEffect)((()=>{K(Se.ExpandDetailValue)}),[Se.ExpandDetailValue]);const at=(t,a,l,n,i,o)=>{const r=f.v.Api+"FP1646S3/",C={data:{p1:null,p2:null,p3:null,p4:null,p5:W.CcMQuationDate?W.CcMQuationDate:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:"0"==W.ContratID?null:W.ContratID,p17:"0"==W.TaxID?null:W.TaxID,p18:e.Dialogview?"1":null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:t,p26:10,p27:l,p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}},u=Object.keys(C.data).slice(0,Object.keys(C.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(C.data).length-8?C.data[t]:null,e)),{});X(!0);const s={data:u};return(0,m.Z)(r,"ClearAll"==l?s:C,"SetDefaultCCMQuationID"==l&&n?n:Se.token[0]).then((e=>{const a=e.Output.status.code,n=e.Output.data;if("200"==a){const e=n.length;if(i)return 1==n.length?n[0]:{};te(1==t?e>0?n:[]:ee.concat(n)),"SetDefaultCCMQuationID"==l&&(e>0?Ye(n[0],"SetDefaultCCMQuationID"):ie("NORECORDS")),X(!1)}else Qe.alert({open:!0,color:"warning",message:[e.Output.status.message]}),X(!1)}))},lt=(t,a,l)=>{const n=f.v.Api+"FP1646S3/",i={data:{p1:null,p2:"CCMQuationCode"==l&&a?"%"+a+"%":null,p3:"CCMQuationName"==l&&a?"%"+a+"%":null,p4:"CCMQuationNo"==l&&a?"%"+a+"%":null,p5:null,p6:null,p7:null,p8:"CCMTotalAmount"==l&&a?"%"+a+"%":null,p9:"CCMTaxValu"==l&&a?"%"+a+"%":null,p10:"CCMTaxAmount"==l&&a?"%"+a+"%":null,p11:"CCMSubTotal"==l&&a?"%"+a+"%":null,p12:"CCMGrandTotal"==l&&a?"%"+a+"%":null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:e.Dialogview?"1":null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:t,p26:10,p27:"CCMQuationID",p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}},o={data:Object.keys(i.data).slice(0,Object.keys(i.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(i.data).length-8?i.data[t]:null,e)),{})};X(!0),(0,m.Z)(n,"ClearAll"==l?o:i,Se.token[0]).then((e=>{const a=e.Output.status.code,n=e.Output.data;if("200"==a){const e=n.length;1==t?("CCMQuationCode"==l&&re(e>0),"CCMQuationName"==l&&ue(e>0),"CCMQuationNo"==l&&de(e>0),"CCMTotalAmount"==l&&ge(e>0),"CCMTaxValu"==l&&Me(e>0),"CCMTaxAmount"==l&&Ie(e>0),"CCMSubTotal"==l&&Ee(e>0),"CCMGrandTotal"==l&&Te(e>0),te(n)):("CCMQuationCode"==l&&re(!0),"CCMQuationName"==l&&ue(!0),"CCMQuationNo"==l&&de(!0),"CCMTotalAmount"==l&&ge(!0),"CCMTaxValu"==l&&Me(!0),"CCMTaxAmount"==l&&Ie(!0),"CCMSubTotal"==l&&Ee(!0),"CCMGrandTotal"==l&&Te(!0),te(ee.concat(n))),X(!1)}else Qe.alert({open:!0,color:"warning",message:[e.Output.status.message]}),X(!1)}))},nt=(0,l.useCallback)((async(e,t,a)=>{"text"==a?J({type:a,name:t,value:e}):"number"==a?J({type:a,name:t,number:Number(e)}):"boolean"==a?J({type:a,name:t,boolean:e}):"date"==a?J({type:"text",name:t,value:e}):"select"==a&&("ContractID"==t?(J({type:"text",name:"ContractID",value:e.ContractIDPK?e.ContractIDPK:null}),J({type:"text",name:"ContractName",value:e.ContractName?e.ContractName:null}),J({type:"text",name:"TaxID",value:e.TaxID?e.TaxID:null}),J({type:"text",name:"TaxName",value:e.TaxName?e.TaxName:null})):"TaxID"==t&&(J({type:"text",name:"TaxID",value:e.TaxIDPK?e.TaxIDPK:null}),J({type:"text",name:"TaxName",value:e.TaxName?e.TaxName:null}),J({type:"text",name:"ContractID",value:e.ContractID?e.ContractID:null}),J({type:"text",name:"ContractName",value:e.ContractName?e.ContractName:null})))}),[W]);function it(e){if("ContractID"==e){if(!W.ContractID)return!1;J({type:"text",name:"ContractID",value:null}),J({type:"text",name:"ContractName",value:""}),document.getElementById("CCMQuationRegistryContractNameClear")&&document.getElementById("CCMQuationRegistryContractNameClear").click(),J({type:"text",name:"TaxID",value:null}),J({type:"text",name:"TaxName",value:""}),document.getElementById("CCMQuationRegistryTaxNameClear")&&document.getElementById("CCMQuationRegistryTaxNameClear").click()}else if("TaxID"==e){if(!W.TaxID)return!1;J({type:"text",name:"TaxID",value:null}),J({type:"text",name:"TaxName",value:""}),document.getElementById("CCMQuationRegistryTaxNameClear")&&document.getElementById("CCMQuationRegistryTaxNameClear").click(),J({type:"text",name:"ContractID",value:null}),J({type:"text",name:"ContractName",value:""}),document.getElementById("CCMQuationRegistryContractNameClear")&&document.getElementById("CCMQuationRegistryContractNameClear").click()}}function ot(e){if("ContractID"==e){if(!W.ContractID)return!1;J({type:"text",name:"ContractID",value:null}),J({type:"text",name:"TaxID",value:null})}else if("TaxID"==e){if(!W.TaxID)return!1;J({type:"text",name:"TaxID",value:null}),J({type:"text",name:"ContractID",value:null})}}const rt=e=>{Qe.ConfirmAlert(n().createElement(D(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Ct(e),onCancel:()=>Qe.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:Ue("Yes"),cancelBtnText:Ue("No"),showCancel:!0},Ue("Do you want to update this record?")))};function Ct(t){Qe.ConfirmAlert(null),G(t.IsDraft),e.createEasy||(he({type:"editData",payload:[t]}),he({type:"PrimaryId",payload:t.CCMQuationIDPK})),le(Number(t.CCMQuationIDPK)?Number(t.CCMQuationIDPK):0),J({type:"number",name:"ContractID",number:t.ContractID?Number(t.ContractID):0}),J({type:"text",name:"ContractName",value:t.ContractName?t.ContractName:""}),J({type:"number",name:"TaxID",number:t.TaxID?Number(t.TaxID):0}),J({type:"text",name:"TaxName",value:t.TaxName?t.TaxName:""}),J({type:"text",name:"CCMQuationCode",value:t.CCMQuationCode?t.CCMQuationCode:""}),J({type:"text",name:"CCMQuationName",value:t.CCMQuationName?t.CCMQuationName:""}),J({type:"text",name:"CCMQuationNo",value:t.CCMQuationNo?t.CCMQuationNo:""}),J({type:"text",name:"CcMQuationDate",value:t.CcMQuationDate?He(t.CcMQuationDate):null}),J({type:"text",name:"CCMTotalAmount",value:t.CCMTotalAmount?t.CCMTotalAmount:""}),J({type:"text",name:"CCMTaxValu",value:t.CCMTaxValu?t.CCMTaxValu:""}),J({type:"text",name:"CCMTaxAmount",value:t.CCMTaxAmount?t.CCMTaxAmount:""}),J({type:"text",name:"CCMSubTotal",value:t.CCMSubTotal?t.CCMSubTotal:""}),J({type:"text",name:"CCMGrandTotal",value:t.CCMGrandTotal?t.CCMGrandTotal:""})}const ut=e=>"string"==typeof e?e.trim():e;return n().createElement("div",null,n().createElement(o.Z,{expanded:O,onChange:e=>{}},n().createElement(C.Z,null,n().createElement("div",{className:"displayFlex backgroundLight borderRadiusTop width100"},n().createElement("div",{className:"displayFlex EntryHeader"},!e.createEasy&&n().createElement("span",{style:{cursor:"pointer"}},n().createElement(F.u1R,{className:"backButtonList",onClick:()=>{Qe.ShowTableDiv(),setIndirectRecord(!1)}})),n().createElement("p",{id:"fld1646L3ECListP",className:"ListP",title:"10.0.0.82-3:45:06 PM-19-8[1646]",onClick:()=>Se.ExpandTableValue&&K(!O)},ae?"Edit ":"New ",je("1646")," (",Se.count,")")),O&&n().createElement("div",{className:"displayFlex EntryHeaderBtn"},Se.AccessRights.IsDelete&&n().createElement("div",{className:"GridAlign"},n().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},n().createElement(u.Z,{labelPlacement:"bottom",frmctrlid:"fld1646L3ECEntryCheckbox",control:n().createElement(A.Z,{checked:"1"==E,onChange:e=>P(e.target.checked)}),label:Ue(1==E?"Active":"In Active")}))),!e.createEasy&&n().createElement("div",{className:"GridAlign",onClick:()=>{Qe.AttachExpand(!0)},id:"fld1646L3ECAttachment",disableRipple:!0,disabled:!ae},n().createElement("div",{className:"Entry-Checkbox"},n().createElement("div",null,n().createElement(k.Ypb,{className:"Iconstyles"}))),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,"Attach"))),!e.createEasy&&(!ae||!Se.editData.length>0)&&n().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{$e()},id:"fld1646L3ECClearBtn"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement(k.pYJ,{className:"Iconstyles"})),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,"Reset"))),Se.AccessRights.IsAdd&&n().createElement(y.Z,{name:ae?"Update":"Next",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{return t=ae?"update":"next",W.ContractID&&0!=W.ContractID?W.TaxID&&0!=W.TaxID?ut(W.CCMQuationCode)?ut(W.CCMQuationName)?void("next"==t?function(t,a,l,n){if(We().length>0){re(!0),ue(!0),de(!0),ge(!0),Me(!0),Ie(!0),Ee(!0),Te(!0),Qe.loading(!0),Qe.ConfirmAlert(null),he({type:"IsDraft",payload:!1});const t=f.v.Api+"FP1646S1/",a={data:[{p1:ae,p2:ut(W.CCMQuationCode),p3:ut(W.CCMQuationName),p4:ut(W.CCMQuationNo),p5:W.CcMQuationDate?W.CcMQuationDate:null,p6:W.CCMTotalAmount?Number(W.CCMTotalAmount):0,p7:W.CCMTaxValu?Number(W.CCMTaxValu):0,p8:W.CCMTaxAmount?Number(W.CCMTaxAmount):0,p9:W.CCMSubTotal?Number(W.CCMSubTotal):0,p10:W.CCMGrandTotal?Number(W.CCMGrandTotal):0,p11:W.IsDefault,p12:!0,p13:null,p14:W.ContratID?W.ContratID:0,p15:W.TaxID?W.TaxID:0,p16:!1,p17:!1,p18:localStorage.getItem("userid"),p19:v()().format("YYYY-MM-DD hh:mm:ss"),p20:localStorage.getItem("userid"),p21:v()().format("YYYY-MM-DD hh:mm:ss")}]};(0,I.Z)(0).then((l=>{(0,d.Z)(t,a,l).then((t=>{const a=t[0].status;200==a.code?(Qe.alert({open:!0,color:"success",message:["Saved to Draft"]}),he({type:"EditIsDraft",payload:!0}),Qe.attachmentSave(t[0].Data.IDPK),Qe.loading(!1),$e(),e.clrImgstate(!0),Qe.AddOpen(t[0].Data.IDPK,"1")):(Qe.alert({open:!0,color:"warning",message:[a.message]}),Qe.loading(!1))}))}))}else Qe.alert({open:!0,color:"warning",message:["Please enter the primary fields"]})}():Je(t)):(Qe.alert({open:!0,color:"warning",message:[Ue("Please enter the")+""+je("CCMQuationName")]}),!1):(Qe.alert({open:!0,color:"warning",message:[Ue("Please enter the")+""+je("CCMQuationCode")]}),!1):(Qe.alert({open:!0,color:"warning",message:[Ue("Please select the ")+" "+je("TaxID")]}),!1):(Qe.alert({open:!0,color:"warning",message:[Ue("Please select the ")+" "+je("ContractID")]}),!1);var t}}),ae?n().createElement(s.Z,{disabled:!1,frmctrlid:"fld1646L3ECCloseBtn",onClick:()=>{Qe.detailview(!0,ae)}}):null))),n().createElement(r.Z,null,Se.AccessRights.IsAdd?null:Se.AccessRights.IsEdit?!Se.PrimaryId&&n().createElement("div",{className:"divdisable"}):n().createElement("div",{className:"divdisable"}),n().createElement("div",{id:"CCMQuationRegistry-Main",className:"width100 displayFlex componentMainDiv cardDiv"},n().createElement("div",{id:"CCMQuationRegistry-Detail",className:"detailCard detailDiv"},n().createElement("div",{id:"CCMQuationRegistry-MainBody",className:"padding paddingLeft "},n().createElement("div",null,n().createElement(S.Z,null,n().createElement(N.Z,{color:"info",icon:!0,className:"cardheadvh",style:{display:"none"}},n().createElement(c.Z,null,n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement("div",{className:"GrpViewHeadingTitle"},n().createElement("p",null))))),n().createElement(h.Z,{style:{padding:"5px 20px 15px"}},n().createElement(c.Z,{spacing:2}))),n().createElement(S.Z,null,n().createElement(N.Z,{color:"info",icon:!0,className:"cardheadvh"},n().createElement(c.Z,null,n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement("div",{className:"GrpViewHeadingTitle"},n().createElement("p",null))))),n().createElement(h.Z,{style:{padding:"5px 20px 15px"}},n().createElement(c.Z,{spacing:2},n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{json:x,id:W.ContractID,"data-testid":W.ContractID,value:W.ContractName,SPName:"CCMQuationRegistry",FieldName:"ContractID",tfLabel:je("ContractID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>nt(e,"ContractID","select"),onChange:(e,t)=>{at(e,t,"ContractIDPK")},KeyBack:e=>{ot("ContractID")},fieldorder:"1",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,openSlide:()=>{et("156")},Tabledialog:()=>tt("156","ContractID"),loading:q,clear:e=>{e&&it("ContractID")}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{json:x,id:W.TaxID,"data-testid":W.TaxID,value:W.TaxName,SPName:"CCMQuationRegistry",FieldName:"TaxID",tfLabel:je("TaxID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>nt(e,"TaxID","select"),onChange:(e,t)=>{at(e,t,"TaxIDPK")},KeyBack:e=>{ot("TaxID")},fieldorder:"2",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,openSlide:()=>{et("19")},Tabledialog:()=>tt("19","TaxID"),loading:q,clear:e=>{e&&it("TaxID")}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMQuationCode,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMQuationCode",tfLabel:je("CCMQuationCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{oe&&lt(1,"","ClearAll"),re(!0)},frmctrlid:"fld1646_41716",frmctrlidName:"CCMQuationCode",fieldorder:"3",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{oe&&lt(e,t,"CCMQuationCode"),nt(t,"CCMQuationCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||re(!0)},showList:oe,SideEntryView:!1,KeyBack:e=>{},value:W.CCMQuationCode,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMQuationCode",value:""}),re(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMQuationName,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMQuationName",tfLabel:je("CCMQuationName"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{Ce&&lt(1,"","ClearAll"),ue(!0)},frmctrlid:"fld1646_41717",frmctrlidName:"CCMQuationName",fieldorder:"4",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{Ce&&lt(e,t,"CCMQuationName"),nt(t,"CCMQuationName","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||ue(!0)},showList:Ce,SideEntryView:!1,KeyBack:e=>{},value:W.CCMQuationName,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMQuationName",value:""}),ue(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMQuationNo,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMQuationNo",tfLabel:je("CCMQuationNo"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{se&&lt(1,"","ClearAll"),de(!0)},frmctrlid:"fld1646_41718",frmctrlidName:"CCMQuationNo",fieldorder:"1",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{se&&lt(e,t,"CCMQuationNo"),nt(t,"CCMQuationNo","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||de(!0)},showList:se,SideEntryView:!1,KeyBack:e=>{},value:W.CCMQuationNo,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMQuationNo",value:""}),de(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3,className:"flexEnd"},n().createElement(g.Z,{value:W.CcMQuationDate,"data-testid":W.CcMQuationDate,disabled:!1,onChange:e=>{nt(e,"CcMQuationDate","date")},onErr:e=>{ce(e)},label:je("CcMQuationDate"),frmctrlid:"fld1646_41719",frmctrlidName:"CcMQuationDate",fieldorder:"2"})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMTotalAmount,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMTotalAmount",tfLabel:je("CCMTotalAmount"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{pe&&lt(1,"","ClearAll"),ge(!0)},frmctrlid:"fld1646_41720",frmctrlidName:"CCMTotalAmount",fieldorder:"3",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{pe&&lt(e,t,"CCMTotalAmount"),nt(t,"CCMTotalAmount","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||ge(!0)},showList:pe,SideEntryView:!1,KeyBack:e=>{},Iscurr:!0,value:W.CCMTotalAmount,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMTotalAmount",value:""}),ge(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMTaxValu,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMTaxValu",tfLabel:je("CCMTaxValu"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{ye&&lt(1,"","ClearAll"),Me(!0)},frmctrlid:"fld1646_41721",frmctrlidName:"CCMTaxValu",fieldorder:"4",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{ye&&lt(e,t,"CCMTaxValu"),nt(t,"CCMTaxValu","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Me(!0)},showList:ye,SideEntryView:!1,KeyBack:e=>{},value:W.CCMTaxValu,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMTaxValu",value:""}),Me(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMTaxAmount,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMTaxAmount",tfLabel:je("CCMTaxAmount"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{De&&lt(1,"","ClearAll"),Ie(!0)},frmctrlid:"fld1646_41722",frmctrlidName:"CCMTaxAmount",fieldorder:"1",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{De&&lt(e,t,"CCMTaxAmount"),nt(t,"CCMTaxAmount","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Ie(!0)},showList:De,SideEntryView:!1,KeyBack:e=>{},Iscurr:!0,value:W.CCMTaxAmount,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMTaxAmount",value:""}),Ie(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMSubTotal,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMSubTotal",tfLabel:je("CCMSubTotal"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{fe&&lt(1,"","ClearAll"),Ee(!0)},frmctrlid:"fld1646_41723",frmctrlidName:"CCMSubTotal",fieldorder:"2",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{fe&&lt(e,t,"CCMSubTotal"),nt(t,"CCMSubTotal","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Ee(!0)},showList:fe,SideEntryView:!1,KeyBack:e=>{},value:W.CCMSubTotal,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMSubTotal",value:""}),Ee(!0))}})),n().createElement(p.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(T.Z,{"data-testid":W.CCMGrandTotal,json:x,SPName:"CCMQuationRegistry",FieldName:"CCMGrandTotal",tfLabel:je("CCMGrandTotal"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&rt(t),onClick:()=>{ve&&lt(1,"","ClearAll"),Te(!0)},frmctrlid:"fld1646_41724",frmctrlidName:"CCMGrandTotal",fieldorder:"3",data:ee,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:ee.length>0?ee[0].TotalCount:0,onChange:(e,t)=>{ve&&lt(e,t,"CCMGrandTotal"),nt(t,"CCMGrandTotal","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Te(!0)},showList:ve,SideEntryView:!1,KeyBack:e=>{},value:W.CCMGrandTotal,loading:q,clear:e=>{e&&(J({type:"text",name:"CCMGrandTotal",value:""}),Te(!0))}})))))),n().createElement("div",{id:"CCMQuationRegistrySideBar",className:"sidenav"},n().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("CCMQuationRegistrySideBar").style.width="0",void U(!1))},""),_&&n().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},Y))))))))})),L=Z,O=e=>"string"==typeof e?e.trim():e;function z(e){const{url:t,PrimID:a,ParamType:l,state:n,active:i,token:o,DefaultPrimaryId:r}=e,C={data:[{p1:"SetDefaultCCMQuationID"==l?"NORECORDS"!=r&&r?r:0:a,p2:O(n.CCMQuationCode),p3:O(n.CCMQuationName),p4:O(n.CCMQuationNo),p5:n.CcMQuationDate?n.CcMQuationDate:null,p6:n.CCMTotalAmount?Number(n.CCMTotalAmount):0,p7:n.CCMTaxValu?Number(n.CCMTaxValu):0,p8:n.CCMTaxAmount?Number(n.CCMTaxAmount):0,p9:n.CCMSubTotal?Number(n.CCMSubTotal):0,p10:n.CCMGrandTotal?Number(n.CCMGrandTotal):0,p11:n.IsDefault,p12:!1,p13:"SetDefaultCCMQuationID"==l?"SetDefault":null,p14:n.ContratID?n.ContratID:0,p15:n.TaxID?n.TaxID:0,p16:i,p17:"SetDefaultCCMQuationID"==l,p18:localStorage.getItem("userid"),p19:v()().format("YYYY-MM-DD hh:mm:ss"),p20:localStorage.getItem("userid"),p21:v()().format("YYYY-MM-DD hh:mm:ss")}]};return(0,d.Z)(t,C,o).then((e=>e))}},60487:(e,t,a)=>{a.r(t),a.d(t,{CCMQuationRegistryContext:()=>M,ContextApi:()=>D,default:()=>I});var l=a(92950),n=a.n(l),i=a(45237),o=a(99945),r=a(47033),C=a(27239),u=a(67698),s=a(55995),d=a(26537),m=(a(35131),a(45965)),c=a(73668),p=(a(37274),a(9175)),g=a.n(p),y=a(23501);const M=(0,l.createContext)();function D(){const e=n().useContext(M);if(void 0===e)throw new Error("useCount must be used within a CountProvider");return e}const I=function(e){const t=(0,l.useRef)(),a=(0,l.useRef)(),p=(0,l.useRef)(),I=(0,l.useRef)(),f=(0,l.useRef)(),E=(0,l.useRef)(),v=((0,i.useSelector)((e=>e.form)),(0,i.useDispatch)()),[T,Q]=(0,l.useState)(0),[S,h]=n().useReducer(c.I,c.E),[N,x]=(0,l.useState)(""),[b,w]=(0,l.useState)(""),[A,k]=(0,l.useState)([]),F=(0,l.useRef)(),[P,B]=(0,l.useState)(!1);function R(e){h({type:"IsExPView",payload:!0}),h({type:"IsCollapse",payload:!1}),document.getElementById("CCMQuationRegistry-MainTable").style.margin="0",document.getElementById("divCCMQuationRegistry-Entry").style.margin="0",document.getElementById("divCCMQuationRegistry-Entry").style.width="100%",document.getElementById("CCMQuationRegistry-MainTable").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.display="none",document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayGrid"),h({type:"ExpandDetailValue",payload:!1}),document.getElementById("overlayimgAttCCMQuationRegistry")&&(document.getElementById("overlayimgAttCCMQuationRegistry").style.width="0%",document.getElementById("overlayPreviewCCMQuationRegistry").style.width="0%",document.getElementById("overlayimgAttCCMQuationRegistry").style.display="none")}(0,l.useEffect)((()=>{e.loading(!0),R(),h({type:"IsDraft",payload:!1}),h({type:"ShowDetail",payload:!1}),h({type:"Add",payload:!0}),h({type:"editData",payload:[]})}),[]),(0,l.useEffect)((()=>{e.editData&&h({type:"editData",payload:[e.editData]})}),[e.editData]);const Z=e=>{h({type:"IsCollapse",payload:!0}),document.getElementById("CCMQuationRegistry-MainTable").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("divCCMQuationRegistry-Entry").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("CCMQuationRegistry-MainTable").style.width="0%",document.getElementById("CCMQuationRegistry-MainTable").style.display="none",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.display="block",document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayGrid"),h({type:"ExpandDetailValue",payload:!0}),h({type:"PrimaryId",payload:""}),t.current.clear(),e&&E.current.AddClose()},L=t=>{S.IsCollapse?(document.getElementById("CCMQuationRegistry-MainEntry").style.width=e.inboxdata?"0":"50%",document.getElementById("CCMQuationRegistry-MainEntry").style.display=e.inboxdata?"none":"block",document.getElementById("divCCMQuationRegistry-Entry").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.display="block",document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMQuationRegistry").style.width="0%",document.getElementById("overlayimgAttCCMQuationRegistry").style.display="none"):(document.getElementById("overlayimgAttCCMQuationRegistry").style.width="0%",document.getElementById("overlayimgAttCCMQuationRegistry").style.display="none",document.getElementById("divCCMQuationRegistry-Entry").style.width="100%",document.getElementById("CCMQuationRegistry-MainTable").style.width="auto",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayGrid"))};(0,l.useEffect)((()=>{v((e=>{(0,d.Z)(1).then((e=>{var t=new Array;t.push(e),h({type:"token",payload:t}),Q(t.length),O(e)}))}))}),[]);const O=e=>{(0,m.Z)(e,1646).then((e=>h({type:"AccessRights",payload:e})))};return(0,l.useEffect)((()=>{e.inboxdata&&(h({type:"ShowDetail",payload:!0}),h({type:"PrimaryId",payload:e.inboxdata.id}),setTimeout((()=>{a.current.viewlistProps(e.inboxdata.id)}),500))}),[e.inboxdata]),n().createElement("div",null,n().createElement(M.Provider,{value:{cstate:S,cdispatch:h,ContextApi:D,loading:t=>e.loading(t),ShareTab:(t,a)=>e.TabShare(t,a),alert:t=>e.alertmsg(t),SlideComponentType:t=>e.SlideComponentType(t),ConfirmAlert:t=>e.ConfirmAlert(t),openNav:t=>e.openNav(t),Approval:e=>B(e),openDialog:t=>e.openDialog(t),AppropenDialog:(t,a)=>e.openDialogAppr(t,a),DialogComponentType:t=>e.DialogComponentType(t),ExpandTable:e=>R(),viewtoggle:()=>{S.ShowDetail&&a.current.viewtoggle()},ExpandDetail:e=>Z(e),AttachExpand:t=>(p.current.AttachmentData(S.PrimaryId),void(S.ExpandTableValue?(document.getElementById("overlayimgAttCCMQuationRegistry").style.width="28%",document.getElementById("divCCMQuationRegistry-Entry").style.width="100%",document.getElementById("CCMQuationRegistry-MainTable").style.width="auto",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttCCMQuationRegistry").style.display="block"):(document.getElementById("CCMQuationRegistry-MainEntry").style.width=e.inboxdata?"0":"40%",document.getElementById("CCMQuationRegistry-MainEntry").style.display=e.inboxdata?"none":"block",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.display="block",document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMQuationRegistry").style.width="28%",document.getElementById("overlayimgAttCCMQuationRegistry").style.display="block"))),RefreshTable:()=>{f.current.tableRefresh()},floatRefresh:()=>F.current.countRefresh(),expand:()=>document.getElementById("overlayimgAttCCMQuationRegistry").style.display="none",attachmentSave:e=>{I.current.tempsave(e,b),w([])},detailview:(e,t)=>{f.current.viewrecord(t),h({type:"ShowDetail",payload:e}),h({type:"EditOpen",payload:!0}),S.ShowDetail&&a.current.viewtoggle()},clear:e=>{S.ShowDetail?(h({type:"ShowDetail",payload:!1}),h({type:"editData",payload:[]})):t.current.CreateEasyProps(e)},edit:(e,t,a,l)=>{var n,i,o;n=e,o=l,h({type:"IsDraft",payload:i=t}),h({type:"EditOpen",payload:!1}),h({type:"EditIsDraft",payload:i}),Z(),h({type:"editData",payload:[n]}),h({type:"screenType",payload:o})},AddOpen:(e,t)=>((e,t)=>{h({type:"ShowDetail",payload:!0}),h({type:"PrimaryId",payload:e}),setTimeout((()=>{t&&E.current.AddOpen(e,t),a.current.viewlistProps(e,t)}),100)})(e,t),ShowTableDiv:()=>(h({type:"ShowDetail",payload:!1}),h({type:"ExpandTableValue",payload:!0}),f.current.tableRefresh(),document.getElementById("CCMQuationRegistry-MainTable").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("divCCMQuationRegistry-Entry").style.margin="0.1rem 0.3rem 0.1rem 0.4rem",document.getElementById("CCMQuationRegistry-MainTable").style.width="100%",document.getElementById("CCMQuationRegistry-MainTable").style.display="block",document.getElementById("CCMQuationRegistry-MainEntry").style.width="0%",document.getElementById("CCMQuationRegistry-MainEntry").style.display="none",document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayGrid"),document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationRegistryTabDiv").style.width="100%",document.getElementById("CCMQuationRegistryFilterDiv").style.display="none",void(document.getElementById("CCMQuationRegistryFilterDiv").style.width="0%"))}},n().createElement("div",{id:"CCMQuationRegistry-MainDiv",className:"MainDivStyles displayFlex",style:{width:"100%"}},!S.ExpandTableValue&&n().createElement("div",{id:"CCMQuationRegistry-MainTable",className:"Maincontent"},0!==T?n().createElement(o.default,{ref:f}):null),n().createElement("div",{id:"CCMQuationRegistry-MainEntry",className:"Maincontent",style:{overflow:"auto",marginLeft:"0",height:"85vh"}},S.ShowDetail?n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divCCMQuationRegistry-Entry",style:{width:"100%",display:"flex"}},n().createElement(r.default,{inboxdata:e.inboxdata,openDialog:(t,a)=>e.LevelComponentHTMLopenDialogAppr(t,a),parentId:S.PrimaryId,ref:a}),n().createElement("div",{style:{width:"70%"}},n().createElement(y.ZP,{ref:E,loading:t=>e.loading(t),alertmsg:t=>e.alertmsg(t),ConfirmAlert:t=>{e.ConfirmAlert(t)},data:S.editData,AddOpen:S.EditOpen,parentId:S.PrimaryId,IsDraft:S.EditIsDraft,openNav:t=>e.openNav(t),SlideComponentType:t=>e.SlideComponentType(t),IsCollapse:S.IsCollapse,openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t)})),n().createElement(s.Z,{ref:I,menurefID:1646,fileId:"LogoImgCCMQuationRegistry",imgloading:e=>x(e),valueIDPK:S.PrimaryId,AttachmentVal:e=>p.current.AttachmentData(e),previd:"overlayPreviewCCMQuationRegistry",AccessRights:S.AccessRights,frmctrlid:"PvwIm_1646_L3_",formCtrlIDSave:"attachsave1438",formCtrlIDClose:"attachclose1438",tempImg:e=>{S.PrimaryId?p.current.AttachmentData(S.PrimaryId):p.current.tempImg(e),w(e)},clearTempData:S.Add})),n().createElement(u.Z,{ImgAttachment:e=>L(),menurefID:1646,fileId:"AttImgCCMQuationRegistry",imgid:"overlayimgAttCCMQuationRegistry",valueIDPK:S.PrimaryId,PriviewData:(e,t,a,l)=>{I.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewCCMQuationRegistry",ref:p,imgloading:N,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_1646_L3_",timglist:e=>I.current.timglist(e)})):n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divCCMQuationRegistry-Entry",style:{width:"100%"}},n().createElement(C.default,{inboxdata:e.inboxdata,ref:t,clrImgstate:e=>p.current.clrImgstate(e)}),n().createElement(y.ZP,{ref:E,Action:"none",loading:t=>e.loading(t),alertmsg:t=>e.alertmsg(t),ConfirmAlert:t=>{e.ConfirmAlert(t)},data:S.editData,AddOpen:S.EditOpen,parentId:S.PrimaryId,IsDraft:S.EditIsDraft,openNav:t=>e.openNav(t),SlideComponentType:t=>e.SlideComponentType(t),IsCollapse:S.IsCollapse,openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t)}),n().createElement(s.Z,{ref:I,menurefID:1646,fileId:"LogoImgCCMQuationRegistry",imgloading:e=>x(e),valueIDPK:S.PrimaryId,AttachmentVal:e=>p.current.AttachmentData(e),previd:"overlayPreviewCCMQuationRegistry",FormCtrlIDSave:"attachsave1438",FormCtrlIDClose:"attachclose1438",tempImg:e=>{S.PrimaryId?p.current.AttachmentData(S.PrimaryId):p.current.tempImg(e),w(e)},clearTempData:S.Add})),n().createElement(u.Z,{ImgAttachment:e=>L(),menurefID:1646,fileId:"AttImgCCMQuationRegistry",imgid:"overlayimgAttCCMQuationRegistry",valueIDPK:S.PrimaryId,PriviewData:(e,t,a,l)=>{I.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewCCMQuationRegistry",ref:p,imgloading:N,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_1646_L3_",timglist:e=>I.current.timglist(e),clearTempData:S.Add}))),S.ExpandTableValue&&n().createElement("div",{id:"CCMQuationRegistry-MainTable",className:"Maincontent"},0!==T?n().createElement(o.default,{ref:f}):null)),P&&n().createElement(g(),{openDialog:P,closeDialog:e=>B(e),formID:1646,PrimID:S.PrimaryId,alert:(e,t,a)=>{},loading:t=>{e.loading(t)}})))}},99945:(e,t,a)=>{a.r(t),a.d(t,{CCMQuationRegistryPopUpTable:()=>V,default:()=>K}),a(95866);var l=a(92950),n=a.n(l),i=a(45237),o=a(36939),r=a(61201),C=a(50743),u=a(59009),s=a(80366),d=a(51673),m=a(84805),c=a(54180),p=a(47516),g=a(39327),y=(a(14439),a(27848),a(42258),a(40900)),M=(a(83032),a(44117),a(60487)),D=a(43031),I=a(110),f=a(88995),E=a(5109),v=a(61657),T=a(868),Q=a(24038),S=a(51209),h=a(8981),N=(a(3212),a(86893)),x=a(53854),b=a(51649),w=a(37106),A=a(5434),k=a(93521),F=a(8687),P=a(23501),B=a(71168),R=a.n(B),Z=a(65107),L=a(79352),O=a(94986),z=a(15999);a(11557),window.clickFilter="";const K=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),B=((0,l.useRef)(null),(0,l.useRef)(null)),[K]=((0,i.useSelector)((e=>e.form)),(0,i.useDispatch)(),(0,l.useState)(localStorage.getItem("userid"))),[V]=(0,l.useState)("1646"),[G,_]=(0,l.useState)(!1),[U,j]=(0,l.useState)(!1),[H,Y]=(0,l.useState)(0),[$,W]=(0,l.useState)(0),[J,q]=(0,l.useState)(0),[X,ee]=(0,l.useState)({current:1,pageSize:100}),[te,ae]=(0,l.useState)(""),[le,ne]=(0,l.useState)([]),[ie,oe]=(0,l.useState)({val:"",column:""}),[re,Ce]=(0,l.useState)([]),[ue,se]=(0,l.useState)(!1),[de,me]=(0,l.useState)(""),[ce,pe]=(0,l.useState)(""),[ge,ye]=(0,l.useState)(!1),[Me,De]=(0,l.useState)(!1),[Ie,fe]=(0,l.useState)([]),[Ee,ve]=(0,l.useState)([]),[Te,Qe]=(0,l.useState)([]),[Se,he]=(0,l.useState)(!1),Ne=(0,l.useContext)(e.context?e.context:M.CCMQuationRegistryContext),{cstate:xe,cdispatch:be}=e.ContextApi?e.ContextApi:(0,M.ContextApi)(),[we,Ae]=(0,l.useState)({children:[{name:"CCMQuationRegistry",children:[]}]}),[ke,Fe]=(0,l.useState)(!1);let Pe={CCMQuationIDPK:"",CCMQuationCode:"",CCMQuationName:"",CCMQuationNo:"",CcMQuationDate:"",CcMQuationDateType:"",CcMQuationDateBetween:"",CCMTotalAmount:"",CCMTaxValu:"",CCMTaxAmount:"",CCMSubTotal:"",CCMGrandTotal:"",IsDefault:"",IsDraft:"",Remarks:"",ContratID:"",TaxID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[Be,Re]=(0,l.useState)(Pe),[Ze,Le]=(0,l.useState)(Pe),[Oe,ze]=(0,l.useState)(Pe),[Ke,Ve]=(0,l.useState)(Pe),[Ge,_e]=(0,l.useState)("asc"),[Ue,je]=(0,l.useState)(""),[He,Ye]=(0,l.useState)(!1),[$e,We]=(0,l.useState)(!0),[Je,qe]=(0,l.useState)(!0),[Xe,et]=(0,l.useState)(!1),[tt,at]=(0,l.useState)(!0),[lt,nt]=(0,l.useState)(0),[it,ot]=(0,l.useState)({ContractName:"",TaxName:"",CCMQuationCode:"",CCMQuationName:"",CCMQuationNo:"",CcMQuationDate:"",CCMTotalAmount:"",CCMTaxValu:"",CCMTaxAmount:"",CCMSubTotal:"",CCMGrandTotal:""}),[rt,Ct]=(0,l.useState)(!1),[ut,st]=(0,l.useState)([]),[dt,mt]=(0,l.useState)(0),[ct,pt]=(0,l.useState)(0),[gt,yt]=(0,l.useState)({current:1,pageSize:10}),[Mt,Dt]=(0,l.useState)([]),[It,ft]=(0,l.useState)([]),[Et,vt]=(0,l.useState)(!1),[Tt]=(0,l.useState)(localStorage.getItem("Language")),[Qt]=(0,l.useState)(localStorage.getItem("Language")),[St,ht]=R()("1646"),[Nt,xt]=(0,l.useState)({}),[bt,wt]=(0,l.useState)({}),At=[{columns:Mt,data:te}];let kt=(0,h.Z)();const Ft=e=>kt?.[e]?kt[e]:e,Pt=e=>xe.language?.[e]?xe.language[e]:e;(0,l.useEffect)((()=>{Ot(St)}),[St]),(0,l.useEffect)((()=>{xe.token.length>0&&(xe.IsDraft?Zt(X,Pe,"DraftCCMQuationID"):Zt(X,Pe,"CCMQuationID"))}),[]),(0,l.useEffect)((()=>{Me||Se||ke||!de?Me?Le(de):Se?ze(de):ke&&Ve(de):xe.IsDraft?Zt(X,de,"DraftCCMQuationID"):Zt(X,de,"CCMQuationID")}),[de]),(0,l.useEffect)((()=>{!1===e.cardview&&at(e.cardview),e.Dialogview&&j(e.Dialogview)}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&Lt(e.searchsafaritext,{current:X.current,pageSize:X.pageSize})}),[e.searchsafaritext]),(0,l.useImperativeHandle)(t,(()=>({tableRefresh:()=>{Bt()},viewrecord:e=>{re.map(((t,a)=>{t.CCMQuationIDPK==e&&be({type:"editData",payload:[re[a]]})}))}})));const Bt=()=>{xe.IsDraft?Zt(X,Pe,"DraftCCMQuationID"):Zt(X,Pe,"CCMQuationID")};function Rt(e){Ne.loading(!0);let t=y.v.Api+"FP1646S7/",a={data:{p1:"%%",p2:"0",p3:"0",p4:e.current,p5:e.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,d.Z)(t,a,xe.token[0]).then((t=>{if(200==t.Output.status.code){let a=0;t.Output.data.length>0?(a=parseFloat(t.Output.data[0].TotalCount,10)/10,pt(t.Output.data[0].TotalCount)):(a=0,Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Ne.loading(!1)),10==e.pageSize?mt(Math.ceil(a)):20==e.pageSize?mt(Math.ceil(a/2)):50==e.pageSize?mt(Math.ceil(a/5)):100==e.pageSize&&mt(Math.ceil(a/10)),st(t.Output.data),Ne.loading(!1)}}))}const Zt=(e,t,a,l,n,i)=>{Ne.loading(!0),"DraftPage"!==l&&Ye(xe.IsDraft);let o=y.v.Api+"FP1646S3/",r={data:{p1:n||(t&&t.CCMQuationIDPK?t.CCMQuationIDPK:null),p2:t&&t.CCMQuationCode?t.CCMQuationCode:null,p3:t&&t.CCMQuationName?t.CCMQuationName:null,p4:t&&t.CCMQuationNo?t.CCMQuationNo:null,p5:t&&t.CcMQuationDate?t.CcMQuationDate:null,p6:t&&t.CcMQuationDateType?t.CcMQuationDateType:null,p7:t&&t.CcMQuationDateBetween?t.CcMQuationDateBetween:null,p8:t&&t.CCMTotalAmount?t.CCMTotalAmount:null,p9:t&&t.CCMTaxValu?t.CCMTaxValu:null,p10:t&&t.CCMTaxAmount?t.CCMTaxAmount:null,p11:t&&t.CCMSubTotal?t.CCMSubTotal:null,p12:t&&t.CCMGrandTotal?t.CCMGrandTotal:null,p13:null,p14:"DraftCCMQuationID"==a?"1":"0",p15:null,p16:t&&t.ContratID?t.ContratID:null,p17:t&&t.TaxID?t.TaxID:null,p18:t&&t.IsActive,p19:null,p20:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p21:t&&t.CreatedTtm?t.CreatedTtm:null,p22:t&&t.CreatedTtmType?t.CreatedTtmType:null,p23:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p24:null,p25:n?1:e.current,p26:e.pageSize,p27:a,p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}};(0,d.Z)(o,r,xe.token[0]).then((o=>{if(n)(0,F.m)(o,be,l,i,Ne,"CCMQuationIDPK");else if("200"==o.Output.status.code)if(o.Output.data.length>0){if(o.Output.data){let t=0;o.Output.data.length>0?(t=parseFloat(o.Output.data[0].TotalCount,10)/10,W(o.Output.data[0].TotalCount),be({type:"count",payload:o.Output.data[0].TotalCount}),q(o.Output.data[0].DraftCnt),"DraftPage"==l&&q(o.Output.data[0].TotalCount)):t=0,10==e.pageSize?Y(Math.ceil(t)):20==e.pageSize?Y(Math.ceil(t/2)):50==e.pageSize?Y(Math.ceil(t/5)):100==e.pageSize&&Y(Math.ceil(t/10)),xe.ExpandTableValue&&(xe.ExpandDetailValue?document.getElementById("CCMQuationRegistry-MainTable").style.display="block":(document.getElementById("CCMQuationRegistry-MainTable").style.width="100%",document.getElementById("CCMQuationRegistry-MainEntry").style.width="100%",document.getElementById("CCMQuationRegistry-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMQuationRegistry-MainDiv").classList.add("displayGrid"))),Ce(o.Output.data),Ne.loading(!1),document.getElementById("divCCMQuationRegistry-Entry").style.height="auto"}}else Ne.loading(!1),"DraftCCMQuationID"===a?(Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),ye(!0),Ye(!1)):(Ce([]),ee({current:1,pageSize:10}),Y(0),W(0),be({type:"count",payload:0}),Object.values(t).some((e=>e))&&Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else Ne.alert({open:!0,color:"warning",message:[o.Output.status.message]}),Ne.loading(!1)}))};function Lt(e,t){Ne.loading(!0);const a=y.v.Api+"FP1646S4/",l={data:{p1:"%"+e+"%",p2:"0",p3:He?"1":"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,d.Z)(a,l,xe.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,W(e.Output.data[0].TotalCount),be({type:"count",payload:e.Output.data[0].TotalCount})):a=0,10==t.pageSize?Y(Math.ceil(a)):20==t.pageSize?Y(Math.ceil(a/2)):50==t.pageSize?Y(Math.ceil(a/5)):100==t.pageSize&&Y(Math.ceil(a/10)),Ce(e.Output.data),Ne.loading(!1)}else Ce([]),Y(0),W(0),be({type:"count",payload:0}),Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Ne.loading(!1);else Ne.alert({open:!0,color:"warning",message:[e.Output.status.message]}),Ne.loading(!1)}))}function Ot(e){let t=[],a=[],l=[],n=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldDisplay&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let i=localStorage.getItem("Language");n.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[i]]})})),be({type:"language",payload:Object.assign({},...n)}),ot(a.reduce(((e,t)=>(e[t]="",e)),{})),fe(e),ve(t),Qe(a),Dt(l),ft(a)}const zt=(e,t,a)=>{be({type:"IsDraft",payload:t}),be({type:"EditOpen",payload:!1}),be({type:"EditIsDraft",payload:t}),Ne.ExpandDetail(!1),a?Ne.AddOpen(e.CCMQuationIDPK,t):be({type:"editData",payload:[e]})},Kt=()=>{ue?(document.getElementById("CCMQuationRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("CCMQuationRegistryTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("CCMQuationRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",se(!1),Me?(document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):tt?Se?(document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMQuationRegistrycoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistrycoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("CCMQuationRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("CCMQuationRegistryTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("CCMQuationRegistryFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",se(!0),Me?(document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):tt?Se?(document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMQuationRegistrycoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistrycoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")),ye(!1),window.clickFilter=!ue};return n().createElement("div",null,n().createElement(o.Z,{expanded:$e,onChange:()=>()=>{We(Je)}},n().createElement(C.Z,null,n().createElement("div",{className:"padding displayFlex backgroundDark borderRadiusTop width100",style:{padding:"0.6rem"}},n().createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",height:"35px",alignItems:"center"}},n().createElement("div",{className:"displayFlex"},ke||Me||!He?n().createElement("div",{className:"ListHeader displayFlex"},n().createElement("p",{className:"ListP",title:"10.0.0.82-3:45:06 PM-19-8[1646]"},`${Pt("1646")} (${$})`)):n().createElement("div",{className:"ListHeader displayFlex"},n().createElement(T.ZP,{title:"List",placement:"top"},n().createElement("div",{id:"fld1646L3TCList",onClick:()=>{Je||(be({type:"Add",payload:!0}),be({type:"Add",payload:!0})),Ne.clear();var e=document.getElementsByClassName("ClearIconbtn")[0];e?(e.click(),setTimeout((function(){Zt({current:1,pageSize:100},Pe,"CCMQuationID"),Ye(!1),be({type:"IsDraft",payload:!1})}),500)):(Zt({current:1,pageSize:100},Pe,"CCMQuationID"),Ye(!1),be({type:"IsDraft",payload:!1})),ee({current:1,pageSize:100})}},n().createElement(b.u1R,{className:"backButtonList"}))),n().createElement("p",{className:"DraftP"},"Drafts(",$,")")))),n().createElement("div",{style:{display:"flex"}},Me||Se||ke?null:n().createElement("div",{className:"searchbar",id:"fld1646L3TCSearchBar"},n().createElement(Q.Z,{className:"search_input",type:"text",id:"CCMQuationRegistrygridsearch",placeholder:"Search",value:ce,onChange:e=>{if(pe(e),"0"==e.length)return Zt(X,Pe,He?"DraftCCMQuationID":"CCMQuationID",He&&"DraftPage"),!1;Lt(e,{current:1,pageSize:100})}}),n().createElement("div",{className:"search_icon"},ce?n().createElement("div",{id:"fld1646L3TCCloseIcon",onClick:()=>{pe(""),Bt()}},n().createElement(s.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld1646L3TCInputSearchIcon",onClick:()=>{document.getElementById("CCMQuationRegistrygridsearch").focus()}},n().createElement(f.Z,{className:"InputSearchIcon"}))))))),n().createElement(r.Z,{className:"AccDetails"},n().createElement("div",{className:"tableCard"},n().createElement("div",{id:"CCMQuationRegistry-HeaderItems",className:"displayFlex padding"},n().createElement("div",{className:"tableHeaderItems displayFlex"},!He&&n().createElement("div",{frmctrlid:"fld1646L3TCFilterDataIsDraft",id:"CCMQuationRegistryfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>Kt()},n().createElement(T.ZP,{title:Ft("Filter Data"),placement:"top"},n().createElement(p.Ol$,{className:"tableFilterColumnIcon"})),n().createElement("span",{className:"iconinfo"},Ft("Filter Data"))),U||Me||ke||He?null:n().createElement(c.Z,{title:"1646",formctrlidprint:"fld1646L3TCExportPrint",formctrlidexport:"fld1646L3TCExportTable",formctrlidrefresh:"fld1646L3TCExportRefresh",data:le,exportData:At,Items:It,columnIndex:Mt,TableVisibleItem:Ee,userGridViewFormID:V,TableTotalCount:$,triggerApi:e=>{((e,t,l,n,i)=>{if(0===$)return Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;Ne.loading(!0);let o=y.v.Api+"FP1646S3/",r={data:{p1:e&&e.CCMQuationIDPK?e.CCMQuationIDPK:null,p2:e&&e.CCMQuationCode?e.CCMQuationCode:null,p3:e&&e.CCMQuationName?e.CCMQuationName:null,p4:e&&e.CCMQuationNo?e.CCMQuationNo:null,p5:e&&e.CcMQuationDate?e.CcMQuationDate:null,p6:e&&e.CcMQuationDateType?e.CcMQuationDateType:null,p7:e&&e.CcMQuationDateBetween?e.CcMQuationDateBetween:null,p8:e&&e.CCMTotalAmount?e.CCMTotalAmount:null,p9:e&&e.CCMTaxValu?e.CCMTaxValu:null,p10:e&&e.CCMTaxAmount?e.CCMTaxAmount:null,p11:e&&e.CCMSubTotal?e.CCMSubTotal:null,p12:e&&e.CCMGrandTotal?e.CCMGrandTotal:null,p13:null,p14:He?"1":"0",p15:null,p16:e&&e.ContratID?e.ContratID:null,p17:e&&e.TaxID?e.TaxID:null,p18:e&&e.IsActive,p19:null,p20:e&&e.CreatedUserID_varchar?e.CreatedUserID_varchar:null,p21:e&&e.CreatedTtm?e.CreatedTtm:null,p22:e&&e.CreatedTtmType?e.CreatedTtmType:null,p23:e&&e.CreatedTtmBetween?e.CreatedTtmBetween:null,p24:null,p25:X.current,p26:$,p27:He?"DraftCCMQuationID":"CCMQuationID",p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}};Ne.loading(!1),Ne.alert({open:!0,color:"success",message:[`${Pt(1646)} - ${i.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,d.Z)(o,r,xe.token[0],i).then((e=>{(0,k.PDF_Excel_Generate)(e,Ne,It,ae,a,i)}))})(de,ie.column,0,0,e)},Refresh:()=>{pe(""),B.current.clearItem(),ee({current:1,pageSize:100}),xe.IsDraft?Zt({current:1,pageSize:100},Pe,"DraftCCMQuationID"):Zt({current:1,pageSize:100},Pe,"CCMQuationID")},disabledPrint:!xe.AccessRights.IsPrint,disabledExport:!xe.AccessRights.IsExport,ref:a}),Me||Se||ke||!Je?null:!He&&xe.AccessRights.IsAdd&&n().createElement("div",{id:"CCMQuationRegistrycoldiv",className:"buttoncard",onClick:()=>{ge?(document.getElementById("CCMQuationRegistryFilterDiv").style.width="0%",document.getElementById("CCMQuationRegistryTabDiv").style.width="100%",document.getElementById("CCMQuationRegistryFilterDiv").style.display="none",document.getElementById("CCMQuationRegistrycoldiv").style.width="fit-content",document.getElementById("CCMQuationRegistrycoldiv").getElementsByTagName("svg")[0].style.padding="4px",ye(!1)):(document.getElementById("CCMQuationRegistryFilterDiv").style.width="25%",document.getElementById("CCMQuationRegistryTabDiv").style.width="75%",document.getElementById("CCMQuationRegistryFilterDiv").style.display="block",document.getElementById("CCMQuationRegistryfildiv").style.width="fit-content",document.getElementById("CCMQuationRegistryfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMQuationRegistrycoldiv").style.width="fit-content",document.getElementById("CCMQuationRegistrycoldiv").getElementsByTagName("svg")[0].style.padding="4px",ye(!0)),se(!1)}},n().createElement(T.ZP,{title:"{t('Manage Columns')}",placement:"top"},n().createElement("span",null,n().createElement(g.gYA,{className:"tableFilterColumnIcon",frmctrlid:"fld1646L3TCFilterDataIsAdd"}))),n().createElement("span",{className:"iconinfo"},Ft("Manage Columns"))),!He&&G&&!Me&&!ke&&!U&&Je&&n().createElement("div",{id:"fld1646L3TCExpMigSlide",className:"buttoncard",onClick:()=>MigrationSlide()},n().createElement(T.ZP,{title:Ft("Migration"),placement:"top"},n().createElement("span",null,n().createElement(L.ncH,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"iconinfo"},Ft("Migration"))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!U&&Je&&!ke&&!Me&&!He&&n().createElement("div",null,n().createElement("div",{id:"CCMQuationRegistrycoldiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{rt?Ct(!1):(Ct(!0),Rt({current:1,pageSize:100}))}},n().createElement("div",{id:"fld1646L3TCTableScrollData"},n().createElement(T.ZP,{title:Ft("Table Scroll Data"),placement:"top"},n().createElement(z.Z,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"iconinfo"},Ft("Table Scroll Data")))),xe.AccessRights.IsAdd&&!ke&&!Me&&!He&&n().createElement(u.Z,{color:"secondary",className:"badge",max:999,badgeContent:J,showZero:!0},n().createElement("div",{className:"buttoncard",style:{marginLeft:"-10px"},onClick:()=>{if(J>0){nt(0),ee({current:1,pageSize:100}),Je||(be({type:"Add",payload:!0}),be({type:"Add",payload:!0})),Ne.clear();var e=document.getElementsByClassName("ClearIconbtn")[0];e?(e.click(),setTimeout((function(){Zt({current:1,pageSize:100},Pe,"DraftCCMQuationID"),Ye(!0),be({type:"IsDraft",payload:!0}),ye(!1),at(!0),De(!1),he(!1)}),500)):(Zt({current:1,pageSize:100},Pe,"DraftCCMQuationID"),Ye(!0),be({type:"IsDraft",payload:!0}),ye(!1),at(!0),De(!1),he(!1)),document.getElementById("CCMQuationRegistryFilterDiv").style.width="0%",document.getElementById("CCMQuationRegistryTabDiv").style.width="100%",document.getElementById("CCMQuationRegistryFilterDiv").style.display="none"}else Ne.alert({open:!0,color:"warning",message:["There is no Record Found"]})}},n().createElement(T.ZP,{title:Ft("Drafts"),placement:"top"},n().createElement("div",null,n().createElement(w.rNm,{className:"DraftIcon"}))),n().createElement("span",{className:"iconinfoDraft",style:{fontSize:"0.815rem",fontWeight:"500",color:"#14181F"}},Ft("Drafts"))))),Me||Se||ke||He?null:n().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},ke||He?null:n().createElement("div",null,Je&&n().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"},formctrlid:"listcard3"},n().createElement("div",{className:"b2",id:"button-11"},n().createElement("div",{id:"fld1646L3TCListView",className:tt?"buttonList":"buttonGrid",onClick:()=>{se(!0),at(!0),vt(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(x.umT,null)),n().createElement("span",null,"List")),n().createElement("div",{id:"fld1646L3TCGridView",className:tt||Et?"buttonGrid":"buttonList",onClick:()=>{at(!1),vt(!1)}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(N.aCJ,null)),n().createElement("span",null,"Card")),n().createElement("div",{className:Et?"buttonList":"buttonGrid",id:"fld1646L3TCTileView",onClick:()=>{vt(!0),at(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(A.f_H,null)),n().createElement("span",null,"Tile"))))))),n().createElement("div",{id:"CCMQuationRegistry-TableBody",className:"displayFlex padding0",style:{height:"66vh",overflow:"auto"}},n().createElement("div",{id:"CCMQuationRegistryFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},ue&&n().createElement(m.default,{CloseBtnClk:()=>Kt(),searchData:e=>{me(e||Nt);const t=Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)));wt(t)},formID:V,data:()=>{},visibleData:()=>{},token:xe.token[0],userGrid:St,msg:(e,t)=>Ne.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{Bt()}}),ge&&!Me&&!Se&&n().createElement(E.Z,{frmctrlid:"fld1646L3TCTableColumnOrder",loading:e=>Ne.loading(e),AltMsg:(e,t)=>Ne.alert({open:!0,color:t,message:[e]}),select:ge,userID:K,userGridViewFormID:V,saved:(e,t)=>{e&&Ot(t),ht(t)},Token:xe.token[0]})),n().createElement("div",{id:"CCMQuationRegistryTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:"66vh"}},tt?n().createElement("div",null,Me&&n().createElement(ListComponent,{onLoad:Me,data:(e,t)=>{!function(e,t){be({type:"editData",payload:[e]}),se(!1),document.getElementById("CCMQuationRegistry-TabView").classList.add("ViewBtnAct"),document.getElementById("CCMQuationRegistry-GridView").classList.remove("ViewBtnAct"),document.getElementById("CCMQuationRegistry-ShareView").classList.remove("ViewBtnAct"),De(!1),he(!1),Fe(!1);let a={ContractID:"",TaxID:"",CCMQuationCode:"",CCMQuationName:"",CCMQuationNo:"",CcMQuationDate:"",CCMTotalAmount:"",CCMTaxValu:"",CCMTaxAmount:"",CCMSubTotal:"",CCMGrandTotal:""};Re(a),Zt({current:1,pageSize:100},a,"CCMQuationID")}(e)},json:Ze}),!Me&&!ke&&n().createElement("div",null,rt?n().createElement(O.Z,{data:ut,expanded:()=>{},edit:(e,t,a)=>{zt(e,t,a),Ne.ExpandTable(!1),be({type:"EditIsDraft",payload:t}),be({type:"EditOpen",payload:!1})}}):n().createElement(Z.Z,{ref:B,frmctrlid:"tblcs_1646_L3_",id:"CCMQuationRegistry-MainTable",headerdata:Ee,tablesearchparams:it,searchvalue:e=>{ot(e),me(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...bt};xt(t),ee({current:1,pageSize:10}),Zt({current:1,pageSize:10},t,He?"DraftCCMQuationID":"CCMQuationID",He&&"DraftPage")},bodydata:re,ondrag:(e,t)=>{zt(t,He,!0)},bodyitem:Te,visibleitem:Ee,isdraft:He,IsView:!0,IsEditNone:!0,tableExp:!0,tableID:V,accessrights:xe.AccessRights,expanded:()=>{},edit:(e,t,a)=>{Object.keys(e).map(((l,n)=>{l.includes("IDPK")&&Zt(X,null,t?"DraftCCMQuationID":"CCMQuationID",t&&"DraftPage",e[l],a)}))},viewtoggle:Ne.viewtoggle,isexpanded:!0,ViewComp:(e,t)=>{if(e)return n().createElement(P.ZP,{loading:e=>Ne.loading(e),alertmsg:e=>Ne.alert(e),ConfirmAlert:e=>{Ne.ConfirmAlert(e)},data:xe.editData,AddOpen:xe.EditOpen,parentId:t.CCMQuationIDPK,IsDraft:xe.EditIsDraft,tableview:e})}}))):n().createElement(S.Z,{frmctrlid:"fld1646L3TCExpandedCardDual",data:re,id:"CCMQuationRegistry",title:"CCM Quation Register",cardTile:!!Et,visibleitem:Ee,gridCountmdlg:Je?4:12,gridCountxssm:Je?6:12,expanded:()=>{},edit:zt,viewtoggle:Ne.viewtoggle,onDoubleClick:(e,t)=>{U?Ne.select(e):("edit"==t?(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:He}),be({type:"ShowDetail",payload:!1}),Ne.ExpandDetail(!0)):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:He}),be({type:"ShowDetail",payload:!0}),Ne.ExpandDetail(!0),Ne.viewtoggle()),Je&&(se(!1),ye(!1)))}})))))),Me||Se||ke?null:Je?rt?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(D.Z,{count:dt,color:"primary",page:gt.current,onChange:(e,t)=>{yt({current:t,pageSize:gt.pageSize}),mt(t),Rt({current:t,pageSize:gt.pageSize})}}),n().createElement("div",null,n().createElement(I.Z,{value:gt.pageSize,frmctrlid:"fld1646L3TCSelectPagination",onChange:e=>{yt({current:1,pageSize:e.target.value}),Rt({current:1,pageSize:e.target.value})},className:"BootstrapInputStyle2"},n().createElement("option",{value:10},"10"),n().createElement("option",{value:20},"20"),n().createElement("option",{value:50},"50"),n().createElement("option",{value:100},"100"))),Je&&n().createElement("p",{className:"per-page"},"/ per page Of (",ct,")")):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(D.Z,{count:H,siblingCount:0,color:"primary",page:X.current,onChange:(e,t)=>{if(ee({current:t,pageSize:X.pageSize}),He)Zt({current:t,pageSize:X.pageSize},de,"DraftCCMQuationID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";ce.length>0?Lt(ce,{current:t,pageSize:X.pageSize}):Zt({current:t,pageSize:X.pageSize},de,"CCMQuationID")}}}),n().createElement("div",null,n().createElement(I.Z,{value:X.pageSize,frmctrlid:"fld1646L3TCSelectPagination",onChange:e=>{ee({current:1,pageSize:e.target.value}),He?Zt({current:1,pageSize:e.target.value},Be,"DraftCCMQuationID","DraftPage"):ce.length>0?Lt(ce,{current:1,pageSize:e.target.value}):Zt({current:1,pageSize:e.target.value},Be,"CCMQuationID")},className:"BootstrapInputStyle2"},n().createElement("option",{value:10},"10"),n().createElement("option",{value:20},"20"),n().createElement("option",{value:50},"50"),n().createElement("option",{value:100},"100"))),Je&&n().createElement("p",{className:"per-page "},"/ per page Of (",$,") ")):n().createElement("div",{style:{position:"absolute",right:"0%",display:"flex",marginTop:"-7px"}},n().createElement(v.Z,{style:{color:"#777"},rowsPerPageOptions:[],component:"div",count:Number($),page:lt,onPageChange:(e,t)=>{nt(t),Zt({current:t+1,pageSize:X.pageSize},Pe,He?"DraftCCMQuationID":"CCMQuationID",He&&"DraftPage"),ee({current:t+1,pageSize:X.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onRowsPerPageChange:e=>{nt(0)}})))})),V=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),u=(0,l.useRef)(null),s=(0,l.useRef)(null),[m]=((0,i.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[p,g]=R()("1646"),[f,E]=(0,l.useState)(!1),[v,T]=(0,l.useState)(0),[Q,S]=(0,l.useState)(0),[N,x]=(0,l.useState)({current:1,pageSize:100}),[b,w]=(0,l.useState)(""),[A,F]=(0,l.useState)([]),[P,B]=(0,l.useState)({val:"",column:""}),[L,O]=(0,l.useState)([]),[z,K]=(0,l.useState)(!1),[V,G]=(0,l.useState)(""),[_,U]=(0,l.useState)([]),[j,H]=(0,l.useState)([]),[Y,$]=(0,l.useState)([]),W=(0,l.useContext)(M.CCMQuationRegistryContext),{cstate:J,cdispatch:q}=(0,M.ContextApi)();let X={CCMQuationIDPK:"",CCMQuationCode:"",CCMQuationName:"",CCMQuationNo:"",CcMQuationDate:"",CcMQuationDateType:"",CcMQuationDateBetween:"",CCMTotalAmount:"",CCMTaxValu:"",CCMTaxAmount:"",CCMSubTotal:"",CCMGrandTotal:"",IsDefault:"",IsDraft:"",Remarks:"",ContratID:"",TaxID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[ee,te]=(0,l.useState)(!1),[ae,le]=(0,l.useState)(!0),[ne,ie]=(0,l.useState)(!1),[oe,re]=(0,l.useState)(!0),[Ce,ue]=(0,l.useState)(0),[se,de]=(0,l.useState)({ContractName:"",TaxName:"",CCMQuationCode:"",CCMQuationName:"",CCMQuationNo:"",CcMQuationDate:"",CCMTotalAmount:"",CCMTaxValu:"",CCMTaxAmount:"",CCMSubTotal:"",CCMGrandTotal:""}),[me,ce]=(0,l.useState)([]),[pe,ge]=(0,l.useState)([]),[ye,Me]=(0,l.useState)([]),[De,Ie]=(0,l.useState)(!1),[fe,Ee]=(0,l.useState)("");let ve=(0,h.Z)();const Te=[{columns:me,data:b}];(0,l.useEffect)((()=>{!function(e){let t=[],a=[],l=[],n=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldDisplay&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let i=localStorage.getItem("Language");n.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[i]]})})),q({type:"language",payload:Object.assign({},...n)}),de(a.reduce(((e,t)=>(e[t]="",e)),{})),U(e),H(t),$(a),ce(l),ge(a)}(p)}),[p]),(0,l.useImperativeHandle)(t,(()=>({tableRefresh:()=>{Qe()},viewrecord:e=>{L.map(((t,a)=>{t.CCMQuationIDPK==e&&q({type:"editData",payload:[L[a]]})}))},DialogTableProps:e=>{E(e)},searchData:(t,a,l)=>{W.loading(!0),u.current&&u.current.clearItem(),Ee(l),x({current:1,pageSize:10}),X=e.ApiParamType.params,Se({current:1,pageSize:100},a,l),s.current&&s.current.clearItem()}}))),(0,l.useEffect)((()=>{!1===e.cardview&&re(e.cardview),e.Dialogview&&E(e.Dialogview)}),[e.cardview,e.Dialogview]);const Qe=()=>{J.IsDraft?Se(N,X,"DraftCCMQuationID"):Se(N,X,"CCMQuationID")},Se=async(t,a,l,n)=>{if(J.token[0]){if(W.loading(!0),"DraftPage"!==n&&te(J.IsDraft),await Ee((e=>(l=e,e))),a&&Object.keys(a).length>0){let e=Object.keys(a),t={},l=[],n=Object.values(a);e.map((e=>{l.push(e.split("_")[0])}));for(let e=0;e<l.length;e++)t[l[e]]=n[e];a=t}G(a);let i=y.v.Api+`${e.ApiType}/`,o={data:{p1:a&&a.CCMQuationIDPK?a.CCMQuationIDPK:null,p2:a&&a.CCMQuationCode?a.CCMQuationCode:null,p3:a&&a.CCMQuationName?a.CCMQuationName:null,p4:a&&a.CCMQuationNo?a.CCMQuationNo:null,p5:a&&a.CcMQuationDate?a.CcMQuationDate:null,p6:a&&a.CcMQuationDateType?a.CcMQuationDateType:null,p7:a&&a.CcMQuationDateBetween?a.CcMQuationDateBetween:null,p8:a&&a.CCMTotalAmount?a.CCMTotalAmount:null,p9:a&&a.CCMTaxValu?a.CCMTaxValu:null,p10:a&&a.CCMTaxAmount?a.CCMTaxAmount:null,p11:a&&a.CCMSubTotal?a.CCMSubTotal:null,p12:a&&a.CCMGrandTotal?a.CCMGrandTotal:null,p13:null,p14:"DraftCCMQuationID"==l?"1":"0",p15:null,p16:a&&a.ContratID?a.ContratID:null,p17:a&&a.TaxID?a.TaxID:null,p18:a&&a.IsActive,p19:null,p20:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p21:a&&a.CreatedTtm?a.CreatedTtm:null,p22:a&&a.CreatedTtmType?a.CreatedTtmType:null,p23:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p24:null,p25:t.current,p26:t.pageSize,p27:l,p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}};(0,d.Z)(i,o,J.token[0]).then((e=>{if(W.loading(!1),"200"==e.Output.status.code)if(e.Output.data.length>0){if(e.Output.data){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,S(e.Output.data[0].TotalCount?e.Output.data[0].TotalCount:e.Output.data.length),q({type:"count",payload:e.Output.data[0].TotalCount})):a=0,10==t.pageSize?T(Math.ceil(a)):20==t.pageSize?T(Math.ceil(a/2)):50==t.pageSize?T(Math.ceil(a/5)):100==t.pageSize&&T(Math.ceil(a/10)),O(e.Output.data)}}else W.alert({open:!0,color:"warning",message:[(a="There is no Record Found",ve?.[a]?ve[a]:a)]}),O([]),T(0),S(0),q({type:"count",payload:0});var a}))}};return(0,l.useEffect)((()=>{ie(J.ExpandTableValue)}),[J.ExpandTableValue]),n().createElement("div",null,n().createElement(o.Z,{expanded:ae,onChange:()=>()=>{le(ne)}},n().createElement(C.Z,null,n().createElement("div",{className:"padding displayFlex backgroundDark borderRadiusTop width100"},n().createElement("div",{style:{width:"60%"}},n().createElement("div",{className:"displayFlex"},n().createElement("div",{className:"ListHeader displayFlex"},n().createElement("p",{className:"ListP"}," ",e.CardName," (",Q,")")))))),n().createElement(r.Z,{className:"AccDetails"},n().createElement("div",{className:"tableCard"},n().createElement("div",{id:"CCMQuationRegistry-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:n().createElement("div",{className:"tableHeaderItems displayFlex"},n().createElement(c.Z,{formctrlidprint:"fld1646L3TCExportPrint",formctrlidexport:"fld1646L3TCExportTable",formctrlidrefresh:"fld1646L3TCExportRefresh",title:"1646",data:A,exportData:Te,Items:pe,columnIndex:me,triggerApi:t=>{((t,l,n)=>{if(0===Q)return W.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;W.loading(!0);let i=y.v.Api+`${e.ApiType}/`,o={data:{p1:t||(t&&t.CCMQuationIDPK?t.CCMQuationIDPK:null),p2:t&&t.CCMQuationCode?t.CCMQuationCode:null,p3:t&&t.CCMQuationName?t.CCMQuationName:null,p4:t&&t.CCMQuationNo?t.CCMQuationNo:null,p5:t&&t.CcMQuationDate?t.CcMQuationDate:null,p6:t&&t.CcMQuationDateType?t.CcMQuationDateType:null,p7:t&&t.CcMQuationDateBetween?t.CcMQuationDateBetween:null,p8:t&&t.CCMTotalAmount?t.CCMTotalAmount:null,p9:t&&t.CCMTaxValu?t.CCMTaxValu:null,p10:t&&t.CCMTaxAmount?t.CCMTaxAmount:null,p11:t&&t.CCMSubTotal?t.CCMSubTotal:null,p12:t&&t.CCMGrandTotal?t.CCMGrandTotal:null,p13:null,p14:ee?"1":"0",p15:null,p16:t&&t.ContratID?t.ContratID:null,p17:t&&t.TaxID?t.TaxID:null,p18:t&&t.IsActive,p19:null,p20:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p21:t&&t.CreatedTtm?t.CreatedTtm:null,p22:t&&t.CreatedTtmType?t.CreatedTtmType:null,p23:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p24:null,p25:1,p26:Q,p27:fe,p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}};var r;W.loading(!1),W.alert({open:!0,color:"success",message:[`${r="1646",J.language?.[r]?J.language[r]:r} - ${n.alertName}, Once you have downloaded the file, you will be notified`]}),(0,d.Z)(i,o,J.token[0],n).then((e=>{(0,k.PDF_Excel_Generate)(e,W,pe,w,a,n)}))})(V,P.column,t)},TableVisibleItem:j,userGridViewFormID:"1646",TableTotalCount:Q,Refresh:()=>{Se({current:1,pageSize:100},V,fe),x({current:1,pageSize:100}),s.current&&s.current.clearItem(),u.current&&u.current.clearItem()},disabledPrint:!J.AccessRights.IsPrint,disabledExport:!J.AccessRights.IsExport,ref:a})),n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(D.Z,{count:v,siblingCount:0,color:"primary",page:N.current,onChange:(e,t)=>{if(x({current:t,pageSize:N.pageSize}),ee)Se({current:t,pageSize:N.pageSize},V,"DraftCCMQuationID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";Se({current:t,pageSize:N.pageSize},V,"CCMQuationID")}}}),n().createElement("div",null,n().createElement(I.Z,{value:N.pageSize,onChange:e=>{x({current:1,pageSize:e.target.value}),Se({current:1,pageSize:e.target.value},V,"CCMQuationID")},className:"BootstrapInputStyle2"},n().createElement("option",{value:10},"10"),n().createElement("option",{value:20},"20"),n().createElement("option",{value:50},"50"),n().createElement("option",{value:100},"100"))),ne&&n().createElement("p",{className:"per-page"},"/ per page Of (",Q,")"))),n().createElement("div",{id:"CCMQuationRegistry-TableBodyPopUp",className:"displayFlex padding0",style:{height:"61vh",overflow:"auto"}},n().createElement("div",{id:"CCMQuationRegistryTabDivPopUp",style:{width:"100%",position:"relative",height:"61vh"}},"MultiSelect"==e.Cardtype?n().createElement(MUITableMulti,{ref:s,type:e.viewtype,id:"CCMQuationRegistry",headerdata:j,tablesearchparams:se,searchvalue:e=>{de(e),x({current:1,pageSize:100}),Se({current:1,pageSize:100},e,ee?"DraftCCMQuationID":"CCMQuationID",ee&&"DraftPage")},bodydata:L,ondrag:(e,t)=>{q({type:"editData",payload:[t]}),q({type:"IsDraft",payload:ee}),q({type:"ShowDetail",payload:!0})},bodyitem:Y,visibleitem:j,isdraft:ee,accessrights:J.AccessRights,expanded:()=>{},edit:(t,a,l)=>{f?W.select(t):(e.editdata(t,"view"),"viewonly"==e.viewtype?W.edit(t,a,l):W.edit(t,a,!1))},viewtoggle:()=>{},IsSub:e.IsSub,multi:!0,showData:!0,multiselect:e=>{O(e)},color:!0,isexpanded:!1}):n().createElement(Z.Z,{frmctrlid:"tblcs_1646_L3_",ref:u,id:"CCMQuationRegistryTable",type:e.viewtype,headerdata:j,tablesearchparams:se,searchvalue:e=>{let t={...V,...e};de(e),G(t),x({current:1,pageSize:100}),Se(N,t,fe)},bodydata:L,ondrag:(e,t)=>{q({type:"editData",payload:[t]}),q({type:"IsDraft",payload:ee}),q({type:"ShowDetail",payload:!0})},bodyitem:Y,visibleitem:j,isdraft:ee,accessrights:J.AccessRights,expanded:()=>{},edit:(t,a,l)=>{f?W.select(t):(e.editdata(t,"view"),W.edit(t,a,1!=t.Entry))},viewtoggle:W.viewtoggle,IsSub:e.IsSub})))))))}))},84805:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P}),a(95866),a(99058);var l=a(92950),n=a.n(l),i=a(80366),o=a(51673),r=a(282),C=a(868),u=a(78513),s=a(14439),d=a(27848),m=a(40900),c=a(64059),p=a(24038),g=a(8981),y=a(47516),M=a(86893),D=a(60487),I=a(33681),f=a(63163),E=(a(35131),a(61956),a(93657)),v=a(53375),T=a(52663),Q=a(66083),S=a(29525),h=a(66856),N=a(39803),x=a(99940),b=a(17149),w=a(62810),A=a(30553),k=a(92381),F=a(25108);const P=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[P,B]=(0,l.useState)([]),[R,Z]=(0,l.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[L,O]=(0,l.useState)(""),[z,K]=(0,l.useState)({}),[V,G]=(0,l.useState)(!0),[_,U]=(0,l.useState)(!1),{cstate:j,cdispatch:H}=e.ContextApi?e.ContextApi:(0,D.ContextApi)(),[Y,$]=(0,l.useState)(1),[W,J]=(0,l.useState)(0),[q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)({}),[ae,le]=(0,l.useState)([]),[ne,ie]=(0,l.useState)(!0),[oe,re]=(0,l.useState)(!1),[Ce,ue]=(0,l.useState)(""),[se,de]=(0,l.useState)(!1),[me,ce]=(0,l.useState)(!1),[pe,ge]=(0,l.useState)(!1),[ye,Me]=(0,l.useState)(""),De=(0,l.useRef)(null),[Ie,fe]=(0,l.useState)({});let Ee=localStorage.getItem("Language");const ve={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let Te=(0,g.Z)();const Qe=e=>Te[e]?Te[e]:e,Se=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[ve[Ee]];function he(){ue(""),Me(""),K({}),te({}),e.searchData({}),U(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const a=e.userGrid.reduce(((e,t)=>{const a=t.FieldName;return t.IsForeign&&(e[a]||(e[a]=[]),e[a].push(t.FieldDisplay)),e}),{});fe(a),le(t)}),[]),(0,l.useEffect)((()=>()=>{De.current&&De.current.abort()}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{he()}})));const Ne=async(t,a,l,n)=>{X(!0);try{De.current&&De.current.abort();const i=new AbortController;De.current=i;let r="",C=[],u={};await Z((e=>(r=e.name,e))),await K((e=>(C=e,e))),await te((e=>(u=e,e)));const s=m.v.Api+"FP1646S3/",d={data:{p1:"CCMQuationIDPK"==a?null:await ke(),p2:"CCMQuationCode"==r&&l.length>0?"%"+l+"%":null,p3:"CCMQuationName"==r&&l.length>0?"%"+l+"%":null,p4:"CCMQuationNo"==r&&l.length>0?"%"+l+"%":null,p5:null,p6:null,p7:null,p8:"CCMTotalAmount"==r&&l.length>0?"%"+l+"%":null,p9:"CCMTaxValu"==r&&l.length>0?"%"+l+"%":null,p10:"CCMTaxAmount"==r&&l.length>0?"%"+l+"%":null,p11:"CCMSubTotal"==r&&l.length>0?"%"+l+"%":null,p12:"CCMGrandTotal"==r&&l.length>0?"%"+l+"%":null,p13:null,p14:null,p15:null,p16:"Contrat"!=r&&C.Contrat?C.Contrat.map((e=>e.ContratIDPK)).toString():null,p17:"TaxName"!=r&&C.TaxName?C.TaxName.map((e=>e.TaxIDPK)).toString():null,p18:e.Dialogview?"1":null,p19:null,p20:"p20"==r&&l.length>0?l:null,p21:null,p22:null,p23:null,p24:null,p25:n||1,p26:10,p27:t,p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}},c=await(0,o.Z)(s,d,e.token,"",i.signal);if(!c)return!1;const p=c.Output.status.code,g=c.Output.data;if("200"===p)if(g.length>0)if(1===n){let e=be(g,r),t=xe(e,z[r],a);B(t),J(t.length>0?t[0].TotalCount:z[r].length)}else{let e=[...P,...g],t=be(e,r);J(t.length<10?t.length:g[0].TotalCount),B(be(t,r))}else L.length>0&&B([]),J(P.length);else e.alertmsg("error",[c.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{X(!1)}},xe=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),be=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));function we(e){let t=e+"PK",a=Ie[e];if(a){const e=a.flatMap((e=>z[e]?z[e].map((e=>e[t])):[]));return e.toString()}return""}const Ae=async(t,a)=>{let l="",n={};await K((e=>(l=e,e)));let i=[...ae],o=[];for(let e of i){let t=l[e]?.map((e=>e.CCMQuationIDPK)).toString();t&&o.push(t)}await te((e=>(n=e,e)));let r={CCMQuationIDPK:a?a.CCMQuationIDPK:o?[...new Set(o)].toString():"",CreatedTtm:n.CreatedTtm?n.CreatedTtm.From:"",CreatedTtmType:n.CreatedTtm?n.CreatedTtm.Type:"",CreatedTtmBetween:n.CreatedTtm?n.CreatedTtm.To:"",CcMQuationDate:n.CcMQuationDate?n.CcMQuationDate.From:"",CcMQuationDateType:n.CcMQuationDate?n.CcMQuationDate.Type:"",CcMQuationDateBetween:n.CcMQuationDate?n.CcMQuationDate.To:"",ContractID:we("ContractID"),TaxID:we("TaxID")};"saveFav"==t?Be("save",r):(e.searchData(r),U(!1))};async function ke(){let e={};await K((t=>(e=t,t)));let t=[...ae],a=[];for(let l of t){let t=e[l]?.map((e=>e.CCMQuationIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function Fe(t,a,l,n,i,o){let r={[n]:{From:t,Type:l,To:a}},C={};te((e=>({...e,...r})));const u={...z};let s=[...ae],d=[];for(let e of s){let t=u[e]?.map((e=>e.CCMQuationIDPK)).toString();t&&d.push(t)}await te((e=>(C=e,e)));let m={CCMQuationIDPK:d?[...new Set(d)].toString():"",CreatedTtm:C.CreatedTtm?C.CreatedTtm.From:"",CreatedTtmType:C.CreatedTtm?C.CreatedTtm.Type:"",CreatedTtmBetween:C.CreatedTtm?C.CreatedTtm.To:"",IsActive:"IsActive"==l?i:null,CcMQuationDate:C.CcMQuationDate?C.CcMQuationDate.From:"",CcMQuationDateType:C.CcMQuationDate?C.CcMQuationDate.Type:"",CcMQuationDateBetween:C.CcMQuationDate?C.CcMQuationDate.To:"",ContractID:z.ContractName?.map((e=>e.ContractIDPK)).toString(),TaxID:z.TaxName?.map((e=>e.TaxIDPK)).toString()};e.searchData(m)}function Pe(){return n().createElement(c.Z,{frmctrlid:"fld1646L3TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,n)=>{Fe(e,t,a,R.name,l)},keyboardback:()=>{U(!1),Z({idpk:"",name:"",type:"",fieldidpk:""})},title:Qe(R.name),fieldname:R.name,save:e=>{alert(!0)}})}const Be=(t,a)=>{(0,k.Z)(t,e.formID,a,Ce).then((e=>{const t=e.Output.data;Me(t)}))};return n().createElement("div",null,n().createElement(T.Z,{onClose:()=>de(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:se},n().createElement(Q.Z,{id:"customized-dialog-title",onClose:()=>de(!1)},"Add Favorite"),n().createElement(S.Z,{dividers:!0,style:{minWidth:"500px"}},n().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},n().createElement(N.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:Ce,onChange:e=>ue(e.target.value),fullWidth:!0})),n().createElement(A.Z,{style:{color:"#337ab7"},control:n().createElement(x.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(b.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(w.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:me,onChange:e=>ce(e.target.checked)}),label:"Quick"}),n().createElement(A.Z,{style:{color:"#337ab7"},control:n().createElement(x.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(b.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(w.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:pe,onChange:e=>ge(e.target.checked)}),label:"Dashboard"})),n().createElement(h.Z,null,n().createElement(r.Z,{onClick:()=>{Ae("saveFav"),de(!1)},color:"primary"},"Save"))),_?"Created Ttm"===R.name||R.name.includes("Date")?n().createElement(Pe,null):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},n().createElement(s.Z,null,n().createElement(d.Z,{xs:6,sm:6,md:6,lg:6},n().createElement("p",{className:"columnHeaderp"},Se(R.idpk)," (",P.length,"/",W,")")),n().createElement(d.Z,{xs:6,sm:6,md:6,lg:6},n().createElement(C.ZP,{title:Qe("Close"),placement:"top"},n().createElement("div",{className:"FilterItemClose",align:"right"},n().createElement(i.Z,{id:"fld1646L3TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{U(!1),Z({idpk:"",name:"",type:"",fieldidpk:!1}),$(1)}}))),z[R.name]&&n().createElement("div",{className:"FiltercloseAlign",align:"right"},n().createElement(r.Z,{frmctrlid:"fld1646L3TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await K((t=>(e=t,F.log("clear fewItems",e),t))),e[R.name]=[],Ne(R.type,R.fieldidpk,"",1)})()}},n().createElement("span",{className:"ColumnApplyTitle"},Qe("Clear All")))))))),n().createElement("div",{className:"FilterParentDiv"},n().createElement("div",{"data-list-scroll-container":"true"},n().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},n().createElement("div",{className:"FilterMaximize"},V?n().createElement(C.ZP,{title:"Maximize",placement:"right"},n().createElement("span",null,n().createElement(M.D7o,{className:"FilterMaximizeIcon",onClick:()=>{G(!1)}}))):n().createElement(C.ZP,{title:"Minimize",placement:"right"},n().createElement("span",null,n().createElement(M.dOw,{className:"FilterMaximizeIcon",onClick:()=>{G(!0)}})))),n().createElement("ul",null,z[R.name]&&z[R.name].map(((e,t)=>n().createElement("div",{key:t,tabIndex:"-1",className:V?"filterSelectedItems":"filterSelectedItemsMaximize"},n().createElement("div",{className:"filterSelectedItemNames"},n().createElement("span",null,e[R.name])),n().createElement("div",{className:"filterSelectedItemClose"},n().createElement("div",{id:"fildacls_3_L2_"+e[R.name],onClick:()=>(async(e,t)=>{$(1);let a=z[R.name].filter((t=>t!=e)),l={};await K((e=>(l=e,e))),l[R.name]=a,K(l),B((t=>[e,...t]))})(e)},n().createElement(i.Z,{className:"filterSelectedItemCloseIcon"})))))))),n().createElement("div",{className:"displayFlex width100 FilterSearch"},n().createElement("div",{className:"FilterSearchInputDiv"},n().createElement(p.Z,{frmctrlid:"fld1646L3TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:L,placeholder:Qe("Enter ")+" "+Se(R.idpk),onChange:e=>{O(e),Ne(R.type,R.fieldidpk,e,1,ke())}})),n().createElement("div",{id:"fld1646L3TFCFilterGoForward",className:"FilterSearchBtn",onClick:Ae},n().createElement(C.ZP,{title:"",placement:"top"},n().createElement(r.Z,{className:"ColumnSearchButton"},n().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),q&&n().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},n().createElement(I.Z,{color:"secondary"})),n().createElement("div",{id:"fld1646L3TFCScrollYDefault",className:"height65 scrollYDefault"},P.length>0&&P.map(((e,t)=>n().createElement("div",{id:"filda_3_L2_"+e[R.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await K((e=>(l=e,e)));let n=l[R.name];t[R.name]=n?[...a,...n]:a,l={...l,...t},K(l),B((t=>t.filter((t=>t!=e))))})(e)}},n().createElement(u.Z,{className:"DotIcon"}),n().createElement("span",null,e[R.name])))),P.length+0<W&&P.length>0&&n().createElement("div",{id:"fld1646L3TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{$(Y+1),Ne(R.type,R.fieldidpk,"",Y+1)}},n().createElement("p",null," more... ")),0===P.length&&n().createElement("div",null,n().createElement("div",{className:"NoDataImage"},n().createElement("img",{src:m.v.NoData,alt:"NoImage"})),n().createElement("div",{className:"NoDataDesc"},n().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnHeaderTitle"},n().createElement(y.Ol$,{className:"columnHeaderIcon"}),n().createElement("p",{className:"columnHeaderp"}," ",Qe("Filter")," ",Ce.length>0&&`(${Ce})`)),n().createElement("div",{className:"columnHeaderbtn",align:"right"},n().createElement(C.ZP,{title:"Favorite List",placement:"top"},oe?n().createElement(i.Z,{className:"favlisticon",onClick:()=>{re(!1),he()}}):n().createElement(E.Z,{className:"favlisticon",onClick:()=>{re(!0),Be("select"),he()}})),Object.keys(z).length>0&&n().createElement(C.ZP,{title:"Save Favorites",placement:"top"},n().createElement(v.Z,{className:"favlisticon",onClick:()=>{de(!0)}})),n().createElement(C.ZP,{title:"",placement:"top"},n().createElement(r.Z,{className:"ColumnApplyButton",onClick:()=>{he()},id:"fld1646L3TFCColumApplyBttn"},n().createElement("span",{className:"ColumnApplyTitle"},Qe("Clear")))),n().createElement(C.ZP,{title:"",placement:"top"},n().createElement(r.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld1646L3TFCColumnCloseButton"},n().createElement("span",{className:"ColumnCloseTitle"},Qe("Close")))))),n().createElement("div",{className:"height65"},n().createElement("div",{id:"fld1646L3TFCFilItems",className:"FilterItems"},!ye&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return n().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{U(!0),O(""),B([]),J(0);let t=e.IsForeign?e.FieldName+"PK":"CCMQuationIDPK";Z({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterCCMQuationID",fieldidpk:t}),Ne(e.IsForeign?"Filter"+e.FieldName:"FilterCCMQuationID",t,"",1,ke())})(e)}},e.FieldName.includes("Date")?n().createElement(n().Fragment,null,Se(e.AdminUserGridViewIDPK)," ",ee[e.FieldName]&&n().createElement("p",{className:"filterdatevalue"},"(",ee[e.FieldName]?.From+" to "+ee[e.FieldName]?.To,")")):"IsActive"==e.FieldName?n().createElement(n().Fragment,null,n().createElement("span",null,Se(e.AdminUserGridViewIDPK)),n().createElement(f.Z,{checked:"1"==ne,onChange:t=>{ie(t.target.checked),Fe("","",e.FieldName,"",t.target.checked)}})):n().createElement(n().Fragment,null,n().createElement("span",null,Se(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,z[a]?.length>0&&n().createElement("div",{className:"FilterItemDivSelected"},n().createElement("span",{className:"RoundedDivName"},z[a][0][a]),z[a].length>1&&n().createElement("span",{className:"RoundedDivName"},z[a][1][a]),z[a].length>2&&n().createElement("span",{className:"RoundedDivNumber"},"+"+(z[a].length-2))))));var a})),ye&&ye.map((e=>{let t=e.TFFSearchParams,a=JSON.parse(t);return n().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{Ne("FilterCCMQuationID",a),Ae("",a)}},n().createElement(n().Fragment,null,e.TableFilterFavName))}))))))}))},47033:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var l=a(92950),n=a.n(l),i=a(45237),o=(a(37148),a(3212)),r=a(29800),C=a(14439),u=a(27848),s=(a(10966),a(36939)),d=a(61201),m=a(50743),c=a(60487),p=(a(21392),a(51673)),g=a(40900),y=a(26537),M=(a(24038),a(27239)),D=(a(77366),a(97829),a(8981)),I=(a(63163),a(1695)),f=a(99216),E=(a(35131),a(61956),a(51649)),v=a(61924),T=a.n(v);const Q=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),[v,Q]=((0,i.useSelector)((e=>e.form)),(0,l.useState)([])),[S,h]=(0,l.useState)(!0),[N,x]=(0,l.useState)(e.showDetail),[b,w]=(0,l.useState)(""),[A,k]=n().useState(!1),[F,P]=n().useState(""),[B,R]=n().useState(!1),Z=(0,l.useContext)(c.CCMQuationRegistryContext),{cstate:L,cdispatch:O}=(0,c.ContextApi)(),[z,K]=(0,l.useState)(!1),[V,G]=(0,l.useState)(""),[_,U]=(0,l.useState)(""),[j,H]=(0,l.useState)(""),[Y,$]=(0,l.useState)("");let W=(0,D.Z)();(0,l.useEffect)((()=>{L.editData.length>0&&(Q(L.editData),k(!1),O({type:"PrimaryId",payload:L.editData[0].CCMQuationIDPK}))}),[L.editData]),(0,l.useEffect)((()=>{L.showTableview&&H(L.showTableview)}),[L.showTableview]),(0,l.useEffect)((()=>{h(L.ExpandDetailValue)}),[L.ExpandDetailValue]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{h(e),k(null)},viewtoggle:()=>{k(!1)},viewlistProps:(t,a)=>{!function(t,a){let l=g.v.Api+"FP1646S3/",n={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:e.Dialogview?"1":null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:1,p26:10,p27:a?"DraftCCMQuationID":"CCMQuationID",p28:null,p29:null,p30:localStorage.getItem("UserGroupID"),p31:localStorage.getItem("userid")}};(0,y.Z)(0).then((e=>{(0,p.Z)(l,n,e).then((e=>{Z.loading(!1),"200"==e.Output.status.code&&Q(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===A&&a.current.clear()}})));const J=e=>W?.[e]?W?.[e]:e,q=e=>L.language?.[e]?L.language[e]:e;function X(e,t){}const ee=e=>v[0].ContractID&&0!=v[0].ContractID?v[0].TaxID&&0!=v[0].TaxID?(0,M.trimFunc)(v[0].CCMQuationCode)?(0,M.trimFunc)(v[0].CCMQuationName)?void Z.ConfirmAlert(n().createElement(T(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:J("Are you sure?"),onConfirm:()=>(()=>{Z.loading(!0),Z.ConfirmAlert(null),O({type:"IsDraft",payload:!1});let e={url:g.v.Api+"FP1646S2/",PrimID:v[0].CCMQuationIDPK,ParamType:"",state:v[0],active:1,token:L.token[0],DefaultPrimaryId:""};(0,M.saveComponent)(e).then((e=>{const t=e[0].status;let a=e[0].Data,l=new Array,n=new Array;"200"===t.code&&(a.map((e=>{e&&(l.push(e.IsAlert),n.push(e.AlertMessage),e.AlertMessage)})),l.some((e=>"1"==e))?(Z.alert({open:!0,color:"warning",message:n}),Z.loading(!1)):(()=>{Z.loading(!0);let e={url:g.v.Api+"FP1646S1/",PrimID:v[0].CCMQuationIDPK,ParamType:"",state:v[0],active:1,token:L.token[0],DefaultPrimaryId:""};(0,M.saveComponent)(e).then((e=>{const t=e[0].status;200==t.code&&(Z.alert({open:!0,color:"success",message:[t.message]}),Z.loading(!1),Z.ShowTableDiv(),Z.RefreshTable(),Z.Approval(!0))}))})())}))})(),onCancel:()=>Z.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:J("Yes"),cancelBtnText:J("Cancel"),showCancel:!0},L.PrimaryId?J("Do you want to Update?"):J("Do you want to Save?"))):(Z.alert({open:!0,color:"warning",message:[J("Please enter the")+""+q("CCMQuationName")]}),!1):(Z.alert({open:!0,color:"warning",message:[J("Please enter the")+""+q("CCMQuationCode")]}),!1):(Z.alert({open:!0,color:"warning",message:[J("Please select the ")+" "+q("TaxID")]}),!1):(Z.alert({open:!0,color:"warning",message:[J("Please select the ")+" "+q("ContractID")]}),!1);return n().createElement("div",{className:"SubContent_1"},n().createElement(s.Z,{expanded:S,onChange:()=>()=>{e.expandTable&&h(!S)}},!A&&n().createElement(m.Z,null,n().createElement(C.Z,{container:!0},n().createElement(u.Z,{item:!0,sm:12,md:12,lg:12,xs:12},n().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},n().createElement("div",{className:"displayFlex EntryViewHeader"},n().createElement("span",{style:{cursor:"pointer"}},n().createElement(E.u1R,{className:"backButtonList",onClick:()=>{Z.ShowTableDiv(),Z.RefreshTable()}})),n().createElement("p",{className:"DListP"},L.IsDraft?"Draft ":"",q("1646"))))))),n().createElement(d.Z,{style:{display:"block"}},v.map(((e,t)=>n().createElement("div",{key:t},n().createElement(f.Z,{tableName:"CCMQuationRegistry",tableID:1646,parentID:e.CCMQuationIDPK,fldid:"fld1646L3VCContainer",OpenSlideComponent:X,index:t,val:e,tf:q,t:J,title:"10.0.0.82-3:45:06 PM-19-8[1646]"}))))),n().createElement("div",{className:"displayFlex EntryHeaderBtn"},e.viewonly&&L.AccessRights.IsAdd&&n().createElement(o.Z,{className:"L1AddBtnCommon",onClick:()=>{O({type:"ShowDetail",payload:!1}),O({type:"Add",payload:!0}),O({type:"editData",payload:[]}),O({type:"PrimaryId",payload:L.editData[0].CCMQuationIDPK})},disabled:!1}),L.IsDraft&&n().createElement(r.Z,{onClick:()=>{O({type:"ShowDetail",payload:!1}),O({type:"Add",payload:!0}),O({type:"editData",payload:v}),O({type:"PrimaryId",payload:L.editData[0].CCMQuationIDPK})},disabled:!1}),n().createElement(I.Z,{name:L.PrimaryId?"Update":"Save",disabled:!1,frmctrlid:"fld1646L3ECSaveBtnApprovalStatus",onClick:()=>{ee()}}))))}))}}]);