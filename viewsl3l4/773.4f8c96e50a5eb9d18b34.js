"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[773],{773:(e,t,l)=>{l.d(t,{Z:()=>L});var a=l(92950),i=l.n(a),n=l(79895),c=l(82302),d=l(99613),s=l(88222),r=l(56847),o=l(83750),m=l(57394),u=l(77256),y=l(49174),g=l(99173),p=l(88995),b=l(39431),h=l(868),f=l(59067),E=l(28428),S=l(20067),x=l(52795),C=l(51115),w=l(25281),v=l(66037),k=l(17812),Z=(l(40826),l(87429),l(8981)),T=l(26537),I=l(77366),N=l(21392),B=l(70329),D=l(58965),A=l(79117),V=l.n(A),P=(l(14439),l(55918)),j=l.n(P),O=l(25108);window.headercellid="",window.row={};const M=(0,a.forwardRef)(((e,t)=>{const{order:l,orderBy:n,onRequestSort:c,headCells:d,isDraft:r,TableSearchParams:h}=e,[f]=(0,a.useState)(localStorage.getItem("Language")),[E]=(0,a.useState)(localStorage.getItem("Language")),[S,C]=(0,a.useState)({}),[w,v]=(0,a.useState)({}),k=["By","Contact","NROT","COT","SNA","VIA","Remark","tax","value","UserName","Status","No","Total","Rate","Cnt","Time","Type","Code","Amount","Quantity","Unit","Is","TAT","Cost","Number"],T=(0,a.useRef)();(0,a.useEffect)((()=>{r?(C({}),v({})):(Object.keys(h).map((e=>{C({...S,[e]:!!h[e]})})),v(h),O.log("TableSearchParams",h))}),[h,r]),(0,a.useImperativeHandle)(t,(()=>({clearValue:()=>{if(Object.values(w).some((e=>null!==e&&""!==e))&&T.current){T.current.clear();const t=Object.keys(w).slice(0,Object.keys(w).length).reduce(((e,t,l)=>(e[t]=l>Object.keys(w).length?w[t]:"",e)),{});v(t),e.value(t,"onlyClear")}}})));let I=(0,Z.Z)();const N=e=>"English"==f?e:I?.[e]?I[e]:e,B=(t,l,a)=>{C({...S,[l]:!S[l]}),O.log("handleChange",t,l,a),setTimeout((function(){document.getElementById(e.frmctrlid+l)}),500),t.stopPropagation()},D=(t,l)=>{window.headercellid=l,0===t.length&&e.value({...w,[l]:""}),v({...w,[l]:t})};return i().createElement(x.Z,{onClickAway:()=>{C({})}},i().createElement(o.Z,{id:e.frmctrlid+"_TableHead"},i().createElement(m.Z,null,"none"==e.action?null:!0===e.isexpanded&&!e.IsSub&&i().createElement(s.Z,{className:"StyledTableCellHeadStyles",style:{minWidth:"60px",textAlign:"center"}},i().createElement("span",{className:"trAction"},N("Action"))),e.multi&&i().createElement(s.Z,{className:"StyledTableCellHeadStyles",style:{minWidth:"60px",textAlign:"right"}},i().createElement(b.Z,{checked:!1,disabled:!1})),!0===e.showMore&&i().createElement(s.Z,{className:"StyledTableCellHeadStyles",style:{minWidth:"60px",textAlign:"center"}},i().createElement("span",{className:"trAction"},N("More"))),d.map((t=>{return i().createElement(s.Z,{className:"StyledTableCellHeadStyles "+(r?"draftColor":e.IsSub?"SublistColor":"listColor"),key:t.id,sortDirection:n===t.id&&l,style:{minWidth:k.some((e=>t.id.toLowerCase().includes(e.toLowerCase())))?"135px":e.colwid?e.colwid:"180px",textAlign:"Is"==t.id.slice(0,2)?"center":"left"}},S[t.id]?t.id.includes("Date")||t.id.includes("date")||t.id.includes("Dt")||t.id.includes("dt")?i().createElement(y.Z,{value:w[t.id],label:t.name,onChange:l=>{D(l,t.id),e.value({...w,[t.id]:l,[t.id+"Type"]:"Date"})}}):i().createElement(g.Z,{ref:T,frmctrlid:e.frmctrlid+t.id,className:"TableheaderSearchInput",type:"numeric"==t.type||"int"==t.type?"number":"text",labelname:t.name,marginTop:"0",onChange:e=>{D(e,t.id,t.type)},disabled:!1,value:Object.keys(w).length>0?-1===w[t.id].indexOf("%")?w[t.id]:w[t.id].replace(/[%]/g,""):"",clear:(l,a)=>{l&&(D("",t.id),B(a,t.id),e.value({...w,[t.id]:""}))},mandatory:!1,keyPress:!0,onKeyPress:l=>{e.value({...w,[t.id]:"numeric"==t.type||t.id.includes("Date")?l:"%"+l+"%"})}}):w[t.id]?"Date"==t.type?i().createElement(y.Z,{value:w[t.id],id:e.frmctrlid+"cls_"+t.id,Label:t.name,onChange:l=>{D(l,t.id),e.value({...w,[t.id]:l,[t.id+"Type"]:"Date"})}}):i().createElement(g.Z,{ref:T,frmctrlid:e.frmctrlid+t.id,className:"TableheaderSearchInput",type:"numeric"==t.type||"int"==t.type?"number":"text",labelname:t.name,marginTop:"0",onChange:e=>{D(e,t.id,t.type)},disabled:!1,value:Object.keys(w).length>0?-1===w[t.id].indexOf("%")?w[t.id]:w[t.id].replace(/[%]/g,""):"",clear:(l,a)=>((t,l,a)=>{t&&(D("",a.id),B(l,a.id),e.value({...w,[a.id]:""}))})(l,a,t),isDraft:r,mandatory:!1,keyPress:!0,onKeyPress:l=>{e.value({...w,[t.id]:"numeric"==t.type||t.id.includes("Date")?l:"%"+l+"%"})}}):i().createElement("div",{id:`sort_${e.frmctrlid}`},i().createElement(u.Z,{"filter-title":"Sort",active:n===t.id,direction:n===t.id?l:"asc",onClick:(a=t.id,e=>{c(e,a)})},e.tf?i().createElement("p",{style:{width:"max-content"}},t.name?e.tf(t.name.replace(/\s/g,"")):""):i().createElement("p",{style:{width:"max-content"}},t.name?t.name.replace(/\B([A-Z])\B/g," $1"):""),n===t.id?i().createElement("span",{className:"visuallyHidden"},"desc"===l?"sorted descending":"sorted ascending"):null,!S[t.id]&&"Is"!==t.id.substring(0,2)&&!w[t.id]&&!r&&(t.id.includes("Date")||t.id.includes("date")||t.id.includes("Dt")||t.id.includes("Password")||t.id.includes("dt")?null:!e.searchdisabled&&i().createElement("div",{id:e.frmctrlid+""+t.id,onClick:e=>B(e,t.id,t.name)},i().createElement(p.Z,{className:"tableHeadersearch"}))))));var a})))))})),$=e=>{const[t,l]=(0,a.useState)([]);return i().createElement("div",null,i().createElement(h.ZP,{title:"Attactment Preview",placement:"top"},i().createElement("div",{onClick:t=>{(0,T.Z)(0).then((t=>{(0,I.Z)(t,e.id,e.tableID).then((e=>{l(e)}))})),document.getElementById(`${e.tableName}ImgPriv${e.id}`).classList.add("PreviewAnimation"),document.getElementById(`${e.tableName}ImgPriv${e.id}`).style.display="block",document.getElementsByClassName("ThemeSlide1")[0].style.zIndex="0"}},i().createElement(B.Z,{className:"Viewtablecls"}))),i().createElement(N.Z,{id:`${e.tableName}ImgPriv${e.id}`,data:t}))},L=(0,a.forwardRef)(((e,t)=>{const l=(0,a.useRef)(null),[o,u]=(0,a.useState)("asc"),[y,g]=(0,a.useState)(""),[p,x]=i().useState(""),[Z,T]=(0,a.useState)(!1),[I,N]=(0,a.useState)(!1),[B,A]=(0,a.useState)([]),[P,L]=(0,a.useState)([]),[H,_]=(0,a.useState)(null),[R,F]=(0,a.useState)({x:0,y:0}),[W,q]=(0,a.useState)(!1),[K,z]=(0,a.useState)([]),[U,Y]=(0,a.useState)([]),[Q,X]=(0,a.useState)([]),[G,J]=(0,a.useState)({});function ee(e,t,l){return t[l]<e[l]?-1:t[l]>e[l]?1:0}(0,a.useImperativeHandle)(t,(()=>({clearItem:()=>{O.log("clear item"),l.current.clearValue()},submit:()=>{const e=P.filter((e=>1==e.checked));O.log(e)}}))),(0,a.useEffect)((()=>{if(e.bodydata.length>0)if(e.dynamic){let t=[],l=[],a=[];Object.keys(e.bodydata[0]).map((e=>{!(e.startsWith("Is")||e.includes("ID")||e.includes("PageIndex")||e.includes("PageSize")||e.includes("TotalCount"))&&(t.push({id:e,name:e.replace(/([A-Z])/g," $1").trim(),type:"varchar"}),l.push(e.trim()),a.push(e.replace(/([A-Z])/g," $1").trim()))})),0==Object.keys(G).length&&J(l.reduce(((e,t)=>(e[t]="",e)),{})),z(t),Y(l)}else z(e.visibleitem),Y(e.bodyitem);else z(e.visibleitem),Y(e.bodyitem);L(e.bodydata),ae(e.id+0)}),[e.bodydata]),(0,a.useEffect)((()=>{e.dynamic||(z(e.visibleitem),Y(e.bodyitem))}),[e.bodyitem]),(0,a.useEffect)((()=>{e.CloseContxt&&q(!1)}),[e.CloseContxt]);const te=(0,a.useCallback)(((e,t)=>{e.preventDefault(),F({x:e.pageX-200,y:e.pageY-200}),q(t)}),[R]);function le(e,t){if(t.toLowerCase().indexOf("password")>-1){var l="";for(let t=0;t<e.length;t++)l+="*";return l}return"LicenseKey"==t&&e?(e.split("-"),"xxxx-xxxx-xxxx"):e}const ae=e=>{var t=document.querySelectorAll(".MuiTableRow-root");for(let e=0;e<t.length;e++)t[e].style.background="#FFF";setTimeout((function(){document.getElementById(e)&&(document.getElementById(e).style.background="#fff")}),500)};return i().createElement(r.Z,{component:n.Z,style:{height:e.IsSub?"auto":"66vh"},className:"tablecontainer scrollY"},i().createElement(c.Z,{stickyHeader:!0,id:"Header"+e.id+e.frmctrlid},i().createElement(M,{order:o,orderBy:y,onRequestSort:(e,t)=>{u(y===t&&"asc"===o?"desc":"asc"),g(t)},headCells:K,isDraft:e.isdraft,value:e.searchvalue,action:e.action,TableSearchParams:(ie=G,Object.keys(ie).forEach((function(e){(e.toLowerCase().includes("date")||e.toLowerCase().includes("time"))&&delete ie[e]})),ie),isexpanded:e.isexpanded,colwid:e.colwid,ref:l,IsSub:e.IsSub,multi:e.multi,searchdisabled:e.searchdisabled,showMore:e.showMore,frmctrlid:e.frmctrlid,tf:e.tf}),P.length>0?i().createElement(d.Z,{id:e.frmctrlid+"_TableBody"},function(e,t){const l=e.map(((e,t)=>[e,t]));return l.sort(((e,l)=>{const a=t(e[0],l[0]);return 0!==a?a:e[1]-l[1]})),l.map((e=>e[0]))}(P,function(e,t){return"desc"===e?(e,l)=>ee(e,l,t):(e,l)=>-ee(e,l,t)}(o,y)).map(((t,l)=>i().createElement(i().Fragment,null,i().createElement(m.Z,{key:l,onDoubleClick:a=>{if(e.IsSub&&!e.EditSub)return!1;e.edit(t,e.isdraft,!0),e.expanded(!0),x(""),T(!1),(e=>{var t=document.querySelectorAll(".MuiTableRow-root");for(let e=0;e<t.length;e++)t[e].style.background="#FFF";setTimeout((function(){document.getElementById(e)&&(document.getElementById(e).style.background="#e3e4e9")}),500)})(e.id+l),!0===e.isexpanded&&document.getElementById(e.id)},id:e.id+l},"none"==e.action?null:!0===e.isexpanded&&!e.IsSub&&i().createElement(s.Z,{className:"StyledTableCellBodyStyles",style:{textAlign:"center"}},i().createElement("div",{className:"CardDisplay"},e.IsView&&e.tableExp&&i().createElement(k.Z,{"aria-label":"expand row",size:"small",onClick:()=>{return e=l,O.log("buttonl0l2",e),void(p===e?(x(""),T(!1)):(x(e),T(!0)));var e}},p===l?i().createElement(w.Z,null):i().createElement(C.Z,null)),"none"==e.visibilityIcon?null:i().createElement(h.ZP,{title:"View",placement:"top"},i().createElement("div",{id:`view_${e.frmctrlid}`,onClick:()=>{e.edit(t,e.isdraft,!0),e.expanded(!0),e.viewtoggle()}},i().createElement(S.Z,{className:"Viewtablecls"}))),"none"==e.editIcon?null:e.accessrights.IsEdit?i().createElement(h.ZP,{title:"Edit",placement:"top"},i().createElement("div",{id:`edit_${e.frmctrlid}`,onClick:()=>{e.edit(t,e.isdraft,!1),e.expanded(!0)}},i().createElement(f.Z,{className:"Edittablecls"}))):null,e.delete&&i().createElement(h.ZP,{title:"Delete",placement:"top"},i().createElement("div",{id:`edit_${e.frmctrlid}`,onClick:()=>{e.onDelete(t)}},i().createElement(E.Z,{style:{color:"red"},className:"Edittablecls"}))),t.FilePath?i().createElement($,{id:Object.values(t)[0],tableID:e.tableID,tableName:e.id,hidescreenComp:t=>e.hidescreenComp(t)}):i().createElement("div",{style:{height:"24px",width:"36px"}}))),e.multi&&i().createElement(s.Z,{className:"StyledTableCellBodyStyles",style:{minWidth:"60px",textAlign:"right"}},i().createElement(b.Z,{checked:1==t.checked,onClick:l=>{O.log("1check",l,t),((t,l)=>{const a=Object.keys(l).filter((e=>e.includes("IDPK")))[0];O.log("id",a,l[a]);const i=[...P];let n={checked:t};const c=i.findIndex((e=>e[a]==l[a]));O.log("index",c);const d=i[c];O.log("item",d),i.splice(c,1,{...d,...n}),O.log("newdata",i),L(i),e.showData&&e.multiselect(i.filter((e=>1==e.checked)))})(l,t)},disabled:!1,id:`checkbox_${e.frmctrlid}`})),1==e.showMore&&i().createElement(s.Z,{className:"StyledTableCellBodyStyles",style:{textAlign:"center"}},i().createElement(V(),{id:e.formID,cstate:e.cstate,cdispatch:e.cdispatch,context:e.context,parentId:t[e.idpk],parentData:t,sentToAppr:"",model:"IsTable",AccessRights:e.accessrights})),U.map(((a,n)=>{let c=K.filter((e=>e.id==a));return"Is"==a.slice(0,2)?i().createElement(s.Z,{className:"StyledTableCellBodyStyles",key:n,style:{textAlign:"center"}},i().createElement("div",{className:"gdotTable ",style:{backgroundColor:"1"==t[a]?"#03AC13":"#dddddd"}})):c.length>0?i().createElement(s.Z,{className:"StyledTableCellBodyStyles",onContextMenu:t=>{e.contextMenu&&te(t,l+a)},key:n,style:{textAlign:"numeric"==c[0].type||"smallint"==c[0].type||"int"==c[0].type?"right":"left"}},"MailSubject"==a?i().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t),e.MailSubject(t.MailSubject)}},le(t[a],a)):e.iframeVal&&e.iframeVal==a?i().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t)}},le(t[a],a)):i().createElement("div",{className:`cell${e.color?t[a]:""} ${"RequestDetailsDesc"==a?"CellEllipse":""}`,title:t[a]},"mins"==c[0]?.type?j()(t[a]):le(t[a],a)),W==l+a?i().createElement("div",{className:"Contextmenu",style:{top:R.y,left:R.x}},e.contextMenu&&e.contextView(t)):null):i().createElement(s.Z,{className:"StyledTableCellBodyStyles ",key:n},"MailSubject"==a?i().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t),e.MailSubject(t.MailSubject)}},le(t[a],a)):e.iframeVal&&e.iframeVal==a?i().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t)}},le(t[a],a)):i().createElement("div",{className:`cell${e.color?t[a]:""}`,title:t[a]},"mins"==c[0]?.type?j()(t[a]):le(t[a],a)))}))),i().createElement(s.Z,{style:{paddingBottom:0,paddingTop:0,paddingLeft:0,borderLeft:"20px solid #ccc"},key:"cell"+l,colSpan:e.Colspan?e.Colspan:8},i().createElement(v.Z,{in:p===l,timeout:"auto",unmountOnExit:!0},p===l&&e.ViewComp(Z,t))))))):!e.IsSub&&i().createElement(d.Z,{id:e.frmctrlid+"_TableBody"},i().createElement(m.Z,null,i().createElement(s.Z,{colSpan:e.headerdata.length+1,style:{padding:"0px"}},i().createElement(D.Z,{MUITable:"0"}))))));var ie}))}}]);