/*! For license information please see 9792.8934cdac4d7d7b7d065e.js.LICENSE.txt */
"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[9792],{79792:(e,t,a)=>{a.r(t),a.d(t,{ContextApi:()=>Ze,PPMCreationOccupantDetailsContext:()=>Re,UserGridViewData:()=>ze,default:()=>Ke});var l=a(92950),n=a.n(l),c=(a(95866),a(45237)),i=a(36939),r=a(61201),o=a(59009),s=a(51673),p=(a(99058),a(80366)),u=a(282),d=a(868),m=a(78513),P=a(14439),D=a(27848),g=a(40900),C=a(64059),y=a(24038),M=a(8981),O=a(47516),I=a(86893),E=a(33681),f=a(63163),v=a(35131),N=a.n(v),h=a(61956),S=a(93657),F=a(53375),w=a(52663),b=a(66083),A=a(29525),T=a(66856),x=a(39803),B=a(99940),k=a(17149),L=a(62810),R=a(30553),Z=a(92381),z=a(25108);const K=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[c,i]=(0,l.useState)([]),[r,o]=(0,l.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[v,N]=(0,l.useState)(""),[h,K]=(0,l.useState)({}),[_,W]=(0,l.useState)(!0),[q,G]=(0,l.useState)(!1),{cstate:V,cdispatch:U}=e.ContextApi?e.ContextApi:Ze(),[Y,j]=(0,l.useState)(1),[H,$]=(0,l.useState)(0),[J,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)({}),[te,ae]=(0,l.useState)([]),[le,ne]=(0,l.useState)(!0),[ce,ie]=(0,l.useState)(!1),[re,oe]=(0,l.useState)(""),[se,pe]=(0,l.useState)(!1),[ue,de]=(0,l.useState)(!1),[me,Pe]=(0,l.useState)(!1),[De,ge]=(0,l.useState)(""),Ce=(0,l.useRef)(null),[ye,Me]=(0,l.useState)({});let Oe=localStorage.getItem("Language");const Ie={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let Ee=(0,M.Z)();const fe=e=>Ee[e]?Ee[e]:e,ve=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[Ie[Oe]];function Ne(){K({}),ee({}),e.searchData({}),G(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const a=e.userGrid.reduce(((e,t)=>{const a=t.FieldName;return t.IsForeign&&(e[a]||(e[a]=[]),e[a].push(t.FieldDisplay)),e}),{});Me(a),ae(t)}),[]),(0,l.useEffect)((()=>()=>{Ce.current&&Ce.current.abort()}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Ne()}})));const he=async(t,a,l,n)=>{Q(!0);try{Ce.current&&Ce.current.abort();const r=new AbortController;Ce.current=r;let p="",u=[],d={};await o((e=>(p=e.name,e))),await K((e=>(u=e,e))),await ee((e=>(d=e,e)));const m=g.v.Api+"FP472S3/",P={data:{p1:"PPMCreationOccupantDetIDPK"==a?null:await Ae(),p2:"PPMOccupantDetCode"==p&&l.length>0?"%"+l+"%":null,p3:"PPMOccupantName"==p&&l.length>0?"%"+l+"%":null,p4:"PPMOccupContactNo"==p&&l.length>0?"%"+l+"%":null,p5:"PPMOccupEmail"==p&&l.length>0?"%"+l+"%":null,p6:"PPMOccupantAddress"==p&&l.length>0?"%"+l+"%":null,p7:null,p8:null,p9:null,p10:"PPMOccupantRemarks"==p&&l.length>0?"%"+l+"%":null,p11:"PPMOccupantRating"==p&&l.length>0?"%"+l+"%":null,p12:null,p13:null,p14:e.parentId?e.parentId:"0",p15:e.Dialogview?"1":null,p16:null,p17:"p17"==p&&l.length>0?l:null,p18:null,p19:null,p20:null,p21:null,p22:"ContractName"!=p&&u.ContractName?u.ContractName.map((e=>e.ContractIDPK)).toString():null,p23:"ContractCode"==p&&l.length>0?"%"+l+"%":null,p24:"ContractName"==p&&l.length>0?"%"+l+"%":null,p25:"LocalityName"!=p&&u.LocalityName?u.LocalityName.map((e=>e.LocalityIDPK)).toString():null,p26:"LocalityCode"==p&&l.length>0?"%"+l+"%":null,p27:"LocalityName"==p&&l.length>0?"%"+l+"%":null,p28:"BuildingName"!=p&&u.BuildingName?u.BuildingName.map((e=>e.BuildingIDPK)).toString():null,p29:"BuildingCode"==p&&l.length>0?"%"+l+"%":null,p30:"BuildingName"==p&&l.length>0?"%"+l+"%":null,p31:"FloorName"!=p&&u.FloorName?u.FloorName.map((e=>e.FloorIDPK)).toString():null,p32:"FloorCode"==p&&l.length>0?"%"+l+"%":null,p33:"FloorName"==p&&l.length>0?"%"+l+"%":null,p34:"SpotName"!=p&&u.SpotName?u.SpotName.map((e=>e.SpotIDPK)).toString():null,p35:"SpotCode"==p&&l.length>0?"%"+l+"%":null,p36:"SpotName"==p&&l.length>0?"%"+l+"%":null,p37:"DivisionName"!=p&&u.DivisionName?u.DivisionName.map((e=>e.DivisionIDPK)).toString():null,p38:"DivisionCode"==p&&l.length>0?"%"+l+"%":null,p39:"DivisionName"==p&&l.length>0?"%"+l+"%":null,p40:"DisciplineName"!=p&&u.DisciplineName?u.DisciplineName.map((e=>e.DisciplineIDPK)).toString():null,p41:"DisciplineCode"==p&&l.length>0?"%"+l+"%":null,p42:"DisciplineName"==p&&l.length>0?"%"+l+"%":null,p43:"FrequencyName"!=p&&u.FrequencyName?u.FrequencyName.map((e=>e.FrequencyIDPK)).toString():null,p44:"FrequencyCode"==p&&l.length>0?"%"+l+"%":null,p45:"FrequencyName"==p&&l.length>0?"%"+l+"%":null,p46:"EquipmentName"!=p&&u.EquipmentName?u.EquipmentName.map((e=>e.AssetIDPK)).toString():null,p47:"EquipmentName"==p&&l.length>0?"%"+l+"%":null,p48:"EquipmentRefNo"==p&&l.length>0?"%"+l+"%":null,p49:"AssetBarcode"==p&&l.length>0?"%"+l+"%":null,p50:"AssetTagNo"==p&&l.length>0?"%"+l+"%":null,p51:"FirstName"!=p&&u.FirstName?u.FirstName.map((e=>e.EmployeeIDPK)).toString():null,p52:"EmployeeCode"==p&&l.length>0?"%"+l+"%":null,p53:"FirstName"==p&&l.length>0?"%"+l+"%":null,p54:"EmpContactNo1"==p&&l.length>0?"%"+l+"%":null,p55:"EmpEmailOfficial"==p&&l.length>0?"%"+l+"%":null,p56:"FlowDisplayName"!=p&&u.FlowDisplayName?u.FlowDisplayName.map((e=>e.PPMBusinessFlowIDPK)).toString():null,p57:"BriefDetails"==p&&l.length>0?"%"+l+"%":null,p58:"FlowCode"==p&&l.length>0?"%"+l+"%":null,p59:"FlowDisplayName"==p&&l.length>0?"%"+l+"%":null,p60:"FixonBusinessFlowName"!=p&&u.FixonBusinessFlowName?u.FixonBusinessFlowName.map((e=>e.PPMFixonBusinessFlowIDPK)).toString():null,p61:"FixonBusinessFlowName"==p&&l.length>0?"%"+l+"%":null,p62:"PPMFixonBusinessFlowCode"==p&&l.length>0?"%"+l+"%":null,p63:"PPMStageName"!=p&&u.PPMStageName?u.PPMStageName.map((e=>e.PPMStageIDPK)).toString():null,p64:"PPMStageName"==p&&l.length>0?"%"+l+"%":null,p65:"StageSeqNo"==p&&l.length>0?"%"+l+"%":null,p66:"WorkOrder"==p&&l.length>0?"%"+l+"%":null,p67:d.WoDateTime?d.WoDateTime.From:null,p68:d.WoDateTime?d.WoDateTime.Type:null,p69:d.WoDateTime?d.WoDateTime.To:null,p70:n||1,p71:10,p72:t,p73:null,p74:null,p75:localStorage.getItem("UserGroupID"),p76:localStorage.getItem("userid")}},D=await(0,s.Z)(m,P,e.token,"",r.signal);if(!D)return!1;const C=D.Output.status.code,y=D.Output.data;if("200"===C)if(y.length>0)if(1===n){let e=Fe(y,p),t=Se(e,h[p],a);i(t),$(t.length>0?t[0].TotalCount:h[p].length)}else{let e=[...c,...y],t=Fe(e,p);$(t.length<10?t.length:y[0].TotalCount),i(Fe(t,p))}else v.length>0&&i([]),$(c.length);else e.alertmsg("error",[D.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{Q(!1)}},Se=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),Fe=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));function we(e){let t=e+"PK",a=ye[e];if(a){const e=a.flatMap((e=>h[e]?h[e].map((e=>e[t])):[]));return e.toString()}return""}const be=async t=>{let a="",l={};await K((e=>(a=e,e)));let n=[...te],c=[];for(let e of n){let t=a[e]?.map((e=>e.PPMCreationOccupantDetIDPK)).toString();t&&c.push(t)}await ee((e=>(l=e,e)));let i={PPMCreationOccupantDetIDPK:c?[...new Set(c)].toString():"",CreatedTtm:l.CreatedTtm?l.CreatedTtm.From:"",CreatedTtmType:l.CreatedTtm?l.CreatedTtm.Type:"",CreatedTtmBetween:l.CreatedTtm?l.CreatedTtm.To:"",PPMOccupantDate:l.PPMOccupantDate?l.PPMOccupantDate.From:"",PPMOccupantDateType:l.PPMOccupantDate?l.PPMOccupantDate.Type:"",PPMOccupantDateBetween:l.PPMOccupantDate?l.PPMOccupantDate.To:"",PPMCreationAssetID:we("PPMCreationAssetID")};"saveFav"==t?Be("save",i):(e.searchData(i),G(!1))};async function Ae(){let e={};await K((t=>(e=t,t)));let t=[...te],a=[];for(let l of t){let t=e[l]?.map((e=>e.PPMCreationOccupantDetIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function Te(t,a,l,n,c,i){let r={[n]:{From:t,Type:l,To:a}},o={};ee((e=>({...e,...r})));const s={...h};let p=[...te],u=[];for(let e of p){let t=s[e]?.map((e=>e.PPMCreationOccupantDetIDPK)).toString();t&&u.push(t)}await ee((e=>(o=e,e)));let d={PPMCreationOccupantDetIDPK:u?[...new Set(u)].toString():"",CreatedTtm:o.CreatedTtm?o.CreatedTtm.From:"",CreatedTtmType:o.CreatedTtm?o.CreatedTtm.Type:"",CreatedTtmBetween:o.CreatedTtm?o.CreatedTtm.To:"",IsActive:"IsActive"==l?c:null,PPMOccupantDate:o.PPMOccupantDate?o.PPMOccupantDate.From:"",PPMOccupantDateType:o.PPMOccupantDate?o.PPMOccupantDate.Type:"",PPMOccupantDateBetween:o.PPMOccupantDate?o.PPMOccupantDate.To:"",PPMCreationAssetID:h.WorkOrder?.map((e=>e.PPMCreationAssetIDPK)).toString()};e.searchData(d)}function xe(){return n().createElement(C.Z,{frmctrlid:"fld472L1TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,n)=>{Te(e,t,a,r.name,l)},keyboardback:()=>{G(!1),o({idpk:"",name:"",type:"",fieldidpk:""})},title:fe(r.name),fieldname:r.name,save:e=>{alert(!0)}})}const Be=(t,a)=>{(0,Z.Z)(t,e.formID,a,re).then((e=>{const t=e.Output.data;ge(t)}))};return n().createElement("div",null,n().createElement(w.Z,{onClose:()=>pe(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:se},n().createElement(b.Z,{id:"customized-dialog-title",onClose:()=>pe(!1)},"Add Favorite"),n().createElement(A.Z,{dividers:!0,style:{minWidth:"500px"}},n().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},n().createElement(x.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:re,onChange:e=>oe(e.target.value),fullWidth:!0})),n().createElement(R.Z,{style:{color:"#337ab7"},control:n().createElement(B.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(k.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:ue,onChange:e=>de(e.target.checked)}),label:"Quick"}),n().createElement(R.Z,{style:{color:"#337ab7"},control:n().createElement(B.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(k.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:me,onChange:e=>Pe(e.target.checked)}),label:"Dashboard"})),n().createElement(T.Z,null,n().createElement(u.Z,{onClick:()=>{be("saveFav"),pe(!1)},color:"primary"},"Save"))),q?"Created Ttm"===r.name||r.name.includes("Date")?n().createElement(xe,null):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},n().createElement(P.Z,null,n().createElement(D.Z,{xs:6,sm:6,md:6,lg:6},n().createElement("p",{className:"columnHeaderp"},ve(r.idpk)," (",c.length,"/",H,")")),n().createElement(D.Z,{xs:6,sm:6,md:6,lg:6},n().createElement(d.ZP,{title:fe("Close"),placement:"top"},n().createElement("div",{className:"FilterItemClose",align:"right"},n().createElement(p.Z,{id:"fld472L1TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{G(!1),o({idpk:"",name:"",type:"",fieldidpk:!1}),j(1)}}))),h[r.name]&&n().createElement("div",{className:"FiltercloseAlign",align:"right"},n().createElement(u.Z,{frmctrlid:"fld472L1TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await K((t=>(e=t,z.log("clear fewItems",e),t))),e[r.name]=[],he(r.type,r.fieldidpk,"",1)})()}},n().createElement("span",{className:"ColumnApplyTitle"},fe("Clear All")))))))),n().createElement("div",{className:"FilterParentDiv"},n().createElement("div",{"data-list-scroll-container":"true"},n().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},n().createElement("div",{className:"FilterMaximize"},_?n().createElement(d.ZP,{title:"Maximize",placement:"right"},n().createElement("span",null,n().createElement(I.D7o,{className:"FilterMaximizeIcon",onClick:()=>{W(!1)}}))):n().createElement(d.ZP,{title:"Minimize",placement:"right"},n().createElement("span",null,n().createElement(I.dOw,{className:"FilterMaximizeIcon",onClick:()=>{W(!0)}})))),n().createElement("ul",null,h[r.name]&&h[r.name].map(((e,t)=>n().createElement("div",{key:t,tabIndex:"-1",className:_?"filterSelectedItems":"filterSelectedItemsMaximize"},n().createElement("div",{className:"filterSelectedItemNames"},n().createElement("span",null,e[r.name])),n().createElement("div",{className:"filterSelectedItemClose"},n().createElement("div",{id:"fildacls_3_L2_"+e[r.name],onClick:()=>(async(e,t)=>{j(1);let a=h[r.name].filter((t=>t!=e)),l={};await K((e=>(l=e,e))),l[r.name]=a,K(l),i((t=>[e,...t]))})(e)},n().createElement(p.Z,{className:"filterSelectedItemCloseIcon"})))))))),n().createElement("div",{className:"displayFlex width100 FilterSearch"},n().createElement("div",{className:"FilterSearchInputDiv"},n().createElement(y.Z,{frmctrlid:"fld472L1TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:v,placeholder:fe("Enter ")+" "+ve(r.idpk),onChange:e=>{N(e),he(r.type,r.fieldidpk,e,1,Ae())}})),n().createElement("div",{id:"fld472L1TFCFilterGoForward",className:"FilterSearchBtn",onClick:be},n().createElement(d.ZP,{title:"",placement:"top"},n().createElement(u.Z,{className:"ColumnSearchButton"},n().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),J&&n().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},n().createElement(E.Z,{color:"secondary"})),n().createElement("div",{id:"fld472L1TFCScrollYDefault",className:"height65 scrollYDefault"},c.length>0&&c.map(((e,t)=>n().createElement("div",{id:"filda_3_L2_"+e[r.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await K((e=>(l=e,e)));let n=l[r.name];t[r.name]=n?[...a,...n]:a,l={...l,...t},K(l),i((t=>t.filter((t=>t!=e))))})(e)}},n().createElement(m.Z,{className:"DotIcon"}),n().createElement("span",null,e[r.name])))),c.length+0<H&&c.length>0&&n().createElement("div",{id:"fld472L1TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{j(Y+1),he(r.type,r.fieldidpk,"",Y+1)}},n().createElement("p",null," more... ")),0===c.length&&n().createElement("div",null,n().createElement("div",{className:"NoDataImage"},n().createElement("img",{src:g.v.NoData,alt:"NoImage"})),n().createElement("div",{className:"NoDataDesc"},n().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnHeaderTitle"},n().createElement(O.Ol$,{className:"columnHeaderIcon"}),n().createElement("p",{className:"columnHeaderp"}," ",fe("Filter")," ",re.length>0&&`(${re})`)),n().createElement("div",{className:"columnHeaderbtn",align:"right"},n().createElement(d.ZP,{title:"Favorite List",placement:"top"},ce?n().createElement(p.Z,{className:"favlisticon",onClick:()=>{ie(!1),ge(""),Ne()}}):n().createElement(S.Z,{className:"favlisticon",onClick:()=>{ie(!0),Be("select"),Ne()}})),Object.keys(h).length>0&&n().createElement(d.ZP,{title:"Save Favorites",placement:"top"},n().createElement(F.Z,{className:"favlisticon",onClick:()=>{pe(!0)}})),n().createElement(d.ZP,{title:"",placement:"top"},n().createElement(u.Z,{className:"ColumnApplyButton",onClick:()=>{Ne()},id:"fld472L1TFCColumApplyBttn"},n().createElement("span",{className:"ColumnApplyTitle"},fe("Clear")))),n().createElement(d.ZP,{title:"",placement:"top"},n().createElement(u.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld472L1TFCColumnCloseButton"},n().createElement("span",{className:"ColumnCloseTitle"},fe("Close")))))),n().createElement("div",{className:"height65"},n().createElement("div",{id:"fld472L1TFCFilItems",className:"FilterItems"},!De&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return n().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{G(!0),N(""),i([]),$(0);let t=e.IsForeign?e.FieldName+"PK":"PPMCreationOccupantDetIDPK";o({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterPPMCreationOccupantDetID",fieldidpk:t}),he(e.IsForeign?"Filter"+e.FieldName:"FilterPPMCreationOccupantDetID",t,"",1,Ae())})(e)}},e.FieldName.includes("Date")?n().createElement(n().Fragment,null,ve(e.AdminUserGridViewIDPK)," ",X[e.FieldName]&&n().createElement("p",{className:"filterdatevalue"},"(",X[e.FieldName]?.From+" to "+X[e.FieldName]?.To,")")):"IsActive"==e.FieldName?n().createElement(n().Fragment,null,n().createElement("span",null,ve(e.AdminUserGridViewIDPK)),n().createElement(f.Z,{checked:"1"==le,onChange:t=>{ne(t.target.checked),Te("","",e.FieldName,"",t.target.checked)}})):n().createElement(n().Fragment,null,n().createElement("span",null,ve(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,h[a]?.length>0&&n().createElement("div",{className:"FilterItemDivSelected"},n().createElement("span",{className:"RoundedDivName"},h[a][0][a]),h[a].length>1&&n().createElement("span",{className:"RoundedDivName"},h[a][1][a]),h[a].length>2&&n().createElement("span",{className:"RoundedDivNumber"},"+"+(h[a].length-2))))));var a})),De&&De.map((e=>{let t=e.TFFSearchParams,a=JSON.parse(t);return n().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{he("FilterPPMCreationOccupantDetID",a),be("")}},n().createElement(n().Fragment,null,e.TableFilterFavName))}))))))}));var _=a(54180),W=a(43031),q=a(85639),G=a(110),V=a(5109),U=a(88995),Y=a(50743),j=a(61657),H=a(51209),$=a(53854),J=a(51649),Q=a(37106),X=a(5434),ee=a(83817),te=a(39327),ae=a(3212),le=a(93521),ne=(a(79117),a(71168)),ce=a.n(ne),ie=a(65107),re=a(94986),oe=a(15999);a(11557),window.clickFilter="";const se=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),u=(0,l.useRef)(null),[m]=((0,l.useRef)(null),(0,c.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[P]=(0,l.useState)("472"),[D,C]=(0,l.useState)(!1),[E,f]=(0,l.useState)(!1),[v,N]=(0,l.useState)(0),[h,S]=(0,l.useState)(0),[F,w]=(0,l.useState)(0),[b,A]=(0,l.useState)(0),[T,x]=(0,l.useState)({current:1,pageSize:100}),[B,k]=(0,l.useState)(""),[L,R]=(0,l.useState)([]),[Z,z]=(0,l.useState)({val:"",column:""}),[ne,se]=(0,l.useState)([]),[pe,ue]=(0,l.useState)(!1),[de,me]=(0,l.useState)(""),[Pe,De]=(0,l.useState)(""),[ge,Ce]=(0,l.useState)(!1),[ye,Me]=(0,l.useState)([]),[Oe,Ie]=(0,l.useState)([]),[Ee,fe]=(0,l.useState)([]),[ve,Ne]=(0,l.useState)({children:[{name:"PPMCreationOccupantDetails",children:[]}]}),[he,Se]=(0,l.useState)(!1),Fe=(0,l.useContext)(e.context?e.context:Re),{cstate:we,cdispatch:be}=e.ContextApi?e.ContextApi:Ze();let Ae={PPMCreationOccupantDetIDPK:"",PPMOccupantDetCode:"",PPMOccupantName:"",PPMOccupContactNo:"",PPMOccupEmail:"",PPMOccupantAddress:"",PPMOccupantDate:"",PPMOccupantDateType:"",PPMOccupantDateBetween:"",PPMOccupantRemarks:"",PPMOccupantRating:"",IsDraft:"",Remarks:"",PPMCreationAssetID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractID:"",ContractCode:"",ContractName:"",LocalityID:"",LocalityCode:"",LocalityName:"",BuildingID:"",BuildingCode:"",BuildingName:"",FloorID:"",FloorCode:"",FloorName:"",SpotID:"",SpotCode:"",SpotName:"",DivisionID:"",DivisionCode:"",DivisionName:"",DisciplineID:"",DisciplineCode:"",DisciplineName:"",FrequencyID:"",FrequencyCode:"",FrequencyName:"",AssetID:"",EquipmentName:"",EquipmentRefNo:"",AssetBarcode:"",AssetTagNo:"",EmployeeID:"",EmployeeCode:"",FirstName:"",EmpContactNo1:"",EmpEmailOfficial:"",PPMBusinessFlowID:"",BriefDetails:"",FlowCode:"",FlowDisplayName:"",PPMFixonBusinessFlowID:"",FixonBusinessFlowName:"",PPMFixonBusinessFlowCode:"",PPMStageID:"",PPMStageName:"",StageSeqNo:"",WorkOrder:"",WoDateTime:"",WoDateTimeType:"",WoDateTimeBetween:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[Te,xe]=(0,l.useState)(Ae),[Be,ke]=(0,l.useState)(Ae),[Le,ze]=(0,l.useState)(!1),[Ke,_e]=(0,l.useState)(!0),[We,qe]=(0,l.useState)(!1),[Ge,Ve]=(0,l.useState)(!0),[Ue,Ye]=(0,l.useState)({PPMOccupantName:"",PPMOccupContactNo:"",PPMOccupEmail:"",PPMOccupantRating:"",PPMOccupantRemarks:"",PPMOccupantDetCode:"",PPMOccupantAddress:"",PPMOccupantDate:"",WorkOrder:""}),[je,He]=(0,l.useState)(!1),[$e,Je]=(0,l.useState)([]),[Qe,Xe]=(0,l.useState)(0),[et,tt]=(0,l.useState)(0),[at,lt]=(0,l.useState)({current:1,pageSize:10}),[nt,ct]=(0,l.useState)([]),[it,rt]=(0,l.useState)([]),[ot,st]=(0,l.useState)(!1),[pt,ut]=(0,l.useState)(!1),[dt,mt]=(0,l.useState)(!1),[Pt,Dt]=(0,l.useState)(""),[gt,Ct]=ce()("472"),[yt,Mt]=(0,l.useState)({}),Ot=[{columns:nt,data:B}];let It=(0,M.Z)();const Et=e=>It[e]?It[e]:e,ft=e=>we.language?.[e]?we.language[e]:e;(0,l.useEffect)((()=>{bt(gt)}),[gt]),(0,l.useEffect)((()=>{we.token.length>0&&(e.parentId?Ft(T,Ae,"PPMCreationOccupantDetID"):se([]))}),[e.parentId]),(0,l.useEffect)((()=>{!he&&e.parentId?Ft(T,de,"PPMCreationOccupantDetID"):he&&ke(de)}),[de]),(0,l.useImperativeHandle)(t,(()=>({searchItem:e=>{vt(e)},tableRefresh:()=>{Ft(T,Ae,"PPMCreationOccupantDetID")},DialogTableProps:e=>{f(e)},HideEntryFields:e=>{mt(!0===e)}})));const vt=e=>{""==e?Ft(T,Ae,Le?"DraftPPMCreationOccupantDetID":"PPMCreationOccupantDetID",Le&&"DraftPage"):wt(e,{current:1,pageSize:100}),De(e)};function Nt(t){Fe.loading(!0);let a=g.v.Api+"FP472S7/",l={data:{p1:"%%",p2:e.parentId?e.parentId:"0",p3:"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,s.Z)(a,l,we.token[0]).then((e=>{if(200==e.Output.status.code){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,tt(e.Output.data[0].TotalCount)):a=0,10==t.pageSize?Xe(Math.ceil(a)):20==t.pageSize?Xe(Math.ceil(a/2)):50==t.pageSize?Xe(Math.ceil(a/5)):100==t.pageSize&&Xe(Math.ceil(a/10)),Je(e.Output.data),Fe.loading(!1)}}))}function ht(e,t){be({type:"editData",payload:[t]}),be({type:"IsDraft",payload:Le}),be({type:"ShowDetail",payload:!0}),Fe.Expanded(!0),We&&Ce(!1)}(0,l.useEffect)((()=>{!1===e.cardview&&Ve(e.cardview),e.Dialogview&&(f(e.Dialogview),mt(!0))}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&wt(e.searchsafaritext,{current:T.current,pageSize:T.pageSize})}),[e.searchsafaritext]);const St=()=>{Fe.EditClose(!0),pe?(document.getElementById("PPMCreationOccupantDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("PPMCreationOccupantDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("PPMCreationOccupantDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",ue(!1),Ge?(E||(document.getElementById("PPMCreationOccupantDetailscoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("PPMCreationOccupantDetailscoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),document.getElementById("PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("PPMCreationOccupantDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("PPMCreationOccupantDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("PPMCreationOccupantDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",ue(!0),document.getElementById("PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),Ce(!1),window.clickFilter=!pe},Ft=(t,a,l,n,c,i)=>{Fe.loading(!0),"DraftPage"!==n&&ze(we.IsDraft);let r=g.v.Api+"FP472S3/",o={data:{p1:c||(a&&a.PPMCreationOccupantDetIDPK?a.PPMCreationOccupantDetIDPK:null),p2:a&&a.PPMOccupantDetCode?a.PPMOccupantDetCode:null,p3:a&&a.PPMOccupantName?a.PPMOccupantName:null,p4:a&&a.PPMOccupContactNo?a.PPMOccupContactNo:null,p5:a&&a.PPMOccupEmail?a.PPMOccupEmail:null,p6:a&&a.PPMOccupantAddress?a.PPMOccupantAddress:null,p7:a&&a.PPMOccupantDate?a.PPMOccupantDate:null,p8:a&&a.PPMOccupantDateType?a.PPMOccupantDateType:null,p9:a&&a.PPMOccupantDateBetween?a.PPMOccupantDateBetween:null,p10:null,p11:a&&a.PPMOccupantRating?a.PPMOccupantRating:null,p12:"DraftPPMCreationOccupantDetID"==l?"1":"0",p13:null,p14:e.parentId?Number(e.parentId):0,p15:a&&a.IsActive,p16:null,p17:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p18:a&&a.CreatedTtm?a.CreatedTtm:null,p19:a&&a.CreatedTtmType?a.CreatedTtmType:null,p20:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p21:null,p22:a&&a.ContractID?a.ContractID:null,p23:a&&a.ContractCode?a.ContractCode:null,p24:a&&a.ContractName?a.ContractName:null,p25:a&&a.LocalityID?a.LocalityID:null,p26:a&&a.LocalityCode?a.LocalityCode:null,p27:a&&a.LocalityName?a.LocalityName:null,p28:a&&a.BuildingID?a.BuildingID:null,p29:a&&a.BuildingCode?a.BuildingCode:null,p30:a&&a.BuildingName?a.BuildingName:null,p31:a&&a.FloorID?a.FloorID:null,p32:a&&a.FloorCode?a.FloorCode:null,p33:a&&a.FloorName?a.FloorName:null,p34:a&&a.SpotID?a.SpotID:null,p35:a&&a.SpotCode?a.SpotCode:null,p36:a&&a.SpotName?a.SpotName:null,p37:a&&a.DivisionID?a.DivisionID:null,p38:a&&a.DivisionCode?a.DivisionCode:null,p39:a&&a.DivisionName?a.DivisionName:null,p40:a&&a.DisciplineID?a.DisciplineID:null,p41:a&&a.DisciplineCode?a.DisciplineCode:null,p42:a&&a.DisciplineName?a.DisciplineName:null,p43:a&&a.FrequencyID?a.FrequencyID:null,p44:a&&a.FrequencyCode?a.FrequencyCode:null,p45:a&&a.FrequencyName?a.FrequencyName:null,p46:a&&a.AssetID?a.AssetID:null,p47:a&&a.EquipmentName?a.EquipmentName:null,p48:a&&a.EquipmentRefNo?a.EquipmentRefNo:null,p49:a&&a.AssetBarcode?a.AssetBarcode:null,p50:a&&a.AssetTagNo?a.AssetTagNo:null,p51:a&&a.EmployeeID?a.EmployeeID:null,p52:a&&a.EmployeeCode?a.EmployeeCode:null,p53:a&&a.FirstName?a.FirstName:null,p54:a&&a.EmpContactNo1?a.EmpContactNo1:null,p55:a&&a.EmpEmailOfficial?a.EmpEmailOfficial:null,p56:a&&a.PPMBusinessFlowID?a.PPMBusinessFlowID:null,p57:a&&a.BriefDetails?a.BriefDetails:null,p58:a&&a.FlowCode?a.FlowCode:null,p59:a&&a.FlowDisplayName?a.FlowDisplayName:null,p60:a&&a.PPMFixonBusinessFlowID?a.PPMFixonBusinessFlowID:null,p61:a&&a.FixonBusinessFlowName?a.FixonBusinessFlowName:null,p62:a&&a.PPMFixonBusinessFlowCode?a.PPMFixonBusinessFlowCode:null,p63:a&&a.PPMStageID?a.PPMStageID:null,p64:a&&a.PPMStageName?a.PPMStageName:null,p65:a&&a.StageSeqNo?a.StageSeqNo:null,p66:a&&a.WorkOrder?a.WorkOrder:null,p67:a&&a.WoDateTime?a.WoDateTime:null,p68:a&&a.WoDateTimeType?a.WoDateTimeType:null,p69:a&&a.WoDateTimeBetween?a.WoDateTimeBetween:null,p70:c?1:t.current,p71:t.pageSize,p72:l,p73:null,p74:null,p75:localStorage.getItem("UserGroupID"),p76:localStorage.getItem("userid")}};(0,s.Z)(r,o,we.token[0]).then((r=>{if(c)(0,ee.a)(r,be,n,i,Fe);else if("200"==r.Output.status.code)if(r.Output.data.length>0){if(r.Output.data){let e=0;r.Output.data.length>0?(e=parseFloat(r.Output.data[0].TotalCount,10)/10,w(r.Output.data[0].TotalCount),A(r.Output.data[0].DraftCnt),be({type:"count",payload:r.Output.data[0].TotalCount}),"DraftPage"==n&&A(r.Output.data[0].TotalCount)):e=0,10==t.pageSize?S(Math.ceil(e)):20==t.pageSize?S(Math.ceil(e/2)):50==t.pageSize?S(Math.ceil(e/5)):100==t.pageSize&&S(Math.ceil(e/10)),se(r.Output.data),Fe.loading(!1)}e.Dialogview||(document.getElementById("divPPMCreationOccupantDetails-Entry").style.height="auto",document.getElementById("divPPMCreationOccupantDetails-Entry").style.display="block")}else Fe.loading(!1),"DraftPPMCreationOccupantDetID"===l?(Fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Ce(!0),ze(!1)):(se([]),x({current:1,pageSize:10}),S(0),w(0),be({type:"count",payload:"0"}),Object.values(a).some((e=>e))&&Fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else Fe.alert({open:!0,color:"warning",message:[r.Output.status.message]}),Fe.loading(!1)}))};function wt(t,a){Fe.loading(!0);const l=g.v.Api+"FP472S4/",n={data:{p1:"%"+t+"%",p2:e.parentId?e.parentId:"0",p3:Le?"1":"0",p4:a.current,p5:a.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,s.Z)(l,n,we.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let t=0;e.Output.data.length>0?(t=parseFloat(e.Output.data[0].TotalCount,10)/10,w(e.Output.data[0].TotalCount),be({type:"count",payload:e.Output.data[0].TotalCount})):t=0,10==a.pageSize?S(Math.ceil(t)):20==a.pageSize?S(Math.ceil(t/2)):50==a.pageSize?S(Math.ceil(t/5)):100==a.pageSize&&S(Math.ceil(t/10)),se(e.Output.data),Fe.loading(!1)}else se([]),S(0),w(0),be({type:"count",payload:"0"}),Fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Fe.loading(!1);else Fe.alert({open:!0,color:"warning",message:[e.Output.status.message]}),Fe.loading(!1)}))}function bt(e){let t=[],a=[],l=[],n=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldName&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let c=localStorage.getItem("Language");n.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[c]]})})),be({type:"language",payload:Object.assign({},...n)}),Ye(a.reduce(((e,t)=>(e[t]="",e)),{})),Me(e),Ie(t),fe(a),ct(l),rt(a)}const At=()=>he?null:n().createElement("div",null,je?n().createElement(re.Z,{data:$e,expanded:e=>!E&&Fe.Expanded(e),edit:(e,t,a)=>{E?Fe.select(e):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:t}),be({type:"ShowDetail",payload:a}))}}):n().createElement(ie.Z,{ref:u,frmctrlid:"tblcs_472_L1_",id:"PPMCreationOccupantDetailsTable",headerdata:Oe,tablesearchparams:Ue,searchvalue:e=>{Ye(e),me(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...FilteredObj};Mt(t),x({current:1,pageSize:10}),Ft({current:1,pageSize:10},t,Le?"DraftPPMCreationOccupantDetID":"PPMCreationOccupantDetID",Le&&"DraftPage")},bodydata:ne,ondrag:ht,bodyitem:Ee,visibleitem:Oe,isdraft:Le,IsView:!1,IsSub:e.tableview,tableExp:!1,tableID:P,showMore:!1,accessrights:we.AccessRights,expanded:e=>!E&&Fe.Expanded(e),edit:(e,t,a)=>{E?Fe.select(e):(Object.keys(e).map(((l,n)=>{l.includes("IDPK")&&Ft(T,null,t?"DraftPPMCreationOccupantDetID":"PPMCreationOccupantDetID",t&&"DraftPage",e[l],a)})),Fe.hideAddBtn(!0))},viewtoggle:Fe.viewtoggle,isexpanded:!E||We,tf:ft,action:E?"none":"",ViewComp:(e,t)=>{}}));return(0,l.useEffect)((()=>{qe(we.ExpandTableValue)}),[we.ExpandTableValue]),n().createElement("div",null,!dt&&!e.tableview&&n().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"0",padding:"0px 4px 0px 0px"}},n().createElement("div",{id:"fld472L1ECSearchBar",className:"searchbar1"},n().createElement(y.Z,{frmctrlid:"fld472L1TCInputSearch",className:"search_input",type:"text",id:"AdminCountryRegistrygridsearch",placeholder:Et("Search"),value:Pe,onChange:e=>{De(e),Fe.searchItem(e)},style:{width:"300px"}}),n().createElement("div",{className:"search_icon"},Pe?n().createElement("div",{id:"fld472L1TCCloseIconCommonSearch",onClick:()=>{De(""),Fe.searchItem("")}},n().createElement(p.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld472L1TCInputSearchIcon"},n().createElement(U.Z,{className:"InputSearchIcon",onClick:()=>{document.getElementById("PPMCreationOccupantDetailsgridsearch").focus()}})))),n().createElement("div",null,we.AccessRights.IsAdd?n().createElement(ae.Z,{className:"SaveBtnCommon",frmctrlid:"fld472L1TCAddBtnIsAdd",onClick:()=>{Fe.hideAddBtn(!0),be({type:"editData",payload:[]}),be({type:"ShowDetail",payload:!1}),be({type:"Add",payload:!0})}}):"")),n().createElement(i.Z,{expanded:Ke,onChange:()=>()=>{_e(We)}},e.Dialogview&&n().createElement(Y.Z,null,n().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},n().createElement("div",{className:"displayFlex EntryHeader"},n().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.59-3:08:17 PM-18-7[472]"},`${ft("472")} (${F})`)),!1===e.cardview?null:n().createElement("div",{className:"displayFlex EntryHeaderBtn"},n().createElement("div",{id:"fld472L1TCSearchBar",className:"searchbar",style:{marginTop:"8px"}},n().createElement(y.Z,{frmctrlid:"fld472L1TCInputSearch",className:"search_input",type:"text",placeholder:Et("Search"),value:Pe,onChange:e=>{vt(e)}}),n().createElement("div",{className:"search_icon"},Pe?n().createElement("div",{id:"fld472L1TCInputCloseIcon",onClick:()=>{vt("")}},n().createElement(p.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld472L1TCInputSearchIcon"},n().createElement(U.Z,{className:"InputSearchIcon"}))))))),n().createElement(r.Z,{className:"AccDetails"},n().createElement("div",{className:"tableCardL1",style:{height:e.tableview?"auto":"fit-content"}},!e.tableview&&n().createElement("div",{id:"PPMCreationOccupantDetails-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:n().createElement("div",{className:"tableHeaderItems displayFlex"},!Le&&n().createElement("div",{frmctrlid:"fld472L1TCFilterDataIsDraft",id:"PPMCreationOccupantDetailsfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{St()}},n().createElement(d.ZP,{title:Et("Filter Data"),placement:"top"},n().createElement("span",null,n().createElement(O.Ol$,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},Et("Filter Data"))),!E&&!Le&&!he&&n().createElement(_.Z,{formctrlidprint:"fld472L1TCExportPrint",formctrlidexport:"fld472L1TCExportTable",formctrlidrefresh:"fld472L1TCExportRefresh",title:ft("472"),data:L,exportData:Ot,Items:it,columnIndex:nt,TableVisibleItem:Oe,userGridViewFormID:P,TableTotalCount:F,triggerApi:t=>{((t,l,n,c,i)=>{if(0===F)return Fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;Fe.loading(!0);let r=g.v.Api+"FP472S3/",o={data:{p1:t&&t.PPMCreationOccupantDetIDPK?t.PPMCreationOccupantDetIDPK:null,p2:t&&t.PPMOccupantDetCode?t.PPMOccupantDetCode:null,p3:t&&t.PPMOccupantName?t.PPMOccupantName:null,p4:t&&t.PPMOccupContactNo?t.PPMOccupContactNo:null,p5:t&&t.PPMOccupEmail?t.PPMOccupEmail:null,p6:t&&t.PPMOccupantAddress?t.PPMOccupantAddress:null,p7:t&&t.PPMOccupantDate?t.PPMOccupantDate:null,p8:t&&t.PPMOccupantDateType?t.PPMOccupantDateType:null,p9:t&&t.PPMOccupantDateBetween?t.PPMOccupantDateBetween:null,p10:null,p11:t&&t.PPMOccupantRating?t.PPMOccupantRating:null,p12:Le?"1":"0",p13:null,p14:e.parentId?Number(e.parentId):0,p15:t&&t.IsActive,p16:null,p17:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p18:t&&t.CreatedTtm?t.CreatedTtm:null,p19:t&&t.CreatedTtmType?t.CreatedTtmType:null,p20:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p21:null,p22:t&&t.ContractID?t.ContractID:null,p23:t&&t.ContractCode?t.ContractCode:null,p24:t&&t.ContractName?t.ContractName:null,p25:t&&t.LocalityID?t.LocalityID:null,p26:t&&t.LocalityCode?t.LocalityCode:null,p27:t&&t.LocalityName?t.LocalityName:null,p28:t&&t.BuildingID?t.BuildingID:null,p29:t&&t.BuildingCode?t.BuildingCode:null,p30:t&&t.BuildingName?t.BuildingName:null,p31:t&&t.FloorID?t.FloorID:null,p32:t&&t.FloorCode?t.FloorCode:null,p33:t&&t.FloorName?t.FloorName:null,p34:t&&t.SpotID?t.SpotID:null,p35:t&&t.SpotCode?t.SpotCode:null,p36:t&&t.SpotName?t.SpotName:null,p37:t&&t.DivisionID?t.DivisionID:null,p38:t&&t.DivisionCode?t.DivisionCode:null,p39:t&&t.DivisionName?t.DivisionName:null,p40:t&&t.DisciplineID?t.DisciplineID:null,p41:t&&t.DisciplineCode?t.DisciplineCode:null,p42:t&&t.DisciplineName?t.DisciplineName:null,p43:t&&t.FrequencyID?t.FrequencyID:null,p44:t&&t.FrequencyCode?t.FrequencyCode:null,p45:t&&t.FrequencyName?t.FrequencyName:null,p46:t&&t.AssetID?t.AssetID:null,p47:t&&t.EquipmentName?t.EquipmentName:null,p48:t&&t.EquipmentRefNo?t.EquipmentRefNo:null,p49:t&&t.AssetBarcode?t.AssetBarcode:null,p50:t&&t.AssetTagNo?t.AssetTagNo:null,p51:t&&t.EmployeeID?t.EmployeeID:null,p52:t&&t.EmployeeCode?t.EmployeeCode:null,p53:t&&t.FirstName?t.FirstName:null,p54:t&&t.EmpContactNo1?t.EmpContactNo1:null,p55:t&&t.EmpEmailOfficial?t.EmpEmailOfficial:null,p56:t&&t.PPMBusinessFlowID?t.PPMBusinessFlowID:null,p57:t&&t.BriefDetails?t.BriefDetails:null,p58:t&&t.FlowCode?t.FlowCode:null,p59:t&&t.FlowDisplayName?t.FlowDisplayName:null,p60:t&&t.PPMFixonBusinessFlowID?t.PPMFixonBusinessFlowID:null,p61:t&&t.FixonBusinessFlowName?t.FixonBusinessFlowName:null,p62:t&&t.PPMFixonBusinessFlowCode?t.PPMFixonBusinessFlowCode:null,p63:t&&t.PPMStageID?t.PPMStageID:null,p64:t&&t.PPMStageName?t.PPMStageName:null,p65:t&&t.StageSeqNo?t.StageSeqNo:null,p66:t&&t.WorkOrder?t.WorkOrder:null,p67:t&&t.WoDateTime?t.WoDateTime:null,p68:t&&t.WoDateTimeType?t.WoDateTimeType:null,p69:t&&t.WoDateTimeBetween?t.WoDateTimeBetween:null,p70:T.current,p71:F,p72:Le?"DraftPPMCreationOccupantDetID":"PPMCreationOccupantDetID",p73:null,p74:null,p75:localStorage.getItem("UserGroupID"),p76:localStorage.getItem("userid")}};Fe.loading(!1),Fe.alert({open:!0,color:"success",message:[`${ft(472)} - ${i.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,s.Z)(r,o,we.token[0],i).then((e=>{(0,le.PDF_Excel_Generate)(e,Fe,it,k,a,i)}))})(de,Z.column,0,0,t)},Refresh:()=>{De(""),x({current:1,pageSize:100}),u.current.clearItem(),we.IsDraft?Ft({current:1,pageSize:100},Ae,"DraftPPMCreationOccupantDetID"):Ft({current:1,pageSize:100},Ae,"PPMCreationOccupantDetID")},disabledPrint:!we.AccessRights.IsPrint,disabledExport:!we.AccessRights.IsExport,ref:a,iconinfo:"displayNone"}),!Le&&!he&&!E&&n().createElement("div",{className:"buttoncard",onClick:()=>ut(!pt)},n().createElement("span",null,pt?n().createElement(d.ZP,{disableFocusListener:!0,title:Et("Less"),placement:"top"},n().createElement("span",{id:"fld472L1TCLess"},n().createElement($.ldB,{className:"tableFilterColumnIcon"}))):n().createElement(d.ZP,{disableFocusListener:!0,title:Et("More"),placement:"top"},n().createElement("span",{id:"fld472L1TCMore"},n().createElement($.ilJ,{className:"tableFilterColumnIcon"}))))),pt?n().createElement("div",{className:"EntryHeaderMore"},n().createElement("div",{style:{display:"flex"}},he||!We?null:E||!we.AccessRights.IsAdd||Le?"":n().createElement("div",null,n().createElement("div",{frmctrlid:"fld472L1TCFilterDataIsAdd",id:"PPMCreationOccupantDetailscoldiv",className:"buttoncard",onClick:()=>{Fe.EditClose(!0),ge?(document.getElementById("PPMCreationOccupantDetailsFilterDiv").style.width="0%",document.getElementById("PPMCreationOccupantDetailsTabDiv").style.width="100%",document.getElementById("PPMCreationOccupantDetailsFilterDiv").style.display="none",document.getElementById("PPMCreationOccupantDetailscoldiv").style.width="fit-content",document.getElementById("PPMCreationOccupantDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",Ce(!1)):(document.getElementById("PPMCreationOccupantDetailsFilterDiv").style.width="25%",document.getElementById("PPMCreationOccupantDetailsTabDiv").style.width="75%",document.getElementById("PPMCreationOccupantDetailsFilterDiv").style.display="block",document.getElementById("PPMCreationOccupantDetailsfildiv").style.width="fit-content",document.getElementById("PPMCreationOccupantDetailsfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("PPMCreationOccupantDetailscoldiv").style.width="fit-content",document.getElementById("PPMCreationOccupantDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",Ce(!0)),ue(!1)}},n().createElement(d.ZP,{title:Et("Manage Columns"),placement:"top"},n().createElement("div",null,n().createElement(te.gYA,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},Et("Manage Columns")))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!E&&We&&!he&&!Le&&n().createElement("div",null,n().createElement("div",{id:"PPMCreationOccupantDetailscoldiv",className:"buttoncard",onClick:()=>{je?He(!1):(He(!0),Nt({current:1,pageSize:100}))}},n().createElement(d.ZP,{title:Et("TableScrollData"),placement:"top"},n().createElement("div",{id:"fld472L1TCTableScrollData"},n().createElement(oe.Z,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},Et("Table Scroll Data")))),!he&&Le?n().createElement("div",{className:"ListHeader displayFlex",onClick:()=>{Fe.hideAddBtn(!1),Fe.ExpandEntry(),Ft({current:1,pageSize:100},Ae,"PPMCreationOccupantDetID"),ze(!1),De(""),be({type:"IsDraft",payload:!1}),x({current:1,pageSize:10})}},n().createElement(d.ZP,{title:Et("List"),placement:"top"},n().createElement("div",{id:"fld472L1TCList"},n().createElement(J.u1R,{className:"backButtonList"}))),n().createElement("p",{className:"DraftP"},Et("Drafts")," ",F)):!E&&!he&&we.AccessRights.IsAdd&&n().createElement("div",null,n().createElement(o.Z,{color:"secondary",className:"badge",max:999,badgeContent:b,showZero:!0},n().createElement("div",{id:"fld472L1TCDraftsIcon",className:"buttoncard",style:{marginLeft:"-10px"},onClick:()=>{b>0?(x({current:1,pageSize:100}),N(0),Fe.clear(),De(""),be({type:"Add",payload:!1}),Ft({current:1,pageSize:10},Ae,"DraftPPMCreationOccupantDetID"),ze(!0),be({type:"IsDraft",payload:!0}),Ce(!1),Ve(!0),document.getElementById("PPMCreationOccupantDetailsFilterDiv").style.width="0%",document.getElementById("PPMCreationOccupantDetailsTabDiv").style.width="100%",document.getElementById("PPMCreationOccupantDetailsFilterDiv").style.display="none",x({current:1,pageSize:100}),Se(!1)):Fe.alert({open:!0,color:"warning",message:[Et("There is no Record Found")]})}},n().createElement(d.ZP,{title:Et("Drafts"),placement:"top"},n().createElement("div",null,n().createElement(Q.rNm,{className:"DraftIcon"}))),n().createElement("span",{className:"displayNoneDraft",style:{fontSize:"0.815rem",fontWeight:"500",color:"#14181F"}},Et("Drafts"))))))):""),!Le&&!E&&n().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},he||Le?null:n().createElement("div",null,n().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"}},n().createElement("div",{className:"b2",id:"button-11"},n().createElement("div",{className:Ge?"buttonList":"buttonGrid",id:"fld472L1TCListView",onClick:()=>{Ve(!0),st(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement($.umT,null)),n().createElement("span",null,Et("List"))),n().createElement("div",{className:Ge||ot?"buttonGrid":"buttonList",id:"fld472L1TCCardView",onClick:()=>{Ve(!1),st(!1)}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(I.aCJ,null)),n().createElement("span",null,Et("Card"))),n().createElement("div",{className:ot?"buttonList":"buttonGrid",id:"fld472L1TCTileView",onClick:()=>{st(!0),Ve(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(X.f_H,null)),n().createElement("span",null,Et("Tile"))))))),he?null:je?e.IsCollapse?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(j.Z,{style:{color:"#777"},id:"fld472L1TCTableTopPagination",rowsPerPageOptions:[],component:"div",count:Number(et),page:v,onPageChange:(e,t)=>{N(t),Nt({current:t+1,pageSize:at.pageSize}),lt({current:t+1,pageSize:at.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(W.Z,{count:Qe,color:"primary",page:at.current,onChange:(e,t)=>{lt({current:t,pageSize:at.pageSize}),Xe(t),Nt({current:t,pageSize:at.pageSize})}}),n().createElement("div",null,n().createElement(G.Z,{className:"BootstrapInputStyle",value:at.pageSize,frmctrlid:"fld472L1TCSelectPagination",onChange:e=>{lt({current:1,pageSize:e.target.value}),Nt({current:1,pageSize:e.target.value})}},n().createElement(q.Z,{value:10},"10"),n().createElement(q.Z,{value:20},"20"),n().createElement(q.Z,{value:50},"50"),n().createElement(q.Z,{value:100},"100"))),We&&n().createElement("p",{className:"per-page"},"/ ",Et("RowperpageOf")," (",et,")")):e.IsCollapse?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(j.Z,{style:{color:"#777"},id:"fld472L1TCTablePagination",rowsPerPageOptions:[],component:"div",count:Number(F),page:v,onPageChange:(e,t)=>{N(t),Ft({current:t+1,pageSize:T.pageSize},Ae,Le?"DraftPPMCreationOccupantDetID":"PPMCreationOccupantDetID",Le&&"DraftPage"),x({current:t+1,pageSize:T.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(W.Z,{count:h,siblingCount:0,color:"primary",page:T.current,onChange:(e,t)=>{if(x({current:t,pageSize:T.pageSize}),Le)Ft({current:t,pageSize:T.pageSize},Te,"DraftPPMCreationOccupantDetID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";Pe.length>0?wt(Pe,{current:t,pageSize:T.pageSize}):Ft({current:t,pageSize:T.pageSize},Te,"PPMCreationOccupantDetID")}}}),n().createElement("div",null,n().createElement(G.Z,{className:"BootstrapInputStyle",value:T.pageSize,id:"fld472L1TCSelectPaging",onChange:e=>{x({current:1,pageSize:e.target.value}),Le?Ft({current:1,pageSize:e.target.value},Te,"DraftPPMCreationOccupantDetID","DraftPage"):Pe.length>0?wt(Pe,{current:1,pageSize:e.target.value}):Ft({current:1,pageSize:e.target.value},Te,"PPMCreationOccupantDetID")}},n().createElement(q.Z,{value:10},"10"),n().createElement(q.Z,{value:20},"20"),n().createElement(q.Z,{value:50},"50"),n().createElement(q.Z,{value:100},"100"))),We&&n().createElement("p",{className:"per-page"},"/ ",Et("RowperpageOf")," (",F,") "))),n().createElement("div",{id:"PPMCreationOccupantDetails-TableBody",className:"displayFlex padding0",style:{height:e.tableview?"auto":"66vh",overflow:"auto"}},n().createElement("div",{id:"PPMCreationOccupantDetailsFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},pe&&n().createElement(K,{parentId:e.parentId,searchData:e=>{me(e||yt),Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)))},formID:P,data:()=>{},visibleData:()=>{},token:we.token[0],CloseBtnClk:()=>St(),userGrid:gt,msg:(e,t)=>Fe.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{tableRefresh()}}),ge&&n().createElement(V.Z,{Refresh:e=>{Ft({current:1,pageSize:100},Ae,"PPMCreationOccupantDetID")},frmctrlid:"fld472L1TCTableColumnOrder",loading:e=>Fe.loading(e),className:"dragCheckboxDivL1",AltMsg:(e,t)=>Fe.alert({open:!0,color:t,message:[e]}),select:ge,userID:m,userGridViewFormID:P,saved:(e,t)=>{e&&bt(t),Ct(t),be({type:"showTableview",payload:t})},Token:we.token[0]})),n().createElement("div",{id:"PPMCreationOccupantDetailsTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:e.tableview?"auto":"66vh"}},Ge?n().createElement(At,null):n().createElement(H.Z,{frmctrlid:"fld472L1TCExpandedCardDual",data:ne,id:"PPMCreationOccupantDetails",title:"PPMOccupantName",cardTile:!!ot,visibleitem:Oe,gridCountmdlg:4,gridCountxssm:6,onDoubleClick:(e,t)=>{E?Fe.select(e):("edit"==t?(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:Le}),be({type:"ShowDetail",payload:!1}),Fe.Expanded(!0)):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:Le}),be({type:"ShowDetail",payload:!0}),Fe.Expanded(!0),Fe.viewtoggle()),pe?ue(!0):ge?Ce(!0):(Ce(!1),Ce(!1))),Fe.hideAddBtn(!0)}})))))))}));var pe=a(37148),ue=a(29800),de=(a(10966),a(21392),a(26537)),me=a(44528),Pe=a(99090),De=a(1695),ge=a(61924),Ce=a.n(ge),ye=a(40826),Me=a(55490),Oe=a(92371);const Ie={EnterKeyValues:{PPMCreationOccupantDetails:["PPMOccupantName","PPMOccupContactNo","PPMOccupEmail","PPMOccupantRating","PPMOccupantRemarks","PPMOccupantDetCode","PPMOccupantAddress","PPMOccupantDate","WorkOrder"]},Label:{PPMCreationOccupantDetails:{PPMOccupantName:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupContactNo:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupEmail:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupantRating:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupantRemarks:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupantDetCode:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupantAddress:["PPMOccupantDetCode","PPMOccupantName"],PPMOccupantDate:["PPMOccupantDetCode","PPMOccupantName"],PPMCreationAssetID:["PPMOccupantDetCode","PPMOccupantName"]}},LabelHeader:{PPMCreationOccupantDetails:{PPMOccupantName:["PPM Occupant Det Code","Occupant Name"],PPMOccupContactNo:["PPM Occupant Det Code","Occupant Name"],PPMOccupEmail:["PPM Occupant Det Code","Occupant Name"],PPMOccupantRating:["PPM Occupant Det Code","Occupant Name"],PPMOccupantRemarks:["PPM Occupant Det Code","Occupant Name"],PPMOccupantDetCode:["PPM Occupant Det Code","Occupant Name"],PPMOccupantAddress:["PPM Occupant Det Code","Occupant Name"],PPMOccupantDate:["PPM Occupant Det Code","Occupant Name"],PPMCreationAssetID:["PPMOccupantDetCode","PPMOccupantName"]}},Property:{PPMCreationOccupantDetails:{PPMOccupantName:{id:"fld472_9586",labelID:"PPMOccupantName",maxLength:"100",labelname:"Occupant Name",frmctrlid:"fld472_9586",frmctrlidname:"PPMOccupantName",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupContactNo:{id:"fld472_9587",labelID:"PPMOccupContactNo",maxLength:"15",labelname:"Mobile No.",frmctrlid:"fld472_9587",frmctrlidname:"PPMOccupContactNo",type:"number",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupEmail:{id:"fld472_9588",labelID:"PPMOccupEmail",maxLength:"50",labelname:"Email ID",frmctrlid:"fld472_9588",frmctrlidname:"PPMOccupEmail",type:"email",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupantRating:{id:"fld472_9592",labelID:"PPMOccupantRating",maxLength:"5",labelname:"Rating",frmctrlid:"fld472_9592",frmctrlidname:"PPMOccupantRating",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupantRemarks:{id:"fld472_9591",labelID:"PPMOccupantRemarks",maxLength:"100",labelname:"Remarks",frmctrlid:"fld472_9591",frmctrlidname:"PPMOccupantRemarks",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupantDetCode:{id:"fld472_9585",labelID:"PPMOccupantDetCode",maxLength:"50",labelname:"PPM Occupant Det Code",frmctrlid:"fld472_9585",frmctrlidname:"PPMOccupantDetCode",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupantAddress:{id:"fld472_9589",labelID:"PPMOccupantAddress",maxLength:"100",labelname:"PPM Occupant Address",frmctrlid:"fld472_9589",frmctrlidname:"PPMOccupantAddress",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMOccupantDate:{id:"fld472_9590",labelID:"PPMOccupantDate",maxLength:"",labelname:"PPM Occupant Date",frmctrlid:"fld472_9590",frmctrlidname:"PPMOccupantDate",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},PPMCreationAssetID:{id:"fld472_9593",clearID:"PPMCreationOccupantDetailsWorkOrderClear",type:"select",labelID:"PPMCreationAssetIDPK",labelname:"PPMCreationAsset",fielddisplayname:"WorkOrder",foreignName:[],createEasy:!1,advanceSearch:!0,disabled:!1,mandatory:!1}}},SubForms:{},POPLabel:{PPMCreationOccupantDetails:{PPMCreationAssetID:["ContractID","BuildingID","AssetID","DisciplineID","DivisionID","FloorID","FrequencyID","SpotID"]}}};var Ee=a(6562),fe=a(45155),ve=a(79352),Ne=a(49174),he=(a(38773),a(19089),a(16233)),Se=a.n(he);a(82729),a(75355),a(11107);const Fe={PPMCreationOccupantDetIDPK:"",PPMOccupantDetCode:"",PPMOccupantName:"",PPMOccupContactNo:"",PPMOccupEmail:"",PPMOccupantAddress:"",PPMOccupantDate:"",PPMOccupantDateType:"",PPMOccupantDateBetween:"",PPMOccupantRemarks:"",PPMOccupantRating:"",IsDraft:!1,Remarks:"",PPMCreationAssetID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractID:null,ContractCode:"",ContractName:"",LocalityID:null,LocalityCode:"",LocalityName:"",BuildingID:null,BuildingCode:"",BuildingName:"",FloorID:null,FloorCode:"",FloorName:"",SpotID:null,SpotCode:"",SpotName:"",DivisionID:null,DivisionCode:"",DivisionName:"",DisciplineID:null,DisciplineCode:"",DisciplineName:"",FrequencyID:null,FrequencyCode:"",FrequencyName:"",AssetID:null,EquipmentName:"",EquipmentRefNo:"",AssetBarcode:"",AssetTagNo:"",EmployeeID:null,EmployeeCode:"",FirstName:"",EmpContactNo1:"",EmpEmailOfficial:"",PPMBusinessFlowID:null,BriefDetails:"",FlowCode:"",FlowDisplayName:"",PPMFixonBusinessFlowID:null,FixonBusinessFlowName:"",PPMFixonBusinessFlowCode:"",PPMStageID:null,PPMStageName:"",StageSeqNo:"",WorkOrder:"",WoDateTime:"",WoDateTimeType:"",WoDateTimeBetween:"",Type:"PPMCreationOccupantDetID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")},we=(0,l.forwardRef)(((e,t)=>{const a=(0,c.useSelector)((e=>e.form)),[o,p]=(0,l.useState)(!1),[u,d]=(0,l.useState)(!0),[m,C]=(0,l.useState)(!1),[y,O]=(0,l.useState)(!1),[I,E]=(0,l.useState)(""),[v,S]=(0,l.useState)(!1),[F,w]=(0,l.useState)([]),[b,A]=(0,l.useState)(null),[T,x]=(0,l.useReducer)(Oe.Z,Fe),[B,k]=(0,l.useState)(!1),[L,Z]=(0,l.useState)([]),[z,K]=(0,l.useState)(!1),_=(0,l.useContext)(e.context?e.context:Re),{cstate:W,cdispatch:q}=e.ContextApi?e.ContextApi:Ze(),[G,V]=(0,l.useState)(0),[U,j]=(0,l.useState)(""),H=(0,l.useRef)(null),[$,J]=Se()("472"),[Q,X]=(0,l.useState)(!0),[ee,te]=(0,l.useState)(!0),[ae,le]=(0,l.useState)(""),[ne,ce]=(0,l.useState)(!1);let ie=(0,M.Z)();const[re,oe]=(0,l.useState)({}),se=e=>ie[e]?ie[e]:e,ue=t=>W.language?.[t]?W.language[t]:e.createEasy?re?.[t]:t;(0,l.useEffect)((()=>{W.PrimaryId&&V(Number(W.PrimaryId))}),[W.PrimaryId]),(0,l.useEffect)((()=>{be()}),[]),(0,l.useEffect)((()=>{be()}),[e.parentId]),(0,l.useEffect)((()=>{W.editData.length>0?(we(W.editData[0],""),C(!0)):W.Add&&(be(),C(!0))}),[W.editData]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),oe(Object.assign({},...t))}($)}),[$]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{be()},CreateEasyProps:(e=!0,t)=>{J(!0),t?(Le(t),C(e)):(be(),C(e))},AddOpen:e=>{be(),C(!0)}})));const ge=e=>e?e.split("-").reverse().join("-"):null,he=e=>{if(e){let t=ge(e);return"Invalid Date"!=new Date(t)?(0,ye.format)(new Date(t),"yyyy-MM-dd"):e}return null},we=(t,a)=>{Object.keys(t).forEach((function(e){0==t[e]&&(t[e]=null)})),O(t.IsDraft),"SetDefaultPPMCreationOccupantDetID"==a?j(t.PPMCreationOccupantDetIDPK):(V(e.primid?Number(e.primid):t.PPMCreationOccupantDetIDPK?t.PPMCreationOccupantDetIDPK:0),q({type:"PrimaryId",payload:t.PPMCreationOccupantDetIDPK})),x({type:"text",name:"PPMOccupantName",value:t.PPMOccupantName?t.PPMOccupantName:""}),x({type:"text",name:"PPMOccupContactNo",value:t.PPMOccupContactNo?t.PPMOccupContactNo:""}),x({type:"text",name:"PPMOccupEmail",value:t.PPMOccupEmail?t.PPMOccupEmail:""}),x({type:"number",name:"PPMOccupantRating",number:t.PPMOccupantRating}),x({type:"text",name:"PPMOccupantRemarks",value:t.PPMOccupantRemarks?t.PPMOccupantRemarks:""}),x({type:"text",name:"PPMOccupantDetCode",value:t.PPMOccupantDetCode?t.PPMOccupantDetCode:""}),x({type:"text",name:"PPMOccupantAddress",value:t.PPMOccupantAddress?t.PPMOccupantAddress:""}),x({type:"text",name:"PPMOccupantDate",value:t.PPMOccupantDate?ge(t.PPMOccupantDate):null}),x({type:"number",name:"PPMCreationAssetID",number:t.PPMCreationAssetID?Number(t.PPMCreationAssetID):0}),x({type:"text",name:"WorkOrder",value:t.WorkOrder}),t.IsDraft?d(!0):d(!("1"!=t.IsActive&&!t.IsActive))},be=()=>{w([]),V(0),j(""),e.createEasy||_.resetImg(),q({type:"PrimaryId",payload:""}),x({type:"text",name:"PPMOccupantName",value:""}),x({type:"text",name:"PPMOccupContactNo",value:""}),x({type:"text",name:"PPMOccupEmail",value:""}),x({type:"number",name:"PPMOccupantRating",number:0}),x({type:"text",name:"PPMOccupantRemarks",value:""}),x({type:"text",name:"PPMOccupantDetCode",value:""}),x({type:"text",name:"PPMOccupantAddress",value:""}),x({type:"text",name:"PPMOccupantDate",value:""}),x({type:"text",name:"PPMCreationAssetID",value:null}),x({type:"text",name:"WorkOrder",value:""}),document.getElementById("PPMCreationOccupantDetailsWorkOrderClear")&&document.getElementById("PPMCreationOccupantDetailsWorkOrderClear").click(),d(!0),E(""),X(!0),te(!0)},Ae=t=>{_.loading(!0),_.ConfirmAlert(null);const a=g.v.Api+"FP472S2/",l={data:[{p1:"SetDefaultPPMCreationOccupantDetID"==t?"NORECORDS"!=U&&U?U:0:G,p2:ze(T.PPMOccupantDetCode),p3:ze(T.PPMOccupantName),p4:ze(T.PPMOccupContactNo),p5:ze(T.PPMOccupEmail),p6:ze(T.PPMOccupantAddress),p7:T.PPMOccupantDate?he(T.PPMOccupantDate):null,p8:ze(T.PPMOccupantRemarks),p9:T.PPMOccupantRating?Number(T.PPMOccupantRating):0,p10:!1,p11:"SetDefaultPPMCreationOccupantDetID"==t?"SetDefault":null,p12:e.parentId?Number(e.parentId):T.PPMCreationAssetID?T.PPMCreationAssetID:0,p13:u,p14:"SetDefaultPPMCreationOccupantDetID"==t,p15:localStorage.getItem("userid"),p16:N()().format("YYYY-MM-DD hh:mm:ss"),p17:localStorage.getItem("userid"),p18:N()().format("YYYY-MM-DD hh:mm:ss")}]};(0,de.Z)(0).then((t=>{(0,s.Z)(a,l,t).then((t=>{const a=t.Output[0].status;let l=t.Output[0].Data,n=new Array,c=new Array;"200"===a.code?(l.map((e=>{e&&(n.push(e.IsAlert),c.push(e.AlertMessage),e.AlertMessage)})),n.some((e=>"1"==e))?(_.alert({open:!0,color:"warning",message:c}),_.loading(!1)):(t=>{X(!0),te(!0),_.loading(!0),_.ConfirmAlert(null),q({type:"IsDraft",payload:!1});const a=g.v.Api+"FP472S1/",l={data:[{p1:G,p2:ze(T.PPMOccupantDetCode),p3:ze(T.PPMOccupantName),p4:ze(T.PPMOccupContactNo),p5:ze(T.PPMOccupEmail),p6:ze(T.PPMOccupantAddress),p7:T.PPMOccupantDate?he(T.PPMOccupantDate):null,p8:ze(T.PPMOccupantRemarks),p9:T.PPMOccupantRating?Number(T.PPMOccupantRating):0,p10:!1,p11:null,p12:e.parentId?Number(e.parentId):T.PPMCreationAssetID?T.PPMCreationAssetID:0,p13:u,p14:!1,p15:localStorage.getItem("userid"),p16:N()().format("YYYY-MM-DD hh:mm:ss"),p17:localStorage.getItem("userid"),p18:N()().format("YYYY-MM-DD hh:mm:ss")}]};(0,de.Z)(0).then((t=>{(0,h.Z)(a,l,t).then((t=>{const a=t[0].status;200==a.code?(_.alert({open:!0,color:"success",message:[a.message]}),document.getElementById("overlayimgAttPPMCreationOccupantDetails"),_.loading(!1),q({type:"PrimaryId",payload:t[0].Data.IDPK}),e.createEasy||(_.RefreshTable(),_.attachmentSave(t[0].Data.IDPK)),be(),W.AccessRights.IsApproval&&_.Approval(!0),document.getElementById("overlayimgAttPPMCreationOccupantDetails")&&(document.getElementById("overlayimgAttPPMCreationOccupantDetails").style.width="0%",document.getElementById("overlayimgAttPPMCreationOccupantDetails").style.display="none",document.getElementById("divPPMCreationOccupantDetails-Entry").style.width="100%"),e.createEasy||(document.getElementById("PPMCreationOccupantDetails-MainTable").style.display="block")):(_.alert({open:!0,color:"warning",message:[a.message]}),_.loading(!1)),C(!0)}))}))})()):(_.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),_.loading(!1))}))}))};function Te(t,a,l,n){if(!(W.count>0))return _.alert({open:!0,color:"warning",message:[se("Please save atleast one record")]}),!1;if(!((()=>{const e={...T};return["IsActive","IsDefault","UserGroupKey","UserAccessKey","DeleStat","Type"].map((t=>{delete e[t]})),Object.keys(e).filter((t=>e[t]))})().length>0))return _.alert({open:!0,color:"warning",message:[se("Please enter the primary fields")]}),!1;{X(!0),te(!0),_.loading(!0),_.ConfirmAlert(null),q({type:"IsDraft",payload:!1});const a=g.v.Api+"FP472S1/",l={data:[{p1:"SetDefaultPPMCreationOccupantDetID"==n?"NORECORDS"!=U&&U?U:0:G,p2:ze(T.PPMOccupantDetCode),p3:ze(T.PPMOccupantName),p4:ze(T.PPMOccupContactNo),p5:ze(T.PPMOccupEmail),p6:ze(T.PPMOccupantAddress),p7:T.PPMOccupantDate?he(T.PPMOccupantDate):null,p8:ze(T.PPMOccupantRemarks),p9:T.PPMOccupantRating?Number(T.PPMOccupantRating):0,p10:!0,p11:"SetDefaultPPMCreationOccupantDetID"==n?"SetDefault":null,p12:e.parentId?Number(e.parentId):T.PPMCreationAssetID?T.PPMCreationAssetID:0,p13:!1,p14:"SetDefaultPPMCreationOccupantDetID"==n,p15:localStorage.getItem("userid"),p16:N()().format("YYYY-MM-DD hh:mm:ss"),p17:localStorage.getItem("userid"),p18:N()().format("YYYY-MM-DD hh:mm:ss")}]};(0,de.Z)(0).then((n=>{(0,h.Z)(a,l,n).then((a=>{const l=a[0].status;200==l.code?(t?_.alert({open:!0,color:"warning",message:[se("Deleted Successfully")]}):_.alert({open:!0,color:"success",message:[se("Saved to Draft")]}),_.loading(!1),_.attachmentSave(a[0].Data.IDPK),be(),_.RefreshTable(),e.clrImgstate(!0)):(_.alert({open:!0,color:"warning",message:[l.message]}),_.loading(!1))}))}))}}const xe=(t,l,n)=>{const c=g.v.Api+"FP472S3/",i={data:{p1:null,p2:"PPMOccupantDetCode"==n&&l?"%"+l+"%":null,p3:"PPMOccupantName"==n&&l?"%"+l+"%":null,p4:"PPMOccupContactNo"==n&&l?"%"+l+"%":null,p5:"PPMOccupEmail"==n&&l?"%"+l+"%":null,p6:"PPMOccupantAddress"==n&&l?"%"+l+"%":null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:a.PPMCreationAssetPPMCreationAssetID?a.PPMCreationAssetPPMCreationAssetID:"0",p15:e.Dialogview?"1":null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:null,p51:null,p52:null,p53:null,p54:null,p55:null,p56:null,p57:null,p58:null,p59:null,p60:null,p61:null,p62:null,p63:null,p64:null,p65:null,p66:null,p67:null,p68:null,p69:null,p70:t,p71:10,p72:"PPMCreationOccupantDetID",p73:null,p74:null,p75:localStorage.getItem("UserGroupID"),p76:localStorage.getItem("userid")}},r={data:Object.keys(i.data).slice(0,Object.keys(i.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(i.data).length-8?i.data[t]:null,e)),{})};k(!0),(0,s.Z)(c,"ClearAll"==n?r:i,W.token[0]).then((e=>{const a=e.Output.status.code,l=e.Output.data;if("200"==a){const e=l.length;1==t?("PPMOccupantDetCode"==n&&X(e>0),"PPMOccupantAddress"==n&&te(e>0),Z(l)):("PPMOccupantDetCode"==n&&X(!0),"PPMOccupantAddress"==n&&te(!0),Z(L.concat(l))),k(!1)}else _.alert({open:!0,color:"warning",message:[e.Output.status.message]}),k(!1)}))},Be=(0,l.useCallback)((async(e,t,a)=>{"text"==a?x({type:a,name:t,value:e}):"number"==a?x({type:a,name:t,number:Number(e)}):"boolean"==a?x({type:a,name:t,boolean:e}):"date"==a&&x({type:"text",name:t,value:e})}),[T]),ke=e=>{_.ConfirmAlert(n().createElement(Ce(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Le(e),onCancel:()=>_.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:se("Yes"),cancelBtnText:se("No"),showCancel:!0},se("Do you want to update this record?")))};function Le(e){_.ConfirmAlert(null),O(e.IsDraft),V(Number(e.PPMCreationOccupantDetIDPK)?Number(e.PPMCreationOccupantDetIDPK):0),x({type:"text",name:"PPMOccupantName",value:e.PPMOccupantName?e.PPMOccupantName:""}),x({type:"number",name:"PPMOccupContactNo",number:e.PPMOccupContactNo?Number(e.PPMOccupContactNo):0}),x({type:"text",name:"PPMOccupEmail",value:e.PPMOccupEmail?e.PPMOccupEmail:""}),x({type:"text",name:"PPMOccupantRating",value:e.PPMOccupantRating?e.PPMOccupantRating:""}),x({type:"text",name:"PPMOccupantRemarks",value:e.PPMOccupantRemarks?e.PPMOccupantRemarks:""}),x({type:"text",name:"PPMOccupantDetCode",value:e.PPMOccupantDetCode?e.PPMOccupantDetCode:""}),x({type:"text",name:"PPMOccupantAddress",value:e.PPMOccupantAddress?e.PPMOccupantAddress:""}),x({type:"text",name:"PPMOccupantDate",value:e.PPMOccupantDate?ge(e.PPMOccupantDate):null}),x({type:"number",name:"PPMCreationAssetID",number:e.PPMCreationAssetID?Number(e.PPMCreationAssetID):0}),x({type:"text",name:"WorkOrder",value:e.WorkOrder?e.WorkOrder:""})}const ze=e=>"string"==typeof e?e.trim():e;return n().createElement("div",null,n().createElement(i.Z,{expanded:m,onChange:e=>{}},n().createElement(Y.Z,null,n().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},m&&n().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"6px",padding:"0px 4px 0px 0px"}},n().createElement("div",{className:"HeadTxt",title:"10.0.0.59-3:08:17 PM-18-7[472]"}," ",se("Add "),ue("472")),n().createElement("div",{className:"displayFlex EntryHeaderBtn"},n().createElement("div",{className:"GridAlign"},n().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},n().createElement(Ee.Z,{row:!0},n().createElement(R.Z,{labelPlacement:"bottom",id:"fld472L1ECEntryCheckbox",control:n().createElement(f.Z,{checked:"1"==u,onChange:e=>d(e.target.checked)}),label:se(1==u?"Active":"In Active")})))),!e.createEasy&&n().createElement("div",{className:"GridAlign",onClick:()=>{_.AttachExpand(!0)},id:"fld472L1ECIconButton"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement("div",{disableRipple:!0,disabled:!1},n().createElement(fe.Ypb,{className:"Iconstyles"}))),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,se("Attach")))),!G&&n().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{be()},id:"fld472L1ECClearBtn"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement(fe.pYJ,{className:"Iconstyles"})),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,se("Reset")))),"1"===y&&G&&n().createElement(Pe.Z,{frmctrlid:"fld472L1ECClearBtnIsDraft",disabled:!1,name:"Delete",onClick:()=>{Te("draftdel")}}),G&&"1"!==y||e.createEasy?null:W.AccessRights.IsAdd&&n().createElement("div",{className:"GridAlign",onClick:()=>{Te()},frmctrlid:"fld472L1ECDraftBtn"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement(ve.IcR,{className:"Iconstyles"})),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,se("Draft")))),W.AccessRights.IsAdd||W.AccessRights.IsEdit?n().createElement(De.Z,{frmctrlid:"fld472L1ECSaveBtnIsAdd",name:se(G?"Update":"Save"),disabled:!1,onClick:()=>{(t=>{if(!e.parentId||0==e.parentId)return _.alert({open:!0,color:"warning",message:[se("Please select the ")+" "+ue("PPMCreationAssetID")]}),!1;let a=/^([a-zA-Z0-9_.-])+\@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/.test(T.PPMOccupEmail);if(T.PPMOccupEmail&&!a)return _.alert({open:!0,color:"error",message:[se("Invalid")+" "+ue("PPMOccupEmail")]}),!1;_.ConfirmAlert(n().createElement(Ce(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:se("Are you sure?"),onConfirm:()=>Ae(),onCancel:()=>_.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:se("Yes"),cancelBtnText:se("Cancel"),showCancel:!0},se(G?"Do you want to Update?":"Do you want to Save?")))})()}}):null,!e.createEasy&&n().createElement(pe.Z,{frmctrlid:"fld472L1ECCloseBtn",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{be(),C(!1),_.EditClose(!0),_.hideAddBtn(!1),q({type:"Add",payload:!1})}}))))),n().createElement(r.Z,null,n().createElement("div",{id:"PPMCreationOccupantDetails-Main",className:"width100 displayFlex componentMainDiv cardDiv"},n().createElement("div",{id:"PPMCreationOccupantDetails-Detail",className:"detailCard detailDiv"},n().createElement("div",{id:"PPMCreationOccupantDetails-MainBody",className:"padding paddingLeft "},n().createElement("div",null,n().createElement(P.Z,{spacing:2},n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(me.Z,{json:Ie,"data-testid":T.PPMOccupantName,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupantName",tfLabel:ue("PPMOccupantName"),frmctrlid:"fld472_9586",fieldorder:"1",onChange:e=>{Be(e,"PPMOccupantName","text")},clear:e=>{e&&x({type:"text",name:"PPMOccupantName",value:""})},value:T.PPMOccupantName})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(me.Z,{json:Ie,"data-testid":T.PPMOccupContactNo,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupContactNo",tfLabel:ue("PPMOccupContactNo"),frmctrlid:"fld472_9587",fieldorder:"2",onChange:e=>{Be(e,"PPMOccupContactNo","number")},clear:e=>{e&&x({type:"number",name:"PPMOccupContactNo",number:0})},value:T.PPMOccupContactNo})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(me.Z,{json:Ie,"data-testid":T.PPMOccupEmail,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupEmail",tfLabel:ue("PPMOccupEmail"),onChange:e=>{x({type:"text",name:"PPMOccupEmail",value:e})},value:T.PPMOccupEmail,clear:e=>{e&&x({type:"text",name:"PPMOccupEmail",value:""})},frmctrlid:"fld472_9588",frmctrlidName:"PPMOccupEmail",fieldorder:"3"})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(me.Z,{json:Ie,"data-testid":T.PPMOccupantRating,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupantRating",tfLabel:ue("PPMOccupantRating"),frmctrlid:"fld472_9592",fieldorder:"4",onChange:e=>{Be(e,"PPMOccupantRating","text")},clear:e=>{e&&x({type:"text",name:"PPMOccupantRating",value:""})},value:T.PPMOccupantRating})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(me.Z,{json:Ie,"data-testid":T.PPMOccupantRemarks,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupantRemarks",tfLabel:ue("PPMOccupantRemarks"),frmctrlid:"fld472_9591",fieldorder:"1",onChange:e=>{Be(e,"PPMOccupantRemarks","text")},clear:e=>{e&&x({type:"text",name:"PPMOccupantRemarks",value:""})},value:T.PPMOccupantRemarks})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},n().createElement(Me.Z,{"data-testid":T.PPMOccupantDetCode,json:Ie,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupantDetCode",tfLabel:ue("PPMOccupantDetCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&ke(t),onClick:()=>{Q&&xe(1,"","ClearAll"),X(!0)},frmctrlid:"fld472_9585",frmctrlidName:"PPMOccupantDetCode",fieldorder:"1",data:L,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:L.length>0?L[0].TotalCount:0,onChange:(e,t)=>{Q&&xe(e,t,"PPMOccupantDetCode"),Be(t,"PPMOccupantDetCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||X(!0)},showList:Q,SideEntryView:!1,KeyBack:e=>{},value:T.PPMOccupantDetCode,loading:B,clear:e=>{e&&(x({type:"text",name:"PPMOccupantDetCode",value:""}),X(!0))}})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},n().createElement(Me.Z,{"data-testid":T.PPMOccupantAddress,json:Ie,SPName:"PPMCreationOccupantDetails",FieldName:"PPMOccupantAddress",tfLabel:ue("PPMOccupantAddress"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&ke(t),onClick:()=>{ee&&xe(1,"","ClearAll"),te(!0)},frmctrlid:"fld472_9589",frmctrlidName:"PPMOccupantAddress",fieldorder:"1",data:L,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:L.length>0?L[0].TotalCount:0,onChange:(e,t)=>{ee&&xe(e,t,"PPMOccupantAddress"),Be(t,"PPMOccupantAddress","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||te(!0)},showList:ee,SideEntryView:!1,KeyBack:e=>{},value:T.PPMOccupantAddress,loading:B,clear:e=>{e&&(x({type:"text",name:"PPMOccupantAddress",value:""}),te(!0))}})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},n().createElement(Ne.Z,{value:T.PPMOccupantDate,"data-testid":T.PPMOccupantDate,disabled:!1,onChange:e=>{Be(e,"PPMOccupantDate","date")},onErr:e=>{le(e)},label:ue("PPMOccupantDate"),frmctrlid:"fld472_9590",frmctrlidName:"PPMOccupantDate",fieldorder:"1"})),n().createElement(D.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},n().createElement(Me.Z,{json:Ie,id:T.PPMCreationAssetID,"data-testid":T.PPMCreationAssetID,value:T.WorkOrder,SPName:"PPMCreationOccupantDetails",FieldName:"PPMCreationAssetID",tfLabel:ue("PPMCreationAssetID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>Be(e,"PPMCreationAssetID","select"),onChange:(t,a)=>{((t,a,l,n,c,i)=>{const r=g.v.Api+"FP472S3/",o={data:{p1:null,p2:null,p3:null,p4:null,p5:null,p6:null,p7:T.PPMOccupantDate?T.PPMOccupantDate:null,p8:null,p9:null,p10:null,p11:a?"%"+a+"%":null,p12:null,p13:null,p14:e.parentId?Number(e.parentId):0,p15:e.Dialogview?"1":null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:"0"==T.ContractID?null:T.ContractID,p23:a?"%"+a+"%":null,p24:a?"%"+a+"%":null,p25:"0"==T.LocalityID?null:T.LocalityID,p26:a?"%"+a+"%":null,p27:a?"%"+a+"%":null,p28:"0"==T.BuildingID?null:T.BuildingID,p29:a?"%"+a+"%":null,p30:a?"%"+a+"%":null,p31:"0"==T.FloorID?null:T.FloorID,p32:a?"%"+a+"%":null,p33:a?"%"+a+"%":null,p34:"0"==T.SpotID?null:T.SpotID,p35:a?"%"+a+"%":null,p36:a?"%"+a+"%":null,p37:"0"==T.DivisionID?null:T.DivisionID,p38:a?"%"+a+"%":null,p39:a?"%"+a+"%":null,p40:"0"==T.DisciplineID?null:T.DisciplineID,p41:a?"%"+a+"%":null,p42:a?"%"+a+"%":null,p43:"0"==T.FrequencyID?null:T.FrequencyID,p44:a?"%"+a+"%":null,p45:a?"%"+a+"%":null,p46:"0"==T.AssetID?null:T.AssetID,p47:a?"%"+a+"%":null,p48:a?"%"+a+"%":null,p49:a?"%"+a+"%":null,p50:a?"%"+a+"%":null,p51:"0"==T.EmployeeID?null:T.EmployeeID,p52:a?"%"+a+"%":null,p53:a?"%"+a+"%":null,p54:a?"%"+a+"%":null,p55:a?"%"+a+"%":null,p56:"0"==T.PPMBusinessFlowID?null:T.PPMBusinessFlowID,p57:a?"%"+a+"%":null,p58:a?"%"+a+"%":null,p59:a?"%"+a+"%":null,p60:"0"==T.PPMFixonBusinessFlowID?null:T.PPMFixonBusinessFlowID,p61:a?"%"+a+"%":null,p62:a?"%"+a+"%":null,p63:"0"==T.PPMStageID?null:T.PPMStageID,p64:a?"%"+a+"%":null,p65:a?"%"+a+"%":null,p66:a?"%"+a+"%":null,p67:T.WoDateTime?T.WoDateTime:null,p68:null,p69:null,p70:t,p71:10,p72:l,p73:null,p74:null,p75:localStorage.getItem("UserGroupID"),p76:localStorage.getItem("userid")}};Object.keys(o.data).slice(0,Object.keys(o.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(o.data).length-8?o.data[t]:null,e)),{});k(!0);(0,s.Z)(r,o,W.token[0]).then((e=>{const a=e.Output.status.code,l=e.Output.data;if("200"==a){const e=l.length;undefined,Z(1==t?e>0?l:[]:L.concat(l)),k(!1)}else _.alert({open:!0,color:"warning",message:[e.Output.status.message]}),k(!1)}))})(t,a,"PPMCreationAssetIDPK")},KeyBack:e=>{T.PPMCreationAssetID},fieldorder:"1",data:L,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:L.length>0?L[0].TotalCount:0,openSlide:()=>{CreateEasy("1390",W,q,_,H)},Tabledialog:()=>(AdvanceSearch("1390","PPMCreationAssetID",Re,Ze(),Be,t),!1),loading:B,clear:e=>{e&&T.PPMCreationAssetID}})))),n().createElement("div",{id:"PPMCreationOccupantDetailsSideBar",className:"sidenav"},n().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("PPMCreationOccupantDetailsSideBar").style.width="0",void S(!1))},"×"),v&&n().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},b))))))))}));a(77366),a(97829);var be=a(65197);const Ae=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),[o,p]=((0,c.useSelector)((e=>e.form)),(0,l.useState)([])),[u,d]=(0,l.useState)(!0),[m,P]=(0,l.useState)(e.showDetail),[D,C]=(0,l.useState)(""),[y,O]=n().useState(!1),[I,E]=n().useState(""),[f,v]=n().useState(!1),N=(0,l.useContext)(Re),{cstate:h,cdispatch:S}=Ze(),[F,w]=(0,l.useState)(!1),[b,A]=(0,l.useState)(""),[T,x]=(0,l.useState)(""),[B,k]=(0,l.useState)("");let L=(0,M.Z)();(0,l.useEffect)((()=>{h.editData.length>0&&(p(h.editData),O(!1),S({type:"PrimaryId",payload:h.editData[0].PPMCreationOccupantDetIDPK}))}),[h.editData]),(0,l.useEffect)((()=>{h.showTableview&&k(h.showTableview)}),[h.showTableview]),(0,l.useEffect)((()=>{d(h.ExpandDetailValue)}),[h.ExpandDetailValue]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{d(e),O(null)},viewtoggle:()=>{O(!1)},viewlistProps:(t,a)=>{!function(t,a=!1){let l=g.v.Api+"FP472S3/",n={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:e.Dialogview?"1":null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:null,p51:null,p52:null,p53:null,p54:null,p55:null,p56:null,p57:null,p58:null,p59:null,p60:null,p61:null,p62:null,p63:null,p64:null,p65:null,p66:null,p67:null,p68:null,p69:null,p70:1,p71:10,p72:h.IsDraft?"DraftPPMCreationOccupantDetID":"PPMCreationOccupantDetID",p73:null,p74:null,p75:localStorage.getItem("UserGroupID"),p76:localStorage.getItem("userid")}};(0,de.Z)(0).then((e=>{(0,s.Z)(l,n,e).then((e=>{N.loading(!1),"200"==e.Output.status.code&&p(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===y&&a.current.clear()}})));const R=e=>L?.[e]?L?.[e]:e,Z=e=>h.language?.[e]?h.language[e]:e;function z(e,t){}const K=(e,t)=>(a,l)=>{E(f?Object.assign(...o.filter((e=>e.PPMCreationOccupantDetIDPK==t)).map((e=>e))):h.editData),O(!l&&e)};return n().createElement("div",null,n().createElement(i.Z,{expanded:u,onChange:()=>()=>{e.expandTable&&d(!u)}},!y&&n().createElement(Y.Z,null,n().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},u?n().createElement("div",{className:"displayFlex EntryViewHeader"},n().createElement("p",{className:"ListP"},h.IsDraft?R("Draft"):"",Z("PPMCreationOccupantDetails"),e.viewonly?" ":"("+h.count+")")):"",u?n().createElement("div",{className:"displayFlex EntryHeaderBtn"},!e.viewonly&&h.AccessRights.IsAdd?n().createElement(ae.Z,{name:R("Add"),frmctrlid:"fld472L1VCAddBtn",className:"AddBtnCommon boxShadowNone",onClick:()=>{N.hideAddBtn(!0),S({type:"editData",payload:[]}),S({type:"ShowDetail",payload:!1}),S({type:"Add",payload:!0})},disabled:!1}):"",!e.viewonly&&h.AccessRights.IsEdit?n().createElement(ue.Z,{frmctrlid:"fld472L1VCEditBtn",onClick:K("panel0",""),disabled:!1}):h.IsDraft&&h.AccessRights.IsAdd&&n().createElement(ue.Z,{frmctrlid:"fld472L1VCEditBtnIsAdd",onClick:()=>{K("panel","")},disabled:!1}),!e.viewonly&&n().createElement(pe.Z,{disabled:!1,className:"L1AddBtnCommon",frmctrlid:"fld472L1VCCloseBtn",onClick:()=>{d(!1),N.hideAddBtn(!1),f&&(S({type:"editData",payload:[]}),p([]))}})):"")),n().createElement(r.Z,{style:{display:"block"}},o.map(((t,l)=>n().createElement("div",{key:l},y==="panel"+l?n().createElement(we,{ref:a,parentId:e.parentId}):n().createElement(n().Fragment,null,n().createElement(be.Z,{tableName:"PPMCreationOccupantDetails",tableID:472,parentID:t.PPMCreationOccupantDetIDPK,fldid:"fld472L1VCContainer",OpenSlideComponent:z,index:l,refresh:B,val:t,tf:Z,t:R,title:"10.0.0.59-3:08:17 PM-18-7[472]"}))))))))}));var Te=a(67698),xe=a(55995),Be=(a(45965),a(41722)),ke=a(9175),Le=a.n(ke);const Re=(0,l.createContext)(),Ze=()=>{const e=(0,l.useContext)(Re);if(void 0===e)throw new Error("useCont must be used within  PPMCreationOccupantDetailsContext Provider");return e},ze=[],Ke=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),i=(0,l.useRef)(),r=(0,l.useRef)(),o=(0,l.useRef)(),s=(0,l.useRef)(),[p,u]=(0,l.useState)(!0),[d,m]=(0,l.useState)(),P=((0,c.useSelector)((e=>e.form)),(0,c.useDispatch)()),[D,g]=(0,l.useState)(0),[C,y]=(0,l.useReducer)(Be.D,Be.E),[M,O]=(0,l.useState)(""),[I,E]=(0,l.useState)([]),[f,v]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e.loading(!0),e.tableview||i.current.clear(),document.getElementById("divPPMCreationOccupantDetails-Entry").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainTable").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{u(!0),document.getElementById("divPPMCreationOccupantDetails-Entry").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainTable").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{e.editData&&(y({type:"editData",payload:[e.editData]}),y({type:"ShowDetail",payload:!0}))}),[e.editData]),(0,l.useImperativeHandle)(t,(()=>({AddOpen:(e,t)=>{y(t?{type:"AccessRights",payload:{IsAdd:!0,IsEdit:!0,IsView:!0,IsDelete:!0,IsPrint:!0,IsExport:!0}}:{type:"AccessRights",payload:{IsAdd:!1,IsEdit:!1,IsView:!1,IsDelete:!0,IsPrint:!0,IsExport:!0}}),i.current.AddOpen(e),setTimeout((()=>a.current.HideEntryFields(!0)),500)},AddClose:()=>{setTimeout((()=>a.current.HideEntryFields(!0)),500)}})));const N=e=>{E([]),document.getElementById("divPPMCreationOccupantDetails-Entry").style.width="100%",document.getElementById("PPMCreationOccupantDetailsEntryTable").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainEntry").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainEntry").style.display="block",document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.add("displayFlex"),document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttPPMCreationOccupantDetails").style.width="0%",document.getElementById("overlayimgAttPPMCreationOccupantDetails").style.display="none"};(0,l.useEffect)((()=>{P((e=>{(0,de.Z)(1).then((e=>{var t=new Array;t.push(e),y({type:"token",payload:t}),g(t.length),h(e)}))}))}),[]);const h=t=>{y({type:"AccessRights",payload:e.AccessRights}),v(e.AccessRights?.isNestSendtoApproval)};return n().createElement("div",{style:{width:"100%"}},n().createElement(Re.Provider,{value:{cstate:C,cdispatch:y,ContextApi:Ze,loading:t=>e.loading(t),alert:t=>e.alertmsg(t),ShareTab:(t,a)=>e.TabShare(t,a),ConfirmAlert:t=>e.ConfirmAlert(t),SlideComponentType:t=>e.SlideComponentType(t),openNav:t=>e.openNav(t),RefreshTable:()=>{a.current.tableRefresh(),e.cardRefresh()},searchItem:e=>{0!==D&&a.current.searchItem(e)},openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t),attachmentSave:e=>{s.current.tempsave(e,I),E([])},EditClose:e=>N(),AttachExpand:e=>(o.current.AttachmentData(C.PrimaryId),void(p&&(document.getElementById("overlayPreviewPPMCreationOccupantDetails").style.width="50%",document.getElementById("divPPMCreationOccupantDetails-Entry").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainTable").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainEntry").style.width="100%",document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("PPMCreationOccupantDetails-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttPPMCreationOccupantDetails").style.display="block",document.getElementById("overlayimgAttPPMCreationOccupantDetails").style.width="25%"))),Expanded:e=>{C.ShowDetail&&r.current.tableClick(e),y({type:"ExpandDetailValue",payload:e})},viewtoggle:()=>{C.ShowDetail&&r.current.viewtoggle()},clear:e=>{y({type:"ShowDetail",payload:!1}),y({type:"editData",payload:[]}),C.ShowDetail?r.current.clear(e):i.current.clear(e)},hideAddBtn:e=>{a.current.HideEntryFields(e)},ExpandEntry:()=>{C.ShowDetail?r.current.tableClick(!1):i.current.CreateEasyProps(!1)},resetImg:()=>{s.current.tempClear(),o.current.clrImgstate(!0)}}},n().createElement("div",{id:"PPMCreationOccupantDetails-MainDiv",className:"MainDivStyles displayFlex",style:{height:e.subForm&&"fit-content"}},n().createElement("div",{id:"PPMCreationOccupantDetails-MainEntry",className:"",style:{background:"#fff"}},n().createElement("div",{style:{display:"flex"}},n().createElement("div",{id:"PPMCreationOccupantDetailsEntryTable",style:{width:"100%"}},C.ShowDetail?n().createElement("div",null,n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divPPMCreationOccupantDetails-Entry",style:{width:"100%"}},0!==D?n().createElement(Ae,{ref:r,IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}):null)),n().createElement(xe.Z,{ref:s,menurefID:472,fileId:"LogoImgPPMCreationOccupantDetails",imgloading:t=>{t||C.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:C.PrimaryId,AttachmentVal:e=>o.current.AttachmentData(e),previd:"overlayPreviewPPMCreationOccupantDetails",frmctrlid:"PvwIm_472_L1_",tempImg:e=>{C.PrimaryId?o.current.AttachmentData(C.PrimaryId):o.current.tempImg(e),E(e)},clearTempData:C.Add})):n().createElement("div",null,n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divPPMCreationOccupantDetails-Entry",style:{width:"100%"}},!e.tableview&&n().createElement(we,{ref:i,clrImgstate:e=>o.current.clrImgstate(e),IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}))),n().createElement(xe.Z,{ref:s,menurefID:472,fileId:"LogoImgPPMCreationOccupantDetails",imgloading:t=>{t||C.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:C.PrimaryId,AttachmentVal:e=>o.current.AttachmentData(e),previd:"overlayPreviewPPMCreationOccupantDetails",frmctrlid:"PvwIm_472_L1_",tempImg:e=>{C.PrimaryId?o.current.AttachmentData(C.PrimaryId):o.current.tempImg(e),E(e)},clearTempData:C.Add})),n().createElement("div",{id:"PPMCreationOccupantDetails-MainTable"},0!==D?n().createElement(se,{ref:a,parentId:e.parentId,IsCollapse:e.IsCollapse,tableview:e.tableview}):null)),n().createElement(Te.Z,{ImgAttachment:e=>N(),menurefID:472,fileId:"AttImgPPMCreationOccupantDetails",imgid:"overlayimgAttPPMCreationOccupantDetails",valueIDPK:C.PrimaryId,PriviewData:(e,t,a,l)=>{s.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewPPMCreationOccupantDetails",ref:o,imgloading:d,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_472_L1_",timglist:e=>{s.current.timglist(e),E(e)},clearTempData:C.Add}))),n().createElement("div",{id:"PPMCreationOccupantDetails-DetailDiv",style:{display:"none",height:"81vh",overflowY:"auto"}}))),f&&n().createElement(Le(),{openDialog:f,closeDialog:e=>v(e),formID:472,PrimID:e.parentId,alert:(t,a,l)=>{"Approval Sent Succesfully"==t.message&&e.cardRefresh()},loading:t=>{e.loading(t)}}))}))}}]);