/*! For license information please see 7433.74e0218ed2caa695e72e.js.LICENSE.txt */
"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[7433],{47433:(e,t,l)=>{l.r(t),l.d(t,{CCMDocDetailsContext:()=>we,ContextApi:()=>Pe,UserGridViewData:()=>xe,default:()=>Fe});var a=l(92950),n=l.n(a),i=(l(95866),l(45237)),o=l(36939),r=l(61201),p=l(51673),s=(l(99058),l(80366)),d=l(282),c=l(868),m=l(78513),C=l(14439),u=l(27848),D=l(40900),g=l(64059),I=l(24038),y=l(8981),M=l(47516),N=l(86893),E=l(33681),v=l(63163),h=l(35131),S=l.n(h),f=l(61956),T=l(93657),b=l(53375),w=l(52663),P=l(66083),x=l(29525),F=l(66856),A=l(39803),B=l(99940),k=l(17149),L=l(62810),Z=l(30553),O=l(92381),R=l(25108);const z=(0,a.forwardRef)(((e,t)=>{const[l]=(0,a.useState)(localStorage.getItem("userid")),[i,o]=(0,a.useState)([]),[r,h]=(0,a.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[S,f]=(0,a.useState)(""),[z,W]=(0,a.useState)({}),[K,H]=(0,a.useState)(!0),[_,G]=(0,a.useState)(!1),{cstate:V,cdispatch:U}=e.ContextApi?e.ContextApi:Pe(),[j,q]=(0,a.useState)(1),[Y,$]=(0,a.useState)(0),[J,Q]=(0,a.useState)(!1),[X,ee]=(0,a.useState)({}),[te,le]=(0,a.useState)([]),[ae,ne]=(0,a.useState)(!0),[ie,oe]=(0,a.useState)(!1),[re,pe]=(0,a.useState)(""),[se,de]=(0,a.useState)(!1),[ce,me]=(0,a.useState)(!1),[Ce,ue]=(0,a.useState)(!1),[De,ge]=(0,a.useState)(""),Ie=(0,a.useRef)(null),[ye,Me]=(0,a.useState)({});let Ne=localStorage.getItem("Language");const Ee={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let ve=(0,y.Z)();const he=e=>ve[e]?ve[e]:e,Se=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[Ee[Ne]];function fe(){W({}),ee({}),e.searchData({}),G(!1)}(0,a.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const l=e.userGrid.reduce(((e,t)=>{const l=t.FieldName;return t.IsForeign&&(e[l]||(e[l]=[]),e[l].push(t.FieldDisplay)),e}),{});Me(l),le(t)}),[]),(0,a.useEffect)((()=>()=>{Ie.current&&Ie.current.abort()}),[]),(0,a.useImperativeHandle)(t,(()=>({clear:()=>{fe()}})));const Te=async(t,l,a,n)=>{Q(!0);try{Ie.current&&Ie.current.abort();const r=new AbortController;Ie.current=r;let s="",d=[],c={};await h((e=>(s=e.name,e))),await W((e=>(d=e,e))),await ee((e=>(c=e,e)));const m=D.v.Api+"FP807S3/",C={data:{p1:"CCMDocDetailsIDPK"==l?null:await Ae(),p2:"CCMDocDetailsCode"==s&&a.length>0?"%"+a+"%":null,p3:"CCMDocDetailsName"==s&&a.length>0?"%"+a+"%":null,p4:"CCMDocDetailsPath"==s&&a.length>0?"%"+a+"%":null,p5:"CCMDocDetailsType"==s&&a.length>0?"%"+a+"%":null,p6:null,p7:null,p8:null,p9:e.parentId?e.parentId:"0",p10:e.Dialogview?"1":null,p11:null,p12:"p12"==s&&a.length>0?a:null,p13:null,p14:null,p15:null,p16:null,p17:"ContractName"!=s&&d.ContractName?d.ContractName.map((e=>e.ContractIDPK)).toString():null,p18:"ContractCode"==s&&a.length>0?"%"+a+"%":null,p19:"ContractName"==s&&a.length>0?"%"+a+"%":null,p20:"LocalityName"!=s&&d.LocalityName?d.LocalityName.map((e=>e.LocalityIDPK)).toString():null,p21:"LocalityCode"==s&&a.length>0?"%"+a+"%":null,p22:"LocalityName"==s&&a.length>0?"%"+a+"%":null,p23:"BuildingName"!=s&&d.BuildingName?d.BuildingName.map((e=>e.BuildingIDPK)).toString():null,p24:"BuildingCode"==s&&a.length>0?"%"+a+"%":null,p25:"BuildingName"==s&&a.length>0?"%"+a+"%":null,p26:"FloorName"!=s&&d.FloorName?d.FloorName.map((e=>e.FloorIDPK)).toString():null,p27:"FloorCode"==s&&a.length>0?"%"+a+"%":null,p28:"FloorName"==s&&a.length>0?"%"+a+"%":null,p29:"SpotName"!=s&&d.SpotName?d.SpotName.map((e=>e.SpotIDPK)).toString():null,p30:"SpotCode"==s&&a.length>0?"%"+a+"%":null,p31:"SpotName"==s&&a.length>0?"%"+a+"%":null,p32:"PriorityName"!=s&&d.PriorityName?d.PriorityName.map((e=>e.PriorityIDPK)).toString():null,p33:"PriorityCode"==s&&a.length>0?"%"+a+"%":null,p34:"PriorityName"==s&&a.length>0?"%"+a+"%":null,p35:"DivisionName"!=s&&d.DivisionName?d.DivisionName.map((e=>e.DivisionIDPK)).toString():null,p36:"DivisionCode"==s&&a.length>0?"%"+a+"%":null,p37:"DivisionName"==s&&a.length>0?"%"+a+"%":null,p38:"DisciplineName"!=s&&d.DisciplineName?d.DisciplineName.map((e=>e.DisciplineIDPK)).toString():null,p39:"DisciplineCode"==s&&a.length>0?"%"+a+"%":null,p40:"DisciplineName"==s&&a.length>0?"%"+a+"%":null,p41:"EquipmentName"!=s&&d.EquipmentName?d.EquipmentName.map((e=>e.AssetIDPK)).toString():null,p42:"EquipmentName"==s&&a.length>0?"%"+a+"%":null,p43:"EquipmentRefNo"==s&&a.length>0?"%"+a+"%":null,p44:"AssetBarcode"==s&&a.length>0?"%"+a+"%":null,p45:"AssetTagNo"==s&&a.length>0?"%"+a+"%":null,p46:"ComplainerName"!=s&&d.ComplainerName?d.ComplainerName.map((e=>e.ComplainerIDPK)).toString():null,p47:"Address1"==s&&a.length>0?"%"+a+"%":null,p48:"ComplainerName"==s&&a.length>0?"%"+a+"%":null,p49:"ContactNo"==s&&a.length>0?"%"+a+"%":null,p50:"Email"==s&&a.length>0?"%"+a+"%":null,p51:"ComplaintNatureName"!=s&&d.ComplaintNatureName?d.ComplaintNatureName.map((e=>e.ComplaintNatureIDPK)).toString():null,p52:"ComplaintNatureCode"==s&&a.length>0?"%"+a+"%":null,p53:"ComplaintNatureName"==s&&a.length>0?"%"+a+"%":null,p54:"CCMComplaintModeName"!=s&&d.CCMComplaintModeName?d.CCMComplaintModeName.map((e=>e.CCMComplaintModeIDPK)).toString():null,p55:"CCMComplaintModeCode"==s&&a.length>0?"%"+a+"%":null,p56:"CCMComplaintModeName"==s&&a.length>0?"%"+a+"%":null,p57:"ServiceTypeName"!=s&&d.ServiceTypeName?d.ServiceTypeName.map((e=>e.ServiceTypeIDPK)).toString():null,p58:"ServiceTypCode"==s&&a.length>0?"%"+a+"%":null,p59:"ServiceTypeName"==s&&a.length>0?"%"+a+"%":null,p60:"ComplaintHeaderName"!=s&&d.ComplaintHeaderName?d.ComplaintHeaderName.map((e=>e.ComplaintHeaderIDPK)).toString():null,p61:"ComplaintHeaderCode"==s&&a.length>0?"%"+a+"%":null,p62:"ComplaintHeaderName"==s&&a.length>0?"%"+a+"%":null,p63:"CCMComplaintModeIndexName"!=s&&d.CCMComplaintModeIndexName?d.CCMComplaintModeIndexName.map((e=>e.CCMComplaintModeIndexIDPK)).toString():null,p64:"CCMComplaintModeIndexCode"==s&&a.length>0?"%"+a+"%":null,p65:"CCMComplaintModeIndexName"==s&&a.length>0?"%"+a+"%":null,p66:"CCMWoTypeName"!=s&&d.CCMWoTypeName?d.CCMWoTypeName.map((e=>e.CCMWoTypeIDPK)).toString():null,p67:"CCMWoTypeCode"==s&&a.length>0?"%"+a+"%":null,p68:"CCMWoTypeName"==s&&a.length>0?"%"+a+"%":null,p69:"CCMComplaintTypeName"!=s&&d.CCMComplaintTypeName?d.CCMComplaintTypeName.map((e=>e.CCMComplaintTypeIDPK)).toString():null,p70:"CCMComplaintTypeCode"==s&&a.length>0?"%"+a+"%":null,p71:"CCMComplaintTypeName"==s&&a.length>0?"%"+a+"%":null,p72:"CCMDeptName"!=s&&d.CCMDeptName?d.CCMDeptName.map((e=>e.CCMDeptIDPK)).toString():null,p73:"CCMDeptCode"==s&&a.length>0?"%"+a+"%":null,p74:"CCMDeptName"==s&&a.length>0?"%"+a+"%":null,p75:"CCMStageIName"!=s&&d.CCMStageIName?d.CCMStageIName.map((e=>e.CCMStageIDPK)).toString():null,p76:"CCMStageICode"==s&&a.length>0?"%"+a+"%":null,p77:"CCMStageIName"==s&&a.length>0?"%"+a+"%":null,p78:"StageSeqNo"==s&&a.length>0?"%"+a+"%":null,p79:"IncidentName"!=s&&d.IncidentName?d.IncidentName.map((e=>e.IncidentIDPK)).toString():null,p80:"IncidentCode"==s&&a.length>0?"%"+a+"%":null,p81:"IncidentName"==s&&a.length>0?"%"+a+"%":null,p82:"WorkOrder"!=s&&d.WorkOrder?d.WorkOrder.map((e=>e.PPMCreationAssetIDPK)).toString():null,p83:"WorkOrder"==s&&a.length>0?"%"+a+"%":null,p84:c.WoDateTime?c.WoDateTime.From:null,p85:c.WoDateTime?c.WoDateTime.Type:null,p86:c.WoDateTime?c.WoDateTime.To:null,p87:"SubComponentName"!=s&&d.SubComponentName?d.SubComponentName.map((e=>e.SubComponentIDPK)).toString():null,p88:"SubComponentName"==s&&a.length>0?"%"+a+"%":null,p89:"ComplaintNo"==s&&a.length>0?"%"+a+"%":null,p90:"CMResonForPending"==s&&a.length>0?"%"+a+"%":null,p91:"CCMMobNo"==s&&a.length>0?"%"+a+"%":null,p92:"ClientWoNo"==s&&a.length>0?"%"+a+"%":null,p93:"CCMDescription"==s&&a.length>0?"%"+a+"%":null,p94:n||1,p95:10,p96:t,p97:null,p98:null,p99:localStorage.getItem("UserGroupID"),p100:localStorage.getItem("userid")}},u=await(0,p.Z)(m,C,e.token,"",r.signal);if(!u)return!1;const g=u.Output.status.code,I=u.Output.data;if("200"===g)if(I.length>0)if(1===n){let e=we(I,s),t=be(e,z[s],l);o(t),$(t.length>0?t[0].TotalCount:z[s].length)}else{let e=[...i,...I],t=we(e,s);$(t.length<10?t.length:I[0].TotalCount),o(we(t,s))}else S.length>0&&o([]),$(i.length);else e.alertmsg("error",[u.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{Q(!1)}},be=(e=[],t=[],l)=>e.filter((e=>!t.find((t=>e[l]===t[l])))),we=(e,t)=>e.filter(((e,l,a)=>a.findIndex((l=>l[t]===e[t]))===l));function xe(e){let t=e+"PK",l=ye[e];if(l){const e=l.flatMap((e=>z[e]?z[e].map((e=>e[t])):[]));return e.toString()}return""}const Fe=async t=>{let l="",a={};await W((e=>(l=e,e)));let n=[...te],i=[];for(let e of n){let t=l[e]?.map((e=>e.CCMDocDetailsIDPK)).toString();t&&i.push(t)}await ee((e=>(a=e,e)));let o={CCMDocDetailsIDPK:i?[...new Set(i)].toString():"",CreatedTtm:a.CreatedTtm?a.CreatedTtm.From:"",CreatedTtmType:a.CreatedTtm?a.CreatedTtm.Type:"",CreatedTtmBetween:a.CreatedTtm?a.CreatedTtm.To:"",ComplaintID:xe("ComplaintID")};"saveFav"==t?Le("save",o):(e.searchData(o),G(!1))};async function Ae(){let e={};await W((t=>(e=t,t)));let t=[...te],l=[];for(let a of t){let t=e[a]?.map((e=>e.CCMDocDetailsIDPK)).toString();t&&l.push(t)}return l?[...new Set(l)].toString():""}async function Be(t,l,a,n,i,o){let r={[n]:{From:t,Type:a,To:l}},p={};ee((e=>({...e,...r})));const s={...z};let d=[...te],c=[];for(let e of d){let t=s[e]?.map((e=>e.CCMDocDetailsIDPK)).toString();t&&c.push(t)}await ee((e=>(p=e,e)));let m={CCMDocDetailsIDPK:c?[...new Set(c)].toString():"",CreatedTtm:p.CreatedTtm?p.CreatedTtm.From:"",CreatedTtmType:p.CreatedTtm?p.CreatedTtm.Type:"",CreatedTtmBetween:p.CreatedTtm?p.CreatedTtm.To:"",IsActive:"IsActive"==a?i:null,ComplaintID:z.ComplaintNo?.map((e=>e.ComplaintIDPK)).toString()};e.searchData(m)}function ke(){return n().createElement(g.Z,{frmctrlid:"fld807L1TCDateCompCreatedTtm",SendDateVal:(e,t,l,a,n)=>{Be(e,t,l,r.name,a)},keyboardback:()=>{G(!1),h({idpk:"",name:"",type:"",fieldidpk:""})},title:he(r.name),fieldname:r.name,save:e=>{alert(!0)}})}const Le=(t,l)=>{(0,O.Z)(t,e.formID,l,re).then((e=>{const t=e.Output.data;ge(t)}))};return n().createElement("div",null,n().createElement(w.Z,{onClose:()=>de(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:se},n().createElement(P.Z,{id:"customized-dialog-title",onClose:()=>de(!1)},"Add Favorite"),n().createElement(x.Z,{dividers:!0,style:{minWidth:"500px"}},n().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},n().createElement(A.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:re,onChange:e=>pe(e.target.value),fullWidth:!0})),n().createElement(Z.Z,{style:{color:"#337ab7"},control:n().createElement(B.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(k.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:ce,onChange:e=>me(e.target.checked)}),label:"Quick"}),n().createElement(Z.Z,{style:{color:"#337ab7"},control:n().createElement(B.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:n().createElement(k.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:n().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:Ce,onChange:e=>ue(e.target.checked)}),label:"Dashboard"})),n().createElement(F.Z,null,n().createElement(d.Z,{onClick:()=>{Fe("saveFav"),de(!1)},color:"primary"},"Save"))),_?"Created Ttm"===r.name||r.name.includes("Date")?n().createElement(ke,null):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},n().createElement(C.Z,null,n().createElement(u.Z,{xs:6,sm:6,md:6,lg:6},n().createElement("p",{className:"columnHeaderp"},Se(r.idpk)," (",i.length,"/",Y,")")),n().createElement(u.Z,{xs:6,sm:6,md:6,lg:6},n().createElement(c.ZP,{title:he("Close"),placement:"top"},n().createElement("div",{className:"FilterItemClose",align:"right"},n().createElement(s.Z,{id:"fld807L1TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{G(!1),h({idpk:"",name:"",type:"",fieldidpk:!1}),q(1)}}))),z[r.name]&&n().createElement("div",{className:"FiltercloseAlign",align:"right"},n().createElement(d.Z,{frmctrlid:"fld807L1TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await W((t=>(e=t,R.log("clear fewItems",e),t))),e[r.name]=[],Te(r.type,r.fieldidpk,"",1)})()}},n().createElement("span",{className:"ColumnApplyTitle"},he("Clear All")))))))),n().createElement("div",{className:"FilterParentDiv"},n().createElement("div",{"data-list-scroll-container":"true"},n().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},n().createElement("div",{className:"FilterMaximize"},K?n().createElement(c.ZP,{title:"Maximize",placement:"right"},n().createElement("span",null,n().createElement(N.D7o,{className:"FilterMaximizeIcon",onClick:()=>{H(!1)}}))):n().createElement(c.ZP,{title:"Minimize",placement:"right"},n().createElement("span",null,n().createElement(N.dOw,{className:"FilterMaximizeIcon",onClick:()=>{H(!0)}})))),n().createElement("ul",null,z[r.name]&&z[r.name].map(((e,t)=>n().createElement("div",{key:t,tabIndex:"-1",className:K?"filterSelectedItems":"filterSelectedItemsMaximize"},n().createElement("div",{className:"filterSelectedItemNames"},n().createElement("span",null,e[r.name])),n().createElement("div",{className:"filterSelectedItemClose"},n().createElement("div",{id:"fildacls_3_L2_"+e[r.name],onClick:()=>(async(e,t)=>{q(1);let l=z[r.name].filter((t=>t!=e)),a={};await W((e=>(a=e,e))),a[r.name]=l,W(a),o((t=>[e,...t]))})(e)},n().createElement(s.Z,{className:"filterSelectedItemCloseIcon"})))))))),n().createElement("div",{className:"displayFlex width100 FilterSearch"},n().createElement("div",{className:"FilterSearchInputDiv"},n().createElement(I.Z,{frmctrlid:"fld807L1TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:S,placeholder:he("Enter ")+" "+Se(r.idpk),onChange:e=>{f(e),Te(r.type,r.fieldidpk,e,1,Ae())}})),n().createElement("div",{id:"fld807L1TFCFilterGoForward",className:"FilterSearchBtn",onClick:Fe},n().createElement(c.ZP,{title:"",placement:"top"},n().createElement(d.Z,{className:"ColumnSearchButton"},n().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),J&&n().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},n().createElement(E.Z,{color:"secondary"})),n().createElement("div",{id:"fld807L1TFCScrollYDefault",className:"height65 scrollYDefault"},i.length>0&&i.map(((e,t)=>n().createElement("div",{id:"filda_3_L2_"+e[r.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},l=[];l.push(e);let a={};await W((e=>(a=e,e)));let n=a[r.name];t[r.name]=n?[...l,...n]:l,a={...a,...t},W(a),o((t=>t.filter((t=>t!=e))))})(e)}},n().createElement(m.Z,{className:"DotIcon"}),n().createElement("span",null,e[r.name])))),i.length+0<Y&&i.length>0&&n().createElement("div",{id:"fld807L1TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{q(j+1),Te(r.type,r.fieldidpk,"",j+1)}},n().createElement("p",null," more... ")),0===i.length&&n().createElement("div",null,n().createElement("div",{className:"NoDataImage"},n().createElement("img",{src:D.v.NoData,alt:"NoImage"})),n().createElement("div",{className:"NoDataDesc"},n().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):n().createElement("div",null,n().createElement("div",{className:"columnHeader displayFlex"},n().createElement("div",{className:"columnHeaderTitle"},n().createElement(M.Ol$,{className:"columnHeaderIcon"}),n().createElement("p",{className:"columnHeaderp"}," ",he("Filter")," ",re.length>0&&`(${re})`)),n().createElement("div",{className:"columnHeaderbtn",align:"right"},n().createElement(c.ZP,{title:"Favorite List",placement:"top"},ie?n().createElement(s.Z,{className:"favlisticon",onClick:()=>{oe(!1),ge(""),fe()}}):n().createElement(T.Z,{className:"favlisticon",onClick:()=>{oe(!0),Le("select"),fe()}})),Object.keys(z).length>0&&n().createElement(c.ZP,{title:"Save Favorites",placement:"top"},n().createElement(b.Z,{className:"favlisticon",onClick:()=>{de(!0)}})),n().createElement(c.ZP,{title:"",placement:"top"},n().createElement(d.Z,{className:"ColumnApplyButton",onClick:()=>{fe()},id:"fld807L1TFCColumApplyBttn"},n().createElement("span",{className:"ColumnApplyTitle"},he("Clear")))),n().createElement(c.ZP,{title:"",placement:"top"},n().createElement(d.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld807L1TFCColumnCloseButton"},n().createElement("span",{className:"ColumnCloseTitle"},he("Close")))))),n().createElement("div",{className:"height65"},n().createElement("div",{id:"fld807L1TFCFilItems",className:"FilterItems"},!De&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return n().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{G(!0),f(""),o([]),$(0);let t=e.IsForeign?e.FieldName+"PK":"CCMDocDetailsIDPK";h({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterCCMDocDetailsID",fieldidpk:t}),Te(e.IsForeign?"Filter"+e.FieldName:"FilterCCMDocDetailsID",t,"",1,Ae())})(e)}},e.FieldName.includes("Date")?n().createElement(n().Fragment,null,Se(e.AdminUserGridViewIDPK)," ",X[e.FieldName]&&n().createElement("p",{className:"filterdatevalue"},"(",X[e.FieldName]?.From+" to "+X[e.FieldName]?.To,")")):"IsActive"==e.FieldName?n().createElement(n().Fragment,null,n().createElement("span",null,Se(e.AdminUserGridViewIDPK)),n().createElement(v.Z,{checked:"1"==ae,onChange:t=>{ne(t.target.checked),Be("","",e.FieldName,"",t.target.checked)}})):n().createElement(n().Fragment,null,n().createElement("span",null,Se(e.AdminUserGridViewIDPK)),(l=e.FieldDisplay,z[l]?.length>0&&n().createElement("div",{className:"FilterItemDivSelected"},n().createElement("span",{className:"RoundedDivName"},z[l][0][l]),z[l].length>1&&n().createElement("span",{className:"RoundedDivName"},z[l][1][l]),z[l].length>2&&n().createElement("span",{className:"RoundedDivNumber"},"+"+(z[l].length-2))))));var l})),De&&De.map((e=>{let t=e.TFFSearchParams,l=JSON.parse(t);return n().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{Te("FilterCCMDocDetailsID",l),Fe("")}},n().createElement(n().Fragment,null,e.TableFilterFavName))}))))))}));var W=l(54180),K=l(43031),H=l(85639),_=l(110),G=l(5109),V=l(88995),U=l(50743),j=l(61657),q=l(51209),Y=l(53854),$=l(5434),J=l(83817),Q=l(39327),X=l(3212),ee=l(93521),te=(l(79117),l(71168)),le=l.n(te),ae=l(65107),ne=l(94986),ie=l(15999);l(11557),window.clickFilter="";const oe=(0,a.forwardRef)(((e,t)=>{const l=(0,a.useRef)(null),d=(0,a.useRef)(null),[m]=((0,a.useRef)(null),(0,i.useSelector)((e=>e.form)),(0,a.useState)(localStorage.getItem("userid"))),[C]=(0,a.useState)("807"),[u,g]=(0,a.useState)(!1),[E,v]=(0,a.useState)(!1),[h,S]=(0,a.useState)(0),[f,T]=(0,a.useState)(0),[b,w]=(0,a.useState)(0),[P,x]=(0,a.useState)(0),[F,A]=(0,a.useState)({current:1,pageSize:100}),[B,k]=(0,a.useState)(""),[L,Z]=(0,a.useState)([]),[O,R]=(0,a.useState)({val:"",column:""}),[te,oe]=(0,a.useState)([]),[re,pe]=(0,a.useState)(!1),[se,de]=(0,a.useState)(""),[ce,me]=(0,a.useState)(""),[Ce,ue]=(0,a.useState)(!1),[De,ge]=(0,a.useState)([]),[Ie,ye]=(0,a.useState)([]),[Me,Ne]=(0,a.useState)([]),[Ee,ve]=(0,a.useState)({children:[{name:"CCMDocDetails",children:[]}]}),[he,Se]=(0,a.useState)(!1),fe=(0,a.useContext)(e.context?e.context:we),{cstate:Te,cdispatch:be}=e.ContextApi?e.ContextApi:Pe();let xe={CCMDocDetailsIDPK:"",CCMDocDetailsCode:"",CCMDocDetailsName:"",CCMDocDetailsPath:"",CCMDocDetailsType:"",IsDefault:"",IsDraft:"",Remarks:"",ComplaintID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractID:"",ContractCode:"",ContractName:"",LocalityID:"",LocalityCode:"",LocalityName:"",BuildingID:"",BuildingCode:"",BuildingName:"",FloorID:"",FloorCode:"",FloorName:"",SpotID:"",SpotCode:"",SpotName:"",PriorityID:"",PriorityCode:"",PriorityName:"",DivisionID:"",DivisionCode:"",DivisionName:"",DisciplineID:"",DisciplineCode:"",DisciplineName:"",AssetID:"",EquipmentName:"",EquipmentRefNo:"",AssetBarcode:"",AssetTagNo:"",ComplainerID:"",Address1:"",ComplainerName:"",ContactNo:"",Email:"",ComplaintNatureID:"",ComplaintNatureCode:"",ComplaintNatureName:"",CCMComplaintModeID:"",CCMComplaintModeCode:"",CCMComplaintModeName:"",ServiceTypeID:"",ServiceTypCode:"",ServiceTypeName:"",ComplaintHeaderID:"",ComplaintHeaderCode:"",ComplaintHeaderName:"",CCMComplaintModeIndexID:"",CCMComplaintModeIndexCode:"",CCMComplaintModeIndexName:"",CCMWoTypeID:"",CCMWoTypeCode:"",CCMWoTypeName:"",CCMComplaintTypeID:"",CCMComplaintTypeCode:"",CCMComplaintTypeName:"",CCMDeptID:"",CCMDeptCode:"",CCMDeptName:"",CCMStageID:"",CCMStageICode:"",CCMStageIName:"",StageSeqNo:"",IncidentID:"",IncidentCode:"",IncidentName:"",PPMCreationAssetID:"",WorkOrder:"",WoDateTime:"",WoDateTimeType:"",WoDateTimeBetween:"",SubComponentID:"",SubComponentName:"",ComplaintNo:"",CMResonForPending:"",CCMMobNo:"",ClientWoNo:"",CCMDescription:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[Fe,Ae]=(0,a.useState)(xe),[Be,ke]=(0,a.useState)(xe),[Le,Ze]=(0,a.useState)(!1),[Oe,Re]=(0,a.useState)(!0),[ze,We]=(0,a.useState)(!1),[Ke,He]=(0,a.useState)(!0),[_e,Ge]=(0,a.useState)({CCMDocDetailsCode:"",CCMDocDetailsName:"",CCMDocDetailsPath:"",CCMDocDetailsType:"",ComplaintNo:""}),[Ve,Ue]=(0,a.useState)(!1),[je,qe]=(0,a.useState)([]),[Ye,$e]=(0,a.useState)(0),[Je,Qe]=(0,a.useState)(0),[Xe,et]=(0,a.useState)({current:1,pageSize:10}),[tt,lt]=(0,a.useState)([]),[at,nt]=(0,a.useState)([]),[it,ot]=(0,a.useState)(!1),[rt,pt]=(0,a.useState)(!1),[st,dt]=(0,a.useState)(!1),[ct,mt]=(0,a.useState)(""),[Ct,ut]=le()("807"),[Dt,gt]=(0,a.useState)({}),It=[{columns:tt,data:B}];let yt=(0,y.Z)();const Mt=e=>yt[e]?yt[e]:e,Nt=e=>Te.language?.[e]?Te.language[e]:e;(0,a.useEffect)((()=>{bt(Ct)}),[Ct]),(0,a.useEffect)((()=>{Te.token.length>0&&(e.parentId?ft(F,xe,"CCMDocDetailsID"):oe([]))}),[e.parentId]),(0,a.useEffect)((()=>{!he&&e.parentId?ft(F,se,"CCMDocDetailsID"):he&&ke(se)}),[se]),(0,a.useImperativeHandle)(t,(()=>({searchItem:e=>{Et(e)},tableRefresh:()=>{ft(F,xe,"CCMDocDetailsID")},DialogTableProps:e=>{v(e)},HideEntryFields:e=>{dt(!0===e)}})));const Et=e=>{""==e?ft(F,xe,Le?"DraftCCMDocDetailsID":"CCMDocDetailsID",Le&&"DraftPage"):Tt(e,{current:1,pageSize:100}),me(e)};function vt(t){fe.loading(!0);let l=D.v.Api+"FP807S7/",a={data:{p1:"%%",p2:e.parentId?e.parentId:"0",p3:"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,p.Z)(l,a,Te.token[0]).then((e=>{if(200==e.Output.status.code){let l=0;e.Output.data.length>0?(l=parseFloat(e.Output.data[0].TotalCount,10)/10,Qe(e.Output.data[0].TotalCount)):l=0,10==t.pageSize?$e(Math.ceil(l)):20==t.pageSize?$e(Math.ceil(l/2)):50==t.pageSize?$e(Math.ceil(l/5)):100==t.pageSize&&$e(Math.ceil(l/10)),qe(e.Output.data),fe.loading(!1)}}))}function ht(e,t){be({type:"editData",payload:[t]}),be({type:"IsDraft",payload:Le}),be({type:"ShowDetail",payload:!0}),fe.Expanded(!0),ze&&ue(!1)}(0,a.useEffect)((()=>{!1===e.cardview&&He(e.cardview),e.Dialogview&&(v(e.Dialogview),dt(!0))}),[e.cardview,e.Dialogview]),(0,a.useEffect)((()=>{e.searchsafaritext&&Tt(e.searchsafaritext,{current:F.current,pageSize:F.pageSize})}),[e.searchsafaritext]);const St=()=>{fe.EditClose(!0),re?(document.getElementById("CCMDocDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("CCMDocDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("CCMDocDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",pe(!1),Ke?(E||(document.getElementById("CCMDocDetailscoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMDocDetailscoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),document.getElementById("CCMDocDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMDocDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("CCMDocDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMDocDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("CCMDocDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("CCMDocDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("CCMDocDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",pe(!0),document.getElementById("CCMDocDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("CCMDocDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),ue(!1),window.clickFilter=!re},ft=(t,l,a,n,i,o)=>{fe.loading(!0),"DraftPage"!==n&&Ze(Te.IsDraft);let r=D.v.Api+"FP807S3/",s={data:{p1:i||(l&&l.CCMDocDetailsIDPK?l.CCMDocDetailsIDPK:null),p2:l&&l.CCMDocDetailsCode?l.CCMDocDetailsCode:null,p3:l&&l.CCMDocDetailsName?l.CCMDocDetailsName:null,p4:l&&l.CCMDocDetailsPath?l.CCMDocDetailsPath:null,p5:l&&l.CCMDocDetailsType?l.CCMDocDetailsType:null,p6:null,p7:"DraftCCMDocDetailsID"==a?"1":"0",p8:null,p9:e.parentId?Number(e.parentId):0,p10:l&&l.IsActive,p11:null,p12:l&&l.CreatedUserID_varchar?l.CreatedUserID_varchar:null,p13:l&&l.CreatedTtm?l.CreatedTtm:null,p14:l&&l.CreatedTtmType?l.CreatedTtmType:null,p15:l&&l.CreatedTtmBetween?l.CreatedTtmBetween:null,p16:null,p17:l&&l.ContractID?l.ContractID:null,p18:l&&l.ContractCode?l.ContractCode:null,p19:l&&l.ContractName?l.ContractName:null,p20:l&&l.LocalityID?l.LocalityID:null,p21:l&&l.LocalityCode?l.LocalityCode:null,p22:l&&l.LocalityName?l.LocalityName:null,p23:l&&l.BuildingID?l.BuildingID:null,p24:l&&l.BuildingCode?l.BuildingCode:null,p25:l&&l.BuildingName?l.BuildingName:null,p26:l&&l.FloorID?l.FloorID:null,p27:l&&l.FloorCode?l.FloorCode:null,p28:l&&l.FloorName?l.FloorName:null,p29:l&&l.SpotID?l.SpotID:null,p30:l&&l.SpotCode?l.SpotCode:null,p31:l&&l.SpotName?l.SpotName:null,p32:l&&l.PriorityID?l.PriorityID:null,p33:l&&l.PriorityCode?l.PriorityCode:null,p34:l&&l.PriorityName?l.PriorityName:null,p35:l&&l.DivisionID?l.DivisionID:null,p36:l&&l.DivisionCode?l.DivisionCode:null,p37:l&&l.DivisionName?l.DivisionName:null,p38:l&&l.DisciplineID?l.DisciplineID:null,p39:l&&l.DisciplineCode?l.DisciplineCode:null,p40:l&&l.DisciplineName?l.DisciplineName:null,p41:l&&l.AssetID?l.AssetID:null,p42:l&&l.EquipmentName?l.EquipmentName:null,p43:l&&l.EquipmentRefNo?l.EquipmentRefNo:null,p44:l&&l.AssetBarcode?l.AssetBarcode:null,p45:l&&l.AssetTagNo?l.AssetTagNo:null,p46:l&&l.ComplainerID?l.ComplainerID:null,p47:l&&l.Address1?l.Address1:null,p48:l&&l.ComplainerName?l.ComplainerName:null,p49:l&&l.ContactNo?l.ContactNo:null,p50:l&&l.Email?l.Email:null,p51:l&&l.ComplaintNatureID?l.ComplaintNatureID:null,p52:l&&l.ComplaintNatureCode?l.ComplaintNatureCode:null,p53:l&&l.ComplaintNatureName?l.ComplaintNatureName:null,p54:l&&l.CCMComplaintModeID?l.CCMComplaintModeID:null,p55:l&&l.CCMComplaintModeCode?l.CCMComplaintModeCode:null,p56:l&&l.CCMComplaintModeName?l.CCMComplaintModeName:null,p57:l&&l.ServiceTypeID?l.ServiceTypeID:null,p58:l&&l.ServiceTypCode?l.ServiceTypCode:null,p59:l&&l.ServiceTypeName?l.ServiceTypeName:null,p60:l&&l.ComplaintHeaderID?l.ComplaintHeaderID:null,p61:l&&l.ComplaintHeaderCode?l.ComplaintHeaderCode:null,p62:l&&l.ComplaintHeaderName?l.ComplaintHeaderName:null,p63:l&&l.CCMComplaintModeIndexID?l.CCMComplaintModeIndexID:null,p64:l&&l.CCMComplaintModeIndexCode?l.CCMComplaintModeIndexCode:null,p65:l&&l.CCMComplaintModeIndexName?l.CCMComplaintModeIndexName:null,p66:l&&l.CCMWoTypeID?l.CCMWoTypeID:null,p67:l&&l.CCMWoTypeCode?l.CCMWoTypeCode:null,p68:l&&l.CCMWoTypeName?l.CCMWoTypeName:null,p69:l&&l.CCMComplaintTypeID?l.CCMComplaintTypeID:null,p70:l&&l.CCMComplaintTypeCode?l.CCMComplaintTypeCode:null,p71:l&&l.CCMComplaintTypeName?l.CCMComplaintTypeName:null,p72:l&&l.CCMDeptID?l.CCMDeptID:null,p73:l&&l.CCMDeptCode?l.CCMDeptCode:null,p74:l&&l.CCMDeptName?l.CCMDeptName:null,p75:l&&l.CCMStageID?l.CCMStageID:null,p76:l&&l.CCMStageICode?l.CCMStageICode:null,p77:l&&l.CCMStageIName?l.CCMStageIName:null,p78:l&&l.StageSeqNo?l.StageSeqNo:null,p79:l&&l.IncidentID?l.IncidentID:null,p80:l&&l.IncidentCode?l.IncidentCode:null,p81:l&&l.IncidentName?l.IncidentName:null,p82:l&&l.PPMCreationAssetID?l.PPMCreationAssetID:null,p83:l&&l.WorkOrder?l.WorkOrder:null,p84:l&&l.WoDateTime?l.WoDateTime:null,p85:l&&l.WoDateTimeType?l.WoDateTimeType:null,p86:l&&l.WoDateTimeBetween?l.WoDateTimeBetween:null,p87:l&&l.SubComponentID?l.SubComponentID:null,p88:l&&l.SubComponentName?l.SubComponentName:null,p89:l&&l.ComplaintNo?l.ComplaintNo:null,p90:l&&l.CMResonForPending?l.CMResonForPending:null,p91:l&&l.CCMMobNo?l.CCMMobNo:null,p92:l&&l.ClientWoNo?l.ClientWoNo:null,p93:l&&l.CCMDescription?l.CCMDescription:null,p94:i?1:t.current,p95:t.pageSize,p96:a,p97:null,p98:null,p99:localStorage.getItem("UserGroupID"),p100:localStorage.getItem("userid")}};(0,p.Z)(r,s,Te.token[0]).then((r=>{if(i)(0,J.a)(r,be,n,o,fe);else if("200"==r.Output.status.code)if(r.Output.data.length>0){if(r.Output.data){let e=0;r.Output.data.length>0?(e=parseFloat(r.Output.data[0].TotalCount,10)/10,w(r.Output.data[0].TotalCount),x(r.Output.data[0].DraftCnt),be({type:"count",payload:r.Output.data[0].TotalCount}),"DraftPage"==n&&x(r.Output.data[0].TotalCount)):e=0,10==t.pageSize?T(Math.ceil(e)):20==t.pageSize?T(Math.ceil(e/2)):50==t.pageSize?T(Math.ceil(e/5)):100==t.pageSize&&T(Math.ceil(e/10)),oe(r.Output.data),fe.loading(!1)}e.Dialogview||(document.getElementById("divCCMDocDetails-Entry").style.height="auto",document.getElementById("divCCMDocDetails-Entry").style.display="block")}else fe.loading(!1),"DraftCCMDocDetailsID"===a?(fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}),ue(!0),Ze(!1)):(oe([]),A({current:1,pageSize:10}),T(0),w(0),be({type:"count",payload:"0"}),Object.values(l).some((e=>e))&&fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else fe.alert({open:!0,color:"warning",message:[r.Output.status.message]}),fe.loading(!1)}))};function Tt(t,l){fe.loading(!0);const a=D.v.Api+"FP807S4/",n={data:{p1:"%"+t+"%",p2:e.parentId?e.parentId:"0",p3:Le?"1":"0",p4:l.current,p5:l.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,p.Z)(a,n,Te.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let t=0;e.Output.data.length>0?(t=parseFloat(e.Output.data[0].TotalCount,10)/10,w(e.Output.data[0].TotalCount),be({type:"count",payload:e.Output.data[0].TotalCount})):t=0,10==l.pageSize?T(Math.ceil(t)):20==l.pageSize?T(Math.ceil(t/2)):50==l.pageSize?T(Math.ceil(t/5)):100==l.pageSize&&T(Math.ceil(t/10)),oe(e.Output.data),fe.loading(!1)}else oe([]),T(0),w(0),be({type:"count",payload:"0"}),fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}),fe.loading(!1);else fe.alert({open:!0,color:"warning",message:[e.Output.status.message]}),fe.loading(!1)}))}function bt(e){let t=[],l=[],a=[],n=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldName&&(l.push(e.FieldDisplay),a.push(e.FieldDescription)));let i=localStorage.getItem("Language");n.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[i]]})})),be({type:"language",payload:Object.assign({},...n)}),Ge(l.reduce(((e,t)=>(e[t]="",e)),{})),ge(e),ye(t),Ne(l),lt(a),nt(l)}const wt=()=>he?null:n().createElement("div",null,Ve?n().createElement(ne.Z,{data:je,expanded:e=>!E&&fe.Expanded(e),edit:(e,t,l)=>{E?fe.select(e):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:t}),be({type:"ShowDetail",payload:l}))}}):n().createElement(ae.Z,{ref:d,frmctrlid:"tblcs_807_L1_",id:"CCMDocDetailsTable",headerdata:Ie,tablesearchparams:_e,searchvalue:e=>{Ge(e),de(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...FilteredObj};gt(t),A({current:1,pageSize:10}),ft({current:1,pageSize:10},t,Le?"DraftCCMDocDetailsID":"CCMDocDetailsID",Le&&"DraftPage")},bodydata:te,ondrag:ht,bodyitem:Me,visibleitem:Ie,isdraft:Le,IsView:!1,IsSub:e.tableview,tableExp:!1,tableID:C,showMore:!1,accessrights:Te.AccessRights,expanded:e=>!E&&fe.Expanded(e),edit:(e,t,l)=>{E?fe.select(e):(Object.keys(e).map(((a,n)=>{a.includes("IDPK")&&ft(F,null,t?"DraftCCMDocDetailsID":"CCMDocDetailsID",t&&"DraftPage",e[a],l)})),fe.hideAddBtn(!0))},viewtoggle:fe.viewtoggle,isexpanded:!E||ze,tf:Nt,action:E?"none":"",ViewComp:(e,t)=>{}}));return(0,a.useEffect)((()=>{We(Te.ExpandTableValue)}),[Te.ExpandTableValue]),n().createElement("div",null,!st&&!e.tableview&&n().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"0",padding:"0px 4px 0px 0px"}},n().createElement("div",{id:"fld807L1ECSearchBar",className:"searchbar1"},n().createElement(I.Z,{frmctrlid:"fld807L1TCInputSearch",className:"search_input",type:"text",id:"AdminCountryRegistrygridsearch",placeholder:Mt("Search"),value:ce,onChange:e=>{me(e),fe.searchItem(e)},style:{width:"300px"}}),n().createElement("div",{className:"search_icon"},ce?n().createElement("div",{id:"fld807L1TCCloseIconCommonSearch",onClick:()=>{me(""),fe.searchItem("")}},n().createElement(s.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld807L1TCInputSearchIcon"},n().createElement(V.Z,{className:"InputSearchIcon",onClick:()=>{document.getElementById("CCMDocDetailsgridsearch").focus()}})))),n().createElement("div",null,Te.AccessRights.IsAdd?n().createElement(X.Z,{className:"SaveBtnCommon",frmctrlid:"fld807L1TCAddBtnIsAdd",onClick:()=>{fe.hideAddBtn(!0),be({type:"editData",payload:[]}),be({type:"ShowDetail",payload:!1}),be({type:"Add",payload:!0})}}):"")),n().createElement(o.Z,{expanded:Oe,onChange:()=>()=>{Re(ze)}},e.Dialogview&&n().createElement(U.Z,null,n().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},n().createElement("div",{className:"displayFlex EntryHeader"},n().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.59-3:08:17 PM-18-7[807]"},`${Nt("807")} (${b})`)),!1===e.cardview?null:n().createElement("div",{className:"displayFlex EntryHeaderBtn"},n().createElement("div",{id:"fld807L1TCSearchBar",className:"searchbar",style:{marginTop:"8px"}},n().createElement(I.Z,{frmctrlid:"fld807L1TCInputSearch",className:"search_input",type:"text",placeholder:Mt("Search"),value:ce,onChange:e=>{Et(e)}}),n().createElement("div",{className:"search_icon"},ce?n().createElement("div",{id:"fld807L1TCInputCloseIcon",onClick:()=>{Et("")}},n().createElement(s.Z,{className:"InputSearchIcon"})):n().createElement("div",{id:"fld807L1TCInputSearchIcon"},n().createElement(V.Z,{className:"InputSearchIcon"}))))))),n().createElement(r.Z,{className:"AccDetails"},n().createElement("div",{className:"tableCardL1",style:{height:e.tableview?"auto":"fit-content"}},!e.tableview&&n().createElement("div",{id:"CCMDocDetails-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:n().createElement("div",{className:"tableHeaderItems displayFlex"},!Le&&n().createElement("div",{frmctrlid:"fld807L1TCFilterDataIsDraft",id:"CCMDocDetailsfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{St()}},n().createElement(c.ZP,{title:Mt("Filter Data"),placement:"top"},n().createElement("span",null,n().createElement(M.Ol$,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},Mt("Filter Data"))),!E&&!Le&&!he&&n().createElement(W.Z,{formctrlidprint:"fld807L1TCExportPrint",formctrlidexport:"fld807L1TCExportTable",formctrlidrefresh:"fld807L1TCExportRefresh",title:Nt("807"),data:L,exportData:It,Items:at,columnIndex:tt,TableVisibleItem:Ie,userGridViewFormID:C,TableTotalCount:b,triggerApi:t=>{((t,a,n,i,o)=>{if(0===b)return fe.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;fe.loading(!0);let r=D.v.Api+"FP807S3/",s={data:{p1:t&&t.CCMDocDetailsIDPK?t.CCMDocDetailsIDPK:null,p2:t&&t.CCMDocDetailsCode?t.CCMDocDetailsCode:null,p3:t&&t.CCMDocDetailsName?t.CCMDocDetailsName:null,p4:t&&t.CCMDocDetailsPath?t.CCMDocDetailsPath:null,p5:t&&t.CCMDocDetailsType?t.CCMDocDetailsType:null,p6:null,p7:Le?"1":"0",p8:null,p9:e.parentId?Number(e.parentId):0,p10:t&&t.IsActive,p11:null,p12:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p13:t&&t.CreatedTtm?t.CreatedTtm:null,p14:t&&t.CreatedTtmType?t.CreatedTtmType:null,p15:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p16:null,p17:t&&t.ContractID?t.ContractID:null,p18:t&&t.ContractCode?t.ContractCode:null,p19:t&&t.ContractName?t.ContractName:null,p20:t&&t.LocalityID?t.LocalityID:null,p21:t&&t.LocalityCode?t.LocalityCode:null,p22:t&&t.LocalityName?t.LocalityName:null,p23:t&&t.BuildingID?t.BuildingID:null,p24:t&&t.BuildingCode?t.BuildingCode:null,p25:t&&t.BuildingName?t.BuildingName:null,p26:t&&t.FloorID?t.FloorID:null,p27:t&&t.FloorCode?t.FloorCode:null,p28:t&&t.FloorName?t.FloorName:null,p29:t&&t.SpotID?t.SpotID:null,p30:t&&t.SpotCode?t.SpotCode:null,p31:t&&t.SpotName?t.SpotName:null,p32:t&&t.PriorityID?t.PriorityID:null,p33:t&&t.PriorityCode?t.PriorityCode:null,p34:t&&t.PriorityName?t.PriorityName:null,p35:t&&t.DivisionID?t.DivisionID:null,p36:t&&t.DivisionCode?t.DivisionCode:null,p37:t&&t.DivisionName?t.DivisionName:null,p38:t&&t.DisciplineID?t.DisciplineID:null,p39:t&&t.DisciplineCode?t.DisciplineCode:null,p40:t&&t.DisciplineName?t.DisciplineName:null,p41:t&&t.AssetID?t.AssetID:null,p42:t&&t.EquipmentName?t.EquipmentName:null,p43:t&&t.EquipmentRefNo?t.EquipmentRefNo:null,p44:t&&t.AssetBarcode?t.AssetBarcode:null,p45:t&&t.AssetTagNo?t.AssetTagNo:null,p46:t&&t.ComplainerID?t.ComplainerID:null,p47:t&&t.Address1?t.Address1:null,p48:t&&t.ComplainerName?t.ComplainerName:null,p49:t&&t.ContactNo?t.ContactNo:null,p50:t&&t.Email?t.Email:null,p51:t&&t.ComplaintNatureID?t.ComplaintNatureID:null,p52:t&&t.ComplaintNatureCode?t.ComplaintNatureCode:null,p53:t&&t.ComplaintNatureName?t.ComplaintNatureName:null,p54:t&&t.CCMComplaintModeID?t.CCMComplaintModeID:null,p55:t&&t.CCMComplaintModeCode?t.CCMComplaintModeCode:null,p56:t&&t.CCMComplaintModeName?t.CCMComplaintModeName:null,p57:t&&t.ServiceTypeID?t.ServiceTypeID:null,p58:t&&t.ServiceTypCode?t.ServiceTypCode:null,p59:t&&t.ServiceTypeName?t.ServiceTypeName:null,p60:t&&t.ComplaintHeaderID?t.ComplaintHeaderID:null,p61:t&&t.ComplaintHeaderCode?t.ComplaintHeaderCode:null,p62:t&&t.ComplaintHeaderName?t.ComplaintHeaderName:null,p63:t&&t.CCMComplaintModeIndexID?t.CCMComplaintModeIndexID:null,p64:t&&t.CCMComplaintModeIndexCode?t.CCMComplaintModeIndexCode:null,p65:t&&t.CCMComplaintModeIndexName?t.CCMComplaintModeIndexName:null,p66:t&&t.CCMWoTypeID?t.CCMWoTypeID:null,p67:t&&t.CCMWoTypeCode?t.CCMWoTypeCode:null,p68:t&&t.CCMWoTypeName?t.CCMWoTypeName:null,p69:t&&t.CCMComplaintTypeID?t.CCMComplaintTypeID:null,p70:t&&t.CCMComplaintTypeCode?t.CCMComplaintTypeCode:null,p71:t&&t.CCMComplaintTypeName?t.CCMComplaintTypeName:null,p72:t&&t.CCMDeptID?t.CCMDeptID:null,p73:t&&t.CCMDeptCode?t.CCMDeptCode:null,p74:t&&t.CCMDeptName?t.CCMDeptName:null,p75:t&&t.CCMStageID?t.CCMStageID:null,p76:t&&t.CCMStageICode?t.CCMStageICode:null,p77:t&&t.CCMStageIName?t.CCMStageIName:null,p78:t&&t.StageSeqNo?t.StageSeqNo:null,p79:t&&t.IncidentID?t.IncidentID:null,p80:t&&t.IncidentCode?t.IncidentCode:null,p81:t&&t.IncidentName?t.IncidentName:null,p82:t&&t.PPMCreationAssetID?t.PPMCreationAssetID:null,p83:t&&t.WorkOrder?t.WorkOrder:null,p84:t&&t.WoDateTime?t.WoDateTime:null,p85:t&&t.WoDateTimeType?t.WoDateTimeType:null,p86:t&&t.WoDateTimeBetween?t.WoDateTimeBetween:null,p87:t&&t.SubComponentID?t.SubComponentID:null,p88:t&&t.SubComponentName?t.SubComponentName:null,p89:t&&t.ComplaintNo?t.ComplaintNo:null,p90:t&&t.CMResonForPending?t.CMResonForPending:null,p91:t&&t.CCMMobNo?t.CCMMobNo:null,p92:t&&t.ClientWoNo?t.ClientWoNo:null,p93:t&&t.CCMDescription?t.CCMDescription:null,p94:F.current,p95:b,p96:Le?"DraftCCMDocDetailsID":"CCMDocDetailsID",p97:null,p98:null,p99:localStorage.getItem("UserGroupID"),p100:localStorage.getItem("userid")}};fe.loading(!1),fe.alert({open:!0,color:"success",message:[`${Nt(807)} - ${o.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,p.Z)(r,s,Te.token[0],o).then((e=>{(0,ee.PDF_Excel_Generate)(e,fe,at,k,l,o)}))})(se,O.column,0,0,t)},Refresh:()=>{me(""),A({current:1,pageSize:100}),d.current.clearItem(),Te.IsDraft?ft({current:1,pageSize:100},xe,"DraftCCMDocDetailsID"):ft({current:1,pageSize:100},xe,"CCMDocDetailsID")},disabledPrint:!Te.AccessRights.IsPrint,disabledExport:!Te.AccessRights.IsExport,ref:l,iconinfo:"displayNone"}),!Le&&!he&&!E&&n().createElement("div",{className:"buttoncard",onClick:()=>pt(!rt)},n().createElement("span",null,rt?n().createElement(c.ZP,{disableFocusListener:!0,title:Mt("Less"),placement:"top"},n().createElement("span",{id:"fld807L1TCLess"},n().createElement(Y.ldB,{className:"tableFilterColumnIcon"}))):n().createElement(c.ZP,{disableFocusListener:!0,title:Mt("More"),placement:"top"},n().createElement("span",{id:"fld807L1TCMore"},n().createElement(Y.ilJ,{className:"tableFilterColumnIcon"}))))),rt?n().createElement("div",{className:"EntryHeaderMore"},n().createElement("div",{style:{display:"flex"}},he||!ze?null:E||!Te.AccessRights.IsAdd||Le?"":n().createElement("div",null,n().createElement("div",{frmctrlid:"fld807L1TCFilterDataIsAdd",id:"CCMDocDetailscoldiv",className:"buttoncard",onClick:()=>{fe.EditClose(!0),Ce?(document.getElementById("CCMDocDetailsFilterDiv").style.width="0%",document.getElementById("CCMDocDetailsTabDiv").style.width="100%",document.getElementById("CCMDocDetailsFilterDiv").style.display="none",document.getElementById("CCMDocDetailscoldiv").style.width="fit-content",document.getElementById("CCMDocDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",ue(!1)):(document.getElementById("CCMDocDetailsFilterDiv").style.width="25%",document.getElementById("CCMDocDetailsTabDiv").style.width="75%",document.getElementById("CCMDocDetailsFilterDiv").style.display="block",document.getElementById("CCMDocDetailsfildiv").style.width="fit-content",document.getElementById("CCMDocDetailsfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("CCMDocDetailscoldiv").style.width="fit-content",document.getElementById("CCMDocDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",ue(!0)),pe(!1)}},n().createElement(c.ZP,{title:Mt("Manage Columns"),placement:"top"},n().createElement("div",null,n().createElement(Q.gYA,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},Mt("Manage Columns")))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!E&&ze&&!he&&!Le&&n().createElement("div",null,n().createElement("div",{id:"CCMDocDetailscoldiv",className:"buttoncard",onClick:()=>{Ve?Ue(!1):(Ue(!0),vt({current:1,pageSize:100}))}},n().createElement(c.ZP,{title:Mt("TableScrollData"),placement:"top"},n().createElement("div",{id:"fld807L1TCTableScrollData"},n().createElement(ie.Z,{className:"tableFilterColumnIcon"}))),n().createElement("span",{className:"displayNone"},Mt("Table Scroll Data")))))):""),!Le&&!E&&n().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},he||Le?null:n().createElement("div",null,n().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"}},n().createElement("div",{className:"b2",id:"button-11"},n().createElement("div",{className:Ke?"buttonList":"buttonGrid",id:"fld807L1TCListView",onClick:()=>{He(!0),ot(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(Y.umT,null)),n().createElement("span",null,Mt("List"))),n().createElement("div",{className:Ke||it?"buttonGrid":"buttonList",id:"fld807L1TCCardView",onClick:()=>{He(!1),ot(!1)}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement(N.aCJ,null)),n().createElement("span",null,Mt("Card"))),n().createElement("div",{className:it?"buttonList":"buttonGrid",id:"fld807L1TCTileView",onClick:()=>{ot(!0),He(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},n().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},n().createElement($.f_H,null)),n().createElement("span",null,Mt("Tile"))))))),he?null:Ve?e.IsCollapse?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(j.Z,{style:{color:"#777"},id:"fld807L1TCTableTopPagination",rowsPerPageOptions:[],component:"div",count:Number(Je),page:h,onPageChange:(e,t)=>{S(t),vt({current:t+1,pageSize:Xe.pageSize}),et({current:t+1,pageSize:Xe.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(K.Z,{count:Ye,color:"primary",page:Xe.current,onChange:(e,t)=>{et({current:t,pageSize:Xe.pageSize}),$e(t),vt({current:t,pageSize:Xe.pageSize})}}),n().createElement("div",null,n().createElement(_.Z,{className:"BootstrapInputStyle",value:Xe.pageSize,frmctrlid:"fld807L1TCSelectPagination",onChange:e=>{et({current:1,pageSize:e.target.value}),vt({current:1,pageSize:e.target.value})}},n().createElement(H.Z,{value:10},"10"),n().createElement(H.Z,{value:20},"20"),n().createElement(H.Z,{value:50},"50"),n().createElement(H.Z,{value:100},"100"))),ze&&n().createElement("p",{className:"per-page"},"/ ",Mt("RowperpageOf")," (",Je,")")):e.IsCollapse?n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(j.Z,{style:{color:"#777"},id:"fld807L1TCTablePagination",rowsPerPageOptions:[],component:"div",count:Number(b),page:h,onPageChange:(e,t)=>{S(t),ft({current:t+1,pageSize:F.pageSize},xe,Le?"DraftCCMDocDetailsID":"CCMDocDetailsID",Le&&"DraftPage"),A({current:t+1,pageSize:F.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):n().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},n().createElement(K.Z,{count:f,siblingCount:0,color:"primary",page:F.current,onChange:(e,t)=>{if(A({current:t,pageSize:F.pageSize}),Le)ft({current:t,pageSize:F.pageSize},Fe,"DraftCCMDocDetailsID","DraftPage");else{var l=document.querySelectorAll(".CardViewMain");for(let e=0;e<l.length;e++)l[e].style.background="#FFF";ce.length>0?Tt(ce,{current:t,pageSize:F.pageSize}):ft({current:t,pageSize:F.pageSize},Fe,"CCMDocDetailsID")}}}),n().createElement("div",null,n().createElement(_.Z,{className:"BootstrapInputStyle",value:F.pageSize,id:"fld807L1TCSelectPaging",onChange:e=>{A({current:1,pageSize:e.target.value}),Le?ft({current:1,pageSize:e.target.value},Fe,"DraftCCMDocDetailsID","DraftPage"):ce.length>0?Tt(ce,{current:1,pageSize:e.target.value}):ft({current:1,pageSize:e.target.value},Fe,"CCMDocDetailsID")}},n().createElement(H.Z,{value:10},"10"),n().createElement(H.Z,{value:20},"20"),n().createElement(H.Z,{value:50},"50"),n().createElement(H.Z,{value:100},"100"))),ze&&n().createElement("p",{className:"per-page"},"/ ",Mt("RowperpageOf")," (",b,") "))),n().createElement("div",{id:"CCMDocDetails-TableBody",className:"displayFlex padding0",style:{height:e.tableview?"auto":"66vh",overflow:"auto"}},n().createElement("div",{id:"CCMDocDetailsFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},re&&n().createElement(z,{parentId:e.parentId,searchData:e=>{de(e||Dt),Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)))},formID:C,data:()=>{},visibleData:()=>{},token:Te.token[0],CloseBtnClk:()=>St(),userGrid:Ct,msg:(e,t)=>fe.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{tableRefresh()}}),Ce&&n().createElement(G.Z,{Refresh:e=>{ft({current:1,pageSize:100},xe,"CCMDocDetailsID")},frmctrlid:"fld807L1TCTableColumnOrder",loading:e=>fe.loading(e),className:"dragCheckboxDivL1",AltMsg:(e,t)=>fe.alert({open:!0,color:t,message:[e]}),select:Ce,userID:m,userGridViewFormID:C,saved:(e,t)=>{e&&bt(t),ut(t),be({type:"showTableview",payload:t})},Token:Te.token[0]})),n().createElement("div",{id:"CCMDocDetailsTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:e.tableview?"auto":"66vh"}},Ke?n().createElement(wt,null):n().createElement(q.Z,{frmctrlid:"fld807L1TCExpandedCardDual",data:te,id:"CCMDocDetails",title:"CCMDocDetailsName",cardTile:!!it,visibleitem:Ie,gridCountmdlg:4,gridCountxssm:6,onDoubleClick:(e,t)=>{E?fe.select(e):("edit"==t?(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:Le}),be({type:"ShowDetail",payload:!1}),fe.Expanded(!0)):(be({type:"editData",payload:[e]}),be({type:"IsDraft",payload:Le}),be({type:"ShowDetail",payload:!0}),fe.Expanded(!0),fe.viewtoggle()),re?pe(!0):Ce?ue(!0):(ue(!1),ue(!1))),fe.hideAddBtn(!0)}})))))))}));var re=l(37148),pe=l(29800),se=(l(10966),l(21392),l(26537)),de=l(44528),ce=(l(99090),l(1695)),me=l(61924),Ce=l.n(me),ue=(l(40826),l(55490)),De=l(92371);const ge={EnterKeyValues:{CCMDocDetails:["CCMDocDetailsCode","CCMDocDetailsName","CCMDocDetailsType","ComplaintNo"]},Label:{CCMDocDetails:{CCMDocDetailsCode:["CCMDocDetailsCode","CCMDocDetailsName"],CCMDocDetailsName:["CCMDocDetailsCode","CCMDocDetailsName"],CCMDocDetailsType:["CCMDocDetailsCode","CCMDocDetailsName"],ComplaintID:["CCMDocDetailsCode","CCMDocDetailsName"]}},LabelHeader:{CCMDocDetails:{CCMDocDetailsCode:["Document Code","Document Name"],CCMDocDetailsName:["Document Code","Document Name"],CCMDocDetailsType:["Document Code","Document Name"],ComplaintID:["CCMDocDetailsCode","CCMDocDetailsName"]}},Property:{CCMDocDetails:{CCMDocDetailsCode:{id:"fld807_17920",labelID:"CCMDocDetailsCode",maxLength:"50",labelname:"Document Code",frmctrlid:"fld807_17920",frmctrlidname:"CCMDocDetailsCode",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMDocDetailsName:{id:"fld807_17921",labelID:"CCMDocDetailsName",maxLength:"150",labelname:"Document Name",frmctrlid:"fld807_17921",frmctrlidname:"CCMDocDetailsName",type:"text",mandatory:!0,masked:!1,masktype:"",disabled:!1,autogen:!1},CCMDocDetailsType:{id:"fld807_17923",labelID:"CCMDocDetailsType",maxLength:"100",labelname:"CCMDocDetailsType",frmctrlid:"fld807_17923",frmctrlidname:"CCMDocDetailsType",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},ComplaintID:{id:"fld807_17927",clearID:"CCMDocDetailsComplaintNoClear",type:"select",labelID:"ComplaintIDPK",labelname:"",fielddisplayname:"ComplaintNo",foreignName:[],createEasy:!1,advanceSearch:!0,disabled:!1,mandatory:!1}}},SubForms:{},POPLabel:{CCMDocDetails:{ComplaintID:["ComplaintNo","ContractName","BuildingName","LocalityName","ComplaintNatureName","DivisionName","PriorityName","IsActive","CreatedTtm","UpdatedTtm","ComplainedDateTime"]}}};var Ie=l(6562),ye=l(45155),Me=(l(49174),l(38773),l(19089),l(16233)),Ne=l.n(Me);l(82729),l(75355),l(11107);const Ee={CCMDocDetailsIDPK:"",CCMDocDetailsCode:"",CCMDocDetailsName:"",CCMDocDetailsPath:"",CCMDocDetailsType:"",IsDefault:!1,IsDraft:!1,Remarks:"",ComplaintID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",ContractID:null,ContractCode:"",ContractName:"",LocalityID:null,LocalityCode:"",LocalityName:"",BuildingID:null,BuildingCode:"",BuildingName:"",FloorID:null,FloorCode:"",FloorName:"",SpotID:null,SpotCode:"",SpotName:"",PriorityID:null,PriorityCode:"",PriorityName:"",DivisionID:null,DivisionCode:"",DivisionName:"",DisciplineID:null,DisciplineCode:"",DisciplineName:"",AssetID:null,EquipmentName:"",EquipmentRefNo:"",AssetBarcode:"",AssetTagNo:"",ComplainerID:null,Address1:"",ComplainerName:"",ContactNo:"",Email:"",ComplaintNatureID:null,ComplaintNatureCode:"",ComplaintNatureName:"",CCMComplaintModeID:null,CCMComplaintModeCode:"",CCMComplaintModeName:"",ServiceTypeID:null,ServiceTypCode:"",ServiceTypeName:"",ComplaintHeaderID:null,ComplaintHeaderCode:"",ComplaintHeaderName:"",CCMComplaintModeIndexID:null,CCMComplaintModeIndexCode:"",CCMComplaintModeIndexName:"",CCMWoTypeID:null,CCMWoTypeCode:"",CCMWoTypeName:"",CCMComplaintTypeID:null,CCMComplaintTypeCode:"",CCMComplaintTypeName:"",CCMDeptID:null,CCMDeptCode:"",CCMDeptName:"",CCMStageID:null,CCMStageICode:"",CCMStageIName:"",StageSeqNo:"",IncidentID:null,IncidentCode:"",IncidentName:"",PPMCreationAssetID:null,WorkOrder:"",WoDateTime:"",WoDateTimeType:"",WoDateTimeBetween:"",SubComponentID:null,SubComponentName:"",ComplaintNo:"",CMResonForPending:"",CCMMobNo:"",ClientWoNo:"",CCMDescription:"",Type:"CCMDocDetailsID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")},ve=(0,a.forwardRef)(((e,t)=>{const l=(0,i.useSelector)((e=>e.form)),[s,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!0),[g,I]=(0,a.useState)(!1),[M,N]=(0,a.useState)(!1),[E,h]=(0,a.useState)(""),[T,b]=(0,a.useState)(!1),[w,P]=(0,a.useState)([]),[x,F]=(0,a.useState)(null),[A,B]=(0,a.useReducer)(De.Z,Ee),[k,L]=(0,a.useState)(!1),[O,R]=(0,a.useState)([]),[z,W]=(0,a.useState)(!1),K=(0,a.useContext)(e.context?e.context:we),{cstate:H,cdispatch:_}=e.ContextApi?e.ContextApi:Pe(),[G,V]=(0,a.useState)(0),[j,q]=(0,a.useState)(""),Y=(0,a.useRef)(null),[$,J]=Ne()("807"),[Q,X]=(0,a.useState)(!0),[ee,te]=(0,a.useState)(!1);let le=(0,y.Z)();const[ae,ne]=(0,a.useState)({}),ie=e=>le[e]?le[e]:e,oe=t=>H.language?.[t]?H.language[t]:e.createEasy?ae?.[t]:t;(0,a.useEffect)((()=>{H.PrimaryId&&V(Number(H.PrimaryId))}),[H.PrimaryId]),(0,a.useEffect)((()=>{me()}),[]),(0,a.useEffect)((()=>{me()}),[e.parentId]),(0,a.useEffect)((()=>{H.editData.length>0?(pe(H.editData[0],""),I(!0)):H.Add&&(me(),I(!0))}),[H.editData]),(0,a.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let l=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[l]]})})),ne(Object.assign({},...t))}($)}),[$]),(0,a.useImperativeHandle)(t,(()=>({clear:()=>{me()},CreateEasyProps:(e=!0,t)=>{J(!0),t?(Se(t),I(e)):(me(),I(e))},AddOpen:e=>{me(),I(!0)}})));const pe=(t,l)=>{Object.keys(t).forEach((function(e){0==t[e]&&(t[e]=null)})),N(t.IsDraft),"SetDefaultCCMDocDetailsID"==l?q(t.CCMDocDetailsIDPK):(V(e.primid?Number(e.primid):t.CCMDocDetailsIDPK?t.CCMDocDetailsIDPK:0),_({type:"PrimaryId",payload:t.CCMDocDetailsIDPK})),B({type:"text",name:"CCMDocDetailsCode",value:t.CCMDocDetailsCode?t.CCMDocDetailsCode:""}),B({type:"text",name:"CCMDocDetailsName",value:t.CCMDocDetailsName?t.CCMDocDetailsName:""}),B({type:"text",name:"CCMDocDetailsPath",value:t.CCMDocDetailsPath?t.CCMDocDetailsPath:""}),B({type:"text",name:"CCMDocDetailsType",value:t.CCMDocDetailsType?t.CCMDocDetailsType:""}),B({type:"boolean",name:"IsDefault",boolean:t.IsDefault}),B({type:"number",name:"ComplaintID",number:t.ComplaintID?Number(t.ComplaintID):0}),B({type:"text",name:"ComplaintNo",value:t.ComplaintNo}),t.IsDraft?m(!0):m(!("1"!=t.IsActive&&!t.IsActive))},me=()=>{P([]),V(0),q(""),e.createEasy||K.resetImg(),_({type:"PrimaryId",payload:""}),B({type:"text",name:"CCMDocDetailsCode",value:""}),B({type:"text",name:"CCMDocDetailsName",value:""}),B({type:"text",name:"CCMDocDetailsPath",value:""}),B({type:"text",name:"CCMDocDetailsType",value:""}),B({type:"boolean",name:"IsDefault",boolean:!1}),B({type:"text",name:"ComplaintID",value:null}),B({type:"text",name:"ComplaintNo",value:""}),document.getElementById("CCMDocDetailsComplaintNoClear")&&document.getElementById("CCMDocDetailsComplaintNoClear").click(),m(!0),h(""),X(!0)},Me=t=>{K.loading(!0),K.ConfirmAlert(null);const l=D.v.Api+"FP807S2/",a={data:[{p1:"SetDefaultCCMDocDetailsID"==t?"NORECORDS"!=j&&j?j:0:G,p2:fe(A.CCMDocDetailsCode),p3:fe(A.CCMDocDetailsName),p4:fe(A.CCMDocDetailsPath),p5:fe(A.CCMDocDetailsType),p6:A.IsDefault,p7:!1,p8:"SetDefaultCCMDocDetailsID"==t?"SetDefault":null,p9:e.parentId?Number(e.parentId):A.ComplaintID?A.ComplaintID:0,p10:c,p11:"SetDefaultCCMDocDetailsID"==t,p12:localStorage.getItem("userid"),p13:S()().format("YYYY-MM-DD hh:mm:ss"),p14:localStorage.getItem("userid"),p15:S()().format("YYYY-MM-DD hh:mm:ss")}]};(0,se.Z)(0).then((t=>{(0,p.Z)(l,a,t).then((t=>{const l=t.Output[0].status;let a=t.Output[0].Data,n=new Array,i=new Array;"200"===l.code?(a.map((e=>{e&&(n.push(e.IsAlert),i.push(e.AlertMessage),e.AlertMessage)})),n.some((e=>"1"==e))?(K.alert({open:!0,color:"warning",message:i}),K.loading(!1)):(t=>{X(!0),K.loading(!0),K.ConfirmAlert(null),_({type:"IsDraft",payload:!1});const l=D.v.Api+"FP807S1/",a={data:[{p1:G,p2:fe(A.CCMDocDetailsCode),p3:fe(A.CCMDocDetailsName),p4:fe(A.CCMDocDetailsPath),p5:fe(A.CCMDocDetailsType),p6:A.IsDefault,p7:!1,p8:null,p9:e.parentId?Number(e.parentId):A.ComplaintID?A.ComplaintID:0,p10:c,p11:!1,p12:localStorage.getItem("userid"),p13:S()().format("YYYY-MM-DD hh:mm:ss"),p14:localStorage.getItem("userid"),p15:S()().format("YYYY-MM-DD hh:mm:ss")}]};(0,se.Z)(0).then((t=>{(0,f.Z)(l,a,t).then((t=>{const l=t[0].status;200==l.code?(K.alert({open:!0,color:"success",message:[l.message]}),document.getElementById("overlayimgAttCCMDocDetails"),K.loading(!1),_({type:"PrimaryId",payload:t[0].Data.IDPK}),e.createEasy||(K.RefreshTable(),K.attachmentSave(t[0].Data.IDPK)),me(),H.AccessRights.IsApproval&&K.Approval(!0),document.getElementById("overlayimgAttCCMDocDetails")&&(document.getElementById("overlayimgAttCCMDocDetails").style.width="0%",document.getElementById("overlayimgAttCCMDocDetails").style.display="none",document.getElementById("divCCMDocDetails-Entry").style.width="100%"),e.createEasy||(document.getElementById("CCMDocDetails-MainTable").style.display="block")):(K.alert({open:!0,color:"warning",message:[l.message]}),K.loading(!1)),I(!0)}))}))})()):(K.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),K.loading(!1))}))}))},ve=(t,a,n)=>{const i=D.v.Api+"FP807S3/",o={data:{p1:null,p2:"CCMDocDetailsCode"==n&&a?"%"+a+"%":null,p3:"CCMDocDetailsName"==n&&a?"%"+a+"%":null,p4:"CCMDocDetailsPath"==n&&a?"%"+a+"%":null,p5:"CCMDocDetailsType"==n&&a?"%"+a+"%":null,p6:null,p7:null,p8:null,p9:l.CCMComplaintsComplaintID?l.CCMComplaintsComplaintID:"0",p10:e.Dialogview?"1":null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:null,p51:null,p52:null,p53:null,p54:null,p55:null,p56:null,p57:null,p58:null,p59:null,p60:null,p61:null,p62:null,p63:null,p64:null,p65:null,p66:null,p67:null,p68:null,p69:null,p70:null,p71:null,p72:null,p73:null,p74:null,p75:null,p76:null,p77:null,p78:null,p79:null,p80:null,p81:null,p82:null,p83:null,p84:null,p85:null,p86:null,p87:null,p88:null,p89:null,p90:null,p91:null,p92:null,p93:null,p94:t,p95:10,p96:"CCMDocDetailsID",p97:null,p98:null,p99:localStorage.getItem("UserGroupID"),p100:localStorage.getItem("userid")}},r={data:Object.keys(o.data).slice(0,Object.keys(o.data).length).reduce(((e,t,l)=>(e[t]=l>Object.keys(o.data).length-8?o.data[t]:null,e)),{})};L(!0),(0,p.Z)(i,"ClearAll"==n?r:o,H.token[0]).then((e=>{const l=e.Output.status.code,a=e.Output.data;if("200"==l){const e=a.length;1==t?("CCMDocDetailsType"==n&&X(e>0),R(a)):("CCMDocDetailsType"==n&&X(!0),R(O.concat(a))),L(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),L(!1)}))},he=(0,a.useCallback)((async(e,t,l)=>{"text"==l?B({type:l,name:t,value:e}):"number"==l?B({type:l,name:t,number:Number(e)}):"boolean"==l?B({type:l,name:t,boolean:e}):"date"==l&&B({type:"text",name:t,value:e})}),[A]);function Se(e){K.ConfirmAlert(null),N(e.IsDraft),V(Number(e.CCMDocDetailsIDPK)?Number(e.CCMDocDetailsIDPK):0),B({type:"text",name:"CCMDocDetailsCode",value:e.CCMDocDetailsCode?e.CCMDocDetailsCode:""}),B({type:"text",name:"CCMDocDetailsName",value:e.CCMDocDetailsName?e.CCMDocDetailsName:""}),B({type:"text",name:"CCMDocDetailsType",value:e.CCMDocDetailsType?e.CCMDocDetailsType:""}),B({type:"number",name:"ComplaintID",number:e.ComplaintID?Number(e.ComplaintID):0}),B({type:"text",name:"ComplaintNo",value:e.ComplaintNo?e.ComplaintNo:""})}const fe=e=>"string"==typeof e?e.trim():e;return n().createElement("div",null,n().createElement(o.Z,{expanded:g,onChange:e=>{}},n().createElement(U.Z,null,n().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},g&&n().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"6px",padding:"0px 4px 0px 0px"}},n().createElement("div",{className:"HeadTxt",title:"10.0.0.59-3:08:17 PM-18-7[807]"}," ",ie("Add "),oe("807")),n().createElement("div",{className:"displayFlex EntryHeaderBtn"},H.AccessRights.IsDelete&&n().createElement("div",{className:"GridAlign"},n().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},n().createElement(Ie.Z,{row:!0},n().createElement(Z.Z,{labelPlacement:"bottom",id:"fld807L1ECEntryCheckbox",control:n().createElement(v.Z,{checked:"1"==c,onChange:e=>m(e.target.checked)}),label:ie(1==c?"Active":"In Active")})))),!e.createEasy&&n().createElement("div",{className:"GridAlign",onClick:()=>{K.AttachExpand(!0)},id:"fld807L1ECIconButton"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement("div",{disableRipple:!0,disabled:!1},n().createElement(ye.Ypb,{className:"Iconstyles"}))),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,ie("Attach")))),!G&&n().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{me()},id:"fld807L1ECClearBtn"},n().createElement("div",{className:"Entry-Checkbox"},n().createElement(ye.pYJ,{className:"Iconstyles"})),n().createElement("div",{className:"GridLabel"},n().createElement("p",null,ie("Reset")))),H.AccessRights.IsAdd||H.AccessRights.IsEdit?n().createElement(ce.Z,{frmctrlid:"fld807L1ECSaveBtnIsAdd",name:ie(G?"Update":"Save"),disabled:!1,onClick:()=>{fe(A.CCMDocDetailsName)?e.parentId&&0!=e.parentId?K.ConfirmAlert(n().createElement(Ce(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:ie("Are you sure?"),onConfirm:()=>Me(),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:ie("Yes"),cancelBtnText:ie("Cancel"),showCancel:!0},ie(G?"Do you want to Update?":"Do you want to Save?"))):K.alert({open:!0,color:"warning",message:[ie("Please select the ")+" "+oe("ComplaintID")]}):K.alert({open:!0,color:"warning",message:[ie("Please enter the")+""+oe("CCMDocDetailsName")]})}}):null,!e.createEasy&&n().createElement(re.Z,{frmctrlid:"fld807L1ECCloseBtn",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{me(),I(!1),K.EditClose(!0),K.hideAddBtn(!1),_({type:"Add",payload:!1})}}))))),n().createElement(r.Z,null,n().createElement("div",{id:"CCMDocDetails-Main",className:"width100 displayFlex componentMainDiv cardDiv"},n().createElement("div",{id:"CCMDocDetails-Detail",className:"detailCard detailDiv"},n().createElement("div",{id:"CCMDocDetails-MainBody",className:"padding paddingLeft "},n().createElement("div",null,n().createElement(C.Z,{spacing:2},n().createElement(u.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(de.Z,{json:ge,"data-testid":A.CCMDocDetailsCode,SPName:"CCMDocDetails",FieldName:"CCMDocDetailsCode",tfLabel:oe("CCMDocDetailsCode"),frmctrlid:"fld807_17920",fieldorder:"1",onChange:e=>{he(e,"CCMDocDetailsCode","text")},clear:e=>{e&&B({type:"text",name:"CCMDocDetailsCode",value:""})},value:A.CCMDocDetailsCode})),n().createElement(u.Z,{xs:3,md:3,lg:3,sm:3},n().createElement(de.Z,{json:ge,"data-testid":A.CCMDocDetailsName,SPName:"CCMDocDetails",FieldName:"CCMDocDetailsName",tfLabel:oe("CCMDocDetailsName"),frmctrlid:"fld807_17921",fieldorder:"2",onChange:e=>{he(e,"CCMDocDetailsName","text")},clear:e=>{e&&B({type:"text",name:"CCMDocDetailsName",value:""})},value:A.CCMDocDetailsName})),n().createElement(u.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},n().createElement(ue.Z,{"data-testid":A.CCMDocDetailsType,json:ge,SPName:"CCMDocDetails",FieldName:"CCMDocDetailsType",tfLabel:oe("CCMDocDetailsType"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&(e=>{K.ConfirmAlert(n().createElement(Ce(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Se(e),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:ie("Yes"),cancelBtnText:ie("No"),showCancel:!0},ie("Do you want to update this record?")))})(t),onClick:()=>{Q&&ve(1,"","ClearAll"),X(!0)},frmctrlid:"fld807_17923",frmctrlidName:"CCMDocDetailsType",fieldorder:"2",data:O,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:O.length>0?O[0].TotalCount:0,onChange:(e,t)=>{Q&&ve(e,t,"CCMDocDetailsType"),he(t,"CCMDocDetailsType","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||X(!0)},showList:Q,SideEntryView:!1,KeyBack:e=>{},value:A.CCMDocDetailsType,loading:k,clear:e=>{e&&(B({type:"text",name:"CCMDocDetailsType",value:""}),X(!0))}})),n().createElement(u.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},n().createElement(ue.Z,{json:ge,id:A.ComplaintID,"data-testid":A.ComplaintID,value:A.ComplaintNo,SPName:"CCMDocDetails",FieldName:"ComplaintID",tfLabel:oe("ComplaintID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>he(e,"ComplaintID","select"),onChange:(t,l)=>{((t,l,a,n,i,o)=>{const r=D.v.Api+"FP807S3/",s={data:{p1:null,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:e.parentId?Number(e.parentId):0,p10:e.Dialogview?"1":null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:"0"==A.ContractID?null:A.ContractID,p18:l?"%"+l+"%":null,p19:l?"%"+l+"%":null,p20:"0"==A.LocalityID?null:A.LocalityID,p21:l?"%"+l+"%":null,p22:l?"%"+l+"%":null,p23:"0"==A.BuildingID?null:A.BuildingID,p24:l?"%"+l+"%":null,p25:l?"%"+l+"%":null,p26:"0"==A.FloorID?null:A.FloorID,p27:l?"%"+l+"%":null,p28:l?"%"+l+"%":null,p29:"0"==A.SpotID?null:A.SpotID,p30:l?"%"+l+"%":null,p31:l?"%"+l+"%":null,p32:"0"==A.PriorityID?null:A.PriorityID,p33:l?"%"+l+"%":null,p34:l?"%"+l+"%":null,p35:"0"==A.DivisionID?null:A.DivisionID,p36:l?"%"+l+"%":null,p37:l?"%"+l+"%":null,p38:"0"==A.DisciplineID?null:A.DisciplineID,p39:l?"%"+l+"%":null,p40:l?"%"+l+"%":null,p41:"0"==A.AssetID?null:A.AssetID,p42:l?"%"+l+"%":null,p43:l?"%"+l+"%":null,p44:l?"%"+l+"%":null,p45:l?"%"+l+"%":null,p46:"0"==A.ComplainerID?null:A.ComplainerID,p47:l?"%"+l+"%":null,p48:l?"%"+l+"%":null,p49:l?"%"+l+"%":null,p50:l?"%"+l+"%":null,p51:"0"==A.ComplaintNatureID?null:A.ComplaintNatureID,p52:l?"%"+l+"%":null,p53:l?"%"+l+"%":null,p54:"0"==A.CCMComplaintModeID?null:A.CCMComplaintModeID,p55:l?"%"+l+"%":null,p56:l?"%"+l+"%":null,p57:"0"==A.ServiceTypeID?null:A.ServiceTypeID,p58:l?"%"+l+"%":null,p59:l?"%"+l+"%":null,p60:"0"==A.ComplaintHeaderID?null:A.ComplaintHeaderID,p61:l?"%"+l+"%":null,p62:l?"%"+l+"%":null,p63:"0"==A.CCMComplaintModeIndexID?null:A.CCMComplaintModeIndexID,p64:l?"%"+l+"%":null,p65:l?"%"+l+"%":null,p66:"0"==A.CCMWoTypeID?null:A.CCMWoTypeID,p67:l?"%"+l+"%":null,p68:l?"%"+l+"%":null,p69:"0"==A.CCMComplaintTypeID?null:A.CCMComplaintTypeID,p70:l?"%"+l+"%":null,p71:l?"%"+l+"%":null,p72:"0"==A.CCMDeptID?null:A.CCMDeptID,p73:l?"%"+l+"%":null,p74:l?"%"+l+"%":null,p75:"0"==A.CCMStageID?null:A.CCMStageID,p76:l?"%"+l+"%":null,p77:l?"%"+l+"%":null,p78:l?"%"+l+"%":null,p79:"0"==A.IncidentID?null:A.IncidentID,p80:l?"%"+l+"%":null,p81:l?"%"+l+"%":null,p82:"0"==A.PPMCreationAssetID?null:A.PPMCreationAssetID,p83:l?"%"+l+"%":null,p84:A.WoDateTime?A.WoDateTime:null,p85:null,p86:null,p87:"0"==A.SubComponentID?null:A.SubComponentID,p88:l?"%"+l+"%":null,p89:l?"%"+l+"%":null,p90:l?"%"+l+"%":null,p91:l?"%"+l+"%":null,p92:l?"%"+l+"%":null,p93:l?"%"+l+"%":null,p94:t,p95:10,p96:a,p97:null,p98:null,p99:localStorage.getItem("UserGroupID"),p100:localStorage.getItem("userid")}};Object.keys(s.data).slice(0,Object.keys(s.data).length).reduce(((e,t,l)=>(e[t]=l>Object.keys(s.data).length-8?s.data[t]:null,e)),{});L(!0);(0,p.Z)(r,s,H.token[0]).then((e=>{const l=e.Output.status.code,a=e.Output.data;if("200"==l){const e=a.length;undefined,R(1==t?e>0?a:[]:O.concat(a)),L(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),L(!1)}))})(t,l,"ComplaintIDPK")},KeyBack:e=>{A.ComplaintID},fieldorder:"2",data:O,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:O.length>0?O[0].TotalCount:0,openSlide:()=>{CreateEasy("290",H,_,K,Y)},Tabledialog:()=>(AdvanceSearch("290","ComplaintID",we,Pe(),he,t),!1),loading:k,clear:e=>{e&&A.ComplaintID}})))),n().createElement("div",{id:"CCMDocDetailsSideBar",className:"sidenav"},n().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("CCMDocDetailsSideBar").style.width="0",void b(!1))},""),T&&n().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},x))))))))}));l(77366),l(97829);var he=l(65197);const Se=(0,a.forwardRef)(((e,t)=>{const l=(0,a.useRef)(),[s,d]=((0,i.useSelector)((e=>e.form)),(0,a.useState)([])),[c,m]=(0,a.useState)(!0),[C,u]=(0,a.useState)(e.showDetail),[g,I]=(0,a.useState)(""),[M,N]=n().useState(!1),[E,v]=n().useState(""),[h,S]=n().useState(!1),f=(0,a.useContext)(we),{cstate:T,cdispatch:b}=Pe(),[w,P]=(0,a.useState)(!1),[x,F]=(0,a.useState)(""),[A,B]=(0,a.useState)(""),[k,L]=(0,a.useState)("");let Z=(0,y.Z)();(0,a.useEffect)((()=>{T.editData.length>0&&(d(T.editData),N(!1),b({type:"PrimaryId",payload:T.editData[0].CCMDocDetailsIDPK}))}),[T.editData]),(0,a.useEffect)((()=>{T.showTableview&&L(T.showTableview)}),[T.showTableview]),(0,a.useEffect)((()=>{m(T.ExpandDetailValue)}),[T.ExpandDetailValue]),(0,a.useImperativeHandle)(t,(()=>({tableClick:e=>{m(e),N(null)},viewtoggle:()=>{N(!1)},viewlistProps:(t,l)=>{!function(t,l=!1){let a=D.v.Api+"FP807S3/",n={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:e.Dialogview?"1":null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:null,p51:null,p52:null,p53:null,p54:null,p55:null,p56:null,p57:null,p58:null,p59:null,p60:null,p61:null,p62:null,p63:null,p64:null,p65:null,p66:null,p67:null,p68:null,p69:null,p70:null,p71:null,p72:null,p73:null,p74:null,p75:null,p76:null,p77:null,p78:null,p79:null,p80:null,p81:null,p82:null,p83:null,p84:null,p85:null,p86:null,p87:null,p88:null,p89:null,p90:null,p91:null,p92:null,p93:null,p94:1,p95:10,p96:T.IsDraft?"DraftCCMDocDetailsID":"CCMDocDetailsID",p97:null,p98:null,p99:localStorage.getItem("UserGroupID"),p100:localStorage.getItem("userid")}};(0,se.Z)(0).then((e=>{(0,p.Z)(a,n,e).then((e=>{f.loading(!1),"200"==e.Output.status.code&&d(e.Output.data)}))}))}(t,l)},clear:()=>{"panel0"===M&&l.current.clear()}})));const O=e=>Z?.[e]?Z?.[e]:e,R=e=>T.language?.[e]?T.language[e]:e;function z(e,t){}const W=(e,t)=>(l,a)=>{v(h?Object.assign(...s.filter((e=>e.CCMDocDetailsIDPK==t)).map((e=>e))):T.editData),N(!a&&e)};return n().createElement("div",null,n().createElement(o.Z,{expanded:c,onChange:()=>()=>{e.expandTable&&m(!c)}},!M&&n().createElement(U.Z,null,n().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},c?n().createElement("div",{className:"displayFlex EntryViewHeader"},n().createElement("p",{className:"ListP"},T.IsDraft?O("Draft"):"",R("CCMDocDetails"),e.viewonly?" ":"("+T.count+")")):"",c?n().createElement("div",{className:"displayFlex EntryHeaderBtn"},!e.viewonly&&T.AccessRights.IsAdd?n().createElement(X.Z,{name:O("Add"),frmctrlid:"fld807L1VCAddBtn",className:"AddBtnCommon boxShadowNone",onClick:()=>{f.hideAddBtn(!0),b({type:"editData",payload:[]}),b({type:"ShowDetail",payload:!1}),b({type:"Add",payload:!0})},disabled:!1}):"",!e.viewonly&&T.AccessRights.IsEdit?n().createElement(pe.Z,{frmctrlid:"fld807L1VCEditBtn",onClick:W("panel0",""),disabled:!1}):T.IsDraft&&T.AccessRights.IsAdd&&n().createElement(pe.Z,{frmctrlid:"fld807L1VCEditBtnIsAdd",onClick:()=>{W("panel","")},disabled:!1}),!e.viewonly&&n().createElement(re.Z,{disabled:!1,className:"L1AddBtnCommon",frmctrlid:"fld807L1VCCloseBtn",onClick:()=>{m(!1),f.hideAddBtn(!1),h&&(b({type:"editData",payload:[]}),d([]))}})):"")),n().createElement(r.Z,{style:{display:"block"}},s.map(((t,a)=>n().createElement("div",{key:a},M==="panel"+a?n().createElement(ve,{ref:l,parentId:e.parentId}):n().createElement(n().Fragment,null,n().createElement(he.Z,{tableName:"CCMDocDetails",tableID:807,parentID:t.CCMDocDetailsIDPK,fldid:"fld807L1VCContainer",OpenSlideComponent:z,index:a,refresh:k,val:t,tf:R,t:O,title:"10.0.0.59-3:08:17 PM-18-7[807]"}))))))))}));var fe=l(67698),Te=l(55995),be=(l(45965),l(41722));l(9175);const we=(0,a.createContext)(),Pe=()=>{const e=(0,a.useContext)(we);if(void 0===e)throw new Error("useCont must be used within  CCMDocDetailsContext Provider");return e},xe=[],Fe=(0,a.forwardRef)(((e,t)=>{const l=(0,a.useRef)(),o=(0,a.useRef)(),r=(0,a.useRef)(),p=(0,a.useRef)(),s=(0,a.useRef)(),[d,c]=(0,a.useState)(!0),[m,C]=(0,a.useState)(),u=((0,i.useSelector)((e=>e.form)),(0,i.useDispatch)()),[D,g]=(0,a.useState)(0),[I,y]=(0,a.useReducer)(be.D,be.E),[M,N]=(0,a.useState)(""),[E,v]=(0,a.useState)([]),[h,S]=(0,a.useState)(!1);(0,a.useEffect)((()=>{e.loading(!0),e.tableview||o.current.clear(),document.getElementById("divCCMDocDetails-Entry").style.width="100%",document.getElementById("CCMDocDetails-MainTable").style.width="100%",document.getElementById("CCMDocDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMDocDetails-MainDiv").classList.add("displayGrid")}),[]),(0,a.useEffect)((()=>{c(!0),document.getElementById("divCCMDocDetails-Entry").style.width="100%",document.getElementById("CCMDocDetails-MainTable").style.width="100%",document.getElementById("CCMDocDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMDocDetails-MainDiv").classList.add("displayGrid")}),[]),(0,a.useEffect)((()=>{e.editData&&(y({type:"editData",payload:[e.editData]}),y({type:"ShowDetail",payload:!0}))}),[e.editData]),(0,a.useImperativeHandle)(t,(()=>({AddOpen:(e,t)=>{y(t?{type:"AccessRights",payload:{IsAdd:!0,IsEdit:!0,IsView:!0,IsDelete:!0,IsPrint:!0,IsExport:!0}}:{type:"AccessRights",payload:{IsAdd:!1,IsEdit:!1,IsView:!1,IsDelete:!0,IsPrint:!0,IsExport:!0}}),o.current.AddOpen(e),setTimeout((()=>l.current.HideEntryFields(!0)),500)},AddClose:()=>{setTimeout((()=>l.current.HideEntryFields(!0)),500)}})));const f=e=>{v([]),document.getElementById("divCCMDocDetails-Entry").style.width="100%",document.getElementById("CCMDocDetailsEntryTable").style.width="100%",document.getElementById("CCMDocDetails-MainEntry").style.width="100%",document.getElementById("CCMDocDetails-MainEntry").style.display="block",document.getElementById("CCMDocDetails-MainDiv").classList.add("displayFlex"),document.getElementById("CCMDocDetails-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttCCMDocDetails").style.width="0%",document.getElementById("overlayimgAttCCMDocDetails").style.display="none"};(0,a.useEffect)((()=>{u((e=>{(0,se.Z)(1).then((e=>{var t=new Array;t.push(e),y({type:"token",payload:t}),g(t.length),T(e)}))}))}),[]);const T=t=>{y({type:"AccessRights",payload:e.AccessRights})};return n().createElement("div",{style:{width:"100%"}},n().createElement(we.Provider,{value:{cstate:I,cdispatch:y,ContextApi:Pe,loading:t=>e.loading(t),alert:t=>e.alertmsg(t),ShareTab:(t,l)=>e.TabShare(t,l),ConfirmAlert:t=>e.ConfirmAlert(t),SlideComponentType:t=>e.SlideComponentType(t),openNav:t=>e.openNav(t),RefreshTable:()=>{l.current.tableRefresh()},searchItem:e=>{0!==D&&l.current.searchItem(e)},openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t),attachmentSave:e=>{s.current.tempsave(e,E),v([])},EditClose:e=>f(),AttachExpand:e=>(p.current.AttachmentData(I.PrimaryId),void(d&&(document.getElementById("overlayPreviewCCMDocDetails").style.width="50%",document.getElementById("divCCMDocDetails-Entry").style.width="100%",document.getElementById("CCMDocDetails-MainTable").style.width="100%",document.getElementById("CCMDocDetails-MainEntry").style.width="100%",document.getElementById("CCMDocDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("CCMDocDetails-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttCCMDocDetails").style.display="block",document.getElementById("overlayimgAttCCMDocDetails").style.width="25%"))),Expanded:e=>{I.ShowDetail&&r.current.tableClick(e),y({type:"ExpandDetailValue",payload:e})},viewtoggle:()=>{I.ShowDetail&&r.current.viewtoggle()},clear:e=>{y({type:"ShowDetail",payload:!1}),y({type:"editData",payload:[]}),I.ShowDetail?r.current.clear(e):o.current.clear(e)},hideAddBtn:e=>{l.current.HideEntryFields(e)},ExpandEntry:()=>{I.ShowDetail?r.current.tableClick(!1):o.current.CreateEasyProps(!1)},resetImg:()=>{s.current.tempClear(),p.current.clrImgstate(!0)}}},n().createElement("div",{id:"CCMDocDetails-MainDiv",className:"MainDivStyles displayFlex",style:{height:e.subForm&&"fit-content"}},n().createElement("div",{id:"CCMDocDetails-MainEntry",className:"",style:{background:"#fff"}},n().createElement("div",{style:{display:"flex"}},n().createElement("div",{id:"CCMDocDetailsEntryTable",style:{width:"100%"}},I.ShowDetail?n().createElement("div",null,n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divCCMDocDetails-Entry",style:{width:"100%"}},0!==D?n().createElement(Se,{ref:r,IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}):null)),n().createElement(Te.Z,{ref:s,menurefID:807,fileId:"LogoImgCCMDocDetails",imgloading:t=>{t||I.PrimaryId?e.loading(t):l.current.tableRefresh()},valueIDPK:I.PrimaryId,AttachmentVal:e=>p.current.AttachmentData(e),previd:"overlayPreviewCCMDocDetails",frmctrlid:"PvwIm_807_L1_",tempImg:e=>{I.PrimaryId?p.current.AttachmentData(I.PrimaryId):p.current.tempImg(e),v(e)},clearTempData:I.Add})):n().createElement("div",null,n().createElement("div",{className:"displayFlex width100"},n().createElement("div",{id:"divCCMDocDetails-Entry",style:{width:"100%"}},!e.tableview&&n().createElement(ve,{ref:o,clrImgstate:e=>p.current.clrImgstate(e),IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}))),n().createElement(Te.Z,{ref:s,menurefID:807,fileId:"LogoImgCCMDocDetails",imgloading:t=>{t||I.PrimaryId?e.loading(t):l.current.tableRefresh()},valueIDPK:I.PrimaryId,AttachmentVal:e=>p.current.AttachmentData(e),previd:"overlayPreviewCCMDocDetails",frmctrlid:"PvwIm_807_L1_",tempImg:e=>{I.PrimaryId?p.current.AttachmentData(I.PrimaryId):p.current.tempImg(e),v(e)},clearTempData:I.Add})),n().createElement("div",{id:"CCMDocDetails-MainTable"},0!==D?n().createElement(oe,{ref:l,parentId:e.parentId,IsCollapse:e.IsCollapse,tableview:e.tableview}):null)),n().createElement(fe.Z,{ImgAttachment:e=>f(),menurefID:807,fileId:"AttImgCCMDocDetails",imgid:"overlayimgAttCCMDocDetails",valueIDPK:I.PrimaryId,PriviewData:(e,t,l,a)=>{s.current.PriviewItem(e,t,l,a)},previd:"overlayPreviewCCMDocDetails",ref:p,imgloading:m,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_807_L1_",timglist:e=>{s.current.timglist(e),v(e)},clearTempData:I.Add}))),n().createElement("div",{id:"CCMDocDetails-DetailDiv",style:{display:"none",height:"81vh",overflowY:"auto"}}))))}))}}]);