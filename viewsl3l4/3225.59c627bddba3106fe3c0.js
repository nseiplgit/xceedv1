"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[3225],{73225:(e,t,a)=>{a.r(t),a.d(t,{ContextApi:()=>ke,UserGridViewData:()=>Ee,WorkPermitWODetailsContext:()=>Ie,default:()=>Ce});var l=a(92950),r=a.n(l),i=(a(95866),a(45237)),n=a(36939),o=a(61201),m=a(51673),d=(a(99058),a(80366)),s=a(282),p=a(868),c=a(78513),u=a(14439),y=a(27848),W=a(40900),D=a(64059),g=a(24038),P=a(8981),I=a(47516),k=a(86893),E=a(33681),C=a(63163),f=a(25108);const v=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[i,n]=(0,l.useState)([]),[o,v]=(0,l.useState)({idpk:"",name:"",type:""}),[O,h]=(0,l.useState)(""),[S,T]=(0,l.useState)({}),[N,b]=(0,l.useState)(!0),[w,A]=(0,l.useState)(!1),{cstate:x,cdispatch:F}=e.ContextApi?e.ContextApi:ke(),[B,K]=(0,l.useState)(1),[M,L]=(0,l.useState)(0),[R,Z]=(0,l.useState)(!1),[z,_]=(0,l.useState)({}),[q,V]=(0,l.useState)([]),[G,U]=(0,l.useState)(!0);let H=localStorage.getItem("Language");const j={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let Y=(0,P.Z)();const $=e=>Y[e]?Y[e]:e,J=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[j[H]];function Q(){T({}),_({}),e.searchData({}),A(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));V(t)}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Q()}})));const X=async(t,a,l,r)=>{Z(!0);let o=a.IsForeign?a.FieldName+"PK":"WorkPermitWOIDPK";try{let d="",s=[],p={};await v((e=>(d=e.name,e))),await T((e=>(s=e,e))),await _((e=>(p=e,e)));const c=W.v.Api+"FP1302S3/",u={data:{p1:a.IsForeign?await ae():null,p2:"WorkPermitWOCode"==d&&l.length>0?"%"+l+"%":null,p3:"WorkOrderKey"==d&&l.length>0?"%"+l+"%":null,p4:"WorkOderType"==d&&l.length>0?"%"+l+"%":null,p5:null,p6:null,p7:e.parentId?e.parentId:"0",p8:"MatWoTypeName"!=d&&s.MatWoTypeName?s.MatWoTypeName.map((e=>e.MatWoTypeIDPK)).toString():null,p9:"ParentWorkPermitWOIKeyD"==d&&l.length>0?"%"+l+"%":null,p10:e.Dialogview?"1":null,p11:null,p12:"p12"==d&&l.length>0?l:null,p13:null,p14:null,p15:null,p16:null,p17:"AppAuthorityName"!=d&&s.AppAuthorityName?s.AppAuthorityName.map((e=>e.WPApprovalAuthorityIDPK)).toString():null,p18:"AppAuthorityCode"==d&&l.length>0?"%"+l+"%":null,p19:"AppAuthorityName"==d&&l.length>0?"%"+l+"%":null,p20:"PermitRequestName"!=d&&s.PermitRequestName?s.PermitRequestName.map((e=>e.WPPermitRequestIDPK)).toString():null,p21:"PermitRequestCode"==d&&l.length>0?"%"+l+"%":null,p22:"PermitRequestName"==d&&l.length>0?"%"+l+"%":null,p23:"DivisionName"!=d&&s.DivisionName?s.DivisionName.map((e=>e.DivisionIDPK)).toString():null,p24:"DivisionCode"==d&&l.length>0?"%"+l+"%":null,p25:"DivisionName"==d&&l.length>0?"%"+l+"%":null,p26:"ContractName"!=d&&s.ContractName?s.ContractName.map((e=>e.ContractIDPK)).toString():null,p27:"ContractCode"==d&&l.length>0?"%"+l+"%":null,p28:"ContractName"==d&&l.length>0?"%"+l+"%":null,p29:"LocalityName"!=d&&s.LocalityName?s.LocalityName.map((e=>e.LocalityIDPK)).toString():null,p30:"LocalityCode"==d&&l.length>0?"%"+l+"%":null,p31:"LocalityName"==d&&l.length>0?"%"+l+"%":null,p32:"BuildingName"!=d&&s.BuildingName?s.BuildingName.map((e=>e.BuildingIDPK)).toString():null,p33:"BuildingCode"==d&&l.length>0?"%"+l+"%":null,p34:"BuildingName"==d&&l.length>0?"%"+l+"%":null,p35:"FloorName"!=d&&s.FloorName?s.FloorName.map((e=>e.FloorIDPK)).toString():null,p36:"FloorCode"==d&&l.length>0?"%"+l+"%":null,p37:"FloorName"==d&&l.length>0?"%"+l+"%":null,p38:"SpotName"!=d&&s.SpotName?s.SpotName.map((e=>e.SpotIDPK)).toString():null,p39:"SpotCode"==d&&l.length>0?"%"+l+"%":null,p40:"SpotName"==d&&l.length>0?"%"+l+"%":null,p41:"FirstName"!=d&&s.FirstName?s.FirstName.map((e=>e.EmployeeIDPK)).toString():null,p42:"EmployeeCode"==d&&l.length>0?"%"+l+"%":null,p43:"FirstName"==d&&l.length>0?"%"+l+"%":null,p44:"EmpContactNo1"==d&&l.length>0?"%"+l+"%":null,p45:"EmpEmailOfficial"==d&&l.length>0?"%"+l+"%":null,p46:"WPPermitCode"==d&&l.length>0?"%"+l+"%":null,p47:"WPPermitTitle"==d&&l.length>0?"%"+l+"%":null,p48:"MatWoTypeCode"==d&&l.length>0?"%"+l+"%":null,p49:"MatWoTypeName"==d&&l.length>0?"%"+l+"%":null,p50:r||1,p51:10,p52:t,p53:null,p54:null,p55:localStorage.getItem("UserGroupID"),p56:localStorage.getItem("userid")}};await(0,m.Z)(c,u,e.token).then((t=>{const a=t.Output.status.code,l=t.Output.data;if("200"===a)if(l.length>0)if(1===r){let e=te(l,d),t=ee(e,S[d],o);n(t),L(t.length>0?t[0].TotalCount:S[d].length)}else{let e=[...i,...l],t=te(e,d);L(t.length<10?t.length:l[0].TotalCount),n(te(t,d))}else O.length>0&&n([]),L(i.length);else e.alertmsg("error",[t.Output.status.message])}))}catch(t){e.alertmsg("warning",[t])}finally{Z(!1)}},ee=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),te=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));async function ae(){let e={};await T((t=>(e=t,t)));let t=[...q],a=[];for(let l of t){let t=e[l]?.map((e=>e.WorkPermitWOIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function le(t,a,l,r,i,n){let o={[r]:{From:t,Type:l,To:a}},m={};_((e=>({...e,...o})));const d={...S};let s=[...q],p=[];for(let e of s){let t=d[e]?.map((e=>e.WorkPermitWOIDPK)).toString();t&&p.push(t)}await _((e=>(m=e,e)));let c={WorkPermitWOIDPK:p?[...new Set(p)].toString():"",CreatedTtm:m.CreatedTtm?m.CreatedTtm.From:"",CreatedTtmType:m.CreatedTtm?m.CreatedTtm.Type:"",CreatedTtmBetween:m.CreatedTtm?m.CreatedTtm.To:"",IsActive:"IsActive"==l?i:null,MatWoTypeID:S.MatWoTypeName?.map((e=>e.MatWoTypeIDPK)).toString(),WorkPermitID:S.PerEquipmentName?.map((e=>e.WorkPermitIDPK)).toString()};e.searchData(c)}function re(){return r().createElement(D.Z,{frmctrlid:"fld1302L1TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,r)=>{le(e,t,a,o.name,l)},keyboardback:()=>{A(!1),v({idpk:"",name:"",type:""})},title:$(o.name),fieldname:o.name,save:e=>{alert(!0)}})}return r().createElement("div",null,w?"Created Ttm"===o.name||o.name.includes("Date")?r().createElement(re,null):r().createElement("div",null,r().createElement("div",{className:"columnHeader displayFlex"},r().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},r().createElement(u.Z,null,r().createElement(y.Z,{xs:6,sm:6,md:6,lg:6},r().createElement("p",{className:"columnHeaderp"},J(o.idpk)," (",i.length,"/",M,")")),r().createElement(y.Z,{xs:6,sm:6,md:6,lg:6},r().createElement(p.ZP,{title:$("Close"),placement:"top"},r().createElement("div",{className:"FilterItemClose",align:"right"},r().createElement(d.Z,{id:"fld1302L1TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{A(!1),v({idpk:"",name:"",type:""}),K(1)}}))),S[o.name]&&r().createElement("div",{className:"FiltercloseAlign",align:"right"},r().createElement(s.Z,{frmctrlid:"fld1302L1TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await T((t=>(e=t,f.log("clear fewItems",e),t))),e[o.name]=[],X(o.type,o.name,"",1)})()}},r().createElement("span",{className:"ColumnApplyTitle"},$("Clear All")))))))),r().createElement("div",{className:"FilterParentDiv"},r().createElement("div",{"data-list-scroll-container":"true"},r().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},r().createElement("div",{className:"FilterMaximize"},N?r().createElement(p.ZP,{title:"Maximize",placement:"right"},r().createElement("span",null,r().createElement(k.D7o,{className:"FilterMaximizeIcon",onClick:()=>{b(!1)}}))):r().createElement(p.ZP,{title:"Minimize",placement:"right"},r().createElement("span",null,r().createElement(k.dOw,{className:"FilterMaximizeIcon",onClick:()=>{b(!0)}})))),r().createElement("ul",null,S[o.name]&&S[o.name].map(((e,t)=>r().createElement("div",{key:t,tabIndex:"-1",className:N?"filterSelectedItems":"filterSelectedItemsMaximize"},r().createElement("div",{className:"filterSelectedItemNames"},r().createElement("span",null,e[o.name])),r().createElement("div",{className:"filterSelectedItemClose"},r().createElement("div",{id:"fildacls_3_L2_"+e[o.name],onClick:()=>(async(e,t)=>{K(1);let a=S[o.name].filter((t=>t!=e)),l={};await T((e=>(l=e,e))),l[o.name]=a,T(l),n((t=>[e,...t]))})(e)},r().createElement(d.Z,{className:"filterSelectedItemCloseIcon"})))))))),r().createElement("div",{className:"displayFlex width100 FilterSearch"},r().createElement("div",{className:"FilterSearchInputDiv"},r().createElement(g.Z,{frmctrlid:"fld1302L1TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:O,placeholder:$("Enter ")+" "+J(o.idpk),onChange:e=>{h(e),X(o.type,o.name,e,1,ae())}})),r().createElement("div",{id:"fld1302L1TFCFilterGoForward",className:"FilterSearchBtn",onClick:async t=>{let a="",l={};await T((e=>(a=e,e)));let r=[...q],i=[];for(let e of r){let t=a[e]?.map((e=>e.WorkPermitWOIDPK)).toString();t&&i.push(t)}await _((e=>(l=e,e)));let n={WorkPermitWOIDPK:i?[...new Set(i)].toString():"",CreatedTtm:l.CreatedTtm?l.CreatedTtm.From:"",CreatedTtmType:l.CreatedTtm?l.CreatedTtm.Type:"",CreatedTtmBetween:l.CreatedTtm?l.CreatedTtm.To:"",MatWoTypeID:S.MatWoTypeName?.map((e=>e.MatWoTypeIDPK)).toString(),WorkPermitID:S.PerEquipmentName?.map((e=>e.WorkPermitIDPK)).toString()};e.searchData(n),A(!1)}},r().createElement(p.ZP,{title:"",placement:"top"},r().createElement(s.Z,{className:"ColumnSearchButton"},r().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),R&&r().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},r().createElement(E.Z,{color:"secondary"})),r().createElement("div",{id:"fld1302L1TFCScrollYDefault",className:"height65 scrollYDefault"},i.length>0&&i.map(((e,t)=>r().createElement("div",{id:"filda_3_L2_"+e[o.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await T((e=>(l=e,e)));let r=l[o.name];t[o.name]=r?[...a,...r]:a,l={...l,...t},T(l),n((t=>t.filter((t=>t!=e))))})(e)}},r().createElement(c.Z,{className:"DotIcon"}),r().createElement("span",null,e[o.name])))),i.length+0<M&&i.length>0&&r().createElement("div",{id:"fld1302L1TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{K(B+1),X(o.type,o.name,"",B+1)}},r().createElement("p",null," more... ")),0===i.length&&r().createElement("div",null,r().createElement("div",{className:"NoDataImage"},r().createElement("img",{src:W.v.NoData,alt:"NoImage"})),r().createElement("div",{className:"NoDataDesc"},r().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):r().createElement("div",null,r().createElement("div",{className:"columnHeader displayFlex"},r().createElement("div",{className:"columnHeaderTitle"},r().createElement(I.Ol$,{className:"columnHeaderIcon"})),r().createElement("div",{className:"columnHeaderbtn",align:"right"},!1,r().createElement(p.ZP,{title:"",placement:"top"},r().createElement(s.Z,{className:"ColumnApplyButton",onClick:()=>{Q()},id:"fld1302L1TFCColumApplyBttn"},r().createElement("span",{className:"ColumnApplyTitle"},$("Clear")))),r().createElement(p.ZP,{title:"",placement:"top"},r().createElement(s.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld1302L1TFCColumnCloseButton"},r().createElement("span",{className:"ColumnCloseTitle"},$("Close")))))),r().createElement("div",{className:"height65"},r().createElement("div",{id:"fld1302L1TFCFilItems",className:"FilterItems"},e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return r().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{A(!0),h(""),n([]),L(0),v({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterWorkPermitWOID"}),X(e.IsForeign?"Filter"+e.FieldName:"FilterWorkPermitWOID",e,"",1,ae())})(e)}},e.FieldName.includes("Date")?r().createElement(r().Fragment,null,J(e.AdminUserGridViewIDPK)," ",z[e.FieldName]&&r().createElement("p",{className:"filterdatevalue"},"(",z[e.FieldName]?.From+" to "+z[e.FieldName]?.To,")")):"IsActive"==e.FieldName?r().createElement(r().Fragment,null,r().createElement("span",null,J(e.AdminUserGridViewIDPK)),r().createElement(C.Z,{checked:"1"==G,onChange:t=>{U(t.target.checked),le("","",e.FieldName,"",t.target.checked)}})):r().createElement(r().Fragment,null,r().createElement("span",null,J(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,S[a]?.length>0&&r().createElement("div",{className:"FilterItemDivSelected"},r().createElement("span",{className:"RoundedDivName"},S[a][0][a]),S[a].length>1&&r().createElement("span",{className:"RoundedDivName"},S[a][1][a]),S[a].length>2&&r().createElement("span",{className:"RoundedDivNumber"},"+"+(S[a].length-2))))));var a}))))))}));var O=a(54180),h=a(43031),S=a(110),T=a(5109),N=a(88995),b=a(50743),w=a(61657),A=a(51209),x=a(53854),F=a(5434),B=a(83817),K=a(39327),M=a(3212),L=a(93521),R=a(71168),Z=a.n(R),z=a(773),_=a(94986),q=a(15999);a(11557),a(79117),window.clickFilter="";const V=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),s=(0,l.useRef)(null),[c]=((0,l.useRef)(null),(0,i.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[u]=(0,l.useState)("1302"),[y,D]=(0,l.useState)(!1),[E,C]=(0,l.useState)(!1),[f,R]=(0,l.useState)(0),[V,G]=(0,l.useState)(0),[U,H]=(0,l.useState)(0),[j,Y]=(0,l.useState)(0),[$,J]=(0,l.useState)({current:1,pageSize:100}),[Q,X]=(0,l.useState)(""),[ee,te]=(0,l.useState)([]),[ae,le]=(0,l.useState)({val:"",column:""}),[re,ie]=(0,l.useState)([]),[ne,oe]=(0,l.useState)(!1),[me,de]=(0,l.useState)(""),[se,pe]=(0,l.useState)(""),[ce,ue]=(0,l.useState)(!1),[ye,We]=(0,l.useState)([]),[De,ge]=(0,l.useState)([]),[Pe,Ee]=(0,l.useState)([]),[Ce,fe]=(0,l.useState)({children:[{name:"WorkPermitWODetails",children:[]}]}),[ve,Oe]=(0,l.useState)(!1),he=(0,l.useContext)(e.context?e.context:Ie),{cstate:Se,cdispatch:Te}=e.ContextApi?e.ContextApi:ke();let Ne={WorkPermitWOIDPK:"",WorkPermitWOCode:"",WorkOrderKey:"",WorkOderType:"",IsDraft:"",Remarks:"",WorkPermitID:"",MatWoTypeID:"",ParentWorkPermitWOIKeyD:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",WPApprovalAuthorityID:"",AppAuthorityCode:"",AppAuthorityName:"",WPPermitRequestID:"",PermitRequestCode:"",PermitRequestName:"",DivisionID:"",DivisionCode:"",DivisionName:"",ContractID:"",ContractCode:"",ContractName:"",LocalityID:"",LocalityCode:"",LocalityName:"",BuildingID:"",BuildingCode:"",BuildingName:"",FloorID:"",FloorCode:"",FloorName:"",SpotID:"",SpotCode:"",SpotName:"",EmployeeID:"",EmployeeCode:"",FirstName:"",EmpContactNo1:"",EmpEmailOfficial:"",WPPermitCode:"",WPPermitTitle:"",MatWoTypeCode:"",MatWoTypeName:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[be,we]=(0,l.useState)(Ne),[Ae,xe]=(0,l.useState)(Ne),[Fe,Be]=(0,l.useState)(!1),[Ke,Me]=(0,l.useState)(!0),[Le,Re]=(0,l.useState)(!1),[Ze,ze]=(0,l.useState)(!0),[_e,qe]=(0,l.useState)({MatWoTypeName:"",ParentWorkPermitWOIKeyD:"",WorkPermitWOCode:"",WorkOrderKey:"",WorkOderType:"",PerEquipmentName:"",ParentWorkPermitWOName:""}),[Ve,Ge]=(0,l.useState)(!1),[Ue,He]=(0,l.useState)([]),[je,Ye]=(0,l.useState)(0),[$e,Je]=(0,l.useState)(0),[Qe,Xe]=(0,l.useState)({current:1,pageSize:10}),[et,tt]=(0,l.useState)([]),[at,lt]=(0,l.useState)([]),[rt,it]=(0,l.useState)(!1),[nt,ot]=(0,l.useState)(!1),[mt,dt]=(0,l.useState)(!1),[st,pt]=(0,l.useState)(""),[ct,ut]=Z()("1302"),[yt,Wt]=(0,l.useState)({}),Dt=[{columns:et,data:Q}];let gt=(0,P.Z)();const Pt=e=>gt[e]?gt[e]:e,It=e=>Se.language?.[e]?Se.language[e]:e;(0,l.useEffect)((()=>{ht(ct)}),[ct]),(0,l.useEffect)((()=>{Se.token.length>0&&(e.parentId?vt($,Ne,"WorkPermitWOID"):ie([]))}),[e.parentId]),(0,l.useEffect)((()=>{!ve&&e.parentId?vt($,me,"WorkPermitWOID"):ve&&xe(me)}),[me]),(0,l.useImperativeHandle)(t,(()=>({searchItem:e=>{kt(e)},tableRefresh:()=>{vt($,Ne,"WorkPermitWOID")},DialogTableProps:e=>{C(e)},HideEntryFields:e=>{dt(!0===e)}})));const kt=e=>{""==e?vt($,Ne,Fe?"DraftWorkPermitWOID":"WorkPermitWOID",Fe&&"DraftPage"):Ot(e,{current:1,pageSize:100}),pe(e)};function Et(t){he.loading(!0);let a=W.v.Api+"FP1302S7/",l={data:{p1:"%%",p2:e.parentId?e.parentId:"0",p3:"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,m.Z)(a,l,Se.token[0]).then((e=>{if(200==e.Output.status.code){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,Je(e.Output.data[0].TotalCount)):a=0,10==t.pageSize?Ye(Math.ceil(a)):20==t.pageSize?Ye(Math.ceil(a/2)):50==t.pageSize?Ye(Math.ceil(a/5)):100==t.pageSize&&Ye(Math.ceil(a/10)),He(e.Output.data),he.loading(!1)}}))}function Ct(e,t){Te({type:"editData",payload:[t]}),Te({type:"IsDraft",payload:Fe}),Te({type:"ShowDetail",payload:!0}),he.Expanded(!0),Le&&ue(!1)}(0,l.useEffect)((()=>{!1===e.cardview&&ze(e.cardview),e.Dialogview&&(C(e.Dialogview),dt(!0))}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&Ot(e.searchsafaritext,{current:$.current,pageSize:$.pageSize})}),[e.searchsafaritext]);const ft=()=>{he.EditClose(!0),ne?(document.getElementById("WorkPermitWODetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("WorkPermitWODetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("WorkPermitWODetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",oe(!1),Ze?(E||(document.getElementById("WorkPermitWODetailscoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPermitWODetailscoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),document.getElementById("WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("WorkPermitWODetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("WorkPermitWODetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("WorkPermitWODetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",oe(!0),document.getElementById("WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),ue(!1),window.clickFilter=!ne},vt=(t,a,l,r,i,n)=>{he.loading(!0),"DraftPage"!==r&&Be(Se.IsDraft);let o=W.v.Api+"FP1302S3/",d={data:{p1:i||(a&&a.WorkPermitWOIDPK?a.WorkPermitWOIDPK:null),p2:a&&a.WorkPermitWOCode?a.WorkPermitWOCode:null,p3:a&&a.WorkOrderKey?a.WorkOrderKey:null,p4:a&&a.WorkOderType?a.WorkOderType:null,p5:"DraftWorkPermitWOID"==l?"1":"0",p6:null,p7:e.parentId?Number(e.parentId):0,p8:a&&a.MatWoTypeID?a.MatWoTypeID:null,p9:a&&a.ParentWorkPermitWOIKeyD?a.ParentWorkPermitWOIKeyD:null,p10:a&&a.IsActive,p11:null,p12:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p13:a&&a.CreatedTtm?a.CreatedTtm:null,p14:a&&a.CreatedTtmType?a.CreatedTtmType:null,p15:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p16:null,p17:a&&a.WPApprovalAuthorityID?a.WPApprovalAuthorityID:null,p18:a&&a.AppAuthorityCode?a.AppAuthorityCode:null,p19:a&&a.AppAuthorityName?a.AppAuthorityName:null,p20:a&&a.WPPermitRequestID?a.WPPermitRequestID:null,p21:a&&a.PermitRequestCode?a.PermitRequestCode:null,p22:a&&a.PermitRequestName?a.PermitRequestName:null,p23:a&&a.DivisionID?a.DivisionID:null,p24:a&&a.DivisionCode?a.DivisionCode:null,p25:a&&a.DivisionName?a.DivisionName:null,p26:a&&a.ContractID?a.ContractID:null,p27:a&&a.ContractCode?a.ContractCode:null,p28:a&&a.ContractName?a.ContractName:null,p29:a&&a.LocalityID?a.LocalityID:null,p30:a&&a.LocalityCode?a.LocalityCode:null,p31:a&&a.LocalityName?a.LocalityName:null,p32:a&&a.BuildingID?a.BuildingID:null,p33:a&&a.BuildingCode?a.BuildingCode:null,p34:a&&a.BuildingName?a.BuildingName:null,p35:a&&a.FloorID?a.FloorID:null,p36:a&&a.FloorCode?a.FloorCode:null,p37:a&&a.FloorName?a.FloorName:null,p38:a&&a.SpotID?a.SpotID:null,p39:a&&a.SpotCode?a.SpotCode:null,p40:a&&a.SpotName?a.SpotName:null,p41:a&&a.EmployeeID?a.EmployeeID:null,p42:a&&a.EmployeeCode?a.EmployeeCode:null,p43:a&&a.FirstName?a.FirstName:null,p44:a&&a.EmpContactNo1?a.EmpContactNo1:null,p45:a&&a.EmpEmailOfficial?a.EmpEmailOfficial:null,p46:a&&a.WPPermitCode?a.WPPermitCode:null,p47:a&&a.WPPermitTitle?a.WPPermitTitle:null,p48:a&&a.MatWoTypeCode?a.MatWoTypeCode:null,p49:a&&a.MatWoTypeName?a.MatWoTypeName:null,p50:i?1:t.current,p51:t.pageSize,p52:l,p53:null,p54:null,p55:localStorage.getItem("UserGroupID"),p56:localStorage.getItem("userid")}};(0,m.Z)(o,d,Se.token[0]).then((o=>{if(i)(0,B.a)(o,Te,r,n,he);else if("200"==o.Output.status.code)if(o.Output.data.length>0){if(o.Output.data){let e=0;o.Output.data.length>0?(e=parseFloat(o.Output.data[0].TotalCount,10)/10,H(o.Output.data[0].TotalCount),Y(o.Output.data[0].DraftCnt),Te({type:"count",payload:o.Output.data[0].TotalCount}),"DraftPage"==r&&Y(o.Output.data[0].TotalCount)):e=0,10==t.pageSize?G(Math.ceil(e)):20==t.pageSize?G(Math.ceil(e/2)):50==t.pageSize?G(Math.ceil(e/5)):100==t.pageSize&&G(Math.ceil(e/10)),ie(o.Output.data),he.loading(!1)}e.Dialogview||(document.getElementById("divWorkPermitWODetails-Entry").style.height="auto",document.getElementById("divWorkPermitWODetails-Entry").style.display="block")}else he.loading(!1),"DraftWorkPermitWOID"===l?(he.alert({open:!0,color:"warning",message:["There is no Record Found"]}),ue(!0),Be(!1)):(ie([]),J({current:1,pageSize:10}),G(0),H(0),Te({type:"count",payload:"0"}),Object.values(a).some((e=>e))&&he.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else he.alert({open:!0,color:"warning",message:[o.Output.status.message]}),he.loading(!1)}))};function Ot(t,a){he.loading(!0);const l=W.v.Api+"FP1302S4/",r={data:{p1:"%"+t+"%",p2:e.parentId?e.parentId:"0",p3:Fe?"1":"0",p4:a.current,p5:a.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,m.Z)(l,r,Se.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let t=0;e.Output.data.length>0?(t=parseFloat(e.Output.data[0].TotalCount,10)/10,H(e.Output.data[0].TotalCount),Te({type:"count",payload:e.Output.data[0].TotalCount})):t=0,10==a.pageSize?G(Math.ceil(t)):20==a.pageSize?G(Math.ceil(t/2)):50==a.pageSize?G(Math.ceil(t/5)):100==a.pageSize&&G(Math.ceil(t/10)),ie(e.Output.data),he.loading(!1)}else ie([]),G(0),H(0),Te({type:"count",payload:"0"}),he.alert({open:!0,color:"warning",message:["There is no Record Found"]}),he.loading(!1);else he.alert({open:!0,color:"warning",message:[e.Output.status.message]}),he.loading(!1)}))}function ht(e){let t=[],a=[],l=[],r=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldName&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let i=localStorage.getItem("Language");r.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[i]]})})),Te({type:"language",payload:Object.assign({},...r)}),qe(a.reduce(((e,t)=>(e[t]="",e)),{})),We(e),ge(t),Ee(a),tt(l),lt(a)}const St=()=>ve?null:r().createElement("div",null,Ve?r().createElement(_.Z,{data:Ue,expanded:e=>!E&&he.Expanded(e),edit:(e,t,a)=>{E?he.select(e):(Te({type:"editData",payload:[e]}),Te({type:"IsDraft",payload:t}),Te({type:"ShowDetail",payload:a}))}}):r().createElement(z.Z,{ref:s,frmctrlid:"tblcs_1302_L1_",id:"WorkPermitWODetailsTable",headerdata:De,tablesearchparams:_e,searchvalue:e=>{qe(e),de(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...FilteredObj};Wt(t),J({current:1,pageSize:10}),vt({current:1,pageSize:10},t,Fe?"DraftWorkPermitWOID":"WorkPermitWOID",Fe&&"DraftPage")},bodydata:re,ondrag:Ct,bodyitem:Pe,visibleitem:De,isdraft:Fe,IsView:!1,IsSub:e.tableview,tableExp:!1,tableID:u,showMore:!1,accessrights:Se.AccessRights,expanded:e=>!E&&he.Expanded(e),edit:(e,t,a)=>{E?he.select(e):(Object.keys(e).map(((l,r)=>{l.includes("IDPK")&&vt($,null,t?"DraftWorkPermitWOID":"WorkPermitWOID",t&&"DraftPage",e[l],a)})),he.hideAddBtn(!0))},viewtoggle:he.viewtoggle,isexpanded:!E||Le,tf:It,action:E?"none":"",ViewComp:(e,t)=>{}}));return(0,l.useEffect)((()=>{Re(Se.ExpandTableValue)}),[Se.ExpandTableValue]),r().createElement("div",null,!mt&&!e.tableview&&r().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"0",padding:"0px 4px 0px 0px"}},r().createElement("div",{id:"fld1302L1ECSearchBar",className:"searchbar1"},r().createElement(g.Z,{frmctrlid:"fld1302L1TCInputSearch",className:"search_input",type:"text",id:"AdminCountryRegistrygridsearch",placeholder:Pt("Search"),value:se,onChange:e=>{pe(e),he.searchItem(e)},style:{width:"300px"}}),r().createElement("div",{className:"search_icon"},se?r().createElement("div",{id:"fld1302L1TCCloseIconCommonSearch",onClick:()=>{pe(""),he.searchItem("")}},r().createElement(d.Z,{className:"InputSearchIcon"})):r().createElement("div",{id:"fld1302L1TCInputSearchIcon"},r().createElement(N.Z,{className:"InputSearchIcon",onClick:()=>{document.getElementById("WorkPermitWODetailsgridsearch").focus()}})))),r().createElement("div",{style:{width:"100%"}},Se.AccessRights.IsAdd?r().createElement(M.Z,{className:"SaveBtnCommon flotright",frmctrlid:"fld1302L1TCAddBtnIsAdd",onClick:()=>{he.hideAddBtn(!0),Te({type:"editData",payload:[]}),Te({type:"ShowDetail",payload:!1}),Te({type:"Add",payload:!0})}}):"")),r().createElement(n.Z,{expanded:Ke,onChange:()=>()=>{Me(Le)}},e.Dialogview&&r().createElement(b.Z,null,r().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},r().createElement("div",{className:"displayFlex EntryHeader"},r().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.39-10:01:31 AM-17-5[1302]"},`${It("1302")} (${U})`)),!1===e.cardview?null:r().createElement("div",{className:"displayFlex EntryHeaderBtn"},r().createElement("div",{id:"fld1302L1TCSearchBar",className:"searchbar",style:{marginTop:"8px"}},r().createElement(g.Z,{frmctrlid:"fld1302L1TCInputSearch",className:"search_input",type:"text",placeholder:Pt("Search"),value:se,onChange:e=>{kt(e)}}),r().createElement("div",{className:"search_icon"},se?r().createElement("div",{id:"fld1302L1TCInputCloseIcon",onClick:()=>{kt("")}},r().createElement(d.Z,{className:"InputSearchIcon"})):r().createElement("div",{id:"fld1302L1TCInputSearchIcon"},r().createElement(N.Z,{className:"InputSearchIcon"}))))))),r().createElement(o.Z,{className:"AccDetails"},r().createElement("div",{className:"tableCardL1",style:{height:e.tableview?"auto":"fit-content"}},!e.tableview&&r().createElement("div",{id:"WorkPermitWODetails-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:r().createElement("div",{className:"tableHeaderItems displayFlex"},!Fe&&r().createElement("div",{frmctrlid:"fld1302L1TCFilterDataIsDraft",id:"WorkPermitWODetailsfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{ft()}},r().createElement(p.ZP,{title:Pt("Filter Data"),placement:"top"},r().createElement("span",null,r().createElement(I.Ol$,{className:"tableFilterColumnIcon"}))),r().createElement("span",{className:"displayNone"},Pt("Filter Data"))),!E&&!Fe&&!ve&&r().createElement(O.Z,{formctrlidprint:"fld1302L1TCExportPrint",formctrlidexport:"fld1302L1TCExportTable",formctrlidrefresh:"fld1302L1TCExportRefresh",title:It("WorkPermitWODetails"),data:ee,exportData:Dt,Items:at,columnIndex:et,TableVisibleItem:De,userGridViewFormID:u,TableTotalCount:U,triggerApi:t=>{((t,l,r,i,n)=>{if(0===U)return he.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;he.loading(!0);let o=W.v.Api+"FP1302S3/",d={data:{p1:t&&t.WorkPermitWOIDPK?t.WorkPermitWOIDPK:null,p2:t&&t.WorkPermitWOCode?t.WorkPermitWOCode:null,p3:t&&t.WorkOrderKey?t.WorkOrderKey:null,p4:t&&t.WorkOderType?t.WorkOderType:null,p5:Fe?"1":"0",p6:null,p7:e.parentId?Number(e.parentId):0,p8:t&&t.MatWoTypeID?t.MatWoTypeID:null,p9:t&&t.ParentWorkPermitWOIKeyD?t.ParentWorkPermitWOIKeyD:null,p10:t&&t.IsActive,p11:null,p12:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p13:t&&t.CreatedTtm?t.CreatedTtm:null,p14:t&&t.CreatedTtmType?t.CreatedTtmType:null,p15:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p16:null,p17:t&&t.WPApprovalAuthorityID?t.WPApprovalAuthorityID:null,p18:t&&t.AppAuthorityCode?t.AppAuthorityCode:null,p19:t&&t.AppAuthorityName?t.AppAuthorityName:null,p20:t&&t.WPPermitRequestID?t.WPPermitRequestID:null,p21:t&&t.PermitRequestCode?t.PermitRequestCode:null,p22:t&&t.PermitRequestName?t.PermitRequestName:null,p23:t&&t.DivisionID?t.DivisionID:null,p24:t&&t.DivisionCode?t.DivisionCode:null,p25:t&&t.DivisionName?t.DivisionName:null,p26:t&&t.ContractID?t.ContractID:null,p27:t&&t.ContractCode?t.ContractCode:null,p28:t&&t.ContractName?t.ContractName:null,p29:t&&t.LocalityID?t.LocalityID:null,p30:t&&t.LocalityCode?t.LocalityCode:null,p31:t&&t.LocalityName?t.LocalityName:null,p32:t&&t.BuildingID?t.BuildingID:null,p33:t&&t.BuildingCode?t.BuildingCode:null,p34:t&&t.BuildingName?t.BuildingName:null,p35:t&&t.FloorID?t.FloorID:null,p36:t&&t.FloorCode?t.FloorCode:null,p37:t&&t.FloorName?t.FloorName:null,p38:t&&t.SpotID?t.SpotID:null,p39:t&&t.SpotCode?t.SpotCode:null,p40:t&&t.SpotName?t.SpotName:null,p41:t&&t.EmployeeID?t.EmployeeID:null,p42:t&&t.EmployeeCode?t.EmployeeCode:null,p43:t&&t.FirstName?t.FirstName:null,p44:t&&t.EmpContactNo1?t.EmpContactNo1:null,p45:t&&t.EmpEmailOfficial?t.EmpEmailOfficial:null,p46:t&&t.WPPermitCode?t.WPPermitCode:null,p47:t&&t.WPPermitTitle?t.WPPermitTitle:null,p48:t&&t.MatWoTypeCode?t.MatWoTypeCode:null,p49:t&&t.MatWoTypeName?t.MatWoTypeName:null,p50:$.current,p51:U,p52:Fe?"DraftWorkPermitWOID":"WorkPermitWOID",p53:null,p54:null,p55:localStorage.getItem("UserGroupID"),p56:localStorage.getItem("userid")}};he.loading(!1),he.alert({open:!0,color:"success",message:[`${It(1302)} - ${n.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,m.Z)(o,d,Se.token[0],n).then((e=>{(0,L.PDF_Excel_Generate)(e,he,at,X,a,n)}))})(me,ae.column,0,0,t)},Refresh:()=>{pe(""),J({current:1,pageSize:100}),s.current.clearItem(),!Se.ShowDetail&&he.clear(),Se.IsDraft?vt({current:1,pageSize:100},Ne,"DraftWorkPermitWOID"):vt({current:1,pageSize:100},Ne,"WorkPermitWOID")},disabledPrint:!Se.AccessRights.IsPrint,disabledExport:!Se.AccessRights.IsExport,ref:a,iconinfo:"displayNone"}),!Fe&&!ve&&!E&&r().createElement("div",{className:"buttoncard",onClick:()=>ot(!nt)},r().createElement("span",null,nt?r().createElement(p.ZP,{disableFocusListener:!0,title:Pt("Less"),placement:"top"},r().createElement("span",{id:"fld1302L1TCLess"},r().createElement(x.ldB,{className:"tableFilterColumnIcon"}))):r().createElement(p.ZP,{disableFocusListener:!0,title:Pt("More"),placement:"top"},r().createElement("span",{id:"fld1302L1TCMore"},r().createElement(x.ilJ,{className:"tableFilterColumnIcon"}))))),nt?r().createElement("div",{className:"EntryHeaderMore"},r().createElement("div",{style:{display:"flex"}},ve||!Le?null:E||!Se.AccessRights.IsAdd||Fe?"":r().createElement("div",null,r().createElement("div",{frmctrlid:"fld1302L1TCFilterDataIsAdd",id:"WorkPermitWODetailscoldiv",className:"buttoncard",onClick:()=>{he.EditClose(!0),ce?(document.getElementById("WorkPermitWODetailsFilterDiv").style.width="0%",document.getElementById("WorkPermitWODetailsTabDiv").style.width="100%",document.getElementById("WorkPermitWODetailsFilterDiv").style.display="none",document.getElementById("WorkPermitWODetailscoldiv").style.width="fit-content",document.getElementById("WorkPermitWODetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",ue(!1)):(document.getElementById("WorkPermitWODetailsFilterDiv").style.width="25%",document.getElementById("WorkPermitWODetailsTabDiv").style.width="75%",document.getElementById("WorkPermitWODetailsFilterDiv").style.display="block",document.getElementById("WorkPermitWODetailsfildiv").style.width="fit-content",document.getElementById("WorkPermitWODetailsfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("WorkPermitWODetailscoldiv").style.width="fit-content",document.getElementById("WorkPermitWODetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",ue(!0)),oe(!1)}},r().createElement(p.ZP,{title:Pt("Manage Columns"),placement:"top"},r().createElement("div",null,r().createElement(K.gYA,{className:"tableFilterColumnIcon"}))),r().createElement("span",{className:"displayNone"},Pt("Manage Columns")))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!E&&Le&&!ve&&!Fe&&r().createElement("div",null,r().createElement("div",{id:"WorkPermitWODetailscoldiv",className:"buttoncard",onClick:()=>{Ve?Ge(!1):(Ge(!0),Et({current:1,pageSize:100}))}},r().createElement(p.ZP,{title:Pt("TableScrollData"),placement:"top"},r().createElement("div",{id:"fld1302L1TCTableScrollData"},r().createElement(q.Z,{className:"tableFilterColumnIcon"}))),r().createElement("span",{className:"displayNone"},Pt("Table Scroll Data")))))):""),!Fe&&!E&&r().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},ve||Fe?null:r().createElement("div",null,r().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"}},r().createElement("div",{className:"b2",id:"button-11"},r().createElement("div",{className:Ze?"buttonList":"buttonGrid",id:"fld1302L1TCListView",onClick:()=>{ze(!0),it(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},r().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},r().createElement(x.umT,null)),r().createElement("span",null,Pt("List"))),r().createElement("div",{className:Ze||rt?"buttonGrid":"buttonList",id:"fld1302L1TCCardView",onClick:()=>{ze(!1),it(!1)}},r().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},r().createElement(k.aCJ,null)),r().createElement("span",null,Pt("Card"))),r().createElement("div",{className:rt?"buttonList":"buttonGrid",id:"fld1302L1TCTileView",onClick:()=>{it(!0),ze(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},r().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},r().createElement(F.f_H,null)),r().createElement("span",null,Pt("Tile"))))))),ve?null:Ve?e.IsCollapse?r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(w.Z,{style:{color:"#777"},id:"fld1302L1TCTableTopPagination",rowsPerPageOptions:[],component:"div",count:Number($e),page:f,onPageChange:(e,t)=>{R(t),Et({current:t+1,pageSize:Qe.pageSize}),Xe({current:t+1,pageSize:Qe.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(h.Z,{count:je,color:"primary",page:Qe.current,onChange:(e,t)=>{Xe({current:t,pageSize:Qe.pageSize}),Ye(t),Et({current:t,pageSize:Qe.pageSize})}}),r().createElement("div",null,r().createElement(S.Z,{className:"BootstrapInputStyle",value:Qe.pageSize,frmctrlid:"fld1302L1TCSelectPagination",onChange:e=>{Xe({current:1,pageSize:e.target.value}),Et({current:1,pageSize:e.target.value})}},r().createElement("option",{value:10},"10"),r().createElement("option",{value:20},"20"),r().createElement("option",{value:50},"50"),r().createElement("option",{value:100},"100"))),Le&&r().createElement("p",{className:"per-page"},"/ ",Pt("RowperpageOf")," (",$e,")")):e.IsCollapse?r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(w.Z,{style:{color:"#777"},id:"fld1302L1TCTablePagination",rowsPerPageOptions:[],component:"div",count:Number(U),page:f,onPageChange:(e,t)=>{R(t),vt({current:t+1,pageSize:$.pageSize},Ne,Fe?"DraftWorkPermitWOID":"WorkPermitWOID",Fe&&"DraftPage"),J({current:t+1,pageSize:$.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(h.Z,{count:V,siblingCount:0,color:"primary",page:$.current,onChange:(e,t)=>{if(J({current:t,pageSize:$.pageSize}),Fe)vt({current:t,pageSize:$.pageSize},be,"DraftWorkPermitWOID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";se.length>0?Ot(se,{current:t,pageSize:$.pageSize}):vt({current:t,pageSize:$.pageSize},be,"WorkPermitWOID")}}}),r().createElement("div",null,r().createElement(S.Z,{className:"BootstrapInputStyle",value:$.pageSize,id:"fld1302L1TCSelectPaging",onChange:e=>{J({current:1,pageSize:e.target.value}),Fe?vt({current:1,pageSize:e.target.value},be,"DraftWorkPermitWOID","DraftPage"):se.length>0?Ot(se,{current:1,pageSize:e.target.value}):vt({current:1,pageSize:e.target.value},be,"WorkPermitWOID")}},r().createElement("option",{value:10},"10"),r().createElement("option",{value:20},"20"),r().createElement("option",{value:50},"50"),r().createElement("option",{value:100},"100"))),Le&&r().createElement("p",{className:"per-page"},"/ ",Pt("RowperpageOf")," (",U,") "))),r().createElement("div",{id:"WorkPermitWODetails-TableBody",className:"displayFlex padding0",style:{height:e.tableview?"auto":"66vh",overflow:"auto"}},r().createElement("div",{id:"WorkPermitWODetailsFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},ne&&r().createElement(v,{parentId:e.parentId,searchData:e=>{de(e||yt),Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)))},formID:u,data:()=>{},visibleData:()=>{},token:Se.token[0],CloseBtnClk:()=>ft(),userGrid:ct,msg:(e,t)=>he.alert({open:!0,color:t,message:[e]})}),ce&&r().createElement(T.Z,{Refresh:e=>{vt({current:1,pageSize:100},Ne,"WorkPermitWOID")},frmctrlid:"fld1302L1TCTableColumnOrder",loading:e=>he.loading(e),className:"dragCheckboxDivL1",AltMsg:(e,t)=>he.alert({open:!0,color:t,message:[e]}),select:ce,userID:c,userGridViewFormID:u,saved:(e,t)=>{e&&ht(t),ut(t),Te({type:"showTableview",payload:t})},Token:Se.token[0]})),r().createElement("div",{id:"WorkPermitWODetailsTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:e.tableview?"auto":"66vh"}},Ze?r().createElement(St,null):r().createElement(A.Z,{frmctrlid:"fld1302L1TCExpandedCardDual",data:re,id:"WorkPermitWODetails",title:"WorkPermitWOCode",cardTile:!!rt,visibleitem:De,gridCountmdlg:4,gridCountxssm:6,onDoubleClick:(e,t)=>{E?he.select(e):("edit"==t?(Te({type:"editData",payload:[e]}),Te({type:"IsDraft",payload:Fe}),Te({type:"ShowDetail",payload:!1}),he.Expanded(!0)):(Te({type:"editData",payload:[e]}),Te({type:"IsDraft",payload:Fe}),Te({type:"ShowDetail",payload:!0}),he.Expanded(!0),he.viewtoggle()),ne?oe(!0):ce?ue(!0):(ue(!1),ue(!1))),he.hideAddBtn(!0)}})))))))}));var G=a(37148),U=a(29800),H=(a(10966),a(21392),a(26537)),j=a(30553),Y=a(61956),$=(a(44528),a(99090),a(35131)),J=a.n($),Q=a(1695),X=a(61924),ee=a.n(X),te=(a(40826),a(55490)),ae=a(92371);const le={EnterKeyValues:{WorkPermitWODetails:["MatWoTypeName","ParentWorkPermitWOCode","WorkPermitWOCode","WorkOrderKey","WorkOderType","PerEquipmentName"]},Label:{WorkPermitWODetails:{MatWoTypeID:["MatWoTypeCode","MatWoTypeName"],ParentWorkPermitWOIKeyD:["ParentWorkPermitWOCode","WODateTime","BuildingName","FloorName","SpotName","DivisionName","DisciplineName"],WorkPermitWOCode:["WorkPermitWOCode"],WorkOrderKey:["WorkPermitWOCode"],WorkOderType:["WorkPermitWOCode"],WorkPermitID:["WorkPermitWOCode"]}},LabelHeader:{WorkPermitWODetails:{MatWoTypeID:["Work Order Type Code","Work Order Type Name"],ParentWorkPermitWOIKeyD:["ParentWorkPermitWOCode","WODateTime","BuildingName","FloorName","SpotName","DivisionName","DisciplineName"],WorkPermitWOCode:["PermitWOCode"],WorkOrderKey:["PermitWOCode"],WorkOderType:["PermitWOCode"],WorkPermitID:["WorkPermitWOCode"]}},Property:{WorkPermitWODetails:{MatWoTypeID:{id:"fld1302_34854",clearID:"WorkPermitWODetailsMatWoTypeNameClear",type:"select",labelID:"MatWoTypeIDPK",labelname:"Work order Type",fielddisplayname:"MatWoTypeName",fieldOrder:"1",frmctrlid:"fld1302_34854",frmctrlidname:"MatWoTypeID",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0},ParentWorkPermitWOIKeyD:{id:"fld1302_38876",clearID:"WorkPermitWODetailsParentWorkPermitWOCodeClear",type:"select",labelID:"ParentWorkPermitWOIKeyDPK",labelname:"Work Order ",fielddisplayname:"ParentWorkPermitWOCode",fieldOrder:"2",frmctrlid:"fld1302_38876",frmctrlidname:"ParentWorkPermitWOIKeyD",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1},WorkPermitWOCode:{id:"fld1302_34848",labelID:"WorkPermitWOCode",maxLength:"50",labelname:"PermitWOCode",frmctrlid:"fld1302_34848",frmctrlidname:"WorkPermitWOCode",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},WorkOrderKey:{id:"fld1302_34849",labelID:"WorkOrderKey",maxLength:"null",labelname:"WorkOrderKey",frmctrlid:"fld1302_34849",frmctrlidname:"WorkOrderKey",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},WorkOderType:{id:"fld1302_34850",labelID:"WorkOderType",maxLength:"null",labelname:"WorkOderType",frmctrlid:"fld1302_34850",frmctrlidname:"WorkOderType",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},WorkPermitID:{id:"fld1302_34853",clearID:"WorkPermitWODetailsPerEquipmentNameClear",type:"select",labelID:"WorkPermitIDPK",labelname:"Work Permit ",fielddisplayname:"PerEquipmentName",fieldOrder:"2",frmctrlid:"fld1302_34853",frmctrlidname:"WorkPermitID",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!0}}},SubForms:{},POPLabel:{WorkPermitWODetails:{MatWoTypeID:["MatWoTypeCode","MatWoTypeName","IsActive","CreatedTtm","UpdatedTtm"],WorkPermitID:["MethodStateAttachRemark","OtherAttachRemark","PerDesWorkToBeDone","PerDesignation","PerEquipElec","PerEquipEffected","PerEquipMech","PerDescription","PerEquipmentName","PerOthersClosed","PerPerformer","PerPhone","PerPrecautions","PerRequester","PerWorkTrailRunRef","PerWorkExcavationRef","PerWorkConfinedRef","PerToolEqpPPEused","PermitStartDateTime","PermitEndDateTime","WPVerifiyer","WPCloser","WPAuth","BuildingID","ContractID","DivisionID","EmployeeID","FloorID","LocalityID","SpotID","WPApprovalAuthorityID","WPPermitRequestID"]}}};var re=a(6562),ie=a(45155),ne=a(49174),oe=(a(38773),a(19089),a(16233)),me=a.n(oe),de=(a(82729),a(75355),a(11107),a(74095));const se={WorkPermitWOIDPK:"",WorkPermitWOCode:"",WorkOrderKey:"",WorkOderType:"",IsDraft:!1,Remarks:"",WorkPermitID:null,MatWoTypeID:null,ParentWorkPermitWOIKeyD:"",ParentWorkPermitWOCode:"",IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",WPApprovalAuthorityID:null,AppAuthorityCode:"",AppAuthorityName:"",WPPermitRequestID:null,PermitRequestCode:"",PermitRequestName:"",DivisionID:null,DivisionCode:"",DivisionName:"",ContractID:null,ContractCode:"",ContractName:"",LocalityID:null,LocalityCode:"",LocalityName:"",BuildingID:null,BuildingCode:"",BuildingName:"",FloorID:null,FloorCode:"",FloorName:"",SpotID:null,SpotCode:"",SpotName:"",EmployeeID:null,EmployeeCode:"",FirstName:"",EmpContactNo1:"",EmpEmailOfficial:"",WPPermitCode:"",WPPermitTitle:"",MatWoTypeCode:"",MatWoTypeName:"",Type:"WorkPermitWOID",PermitEndDateTime:"",PermitEndDateTimeType:"",PermitEndDateTimeBetween:"",WorkPermitStartDateTime:"",WorkPermitStartDateTimeType:"",WorkPermitStartDateTimeBetween:"",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")},pe=(0,l.forwardRef)(((e,t)=>{const a=(0,i.useSelector)((e=>e.form)),[d,s]=(0,l.useState)(!1),[p,c]=(0,l.useState)(!0),[D,g]=(0,l.useState)(!1),[I,k]=(0,l.useState)(!1),[E,f]=(0,l.useState)(""),[v,O]=(0,l.useState)(!1),[h,S]=(0,l.useState)([]),[T,N]=(0,l.useState)(null),[w,A]=(0,l.useReducer)(ae.Z,se),[x,F]=(0,l.useState)(!1),[B,K]=(0,l.useState)([]),[M,L]=(0,l.useState)(!1),R=(0,l.useContext)(e.context?e.context:Ie),{cstate:Z,cdispatch:z}=e.ContextApi?e.ContextApi:ke(),[_,q]=(0,l.useState)(0),[V,U]=(0,l.useState)(""),$=(0,l.useRef)(null),[X,oe]=me()("1302"),[pe,ce]=(0,l.useState)(""),[ue,ye]=(0,l.useState)(""),[We,De]=(0,l.useState)(!0),[ge,Pe]=(0,l.useState)(!0),[Ee,Ce]=(0,l.useState)(!0),[fe,ve]=(0,l.useState)(!0),[Oe,he]=(0,l.useState)(!1);let Se=(0,P.Z)();const[Te,Ne]=(0,l.useState)({}),be=e=>Se[e]?Se[e]:e,we=t=>Z.language?.[t]?Z.language[t]:e.createEasy?Te?.[t]:t,Ae=(0,l.useRef)(null),[xe,Fe]=(0,l.useState)("");(0,l.useEffect)((()=>{Z.PrimaryId&&q(Number(Z.PrimaryId))}),[Z.PrimaryId]),(0,l.useEffect)((()=>{Ke()}),[]),(0,l.useEffect)((()=>{Ke()}),[e.parentId]),(0,l.useEffect)((()=>{Z.editData.length>0?(Be(Z.editData[0],""),g(!0)):Z.Add&&(Ke(),g(!0))}),[Z.editData]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),Ne(Object.assign({},...t))}(X)}),[X]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Ke()},CreateEasyProps:(e=!0,t)=>{oe(!0),t?(Ue(t),g(e)):(Ke(),g(e))},AddOpen:e=>{Ke(),g(!0)}})));const Be=(t,a)=>{Object.keys(t).forEach((function(e){0==t[e]&&(t[e]=null)})),k(t.IsDraft),"SetDefaultWorkPermitWOID"==a?U(t.WorkPermitWOIDPK):(q(e.primid?Number(e.primid):t.WorkPermitWOIDPK),z({type:"PrimaryId",payload:t.WorkPermitWOIDPK})),A({type:"number",name:"MatWoTypeID",number:t.MatWoTypeID?Number(t.MatWoTypeID):0}),A({type:"text",name:"MatWoTypeName",value:t.MatWoTypeName}),A({type:"text",name:"ParentWorkPermitWOIKeyD",value:t.ParentWorkPermitWOIKeyD?t.ParentWorkPermitWOIKeyD:""}),A({type:"text",name:"WorkPermitWOCode",value:t.WorkPermitWOCode?t.WorkPermitWOCode:""}),A({type:"number",name:"WorkOrderKey",number:t.WorkOrderKey}),A({type:"number",name:"WorkOderType",number:t.WorkOderType}),A({type:"number",name:"WorkPermitID",number:t.WorkPermitID?Number(t.WorkPermitID):0}),A({type:"text",name:"PerEquipmentName",value:t.PerEquipmentName}),A({type:"text",name:"ParentWorkPermitWOName",value:t.ParentWorkPermitWOName?t.ParentWorkPermitWOName:""}),t.IsDraft?c(!0):c(!("1"!=t.IsActive&&!t.IsActive))},Ke=()=>{S([]),q(0),U(""),e.createEasy||R.resetImg(),z({type:"PrimaryId",payload:""}),A({type:"text",name:"MatWoTypeID",value:null}),A({type:"text",name:"MatWoTypeName",value:""}),document.getElementById("WorkPermitWODetailsMatWoTypeNameClear")&&document.getElementById("WorkPermitWODetailsMatWoTypeNameClear").click(),document.getElementById("WorkPermitWODetailsParentWorkPermitWOCodeClear")&&document.getElementById("WorkPermitWODetailsParentWorkPermitWOCodeClear").click(),Fe([]),A({type:"text",name:"ParentWorkPermitWOIKeyD",value:""}),A({type:"text",name:"WorkPermitWOCode",value:""}),A({type:"number",name:"WorkOrderKey",number:0}),A({type:"number",name:"WorkOderType",number:0}),A({type:"text",name:"WorkPermitID",value:null}),A({type:"text",name:"PermitStartDateTime",value:null}),A({type:"text",name:"PermitEndDateTime",value:null}),A({type:"text",name:"PerEquipmentName",value:""}),A({type:"text",name:"ParentWorkPermitWOCode",value:""}),c(!0),f(""),De(!0),Pe(!0),Ce(!0),ve(!0)},Me=t=>{R.loading(!0),R.ConfirmAlert(null);const a=W.v.Api+"FP1302S2/",l={data:[{p1:"SetDefaultWorkPermitWOID"==t?"NORECORDS"!=V&&V?V:0:_,p2:He(w.WorkPermitWOCode),p3:w.WorkOrderKey?Number(w.WorkOrderKey):0,p4:w.WorkOderType?Number(w.WorkOderType):0,p5:!1,p6:"SetDefaultWorkPermitWOID"==t?"SetDefault":null,p7:e.parentId?Number(e.parentId):w.WorkPermitID?w.WorkPermitID:0,p8:w.MatWoTypeID?w.MatWoTypeID:0,p9:He(w.ParentWorkPermitWOIKeyD),p10:p,p11:"SetDefaultWorkPermitWOID"==t,p12:localStorage.getItem("userid"),p13:J()().format("YYYY-MM-DD hh:mm:ss"),p14:localStorage.getItem("userid"),p15:J()().format("YYYY-MM-DD hh:mm:ss")}]};(0,H.Z)(0).then((t=>{(0,m.Z)(a,l,t).then((t=>{const a=t.Output[0].status;let l=t.Output[0].Data,r=new Array,i=new Array;"200"===a.code?(l.map((e=>{e&&(r.push(e.IsAlert),i.push(e.AlertMessage),e.AlertMessage)})),r.some((e=>"1"==e))?(R.alert({open:!0,color:"warning",message:i}),R.loading(!1)):(t=>{De(!0),Pe(!0),Ce(!0),ve(!0),R.loading(!0),R.ConfirmAlert(null),z({type:"IsDraft",payload:!1});const a=`${W.v.Api}${_?"FP1302S1/":"FP1302S19/"}`,l={data:[{p1:_,p2:He(w.WorkPermitWOCode),p3:w.WorkOrderKey?Number(w.WorkOrderKey):0,p4:w.WorkOderType?Number(w.WorkOderType):0,p5:!1,p6:0==xe.length?"":xe.map((e=>e.ParentWorkPermitWOIKeyDPK)).toString(),p7:e.parentId?Number(e.parentId):w.WorkPermitID?w.WorkPermitID:0,p8:w.MatWoTypeID?w.MatWoTypeID:0,p9:_?He(w.ParentWorkPermitWOIKeyD):null,p10:p,p11:!1,p12:localStorage.getItem("userid"),p13:J()().format("YYYY-MM-DD hh:mm:ss"),p14:localStorage.getItem("userid"),p15:J()().format("YYYY-MM-DD hh:mm:ss")}]};(0,H.Z)(0).then((t=>{(0,Y.Z)(a,l,t).then((t=>{const a=t[0].status;200==a.code?(R.alert({open:!0,color:"success",message:[a.message]}),document.getElementById("overlayimgAttWorkPermitWODetails"),R.loading(!1),z({type:"PrimaryId",payload:t[0].Data.IDPK}),e.createEasy||(R.RefreshTable(),R.attachmentSave(t[0].Data.IDPK)),Ke(),document.getElementById("overlayimgAttWorkPermitWODetails")&&(document.getElementById("overlayimgAttWorkPermitWODetails").style.width="0%",document.getElementById("overlayimgAttWorkPermitWODetails").style.display="none",document.getElementById("divWorkPermitWODetails-Entry").style.width="100%"),e.createEasy||(document.getElementById("WorkPermitWODetails-MainTable").style.display="block")):(R.alert({open:!0,color:"warning",message:[a.message]}),R.loading(!1)),g(!0)}))}))})()):(R.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),R.loading(!1))}))}))};function Le(e){return CreateEasy(e,Z,z,R,$),!1}function Re(e,a){return AdvanceSearch(e,a,Ie,ke(),_e,t),!1}const Ze=(t,a,l,r,i,n,o)=>{const d=W.v.Api+"FP1302S3/",s={data:{p1:null,p2:null,p3:null,p4:null,p5:null,p6:null,p7:e.parentId?Number(e.parentId):0,p8:"0"==w.MatWoTypeID?null:w.MatWoTypeID,p9:"0"==w.ParentWorkPermitWOIKeyD_varchar?null:w.ParentWorkPermitWOIKeyD_varchar,p10:e.Dialogview?"1":null,p11:null,p12:null,p13:w.PermitStartDateTime?w.PermitStartDateTime:null,p14:"BETWEEN",p15:w.PermitEndDateTime?w.PermitEndDateTime:null,p16:null,p17:"0"==w.WPApprovalAuthorityID?null:w.WPApprovalAuthorityID,p18:a?"%"+a+"%":null,p19:a?"%"+a+"%":null,p20:"0"==w.WPPermitRequestID?null:w.WPPermitRequestID,p21:a?"%"+a+"%":null,p22:a?"%"+a+"%":null,p23:"0"==w.DivisionID?null:w.DivisionID,p24:a?"%"+a+"%":null,p25:a?"%"+a+"%":null,p26:"0"==w.ContractID?null:w.ContractID,p27:a?"%"+a+"%":null,p28:a?"%"+a+"%":null,p29:"0"==w.LocalityID?null:w.LocalityID,p30:a?"%"+a+"%":null,p31:a?"%"+a+"%":null,p32:"0"==w.BuildingID?null:w.BuildingID,p33:a?"%"+a+"%":null,p34:a?"%"+a+"%":null,p35:"0"==w.FloorID?null:w.FloorID,p36:a?"%"+a+"%":null,p37:a?"%"+a+"%":null,p38:"0"==w.SpotID?null:w.SpotID,p39:a?"%"+a+"%":null,p40:a?"%"+a+"%":null,p41:"0"==w.EmployeeID?null:w.EmployeeID,p42:a?"%"+a+"%":null,p43:a?"%"+a+"%":null,p44:a?"%"+a+"%":null,p45:a?"%"+a+"%":null,p46:a?"%"+a+"%":null,p47:a?"%"+a+"%":null,p48:a?"%"+a+"%":null,p49:a?"%"+a+"%":null,p50:t,p51:10,p52:l,p53:null,p54:null,p55:localStorage.getItem("UserGroupID"),p56:localStorage.getItem("userid")}},p=Object.keys(s.data).slice(0,Object.keys(s.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(s.data).length-8?s.data[t]:null,e)),{});F(!0);const c={data:p};return(0,m.Z)(d,"ClearAll"==l?c:s,"SetDefaultWorkPermitWOID"==l&&r?r:Z.token[0]).then((e=>{const a=e.Output.status.code,r=e.Output.data;if("200"==a){const e=r.length;if(i)return 1==r.length?r[0]:{};1==t?e>0?(K(r),o&&"ParentWorkPermitWOIKeyDPK"==l&&(Ae.current.checkedAll(r),R.loading(!1))):K([]):K(B.concat(r)),"SetDefaultWorkPermitWOID"==l&&(e>0?Be(r[0],"SetDefaultWorkPermitWOID"):U("NORECORDS")),F(!1)}else R.alert({open:!0,color:"warning",message:[e.Output.status.message]}),F(!1)}))},ze=(t,l,r)=>{const i=W.v.Api+"FP1302S3/",n={data:{p1:null,p2:"WorkPermitWOCode"==r&&l?"%"+l+"%":null,p3:"WorkOrderKey"==r&&l?"%"+l+"%":null,p4:"WorkOderType"==r&&l?"%"+l+"%":null,p5:null,p6:null,p7:a.WorkPermitRegistryWorkPermitID?a.WorkPermitRegistryWorkPermitID:"0",p8:null,p9:null,p10:e.Dialogview?"1":null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:t,p51:10,p52:"WorkPermitWOID",p53:null,p54:null,p55:localStorage.getItem("UserGroupID"),p56:localStorage.getItem("userid")}},o={data:Object.keys(n.data).slice(0,Object.keys(n.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(n.data).length-8?n.data[t]:null,e)),{})};F(!0),(0,m.Z)(i,"ClearAll"==r?o:n,Z.token[0]).then((e=>{const a=e.Output.status.code,l=e.Output.data;if("200"==a){const e=l.length;1==t?("WorkPermitWOCode"==r&&Pe(e>0),"WorkOrderKey"==r&&Ce(e>0),"WorkOderType"==r&&ve(e>0),K(l)):("WorkPermitWOCode"==r&&Pe(!0),"WorkOrderKey"==r&&Ce(!0),"WorkOderType"==r&&ve(!0),K(B.concat(l))),F(!1)}else R.alert({open:!0,color:"warning",message:[e.Output.status.message]}),F(!1)}))},_e=(0,l.useCallback)((async(e,t,a)=>{"text"==a?A({type:a,name:t,value:e}):"number"==a?A({type:a,name:t,number:Number(e)}):"boolean"==a?A({type:a,name:t,boolean:e}):"date"==a?A({type:"text",name:t,value:e}):"select"==a&&("MatWoTypeID"==t?(A({type:"text",name:"MatWoTypeID",value:e.MatWoTypeIDPK?e.MatWoTypeIDPK:null}),A({type:"text",name:"MatWoTypeName",value:e.MatWoTypeName?e.MatWoTypeName:null})):"ParentWorkPermitWOIKeyD"==t?(A({type:"text",name:"ParentWorkPermitWOIKeyD",value:e.ParentWorkPermitWOIKeyDPK?e.ParentWorkPermitWOIKeyDPK:null}),A({type:"text",name:"ParentWorkPermitWOCode",value:e.ParentWorkPermitWOCode?e.ParentWorkPermitWOCode:null})):"WorkPermitID"==t&&(A({type:"text",name:"WorkPermitID",value:e.WorkPermitIDPK?e.WorkPermitIDPK:null}),A({type:"text",name:"PerEquipmentName",value:e.PerEquipmentName?e.PerEquipmentName:null})))}),[w]);function qe(e){if("MatWoTypeID"==e){if(!w.MatWoTypeID)return!1;A({type:"text",name:"MatWoTypeID",value:null}),A({type:"text",name:"MatWoTypeName",value:""}),document.getElementById("WorkPermitWODetailsMatWoTypeNameClear")&&document.getElementById("WorkPermitWODetailsMatWoTypeNameClear").click(),document.getElementById("WorkPermitWODetailsParentWorkPermitWOCodeClear")&&document.getElementById("WorkPermitWODetailsParentWorkPermitWOCodeClear").click()}else if("ParentWorkPermitWOIKeyD"==e){if(!w.ParentWorkPermitWOIKeyD)return!1;A({type:"text",name:"ParentWorkPermitWOIKeyD",value:null}),A({type:"text",name:"ParentWorkPermitWOCode",value:""}),document.getElementById("WorkPermitWODetailsParentWorkPermitWOCodeClear")&&document.getElementById("WorkPermitWODetailsParentWorkPermitWOCodeClear").click(),Fe([])}else if("WorkPermitID"==e){if(!w.WorkPermitID)return!1;A({type:"text",name:"WorkPermitID",value:null}),A({type:"text",name:"PerEquipmentName",value:""}),document.getElementById("WorkPermitWODetailsPerEquipmentNameClear")&&document.getElementById("WorkPermitWODetailsPerEquipmentNameClear").click()}}function Ve(e){if("MatWoTypeID"==e){if(!w.MatWoTypeID)return!1;A({type:"text",name:"MatWoTypeID",value:null})}else if("ParentWorkPermitWOIKeyD"==e){if(!w.ParentWorkPermitWOIKeyD)return!1;A({type:"text",name:"ParentWorkPermitWOIKeyD",value:null})}else if("WorkPermitID"==e){if(!w.WorkPermitID)return!1;A({type:"text",name:"WorkPermitID",value:null})}}const Ge=e=>{R.ConfirmAlert(r().createElement(ee(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Ue(e),onCancel:()=>R.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:be("Yes"),cancelBtnText:be("No"),showCancel:!0},be("Do you want to update this record?")))};function Ue(e){R.ConfirmAlert(null),k(e.IsDraft),q(Number(e.WorkPermitWOIDPK)?Number(e.WorkPermitWOIDPK):0),A({type:"number",name:"MatWoTypeID",number:e.MatWoTypeID?Number(e.MatWoTypeID):0}),A({type:"text",name:"MatWoTypeName",value:e.MatWoTypeName?e.MatWoTypeName:""}),A({type:"number",name:"ParentWorkPermitWOIKeyD",number:e.ParentWorkPermitWOIKeyD?Number(e.ParentWorkPermitWOIKeyD):0}),A({type:"text",name:"ParentWorkPermitWOCode",value:e.ParentWorkPermitWOCode?e.ParentWorkPermitWOCode:""}),A({type:"text",name:"WorkPermitWOCode",value:e.WorkPermitWOCode?e.WorkPermitWOCode:""}),A({type:"text",name:"WorkOrderKey",value:e.WorkOrderKey?e.WorkOrderKey:""}),A({type:"text",name:"WorkOderType",value:e.WorkOderType?e.WorkOderType:""}),A({type:"number",name:"WorkPermitID",number:e.WorkPermitID?Number(e.WorkPermitID):0}),A({type:"text",name:"PerEquipmentName",value:e.PerEquipmentName?e.PerEquipmentName:""})}const He=e=>"string"==typeof e?e.trim():e;return r().createElement("div",null,r().createElement(n.Z,{expanded:D,onChange:e=>{}},r().createElement(b.Z,null,r().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},D&&r().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"6px",padding:"0px 4px 0px 0px"}},r().createElement("div",{className:"HeadTxt",title:"10.0.0.39-10:01:31 AM-17-5[1302]"}," ",be("Add "),we("1302")),r().createElement("div",{className:"displayFlex EntryHeaderBtn"},r().createElement("div",{className:"GridAlign"},r().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},r().createElement(re.Z,{row:!0},r().createElement(j.Z,{labelPlacement:"bottom",id:"fld1302L1ECEntryCheckbox",control:r().createElement(C.Z,{checked:"1"==p,onChange:e=>c(e.target.checked)}),label:be(1==p?"Active":"In Active")})))),!e.createEasy&&r().createElement("div",{className:"GridAlign",onClick:()=>{R.AttachExpand(!0)},id:"fld1302L1ECIconButton"},r().createElement("div",{className:"Entry-Checkbox"},r().createElement("div",{disableRipple:!0,disabled:!1},r().createElement(ie.Ypb,{className:"Iconstyles"}))),r().createElement("div",{className:"GridLabel"},r().createElement("p",null,be("Attach")))),!_&&r().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{Ke()},id:"fld1302L1ECClearBtn"},r().createElement("div",{className:"Entry-Checkbox"},r().createElement(ie.pYJ,{className:"Iconstyles"})),r().createElement("div",{className:"GridLabel"},r().createElement("p",null,be("Reset")))),Z.AccessRights.IsAdd||Z.AccessRights.IsEdit?r().createElement(Q.Z,{frmctrlid:"fld1302L1ECSaveBtnIsAdd",name:be(_?"Update":"Save"),disabled:!1,onClick:()=>{w.MatWoTypeID&&0!=w.MatWoTypeID?_||0!=xe.length?_&&!w.ParentWorkPermitWOIKeyD?R.alert({open:!0,color:"warning",message:[be("Please select the ")+" "+we("ParentWorkPermitWOIKeyD")]}):e.parentId&&0!=e.parentId?R.ConfirmAlert(r().createElement(ee(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:be("Are you sure?"),onConfirm:()=>Me(),onCancel:()=>R.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:be("Yes"),cancelBtnText:be("Cancel"),showCancel:!0},be(_?"Do you want to Update?":"Do you want to Save?"))):R.alert({open:!0,color:"warning",message:[be("Please select the ")+" "+we("WorkPermitID")]}):R.alert({open:!0,color:"warning",message:[be("Please select the ")+" "+we("ParentWorkPermitWOIKeyD")]}):R.alert({open:!0,color:"warning",message:[be("Please select the ")+" "+we("MatWoTypeID")]})}}):null,!e.createEasy&&r().createElement(G.Z,{frmctrlid:"fld1302L1ECCloseBtn",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{Ke(),g(!1),R.EditClose(!0),R.hideAddBtn(!1),z({type:"Add",payload:!1})}}))))),r().createElement(o.Z,null,r().createElement("div",{id:"WorkPermitWODetails-Main",className:"width100 displayFlex componentMainDiv cardDiv"},r().createElement("div",{id:"WorkPermitWODetails-Detail",className:"detailCard detailDiv"},r().createElement("div",{id:"WorkPermitWODetails-MainBody",className:"padding paddingLeft "},r().createElement("div",null,r().createElement(u.Z,{spacing:2},r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,className:"flexEnd"},r().createElement(ne.Z,{"data-testid":w.PermitStartDateTime,value:w.PermitStartDateTime,onErr:e=>{ce(e)},onChange:e=>{_e(e,"PermitStartDateTime","date")},label:we("Start Date"),frmctrlid:"fld1300_34751d34234",frmctrlidName:"PermitStartDateTime",fieldorder:"2"})),r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,className:"flexEnd"},r().createElement(ne.Z,{"data-testid":w.PermitEndDateTime,value:w.PermitEndDateTime,minDate:w.PermitStartDateTime,onErr:e=>{ye(e)},onChange:e=>{_e(e,"PermitEndDateTime","date")},label:we("End Date"),frmctrlid:"fld1300_3475252343",frmctrlidName:"PermitEndDateTime",fieldorder:"3"})),r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},r().createElement(te.Z,{json:le,id:w.MatWoTypeID,"data-testid":w.MatWoTypeID,value:w.MatWoTypeName,SPName:"WorkPermitWODetails",FieldName:"MatWoTypeID",tfLabel:we("MatWoTypeID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>_e(e,"MatWoTypeID","select"),onChange:(e,t)=>{Ze(e,t,"MatWoTypeIDPK")},KeyBack:e=>{Ve("MatWoTypeID")},fieldorder:"1",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,openSlide:()=>{Le("862")},Tabledialog:()=>Re("862","MatWoTypeID"),loading:x,clear:e=>{e&&qe("MatWoTypeID")}})),_?null:r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},r().createElement(de.Z,{json:le,id:w.ParentWorkPermitWOIKeyD,"data-testid":w.ParentWorkPermitWOIKeyD,value:w.ParentWorkPermitWOCode,SPName:"WorkPermitWODetails",FieldName:"ParentWorkPermitWOIKeyD",tfLabel:we("ParentWorkPermitWOIKeyD"),ref:Ae,EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:(e,t)=>{Fe(t)},onChange:(e,t)=>{Ze(e,t,"ParentWorkPermitWOIKeyDPK")},fieldorder:"4",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,SideEntryView:!1,allData:e=>{R.loading(!0),Ze("1","","ParentWorkPermitWOIKeyDPK","","",0,e)},openSlide:()=>{},Tabledialog:()=>{},loading:x,clear:e=>{e&&qe("ParentWorkPermitWOIKeyD")}})),_?r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3},r().createElement(te.Z,{json:le,id:w.ParentWorkPermitWOIKeyD,"data-testid":w.ParentWorkPermitWOIKeyD,value:w.ParentWorkPermitWOCode,SPName:"WorkPermitWODetails",FieldName:"ParentWorkPermitWOIKeyD",tfLabel:we("ParentWorkPermitWOIKeyD"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>_e(e,"ParentWorkPermitWOIKeyD","select"),onChange:(e,t)=>{Ze(e,t,"ParentWorkPermitWOIKeyDPK")},KeyBack:e=>{Ve("ParentWorkPermitWOIKeyD")},fieldorder:"4",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,openSlide:()=>{Le("WorkPermitWOIDPK")},Tabledialog:()=>Re("WorkPermitWOIDPK","ParentWorkPermitWOIKeyD"),loading:x,clear:e=>{e&&qe("ParentWorkPermitWOIKeyD")}})):null,r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},r().createElement(te.Z,{"data-testid":w.WorkPermitWOCode,json:le,SPName:"WorkPermitWODetails",FieldName:"WorkPermitWOCode",tfLabel:we("WorkPermitWOCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Ge(t),onClick:()=>{ge&&ze(1,"","ClearAll"),Pe(!0)},frmctrlid:"fld1302_34848",frmctrlidName:"WorkPermitWOCode",fieldorder:"2",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,onChange:(e,t)=>{ge&&ze(e,t,"WorkPermitWOCode"),_e(t,"WorkPermitWOCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Pe(!0)},showList:ge,SideEntryView:!1,KeyBack:e=>{},value:w.WorkPermitWOCode,loading:x,clear:e=>{e&&(A({type:"text",name:"WorkPermitWOCode",value:""}),Pe(!0))}})),r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},r().createElement(te.Z,{"data-testid":w.WorkOrderKey,json:le,SPName:"WorkPermitWODetails",FieldName:"WorkOrderKey",tfLabel:we("WorkOrderKey"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Ge(t),onClick:()=>{Ee&&ze(1,"","ClearAll"),Ce(!0)},frmctrlid:"fld1302_34849",frmctrlidName:"WorkOrderKey",fieldorder:"2",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,onChange:(e,t)=>{Ee&&ze(e,t,"WorkOrderKey"),_e(t,"WorkOrderKey","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||Ce(!0)},showList:Ee,SideEntryView:!1,KeyBack:e=>{},value:w.WorkOrderKey,loading:x,clear:e=>{e&&(A({type:"text",name:"WorkOrderKey",value:""}),Ce(!0))}})),r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},r().createElement(te.Z,{"data-testid":w.WorkOderType,json:le,SPName:"WorkPermitWODetails",FieldName:"WorkOderType",tfLabel:we("WorkOderType"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&Ge(t),onClick:()=>{fe&&ze(1,"","ClearAll"),ve(!0)},frmctrlid:"fld1302_34850",frmctrlidName:"WorkOderType",fieldorder:"2",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,onChange:(e,t)=>{fe&&ze(e,t,"WorkOderType"),_e(t,"WorkOderType","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||ve(!0)},showList:fe,SideEntryView:!1,KeyBack:e=>{},value:w.WorkOderType,loading:x,clear:e=>{e&&(A({type:"text",name:"WorkOderType",value:""}),ve(!0))}})),r().createElement(y.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},r().createElement(te.Z,{json:le,id:w.WorkPermitID,"data-testid":w.WorkPermitID,value:w.PerEquipmentName,SPName:"WorkPermitWODetails",FieldName:"WorkPermitID",tfLabel:we("WorkPermitID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>_e(e,"WorkPermitID","select"),onChange:(e,t)=>{Ze(e,t,"WorkPermitIDPK")},KeyBack:e=>{Ve("WorkPermitID")},fieldorder:"2",data:B,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:B.length>0?B[0].TotalCount:0,openSlide:()=>{Le("1300")},Tabledialog:()=>Re("1300","WorkPermitID"),loading:x,clear:e=>{e&&qe("WorkPermitID")}})))),r().createElement("div",{id:"WorkPermitWODetailsSideBar",className:"sidenav"},r().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("WorkPermitWODetailsSideBar").style.width="0",void O(!1))},"×"),v&&r().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},T))))))))}));a(77366),a(97829);var ce=a(65197);const ue=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),[d,s]=((0,i.useSelector)((e=>e.form)),(0,l.useState)([])),[p,c]=(0,l.useState)(!0),[u,y]=(0,l.useState)(e.showDetail),[D,g]=(0,l.useState)(""),[I,k]=r().useState(!1),[E,C]=r().useState(""),[f,v]=r().useState(!1),O=(0,l.useContext)(Ie),{cstate:h,cdispatch:S}=ke(),[T,N]=(0,l.useState)(!1),[w,A]=(0,l.useState)(""),[x,F]=(0,l.useState)(""),[B,K]=(0,l.useState)("");let L=(0,P.Z)();(0,l.useEffect)((()=>{h.editData.length>0&&(s(h.editData),k(!1),S({type:"PrimaryId",payload:h.editData[0].WorkPermitWOIDPK}))}),[h.editData]),(0,l.useEffect)((()=>{h.showTableview&&K(h.showTableview)}),[h.showTableview]),(0,l.useEffect)((()=>{c(h.ExpandDetailValue)}),[h.ExpandDetailValue]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{c(e),k(null)},viewtoggle:()=>{k(!1)},viewlistProps:(t,a)=>{!function(t,a=!1){let l=W.v.Api+"FP1302S3/",r={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:null,p8:null,p9:null,p10:e.Dialogview?"1":null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:null,p48:null,p49:null,p50:1,p51:10,p52:h.IsDraft?"DraftWorkPermitWOID":"WorkPermitWOID",p53:null,p54:null,p55:localStorage.getItem("UserGroupID"),p56:localStorage.getItem("userid")}};(0,H.Z)(0).then((e=>{(0,m.Z)(l,r,e).then((e=>{O.loading(!1),"200"==e.Output.status.code&&s(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===I&&a.current.clear()}})));const R=e=>L?.[e]?L?.[e]:e,Z=e=>h.language?.[e]?h.language[e]:e;function z(e,t){}const _=(e,t)=>(a,l)=>{C(f?Object.assign(...d.filter((e=>e.WorkPermitWOIDPK==t)).map((e=>e))):h.editData),k(!l&&e)};return r().createElement("div",null,r().createElement(n.Z,{expanded:p,onChange:()=>()=>{e.expandTable&&c(!p)}},!I&&r().createElement(b.Z,null,r().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},p?r().createElement("div",{className:"displayFlex EntryViewHeader"},r().createElement("p",{className:"ListP"},h.IsDraft?R("Draft"):"",Z("WorkPermitWODetails"),e.viewonly?" ":"("+h.count+")")):"",p?r().createElement("div",{className:"displayFlex EntryHeaderBtn"},!e.viewonly&&h.AccessRights.IsAdd?r().createElement(M.Z,{name:R("Add"),frmctrlid:"fld1302L1VCAddBtn",className:"AddBtnCommon boxShadowNone",onClick:()=>{O.hideAddBtn(!0),S({type:"editData",payload:[]}),S({type:"ShowDetail",payload:!1}),S({type:"Add",payload:!0})},disabled:!1}):"",!e.viewonly&&h.AccessRights.IsEdit?r().createElement(U.Z,{frmctrlid:"fld1302L1VCEditBtn",onClick:_("panel0",""),disabled:!1}):h.IsDraft&&h.AccessRights.IsAdd&&r().createElement(U.Z,{frmctrlid:"fld1302L1VCEditBtnIsAdd",onClick:()=>{_("panel","")},disabled:!1}),!e.viewonly&&r().createElement(G.Z,{disabled:!1,className:"L1AddBtnCommon",frmctrlid:"fld1302L1VCCloseBtn",onClick:()=>{c(!1),O.hideAddBtn(!1),f&&(S({type:"editData",payload:[]}),s([]))}})):"")),r().createElement(o.Z,{style:{display:"block"}},d.map(((t,l)=>r().createElement("div",{key:l},I==="panel"+l?r().createElement(pe,{ref:a,parentId:e.parentId}):r().createElement(r().Fragment,null,r().createElement(ce.Z,{tableName:"WorkPermitWODetails",tableID:1302,parentID:t.WorkPermitWOIDPK,fldid:"fld1302L1VCContainer",OpenSlideComponent:z,index:l,refresh:B,val:t,tf:Z,t:R,title:"10.0.0.39-10:01:31 AM-17-5[1302]"}))))))))}));var ye=a(67698),We=a(55995),De=(a(45965),a(41722)),ge=a(9175),Pe=a.n(ge);const Ie=(0,l.createContext)(),ke=()=>{const e=(0,l.useContext)(Ie);if(void 0===e)throw new Error("useCont must be used within  WorkPermitWODetailsContext Provider");return e},Ee=[],Ce=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),n=(0,l.useRef)(),o=(0,l.useRef)(),m=(0,l.useRef)(),d=(0,l.useRef)(),[s,p]=(0,l.useState)(!0),[c,u]=(0,l.useState)(),y=((0,i.useSelector)((e=>e.form)),(0,i.useDispatch)()),[W,D]=(0,l.useState)(0),[g,P]=(0,l.useReducer)(De.D,De.E),[I,k]=(0,l.useState)(""),[E,C]=(0,l.useState)([]),[f,v]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e.loading(!0),e.tableview||n.current.clear(),document.getElementById("divWorkPermitWODetails-Entry").style.width="100%",document.getElementById("WorkPermitWODetails-MainTable").style.width="100%",document.getElementById("WorkPermitWODetails-MainDiv").classList.remove("displayFlex"),document.getElementById("WorkPermitWODetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{p(!0),document.getElementById("divWorkPermitWODetails-Entry").style.width="100%",document.getElementById("WorkPermitWODetails-MainTable").style.width="100%",document.getElementById("WorkPermitWODetails-MainDiv").classList.remove("displayFlex"),document.getElementById("WorkPermitWODetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{e.editData&&(P({type:"editData",payload:[e.editData]}),P({type:"ShowDetail",payload:!0}))}),[e.editData]),(0,l.useImperativeHandle)(t,(()=>({AddOpen:(e,t)=>{P(t?{type:"AccessRights",payload:{IsAdd:!0,IsEdit:!0,IsView:!0,IsDelete:!0,IsPrint:!0,IsExport:!0}}:{type:"AccessRights",payload:{IsAdd:!1,IsEdit:!1,IsView:!1,IsDelete:!0,IsPrint:!0,IsExport:!0}}),n.current.AddOpen(e),setTimeout((()=>a.current.HideEntryFields(!0)),500)},AddClose:()=>{setTimeout((()=>a.current.HideEntryFields(!0)),500)}})));const O=e=>{document.getElementById("divWorkPermitWODetails-Entry").style.width="100%",document.getElementById("WorkPermitWODetailsEntryTable").style.width="100%",document.getElementById("WorkPermitWODetails-MainEntry").style.width="100%",document.getElementById("WorkPermitWODetails-MainEntry").style.display="block",document.getElementById("WorkPermitWODetails-MainDiv").classList.add("displayFlex"),document.getElementById("WorkPermitWODetails-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttWorkPermitWODetails").style.width="0%",document.getElementById("overlayimgAttWorkPermitWODetails").style.display="none"};(0,l.useEffect)((()=>{y((e=>{(0,H.Z)(1).then((e=>{var t=new Array;t.push(e),P({type:"token",payload:t}),D(t.length),h(e)}))}))}),[]);const h=t=>{P({type:"AccessRights",payload:e.AccessRights})};return r().createElement("div",{style:{width:"100%"}},r().createElement(Ie.Provider,{value:{cstate:g,cdispatch:P,ContextApi:ke,loading:t=>e.loading(t),alert:t=>e.alertmsg(t),ShareTab:(t,a)=>e.TabShare(t,a),ConfirmAlert:t=>e.ConfirmAlert(t),SlideComponentType:t=>e.SlideComponentType(t),openNav:t=>e.openNav(t),RefreshTable:()=>{a.current.tableRefresh(),e.cardRefresh()},searchItem:e=>{0!==W&&a.current.searchItem(e)},openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t),attachmentSave:e=>{d.current.tempsave(e,E),C([])},EditClose:e=>O(),AttachExpand:e=>(m.current.AttachmentData(g.PrimaryId),void(s&&(document.getElementById("overlayPreviewWorkPermitWODetails").style.width="50%",document.getElementById("divWorkPermitWODetails-Entry").style.width="100%",document.getElementById("WorkPermitWODetails-MainTable").style.width="100%",document.getElementById("WorkPermitWODetails-MainEntry").style.width="100%",document.getElementById("WorkPermitWODetails-MainDiv").classList.remove("displayFlex"),document.getElementById("WorkPermitWODetails-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttWorkPermitWODetails").style.display="block",document.getElementById("overlayimgAttWorkPermitWODetails").style.width="25%"))),Expanded:e=>{g.ShowDetail&&o.current.tableClick(e),P({type:"ExpandDetailValue",payload:e})},viewtoggle:()=>{g.ShowDetail&&o.current.viewtoggle()},clear:e=>{P({type:"ShowDetail",payload:!1}),P({type:"editData",payload:[]}),g.ShowDetail?o.current.clear(e):n.current.clear(e)},hideAddBtn:e=>{a.current.HideEntryFields(e)},ExpandEntry:()=>{g.ShowDetail?o.current.tableClick(!1):n.current.CreateEasyProps(!1)},resetImg:()=>{d.current.tempClear(),m.current.clrImgstate(!0)},Approval:e=>v(e)}},r().createElement("div",{id:"WorkPermitWODetails-MainDiv",className:"MainDivStyles displayFlex",style:{height:e.subForm&&"fit-content"}},r().createElement("div",{id:"WorkPermitWODetails-MainEntry",className:"",style:{background:"#fff"}},r().createElement("div",{style:{display:"flex"}},r().createElement("div",{id:"WorkPermitWODetailsEntryTable",style:{width:"100%"}},g.ShowDetail?r().createElement("div",null,r().createElement("div",{className:"displayFlex width100"},r().createElement("div",{id:"divWorkPermitWODetails-Entry",style:{width:"100%"}},0!==W?r().createElement(ue,{ref:o,IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}):null)),r().createElement(We.Z,{ref:d,menurefID:1302,fileId:"LogoImgWorkPermitWODetails",imgloading:t=>{t||g.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:g.PrimaryId,AttachmentVal:e=>m.current.AttachmentData(e),previd:"overlayPreviewWorkPermitWODetails",frmctrlid:"PvwIm_1302_L1_",tempImg:e=>{g.PrimaryId?m.current.AttachmentData(g.PrimaryId):m.current.tempImg(e),C(e)},clearTempData:g.Add})):r().createElement("div",null,r().createElement("div",{className:"displayFlex width100"},r().createElement("div",{id:"divWorkPermitWODetails-Entry",style:{width:"100%"}},!e.tableview&&r().createElement(pe,{ref:n,clrImgstate:e=>m.current.clrImgstate(e),IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}))),r().createElement(We.Z,{ref:d,menurefID:1302,fileId:"LogoImgWorkPermitWODetails",imgloading:t=>{t||g.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:g.PrimaryId,AttachmentVal:e=>m.current.AttachmentData(e),previd:"overlayPreviewWorkPermitWODetails",frmctrlid:"PvwIm_1302_L1_",tempImg:e=>{g.PrimaryId?m.current.AttachmentData(g.PrimaryId):m.current.tempImg(e),C(e)},clearTempData:g.Add})),r().createElement("div",{id:"WorkPermitWODetails-MainTable"},0!==W?r().createElement(V,{ref:a,parentId:e.parentId,IsCollapse:e.IsCollapse,tableview:e.tableview}):null)),r().createElement(ye.Z,{ImgAttachment:e=>O(),menurefID:1302,fileId:"AttImgWorkPermitWODetails",imgid:"overlayimgAttWorkPermitWODetails",valueIDPK:g.PrimaryId,PriviewData:(e,t,a,l)=>{d.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewWorkPermitWODetails",ref:m,imgloading:c,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_1302_L1_",timglist:e=>d.current.timglist(e),clearTempData:g.Add}))),r().createElement("div",{id:"WorkPermitWODetails-DetailDiv",style:{display:"none",height:"81vh",overflowY:"auto"}}))),f&&r().createElement(Pe(),{openDialog:f,closeDialog:e=>v(e),formID:1302,PrimID:e.parentId,alert:(t,a,l)=>{"Approval Sent Succesfully"==t.message&&(e.cardRefresh(),v(!1))},loading:t=>{e.loading(t)}}))}))}}]);