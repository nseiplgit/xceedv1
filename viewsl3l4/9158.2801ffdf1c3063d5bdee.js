/*! For license information please see 9158.2801ffdf1c3063d5bdee.js.LICENSE.txt */
"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[9158],{29158:(e,t,a)=>{a.r(t),a.d(t,{ContextApi:()=>xe,UserGridViewData:()=>Be,WorkPerPrecautionDetailsContext:()=>Fe,default:()=>Le});var l=a(92950),r=a.n(l),n=(a(95866),a(45237)),i=a(36939),o=a(61201),c=a(51673),s=(a(99058),a(80366)),d=a(282),m=a(868),u=a(78513),p=a(14439),P=a(27848),g=a(40900),D=a(64059),y=a(24038),I=a(8981),E=a(47516),C=a(86893),v=a(33681),f=a(63163),h=a(35131),k=a.n(h),S=a(61956),N=a(93657),W=a(53375),b=a(52663),w=a(66083),A=a(29525),T=a(66856),F=a(39803),x=a(99940),B=a(17149),L=a(62810),Z=a(30553),R=a(92381),O=a(25108);const z=(0,l.forwardRef)(((e,t)=>{const[a]=(0,l.useState)(localStorage.getItem("userid")),[n,i]=(0,l.useState)([]),[o,h]=(0,l.useState)({idpk:"",name:"",type:"",fieldidpk:""}),[k,S]=(0,l.useState)(""),[z,M]=(0,l.useState)({}),[K,q]=(0,l.useState)(!0),[G,V]=(0,l.useState)(!1),{cstate:_,cdispatch:H}=e.ContextApi?e.ContextApi:xe(),[U,Y]=(0,l.useState)(1),[j,$]=(0,l.useState)(0),[J,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)({}),[te,ae]=(0,l.useState)([]),[le,re]=(0,l.useState)(!0),[ne,ie]=(0,l.useState)(!1),[oe,ce]=(0,l.useState)(""),[se,de]=(0,l.useState)(!1),[me,ue]=(0,l.useState)(!1),[pe,Pe]=(0,l.useState)(!1),[ge,De]=(0,l.useState)(""),ye=(0,l.useRef)(null),[Ie,Ee]=(0,l.useState)({});let Ce=localStorage.getItem("Language");const ve={English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"};let fe=(0,I.Z)();const he=e=>fe[e]?fe[e]:e,ke=t=>e.userGrid?.find((e=>e.AdminUserGridViewIDPK==t))?.[ve[Ce]];function Se(){M({}),ee({}),e.searchData({}),V(!1)}(0,l.useEffect)((()=>{let t=e.userGrid.filter((e=>!e.IsForeign&&e.IsVisible&&!e.FieldName.startsWith("Is")&&"99"!=e.GroupID))?.map((e=>e.FieldDisplay));const a=e.userGrid.reduce(((e,t)=>{const a=t.FieldName;return t.IsForeign&&(e[a]||(e[a]=[]),e[a].push(t.FieldDisplay)),e}),{});Ee(a),ae(t)}),[]),(0,l.useEffect)((()=>()=>{ye.current&&ye.current.abort()}),[]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{Se()}})));const Ne=async(t,a,l,r)=>{Q(!0);try{ye.current&&ye.current.abort();const o=new AbortController;ye.current=o;let s="",d=[],m={};await h((e=>(s=e.name,e))),await M((e=>(d=e,e))),await ee((e=>(m=e,e)));const u=g.v.Api+"FP1303S3/",p={data:{p1:"WorkPerPrecationIDPK"==a?null:await Te(),p2:"WorkPerPreCode"==s&&l.length>0?"%"+l+"%":null,p3:null,p4:null,p5:e.parentId?e.parentId:"0",p6:"PrecautionName"!=s&&d.PrecautionName?d.PrecautionName.map((e=>e.WPPrecautionIDPK)).toString():null,p7:e.Dialogview?"1":null,p8:null,p9:"p9"==s&&l.length>0?l:null,p10:null,p11:null,p12:null,p13:null,p14:"AppAuthorityName"!=s&&d.AppAuthorityName?d.AppAuthorityName.map((e=>e.WPApprovalAuthorityIDPK)).toString():null,p15:"AppAuthorityCode"==s&&l.length>0?"%"+l+"%":null,p16:"AppAuthorityName"==s&&l.length>0?"%"+l+"%":null,p17:"PermitRequestName"!=s&&d.PermitRequestName?d.PermitRequestName.map((e=>e.WPPermitRequestIDPK)).toString():null,p18:"PermitRequestCode"==s&&l.length>0?"%"+l+"%":null,p19:"PermitRequestName"==s&&l.length>0?"%"+l+"%":null,p20:"DivisionName"!=s&&d.DivisionName?d.DivisionName.map((e=>e.DivisionIDPK)).toString():null,p21:"DivisionCode"==s&&l.length>0?"%"+l+"%":null,p22:"DivisionName"==s&&l.length>0?"%"+l+"%":null,p23:"ContractName"!=s&&d.ContractName?d.ContractName.map((e=>e.ContractIDPK)).toString():null,p24:"ContractCode"==s&&l.length>0?"%"+l+"%":null,p25:"ContractName"==s&&l.length>0?"%"+l+"%":null,p26:"LocalityName"!=s&&d.LocalityName?d.LocalityName.map((e=>e.LocalityIDPK)).toString():null,p27:"LocalityCode"==s&&l.length>0?"%"+l+"%":null,p28:"LocalityName"==s&&l.length>0?"%"+l+"%":null,p29:"BuildingName"!=s&&d.BuildingName?d.BuildingName.map((e=>e.BuildingIDPK)).toString():null,p30:"BuildingCode"==s&&l.length>0?"%"+l+"%":null,p31:"BuildingName"==s&&l.length>0?"%"+l+"%":null,p32:"FloorName"!=s&&d.FloorName?d.FloorName.map((e=>e.FloorIDPK)).toString():null,p33:"FloorCode"==s&&l.length>0?"%"+l+"%":null,p34:"FloorName"==s&&l.length>0?"%"+l+"%":null,p35:"SpotName"!=s&&d.SpotName?d.SpotName.map((e=>e.SpotIDPK)).toString():null,p36:"SpotCode"==s&&l.length>0?"%"+l+"%":null,p37:"SpotName"==s&&l.length>0?"%"+l+"%":null,p38:"FirstName"!=s&&d.FirstName?d.FirstName.map((e=>e.EmployeeIDPK)).toString():null,p39:"EmployeeCode"==s&&l.length>0?"%"+l+"%":null,p40:"FirstName"==s&&l.length>0?"%"+l+"%":null,p41:"EmpContactNo1"==s&&l.length>0?"%"+l+"%":null,p42:"EmpEmailOfficial"==s&&l.length>0?"%"+l+"%":null,p43:"WPPermitCode"==s&&l.length>0?"%"+l+"%":null,p44:"WPPermitTitle"==s&&l.length>0?"%"+l+"%":null,p45:"PrecautionCode"==s&&l.length>0?"%"+l+"%":null,p46:"PrecautionName"==s&&l.length>0?"%"+l+"%":null,p47:r||1,p48:10,p49:t,p50:null,p51:null,p52:localStorage.getItem("UserGroupID"),p53:localStorage.getItem("userid")}},P=await(0,c.Z)(u,p,e.token,"",o.signal);if(!P)return!1;const D=P.Output.status.code,y=P.Output.data;if("200"===D)if(y.length>0)if(1===r){let e=be(y,s),t=We(e,z[s],a);i(t),$(t.length>0?t[0].TotalCount:z[s].length)}else{let e=[...n,...y],t=be(e,s);$(t.length<10?t.length:y[0].TotalCount),i(be(t,s))}else k.length>0&&i([]),$(n.length);else e.alertmsg("error",[P.Output.status.message])}catch(t){e.alertmsg("warning",[t])}finally{Q(!1)}},We=(e=[],t=[],a)=>e.filter((e=>!t.find((t=>e[a]===t[a])))),be=(e,t)=>e.filter(((e,a,l)=>l.findIndex((a=>a[t]===e[t]))===a));function we(e){let t=e+"PK",a=Ie[e];if(a){const e=a.flatMap((e=>z[e]?z[e].map((e=>e[t])):[]));return e.toString()}return""}const Ae=async t=>{let a="",l={};await M((e=>(a=e,e)));let r=[...te],n=[];for(let e of r){let t=a[e]?.map((e=>e.WorkPerPrecationIDPK)).toString();t&&n.push(t)}await ee((e=>(l=e,e)));let i={WorkPerPrecationIDPK:n?[...new Set(n)].toString():"",CreatedTtm:l.CreatedTtm?l.CreatedTtm.From:"",CreatedTtmType:l.CreatedTtm?l.CreatedTtm.Type:"",CreatedTtmBetween:l.CreatedTtm?l.CreatedTtm.To:"",WorkPermitID:we("WorkPermitID"),WPPrecautionID:we("WPPrecautionID")};"saveFav"==t?Le("save",i):(e.searchData(i),V(!1))};async function Te(){let e={};await M((t=>(e=t,t)));let t=[...te],a=[];for(let l of t){let t=e[l]?.map((e=>e.WorkPerPrecationIDPK)).toString();t&&a.push(t)}return a?[...new Set(a)].toString():""}async function Fe(t,a,l,r,n,i){let o={[r]:{From:t,Type:l,To:a}},c={};ee((e=>({...e,...o})));const s={...z};let d=[...te],m=[];for(let e of d){let t=s[e]?.map((e=>e.WorkPerPrecationIDPK)).toString();t&&m.push(t)}await ee((e=>(c=e,e)));let u={WorkPerPrecationIDPK:m?[...new Set(m)].toString():"",CreatedTtm:c.CreatedTtm?c.CreatedTtm.From:"",CreatedTtmType:c.CreatedTtm?c.CreatedTtm.Type:"",CreatedTtmBetween:c.CreatedTtm?c.CreatedTtm.To:"",IsActive:"IsActive"==l?n:null,WorkPermitID:z.PerEquipmentName?.map((e=>e.WorkPermitIDPK)).toString(),WPPrecautionID:z.PrecautionName?.map((e=>e.WPPrecautionIDPK)).toString()};e.searchData(u)}function Be(){return r().createElement(D.Z,{frmctrlid:"fld1303L1TCDateCompCreatedTtm",SendDateVal:(e,t,a,l,r)=>{Fe(e,t,a,o.name,l)},keyboardback:()=>{V(!1),h({idpk:"",name:"",type:"",fieldidpk:""})},title:he(o.name),fieldname:o.name,save:e=>{alert(!0)}})}const Le=(t,a)=>{(0,R.Z)(t,e.formID,a,oe).then((e=>{const t=e.Output.data;De(t)}))};return r().createElement("div",null,r().createElement(b.Z,{onClose:()=>de(!1),className:"displayFlex","aria-labelledby":"customized-dialog-title",open:se},r().createElement(w.Z,{id:"customized-dialog-title",onClose:()=>de(!1)},"Add Favorite"),r().createElement(A.Z,{dividers:!0,style:{minWidth:"500px"}},r().createElement("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault()}},r().createElement(F.Z,{margin:"dense",id:"name",label:"Favorite Name",type:"text",value:oe,onChange:e=>ce(e.target.value),fullWidth:!0})),r().createElement(Z.Z,{style:{color:"#337ab7"},control:r().createElement(x.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:r().createElement(B.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:r().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:me,onChange:e=>ue(e.target.checked)}),label:"Quick"}),r().createElement(Z.Z,{style:{color:"#337ab7"},control:r().createElement(x.Checkbox,{style:{color:"#rgb(52, 179, 68)",padding:"6px"},icon:r().createElement(B.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checkedIcon:r().createElement(L.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:pe,onChange:e=>Pe(e.target.checked)}),label:"Dashboard"})),r().createElement(T.Z,null,r().createElement(d.Z,{onClick:()=>{Ae("saveFav"),de(!1)},color:"primary"},"Save"))),G?"Created Ttm"===o.name||o.name.includes("Date")?r().createElement(Be,null):r().createElement("div",null,r().createElement("div",{className:"columnHeader displayFlex"},r().createElement("div",{className:"columnFilterHeaderTitle width100 displayFlex"},r().createElement(p.Z,null,r().createElement(P.Z,{xs:6,sm:6,md:6,lg:6},r().createElement("p",{className:"columnHeaderp"},ke(o.idpk)," (",n.length,"/",j,")")),r().createElement(P.Z,{xs:6,sm:6,md:6,lg:6},r().createElement(m.ZP,{title:he("Close"),placement:"top"},r().createElement("div",{className:"FilterItemClose",align:"right"},r().createElement(s.Z,{id:"fld1303L1TFCFilterItemCloseIcon",className:"FilterItemCloseIcon",onClick:()=>{V(!1),h({idpk:"",name:"",type:"",fieldidpk:!1}),Y(1)}}))),z[o.name]&&r().createElement("div",{className:"FiltercloseAlign",align:"right"},r().createElement(d.Z,{frmctrlid:"fld1303L1TFCFilterSelectedClearAll",className:"ColumnApplyButton",onClick:()=>{(async()=>{let e={};await M((t=>(e=t,O.log("clear fewItems",e),t))),e[o.name]=[],Ne(o.type,o.fieldidpk,"",1)})()}},r().createElement("span",{className:"ColumnApplyTitle"},he("Clear All")))))))),r().createElement("div",{className:"FilterParentDiv"},r().createElement("div",{"data-list-scroll-container":"true"},r().createElement("div",{id:"SelectedItems",tabIndex:"-1",className:"heightScrollY"},r().createElement("div",{className:"FilterMaximize"},K?r().createElement(m.ZP,{title:"Maximize",placement:"right"},r().createElement("span",null,r().createElement(C.D7o,{className:"FilterMaximizeIcon",onClick:()=>{q(!1)}}))):r().createElement(m.ZP,{title:"Minimize",placement:"right"},r().createElement("span",null,r().createElement(C.dOw,{className:"FilterMaximizeIcon",onClick:()=>{q(!0)}})))),r().createElement("ul",null,z[o.name]&&z[o.name].map(((e,t)=>r().createElement("div",{key:t,tabIndex:"-1",className:K?"filterSelectedItems":"filterSelectedItemsMaximize"},r().createElement("div",{className:"filterSelectedItemNames"},r().createElement("span",null,e[o.name])),r().createElement("div",{className:"filterSelectedItemClose"},r().createElement("div",{id:"fildacls_3_L2_"+e[o.name],onClick:()=>(async(e,t)=>{Y(1);let a=z[o.name].filter((t=>t!=e)),l={};await M((e=>(l=e,e))),l[o.name]=a,M(l),i((t=>[e,...t]))})(e)},r().createElement(s.Z,{className:"filterSelectedItemCloseIcon"})))))))),r().createElement("div",{className:"displayFlex width100 FilterSearch"},r().createElement("div",{className:"FilterSearchInputDiv"},r().createElement(y.Z,{frmctrlid:"fld1303L1TFCFilterSearchInput",className:"filterSearchInput",type:"text",value:k,placeholder:he("Enter ")+" "+ke(o.idpk),onChange:e=>{S(e),Ne(o.type,o.fieldidpk,e,1,Te())}})),r().createElement("div",{id:"fld1303L1TFCFilterGoForward",className:"FilterSearchBtn",onClick:Ae},r().createElement(m.ZP,{title:"",placement:"top"},r().createElement(d.Z,{className:"ColumnSearchButton"},r().createElement("span",{className:"ColumnCloseTitle"},"Search"))))))),J&&r().createElement("div",{style:{position:"sticky",top:"0",zIndex:"5"}},r().createElement(v.Z,{color:"secondary"})),r().createElement("div",{id:"fld1303L1TFCScrollYDefault",className:"height65 scrollYDefault"},n.length>0&&n.map(((e,t)=>r().createElement("div",{id:"filda_3_L2_"+e[o.name],key:t,className:"FilterItemDiv",onClick:()=>{(async e=>{let t={},a=[];a.push(e);let l={};await M((e=>(l=e,e)));let r=l[o.name];t[o.name]=r?[...a,...r]:a,l={...l,...t},M(l),i((t=>t.filter((t=>t!=e))))})(e)}},r().createElement(u.Z,{className:"DotIcon"}),r().createElement("span",null,e[o.name])))),n.length+0<j&&n.length>0&&r().createElement("div",{id:"fld1303L1TFCMoreDataDiv",className:"MoreDataDiv",onClick:()=>{Y(U+1),Ne(o.type,o.fieldidpk,"",U+1)}},r().createElement("p",null," more... ")),0===n.length&&r().createElement("div",null,r().createElement("div",{className:"NoDataImage"},r().createElement("img",{src:g.v.NoData,alt:"NoImage"})),r().createElement("div",{className:"NoDataDesc"},r().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))))):r().createElement("div",null,r().createElement("div",{className:"columnHeader displayFlex"},r().createElement("div",{className:"columnHeaderTitle"},r().createElement(E.Ol$,{className:"columnHeaderIcon"}),r().createElement("p",{className:"columnHeaderp"}," ",he("Filter")," ",oe.length>0&&`(${oe})`)),r().createElement("div",{className:"columnHeaderbtn",align:"right"},r().createElement(m.ZP,{title:"Favorite List",placement:"top"},ne?r().createElement(s.Z,{className:"favlisticon",onClick:()=>{ie(!1),De(""),Se()}}):r().createElement(N.Z,{className:"favlisticon",onClick:()=>{ie(!0),Le("select"),Se()}})),Object.keys(z).length>0&&r().createElement(m.ZP,{title:"Save Favorites",placement:"top"},r().createElement(W.Z,{className:"favlisticon",onClick:()=>{de(!0)}})),r().createElement(m.ZP,{title:"",placement:"top"},r().createElement(d.Z,{className:"ColumnApplyButton",onClick:()=>{Se()},id:"fld1303L1TFCColumApplyBttn"},r().createElement("span",{className:"ColumnApplyTitle"},he("Clear")))),r().createElement(m.ZP,{title:"",placement:"top"},r().createElement(d.Z,{className:"ColumnCloseButton",onClick:()=>{e.CloseBtnClk()},id:"fld1303L1TFCColumnCloseButton"},r().createElement("span",{className:"ColumnCloseTitle"},he("Close")))))),r().createElement("div",{className:"height65"},r().createElement("div",{id:"fld1303L1TFCFilItems",className:"FilterItems"},!ge&&e.userGrid.sort(((e,t)=>e.Remarks-t.Remarks))?.filter((e=>e.IsDraft&&e.IsVisible)).map(((e,t)=>{return r().createElement("div",{className:`FilterItemDivTitle ${e.FieldName.startsWith("Is")&&"disflex10"}`,onClick:()=>{!e.FieldName.startsWith("Is")&&(e=>{V(!0),S(""),i([]),$(0);let t=e.IsForeign?e.FieldName+"PK":"WorkPerPrecationIDPK";h({idpk:e.AdminUserGridViewIDPK,name:e.FieldDisplay,type:e.IsForeign?"Filter"+e.FieldName:"FilterWorkPerPrecationID",fieldidpk:t}),Ne(e.IsForeign?"Filter"+e.FieldName:"FilterWorkPerPrecationID",t,"",1,Te())})(e)}},e.FieldName.includes("Date")?r().createElement(r().Fragment,null,ke(e.AdminUserGridViewIDPK)," ",X[e.FieldName]&&r().createElement("p",{className:"filterdatevalue"},"(",X[e.FieldName]?.From+" to "+X[e.FieldName]?.To,")")):"IsActive"==e.FieldName?r().createElement(r().Fragment,null,r().createElement("span",null,ke(e.AdminUserGridViewIDPK)),r().createElement(f.Z,{checked:"1"==le,onChange:t=>{re(t.target.checked),Fe("","",e.FieldName,"",t.target.checked)}})):r().createElement(r().Fragment,null,r().createElement("span",null,ke(e.AdminUserGridViewIDPK)),(a=e.FieldDisplay,z[a]?.length>0&&r().createElement("div",{className:"FilterItemDivSelected"},r().createElement("span",{className:"RoundedDivName"},z[a][0][a]),z[a].length>1&&r().createElement("span",{className:"RoundedDivName"},z[a][1][a]),z[a].length>2&&r().createElement("span",{className:"RoundedDivNumber"},"+"+(z[a].length-2))))));var a})),ge&&ge.map((e=>{let t=e.TFFSearchParams,a=JSON.parse(t);return r().createElement("div",{className:"FilterItemDivTitle",onClick:()=>{Ne("FilterWorkPerPrecationID",a),Ae("")}},r().createElement(r().Fragment,null,e.TableFilterFavName))}))))))}));var M=a(54180),K=a(43031),q=a(85639),G=a(110),V=a(5109),_=a(88995),H=a(50743),U=a(61657),Y=a(51209),j=a(53854),$=a(5434),J=a(83817),Q=a(39327),X=a(3212),ee=a(93521),te=(a(79117),a(71168)),ae=a.n(te),le=a(65107),re=a(94986),ne=a(15999);a(11557),window.clickFilter="";const ie=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(null),d=(0,l.useRef)(null),[u]=((0,l.useRef)(null),(0,n.useSelector)((e=>e.form)),(0,l.useState)(localStorage.getItem("userid"))),[p]=(0,l.useState)("1303"),[P,D]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),[h,k]=(0,l.useState)(0),[S,N]=(0,l.useState)(0),[W,b]=(0,l.useState)(0),[w,A]=(0,l.useState)(0),[T,F]=(0,l.useState)({current:1,pageSize:100}),[x,B]=(0,l.useState)(""),[L,Z]=(0,l.useState)([]),[R,O]=(0,l.useState)({val:"",column:""}),[te,ie]=(0,l.useState)([]),[oe,ce]=(0,l.useState)(!1),[se,de]=(0,l.useState)(""),[me,ue]=(0,l.useState)(""),[pe,Pe]=(0,l.useState)(!1),[ge,De]=(0,l.useState)([]),[ye,Ie]=(0,l.useState)([]),[Ee,Ce]=(0,l.useState)([]),[ve,fe]=(0,l.useState)({children:[{name:"WorkPerPrecautionDetails",children:[]}]}),[he,ke]=(0,l.useState)(!1),Se=(0,l.useContext)(e.context?e.context:Fe),{cstate:Ne,cdispatch:We}=e.ContextApi?e.ContextApi:xe();let be={WorkPerPrecationIDPK:"",WorkPerPreCode:"",IsDraft:"",Remarks:"",WorkPermitID:"",WPPrecautionID:"",IsActive:"",DeleStat:"",CreatedUserID:"",CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",WPApprovalAuthorityID:"",AppAuthorityCode:"",AppAuthorityName:"",WPPermitRequestID:"",PermitRequestCode:"",PermitRequestName:"",DivisionID:"",DivisionCode:"",DivisionName:"",ContractID:"",ContractCode:"",ContractName:"",LocalityID:"",LocalityCode:"",LocalityName:"",BuildingID:"",BuildingCode:"",BuildingName:"",FloorID:"",FloorCode:"",FloorName:"",SpotID:"",SpotCode:"",SpotName:"",EmployeeID:"",EmployeeCode:"",FirstName:"",EmpContactNo1:"",EmpEmailOfficial:"",WPPermitCode:"",WPPermitTitle:"",PrecautionCode:"",PrecautionName:"",PageIndex:"",PageSize:"",Type:"",OrderByType:"",SortOrder:"",UserGroupKey:"",UserAccessKey:""};const[we,Ae]=(0,l.useState)(be),[Te,Be]=(0,l.useState)(be),[Le,Ze]=(0,l.useState)(!1),[Re,Oe]=(0,l.useState)(!0),[ze,Me]=(0,l.useState)(!1),[Ke,qe]=(0,l.useState)(!0),[Ge,Ve]=(0,l.useState)({WorkPerPreCode:"",PerEquipmentName:"",PrecautionName:""}),[_e,He]=(0,l.useState)(!1),[Ue,Ye]=(0,l.useState)([]),[je,$e]=(0,l.useState)(0),[Je,Qe]=(0,l.useState)(0),[Xe,et]=(0,l.useState)({current:1,pageSize:10}),[tt,at]=(0,l.useState)([]),[lt,rt]=(0,l.useState)([]),[nt,it]=(0,l.useState)(!1),[ot,ct]=(0,l.useState)(!1),[st,dt]=(0,l.useState)(!1),[mt,ut]=(0,l.useState)(""),[pt,Pt]=ae()("1303"),[gt,Dt]=(0,l.useState)({}),yt=[{columns:tt,data:x}];let It=(0,I.Z)();const Et=e=>It[e]?It[e]:e,Ct=e=>Ne.language?.[e]?Ne.language[e]:e;(0,l.useEffect)((()=>{Wt(pt)}),[pt]),(0,l.useEffect)((()=>{Ne.token.length>0&&(e.parentId?St(T,be,"WorkPerPrecationID"):ie([]))}),[e.parentId]),(0,l.useEffect)((()=>{!he&&e.parentId?St(T,se,"WorkPerPrecationID"):he&&Be(se)}),[se]),(0,l.useImperativeHandle)(t,(()=>({searchItem:e=>{vt(e)},tableRefresh:()=>{St(T,be,"WorkPerPrecationID")},DialogTableProps:e=>{f(e)},HideEntryFields:e=>{dt(!0===e)}})));const vt=e=>{""==e?St(T,be,Le?"DraftWorkPerPrecationID":"WorkPerPrecationID",Le&&"DraftPage"):Nt(e,{current:1,pageSize:100}),ue(e)};function ft(t){Se.loading(!0);let a=g.v.Api+"FP1303S7/",l={data:{p1:"%%",p2:e.parentId?e.parentId:"0",p3:"0",p4:t.current,p5:t.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,c.Z)(a,l,Ne.token[0]).then((e=>{if(200==e.Output.status.code){let a=0;e.Output.data.length>0?(a=parseFloat(e.Output.data[0].TotalCount,10)/10,Qe(e.Output.data[0].TotalCount)):a=0,10==t.pageSize?$e(Math.ceil(a)):20==t.pageSize?$e(Math.ceil(a/2)):50==t.pageSize?$e(Math.ceil(a/5)):100==t.pageSize&&$e(Math.ceil(a/10)),Ye(e.Output.data),Se.loading(!1)}}))}function ht(e,t){We({type:"editData",payload:[t]}),We({type:"IsDraft",payload:Le}),We({type:"ShowDetail",payload:!0}),Se.Expanded(!0),ze&&Pe(!1)}(0,l.useEffect)((()=>{!1===e.cardview&&qe(e.cardview),e.Dialogview&&(f(e.Dialogview),dt(!0))}),[e.cardview,e.Dialogview]),(0,l.useEffect)((()=>{e.searchsafaritext&&Nt(e.searchsafaritext,{current:T.current,pageSize:T.pageSize})}),[e.searchsafaritext]);const kt=()=>{Se.EditClose(!0),oe?(document.getElementById("WorkPerPrecautionDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="0%",document.getElementById("WorkPerPrecautionDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="100%",document.getElementById("WorkPerPrecautionDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="none",ce(!1),Ke?(v||(document.getElementById("WorkPerPrecautionDetailscoldiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPerPrecautionDetailscoldiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),document.getElementById("WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"):(document.getElementById("WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px")):(document.getElementById("WorkPerPrecautionDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.width="25%",document.getElementById("WorkPerPrecautionDetailsTabDiv"+(e.Dialogview?"dialog":"")).style.width="75%",document.getElementById("WorkPerPrecautionDetailsFilterDiv"+(e.Dialogview?"dialog":"")).style.display="block",ce(!0),document.getElementById("WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":"")).style.width="fit-content",document.getElementById("WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":"")).getElementsByTagName("svg")[0].style.padding="4px"),Pe(!1),window.clickFilter=!oe},St=(t,a,l,r,n,i)=>{Se.loading(!0),"DraftPage"!==r&&Ze(Ne.IsDraft);let o=g.v.Api+"FP1303S3/",s={data:{p1:n||(a&&a.WorkPerPrecationIDPK?a.WorkPerPrecationIDPK:null),p2:a&&a.WorkPerPreCode?a.WorkPerPreCode:null,p3:"DraftWorkPerPrecationID"==l?"1":"0",p4:null,p5:e.parentId?Number(e.parentId):0,p6:a&&a.WPPrecautionID?a.WPPrecautionID:null,p7:a&&a.IsActive,p8:null,p9:a&&a.CreatedUserID_varchar?a.CreatedUserID_varchar:null,p10:a&&a.CreatedTtm?a.CreatedTtm:null,p11:a&&a.CreatedTtmType?a.CreatedTtmType:null,p12:a&&a.CreatedTtmBetween?a.CreatedTtmBetween:null,p13:null,p14:a&&a.WPApprovalAuthorityID?a.WPApprovalAuthorityID:null,p15:a&&a.AppAuthorityCode?a.AppAuthorityCode:null,p16:a&&a.AppAuthorityName?a.AppAuthorityName:null,p17:a&&a.WPPermitRequestID?a.WPPermitRequestID:null,p18:a&&a.PermitRequestCode?a.PermitRequestCode:null,p19:a&&a.PermitRequestName?a.PermitRequestName:null,p20:a&&a.DivisionID?a.DivisionID:null,p21:a&&a.DivisionCode?a.DivisionCode:null,p22:a&&a.DivisionName?a.DivisionName:null,p23:a&&a.ContractID?a.ContractID:null,p24:a&&a.ContractCode?a.ContractCode:null,p25:a&&a.ContractName?a.ContractName:null,p26:a&&a.LocalityID?a.LocalityID:null,p27:a&&a.LocalityCode?a.LocalityCode:null,p28:a&&a.LocalityName?a.LocalityName:null,p29:a&&a.BuildingID?a.BuildingID:null,p30:a&&a.BuildingCode?a.BuildingCode:null,p31:a&&a.BuildingName?a.BuildingName:null,p32:a&&a.FloorID?a.FloorID:null,p33:a&&a.FloorCode?a.FloorCode:null,p34:a&&a.FloorName?a.FloorName:null,p35:a&&a.SpotID?a.SpotID:null,p36:a&&a.SpotCode?a.SpotCode:null,p37:a&&a.SpotName?a.SpotName:null,p38:a&&a.EmployeeID?a.EmployeeID:null,p39:a&&a.EmployeeCode?a.EmployeeCode:null,p40:a&&a.FirstName?a.FirstName:null,p41:a&&a.EmpContactNo1?a.EmpContactNo1:null,p42:a&&a.EmpEmailOfficial?a.EmpEmailOfficial:null,p43:a&&a.WPPermitCode?a.WPPermitCode:null,p44:a&&a.WPPermitTitle?a.WPPermitTitle:null,p45:a&&a.PrecautionCode?a.PrecautionCode:null,p46:a&&a.PrecautionName?a.PrecautionName:null,p47:n?1:t.current,p48:t.pageSize,p49:l,p50:null,p51:null,p52:localStorage.getItem("UserGroupID"),p53:localStorage.getItem("userid")}};(0,c.Z)(o,s,Ne.token[0]).then((o=>{if(n)(0,J.a)(o,We,r,i,Se);else if("200"==o.Output.status.code)if(o.Output.data.length>0){if(o.Output.data){let e=0;o.Output.data.length>0?(e=parseFloat(o.Output.data[0].TotalCount,10)/10,b(o.Output.data[0].TotalCount),A(o.Output.data[0].DraftCnt),We({type:"count",payload:o.Output.data[0].TotalCount}),"DraftPage"==r&&A(o.Output.data[0].TotalCount)):e=0,10==t.pageSize?N(Math.ceil(e)):20==t.pageSize?N(Math.ceil(e/2)):50==t.pageSize?N(Math.ceil(e/5)):100==t.pageSize&&N(Math.ceil(e/10)),ie(o.Output.data),Se.loading(!1)}e.Dialogview||(document.getElementById("divWorkPerPrecautionDetails-Entry").style.height="auto",document.getElementById("divWorkPerPrecautionDetails-Entry").style.display="block")}else Se.loading(!1),"DraftWorkPerPrecationID"===l?(Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Pe(!0),Ze(!1)):(ie([]),F({current:1,pageSize:10}),N(0),b(0),We({type:"count",payload:"0"}),Object.values(a).some((e=>e))&&Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}));else Se.alert({open:!0,color:"warning",message:[o.Output.status.message]}),Se.loading(!1)}))};function Nt(t,a){Se.loading(!0);const l=g.v.Api+"FP1303S4/",r={data:{p1:"%"+t+"%",p2:e.parentId?e.parentId:"0",p3:Le?"1":"0",p4:a.current,p5:a.pageSize,p6:localStorage.getItem("UserGroupID"),p7:localStorage.getItem("userid")}};(0,c.Z)(l,r,Ne.token[0]).then((e=>{if("200"==e.Output.status.code)if(e.Output.data.length>0){let t=0;e.Output.data.length>0?(t=parseFloat(e.Output.data[0].TotalCount,10)/10,b(e.Output.data[0].TotalCount),We({type:"count",payload:e.Output.data[0].TotalCount})):t=0,10==a.pageSize?N(Math.ceil(t)):20==a.pageSize?N(Math.ceil(t/2)):50==a.pageSize?N(Math.ceil(t/5)):100==a.pageSize&&N(Math.ceil(t/10)),ie(e.Output.data),Se.loading(!1)}else ie([]),N(0),b(0),We({type:"count",payload:"0"}),Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}),Se.loading(!1);else Se.alert({open:!0,color:"warning",message:[e.Output.status.message]}),Se.loading(!1)}))}function Wt(e){let t=[],a=[],l=[],r=[];e.map((e=>{"1"==e.IsVisible&&(t.push({id:e.FieldDisplay,name:e.FieldDescription,type:e.FieldDataType}),"IsDraft"!==!e.FieldName&&(a.push(e.FieldDisplay),l.push(e.FieldDescription)));let n=localStorage.getItem("Language");r.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[n]]})})),We({type:"language",payload:Object.assign({},...r)}),Ve(a.reduce(((e,t)=>(e[t]="",e)),{})),De(e),Ie(t),Ce(a),at(l),rt(a)}const bt=()=>he?null:r().createElement("div",null,_e?r().createElement(re.Z,{data:Ue,expanded:e=>!v&&Se.Expanded(e),edit:(e,t,a)=>{v?Se.select(e):(We({type:"editData",payload:[e]}),We({type:"IsDraft",payload:t}),We({type:"ShowDetail",payload:a}))}}):r().createElement(le.Z,{ref:d,frmctrlid:"tblcs_1303_L1_",id:"WorkPerPrecautionDetailsTable",headerdata:ye,tablesearchparams:Ge,searchvalue:e=>{Ve(e),de(e);let t={...Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t))),...FilteredObj};Dt(t),F({current:1,pageSize:10}),St({current:1,pageSize:10},t,Le?"DraftWorkPerPrecationID":"WorkPerPrecationID",Le&&"DraftPage")},bodydata:te,ondrag:ht,bodyitem:Ee,visibleitem:ye,isdraft:Le,IsView:!1,IsSub:e.tableview,tableExp:!1,tableID:p,showMore:!1,accessrights:Ne.AccessRights,expanded:e=>!v&&Se.Expanded(e),edit:(e,t,a)=>{v?Se.select(e):(Object.keys(e).map(((l,r)=>{l.includes("IDPK")&&St(T,null,t?"DraftWorkPerPrecationID":"WorkPerPrecationID",t&&"DraftPage",e[l],a)})),Se.hideAddBtn(!0))},viewtoggle:Se.viewtoggle,isexpanded:!v||ze,tf:Ct,action:v?"none":"",ViewComp:(e,t)=>{}}));return(0,l.useEffect)((()=>{Me(Ne.ExpandTableValue)}),[Ne.ExpandTableValue]),r().createElement("div",null,!st&&!e.tableview&&r().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"0",padding:"0px 4px 0px 0px"}},r().createElement("div",{id:"fld1303L1ECSearchBar",className:"searchbar1"},r().createElement(y.Z,{frmctrlid:"fld1303L1TCInputSearch",className:"search_input",type:"text",id:"AdminCountryRegistrygridsearch",placeholder:Et("Search"),value:me,onChange:e=>{ue(e),Se.searchItem(e)},style:{width:"300px"}}),r().createElement("div",{className:"search_icon"},me?r().createElement("div",{id:"fld1303L1TCCloseIconCommonSearch",onClick:()=>{ue(""),Se.searchItem("")}},r().createElement(s.Z,{className:"InputSearchIcon"})):r().createElement("div",{id:"fld1303L1TCInputSearchIcon"},r().createElement(_.Z,{className:"InputSearchIcon",onClick:()=>{document.getElementById("WorkPerPrecautionDetailsgridsearch").focus()}})))),r().createElement("div",null,Ne.AccessRights.IsAdd?r().createElement(X.Z,{className:"SaveBtnCommon",frmctrlid:"fld1303L1TCAddBtnIsAdd",onClick:()=>{Se.hideAddBtn(!0),We({type:"editData",payload:[]}),We({type:"ShowDetail",payload:!1}),We({type:"Add",payload:!0})}}):"")),r().createElement(i.Z,{expanded:Re,onChange:()=>()=>{Oe(ze)}},e.Dialogview&&r().createElement(H.Z,null,r().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},r().createElement("div",{className:"displayFlex EntryHeader"},r().createElement("p",{className:"ListP ListPlevl1",title:"10.0.0.59-3:08:17 PM-18-7[1303]"},`${Ct("1303")} (${W})`)),!1===e.cardview?null:r().createElement("div",{className:"displayFlex EntryHeaderBtn"},r().createElement("div",{id:"fld1303L1TCSearchBar",className:"searchbar",style:{marginTop:"8px"}},r().createElement(y.Z,{frmctrlid:"fld1303L1TCInputSearch",className:"search_input",type:"text",placeholder:Et("Search"),value:me,onChange:e=>{vt(e)}}),r().createElement("div",{className:"search_icon"},me?r().createElement("div",{id:"fld1303L1TCInputCloseIcon",onClick:()=>{vt("")}},r().createElement(s.Z,{className:"InputSearchIcon"})):r().createElement("div",{id:"fld1303L1TCInputSearchIcon"},r().createElement(_.Z,{className:"InputSearchIcon"}))))))),r().createElement(o.Z,{className:"AccDetails"},r().createElement("div",{className:"tableCardL1",style:{height:e.tableview?"auto":"fit-content"}},!e.tableview&&r().createElement("div",{id:"WorkPerPrecautionDetails-HeaderItems",className:"displayFlex padding"},!1===e.cardview?null:r().createElement("div",{className:"tableHeaderItems displayFlex"},!Le&&r().createElement("div",{frmctrlid:"fld1303L1TCFilterDataIsDraft",id:"WorkPerPrecautionDetailsfildiv"+(e.Dialogview?"dialog":""),className:"buttoncard",onClick:()=>{kt()}},r().createElement(m.ZP,{title:Et("Filter Data"),placement:"top"},r().createElement("span",null,r().createElement(E.Ol$,{className:"tableFilterColumnIcon"}))),r().createElement("span",{className:"displayNone"},Et("Filter Data"))),!v&&!Le&&!he&&r().createElement(M.Z,{formctrlidprint:"fld1303L1TCExportPrint",formctrlidexport:"fld1303L1TCExportTable",formctrlidrefresh:"fld1303L1TCExportRefresh",title:Ct("1303"),data:L,exportData:yt,Items:lt,columnIndex:tt,TableVisibleItem:ye,userGridViewFormID:p,TableTotalCount:W,triggerApi:t=>{((t,l,r,n,i)=>{if(0===W)return Se.alert({open:!0,color:"warning",message:["There is no Record Found"]}),!1;Se.loading(!0);let o=g.v.Api+"FP1303S3/",s={data:{p1:t&&t.WorkPerPrecationIDPK?t.WorkPerPrecationIDPK:null,p2:t&&t.WorkPerPreCode?t.WorkPerPreCode:null,p3:Le?"1":"0",p4:null,p5:e.parentId?Number(e.parentId):0,p6:t&&t.WPPrecautionID?t.WPPrecautionID:null,p7:t&&t.IsActive,p8:null,p9:t&&t.CreatedUserID_varchar?t.CreatedUserID_varchar:null,p10:t&&t.CreatedTtm?t.CreatedTtm:null,p11:t&&t.CreatedTtmType?t.CreatedTtmType:null,p12:t&&t.CreatedTtmBetween?t.CreatedTtmBetween:null,p13:null,p14:t&&t.WPApprovalAuthorityID?t.WPApprovalAuthorityID:null,p15:t&&t.AppAuthorityCode?t.AppAuthorityCode:null,p16:t&&t.AppAuthorityName?t.AppAuthorityName:null,p17:t&&t.WPPermitRequestID?t.WPPermitRequestID:null,p18:t&&t.PermitRequestCode?t.PermitRequestCode:null,p19:t&&t.PermitRequestName?t.PermitRequestName:null,p20:t&&t.DivisionID?t.DivisionID:null,p21:t&&t.DivisionCode?t.DivisionCode:null,p22:t&&t.DivisionName?t.DivisionName:null,p23:t&&t.ContractID?t.ContractID:null,p24:t&&t.ContractCode?t.ContractCode:null,p25:t&&t.ContractName?t.ContractName:null,p26:t&&t.LocalityID?t.LocalityID:null,p27:t&&t.LocalityCode?t.LocalityCode:null,p28:t&&t.LocalityName?t.LocalityName:null,p29:t&&t.BuildingID?t.BuildingID:null,p30:t&&t.BuildingCode?t.BuildingCode:null,p31:t&&t.BuildingName?t.BuildingName:null,p32:t&&t.FloorID?t.FloorID:null,p33:t&&t.FloorCode?t.FloorCode:null,p34:t&&t.FloorName?t.FloorName:null,p35:t&&t.SpotID?t.SpotID:null,p36:t&&t.SpotCode?t.SpotCode:null,p37:t&&t.SpotName?t.SpotName:null,p38:t&&t.EmployeeID?t.EmployeeID:null,p39:t&&t.EmployeeCode?t.EmployeeCode:null,p40:t&&t.FirstName?t.FirstName:null,p41:t&&t.EmpContactNo1?t.EmpContactNo1:null,p42:t&&t.EmpEmailOfficial?t.EmpEmailOfficial:null,p43:t&&t.WPPermitCode?t.WPPermitCode:null,p44:t&&t.WPPermitTitle?t.WPPermitTitle:null,p45:t&&t.PrecautionCode?t.PrecautionCode:null,p46:t&&t.PrecautionName?t.PrecautionName:null,p47:T.current,p48:W,p49:Le?"DraftWorkPerPrecationID":"WorkPerPrecationID",p50:null,p51:null,p52:localStorage.getItem("UserGroupID"),p53:localStorage.getItem("userid")}};Se.loading(!1),Se.alert({open:!0,color:"success",message:[`${Ct(1303)} - ${i.alertName}, Once you have downloaded the file, you will be notified.`]}),(0,c.Z)(o,s,Ne.token[0],i).then((e=>{(0,ee.PDF_Excel_Generate)(e,Se,lt,B,a,i)}))})(se,R.column,0,0,t)},Refresh:()=>{ue(""),F({current:1,pageSize:100}),d.current.clearItem(),Ne.IsDraft?St({current:1,pageSize:100},be,"DraftWorkPerPrecationID"):St({current:1,pageSize:100},be,"WorkPerPrecationID")},disabledPrint:!Ne.AccessRights.IsPrint,disabledExport:!Ne.AccessRights.IsExport,ref:a,iconinfo:"displayNone"}),!Le&&!he&&!v&&r().createElement("div",{className:"buttoncard",onClick:()=>ct(!ot)},r().createElement("span",null,ot?r().createElement(m.ZP,{disableFocusListener:!0,title:Et("Less"),placement:"top"},r().createElement("span",{id:"fld1303L1TCLess"},r().createElement(j.ldB,{className:"tableFilterColumnIcon"}))):r().createElement(m.ZP,{disableFocusListener:!0,title:Et("More"),placement:"top"},r().createElement("span",{id:"fld1303L1TCMore"},r().createElement(j.ilJ,{className:"tableFilterColumnIcon"}))))),ot?r().createElement("div",{className:"EntryHeaderMore"},r().createElement("div",{style:{display:"flex"}},he||!ze?null:v||!Ne.AccessRights.IsAdd||Le?"":r().createElement("div",null,r().createElement("div",{frmctrlid:"fld1303L1TCFilterDataIsAdd",id:"WorkPerPrecautionDetailscoldiv",className:"buttoncard",onClick:()=>{Se.EditClose(!0),pe?(document.getElementById("WorkPerPrecautionDetailsFilterDiv").style.width="0%",document.getElementById("WorkPerPrecautionDetailsTabDiv").style.width="100%",document.getElementById("WorkPerPrecautionDetailsFilterDiv").style.display="none",document.getElementById("WorkPerPrecautionDetailscoldiv").style.width="fit-content",document.getElementById("WorkPerPrecautionDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",Pe(!1)):(document.getElementById("WorkPerPrecautionDetailsFilterDiv").style.width="25%",document.getElementById("WorkPerPrecautionDetailsTabDiv").style.width="75%",document.getElementById("WorkPerPrecautionDetailsFilterDiv").style.display="block",document.getElementById("WorkPerPrecautionDetailsfildiv").style.width="fit-content",document.getElementById("WorkPerPrecautionDetailsfildiv").getElementsByTagName("svg")[0].style.padding="4px",document.getElementById("WorkPerPrecautionDetailscoldiv").style.width="fit-content",document.getElementById("WorkPerPrecautionDetailscoldiv").getElementsByTagName("svg")[0].style.padding="4px",Pe(!0)),ce(!1)}},r().createElement(m.ZP,{title:Et("Manage Columns"),placement:"top"},r().createElement("div",null,r().createElement(Q.gYA,{className:"tableFilterColumnIcon"}))),r().createElement("span",{className:"displayNone"},Et("Manage Columns")))),(1==localStorage.getItem("UserType")||2==localStorage.getItem("UserType"))&&!v&&ze&&!he&&!Le&&r().createElement("div",null,r().createElement("div",{id:"WorkPerPrecautionDetailscoldiv",className:"buttoncard",onClick:()=>{_e?He(!1):(He(!0),ft({current:1,pageSize:100}))}},r().createElement(m.ZP,{title:Et("TableScrollData"),placement:"top"},r().createElement("div",{id:"fld1303L1TCTableScrollData"},r().createElement(ne.Z,{className:"tableFilterColumnIcon"}))),r().createElement("span",{className:"displayNone"},Et("Table Scroll Data")))))):""),!Le&&!v&&r().createElement("div",{className:"tableHeaderItems displayFlex",style:{width:"20%",display:"flex",justifyContent:"right",paddingRight:"2px"}},he||Le?null:r().createElement("div",null,r().createElement("div",{style:{display:"flex",alignItem:"center",marginLeft:"8px"}},r().createElement("div",{className:"b2",id:"button-11"},r().createElement("div",{className:Ke?"buttonList":"buttonGrid",id:"fld1303L1TCListView",onClick:()=>{qe(!0),it(!1)},style:{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},r().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},r().createElement(j.umT,null)),r().createElement("span",null,Et("List"))),r().createElement("div",{className:Ke||nt?"buttonGrid":"buttonList",id:"fld1303L1TCCardView",onClick:()=>{qe(!1),it(!1)}},r().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},r().createElement(C.aCJ,null)),r().createElement("span",null,Et("Card"))),r().createElement("div",{className:nt?"buttonList":"buttonGrid",id:"fld1303L1TCTileView",onClick:()=>{it(!0),qe(!1)},style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},r().createElement("span",{style:{fontSize:"14px",color:"#14181F"}},r().createElement($.f_H,null)),r().createElement("span",null,Et("Tile"))))))),he?null:_e?e.IsCollapse?r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(U.Z,{style:{color:"#777"},id:"fld1303L1TCTableTopPagination",rowsPerPageOptions:[],component:"div",count:Number(Je),page:h,onPageChange:(e,t)=>{k(t),ft({current:t+1,pageSize:Xe.pageSize}),et({current:t+1,pageSize:Xe.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(K.Z,{count:je,color:"primary",page:Xe.current,onChange:(e,t)=>{et({current:t,pageSize:Xe.pageSize}),$e(t),ft({current:t,pageSize:Xe.pageSize})}}),r().createElement("div",null,r().createElement(G.Z,{className:"BootstrapInputStyle",value:Xe.pageSize,frmctrlid:"fld1303L1TCSelectPagination",onChange:e=>{et({current:1,pageSize:e.target.value}),ft({current:1,pageSize:e.target.value})}},r().createElement(q.Z,{value:10},"10"),r().createElement(q.Z,{value:20},"20"),r().createElement(q.Z,{value:50},"50"),r().createElement(q.Z,{value:100},"100"))),ze&&r().createElement("p",{className:"per-page"},"/ ",Et("RowperpageOf")," (",Je,")")):e.IsCollapse?r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(U.Z,{style:{color:"#777"},id:"fld1303L1TCTablePagination",rowsPerPageOptions:[],component:"div",count:Number(W),page:h,onPageChange:(e,t)=>{k(t),St({current:t+1,pageSize:T.pageSize},be,Le?"DraftWorkPerPrecationID":"WorkPerPrecationID",Le&&"DraftPage"),F({current:t+1,pageSize:T.pageSize})},rowsPerPage:10,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"}})):r().createElement("div",{className:"tableTopPagination displayFlex floatOrder"},r().createElement(K.Z,{count:S,siblingCount:0,color:"primary",page:T.current,onChange:(e,t)=>{if(F({current:t,pageSize:T.pageSize}),Le)St({current:t,pageSize:T.pageSize},we,"DraftWorkPerPrecationID","DraftPage");else{var a=document.querySelectorAll(".CardViewMain");for(let e=0;e<a.length;e++)a[e].style.background="#FFF";me.length>0?Nt(me,{current:t,pageSize:T.pageSize}):St({current:t,pageSize:T.pageSize},we,"WorkPerPrecationID")}}}),r().createElement("div",null,r().createElement(G.Z,{className:"BootstrapInputStyle",value:T.pageSize,id:"fld1303L1TCSelectPaging",onChange:e=>{F({current:1,pageSize:e.target.value}),Le?St({current:1,pageSize:e.target.value},we,"DraftWorkPerPrecationID","DraftPage"):me.length>0?Nt(me,{current:1,pageSize:e.target.value}):St({current:1,pageSize:e.target.value},we,"WorkPerPrecationID")}},r().createElement(q.Z,{value:10},"10"),r().createElement(q.Z,{value:20},"20"),r().createElement(q.Z,{value:50},"50"),r().createElement(q.Z,{value:100},"100"))),ze&&r().createElement("p",{className:"per-page"},"/ ",Et("RowperpageOf")," (",W,") "))),r().createElement("div",{id:"WorkPerPrecautionDetails-TableBody",className:"displayFlex padding0",style:{height:e.tableview?"auto":"66vh",overflow:"auto"}},r().createElement("div",{id:"WorkPerPrecautionDetailsFilterDiv"+(e.Dialogview?"dialog":""),style:{width:"0%",display:"none",border:"1px solid #e3e4e9",marginRight:"1%"}},oe&&r().createElement(z,{parentId:e.parentId,searchData:e=>{de(e||gt),Object.fromEntries(Object.entries(e).filter((([e,t])=>""!==t)))},formID:p,data:()=>{},visibleData:()=>{},token:Ne.token[0],CloseBtnClk:()=>kt(),userGrid:pt,msg:(e,t)=>Se.alert({open:!0,color:t,message:[e]}),clearTableFilter:()=>{tableRefresh()}}),pe&&r().createElement(V.Z,{Refresh:e=>{St({current:1,pageSize:100},be,"WorkPerPrecationID")},frmctrlid:"fld1303L1TCTableColumnOrder",loading:e=>Se.loading(e),className:"dragCheckboxDivL1",AltMsg:(e,t)=>Se.alert({open:!0,color:t,message:[e]}),select:pe,userID:u,userGridViewFormID:p,saved:(e,t)=>{e&&Wt(t),Pt(t),We({type:"showTableview",payload:t})},Token:Ne.token[0]})),r().createElement("div",{id:"WorkPerPrecautionDetailsTabDiv"+(e.Dialogview?"dialog":""),style:{width:"100%",position:"relative",height:e.tableview?"auto":"66vh"}},Ke?r().createElement(bt,null):r().createElement(Y.Z,{frmctrlid:"fld1303L1TCExpandedCardDual",data:te,id:"WorkPerPrecautionDetails",title:"WorkPerPreCode",cardTile:!!nt,visibleitem:ye,gridCountmdlg:4,gridCountxssm:6,onDoubleClick:(e,t)=>{v?Se.select(e):("edit"==t?(We({type:"editData",payload:[e]}),We({type:"IsDraft",payload:Le}),We({type:"ShowDetail",payload:!1}),Se.Expanded(!0)):(We({type:"editData",payload:[e]}),We({type:"IsDraft",payload:Le}),We({type:"ShowDetail",payload:!0}),Se.Expanded(!0),Se.viewtoggle()),oe?ce(!0):pe?Pe(!0):(Pe(!1),Pe(!1))),Se.hideAddBtn(!0)}})))))))}));var oe=a(37148),ce=a(29800),se=(a(10966),a(21392),a(26537)),de=(a(44528),a(99090),a(1695)),me=a(61924),ue=a.n(me),pe=(a(40826),a(55490)),Pe=a(92371);const ge={EnterKeyValues:{WorkPerPrecautionDetails:["WorkPerPreCode","PerEquipmentName","PrecautionName"]},Label:{WorkPerPrecautionDetails:{WorkPerPreCode:["WorkPerPreCode"],WorkPermitID:["WorkPerPreCode"],WPPrecautionID:["PrecautionCode","PrecautionName"]}},LabelHeader:{WorkPerPrecautionDetails:{WorkPerPreCode:["WorkPerPreCode"],WorkPermitID:["WorkPerPreCode"],WPPrecautionID:["Code","Name"]}},Property:{WorkPerPrecautionDetails:{WorkPerPreCode:{id:"fld1303_34862",labelID:"WorkPerPreCode",maxLength:"50",labelname:"",frmctrlid:"fld1303_34862",frmctrlidname:"WorkPerPreCode",type:"text",mandatory:!1,masked:!1,masktype:"",disabled:!1,autogen:!1},WorkPermitID:{id:"fld1303_34865",clearID:"WorkPerPrecautionDetailsPerEquipmentNameClear",type:"select",labelID:"WorkPermitIDPK",labelname:"",fielddisplayname:"PerEquipmentName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1},WPPrecautionID:{id:"fld1303_34866",clearID:"WorkPerPrecautionDetailsPrecautionNameClear",type:"select",labelID:"WPPrecautionIDPK",labelname:"Precaution",fielddisplayname:"PrecautionName",foreignName:[],createEasy:!1,advanceSearch:!1,disabled:!1,mandatory:!1}}},SubForms:{},POPLabel:{WorkPerPrecautionDetails:{WorkPermitID:["MethodStateAttachRemark","OtherAttachRemark","PerDesWorkToBeDone","PerDesignation","PerEquipElec","PerEquipEffected","PerEquipMech","PerDescription","PerEquipmentName","PerOthersClosed","PerPerformer","PerPhone","PerPrecautions","PerRequester","PerWorkTrailRunRef","PerWorkExcavationRef","PerWorkConfinedRef","PerToolEqpPPEused","PermitStartDateTime","PermitEndDateTime","WPVerifiyer","WPCloser","WPAuth","BuildingID","ContractID","DivisionID","EmployeeID","FloorID","LocalityID","SpotID","WPApprovalAuthorityID","WPPermitRequestID"],WPPrecautionID:["PrecautionCode","PrecautionName"]}}};var De=a(6562),ye=a(45155),Ie=(a(49174),a(38773),a(19089),a(16233)),Ee=a.n(Ie),Ce=a(82729),ve=a(75355),fe=a(11107);const he={WorkPerPrecationIDPK:"",WorkPerPreCode:"",IsDraft:!1,Remarks:"",WorkPermitID:null,WPPrecautionID:null,IsActive:!0,DeleStat:!1,CreatedUserID:null,CreatedTtm:"",CreatedTtmType:"",CreatedTtmBetween:"",UpdatedTtm:"",WPApprovalAuthorityID:null,AppAuthorityCode:"",AppAuthorityName:"",WPPermitRequestID:null,PermitRequestCode:"",PermitRequestName:"",DivisionID:null,DivisionCode:"",DivisionName:"",ContractID:null,ContractCode:"",ContractName:"",LocalityID:null,LocalityCode:"",LocalityName:"",BuildingID:null,BuildingCode:"",BuildingName:"",FloorID:null,FloorCode:"",FloorName:"",SpotID:null,SpotCode:"",SpotName:"",EmployeeID:null,EmployeeCode:"",FirstName:"",EmpContactNo1:"",EmpEmailOfficial:"",WPPermitCode:"",WPPermitTitle:"",PrecautionCode:"",PrecautionName:"",Type:"WorkPerPrecationID",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")},ke=(0,l.forwardRef)(((e,t)=>{const a=(0,n.useSelector)((e=>e.form)),[s,d]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!0),[D,y]=(0,l.useState)(!1),[E,C]=(0,l.useState)(!1),[v,h]=(0,l.useState)(""),[N,W]=(0,l.useState)(!1),[b,w]=(0,l.useState)([]),[A,T]=(0,l.useState)(null),[F,x]=(0,l.useReducer)(Pe.Z,he),[B,L]=(0,l.useState)(!1),[R,O]=(0,l.useState)([]),[z,M]=(0,l.useState)(!1),K=(0,l.useContext)(e.context?e.context:Fe),{cstate:q,cdispatch:G}=e.ContextApi?e.ContextApi:xe(),[V,_]=(0,l.useState)(0),[U,Y]=(0,l.useState)(""),j=(0,l.useRef)(null),[$,J]=Ee()("1303"),[Q,X]=(0,l.useState)(!0),[ee,te]=(0,l.useState)(!1);let ae=(0,I.Z)();const[le,re]=(0,l.useState)({}),ne=e=>ae[e]?ae[e]:e,ie=t=>q.language?.[t]?q.language[t]:e.createEasy?le?.[t]:t;(0,l.useEffect)((()=>{q.PrimaryId&&_(Number(q.PrimaryId))}),[q.PrimaryId]),(0,l.useEffect)((()=>{me()}),[]),(0,l.useEffect)((()=>{me()}),[e.parentId]),(0,l.useEffect)((()=>{q.editData.length>0?(ce(q.editData[0],""),y(!0)):q.Add&&(me(),y(!0))}),[q.editData]),(0,l.useEffect)((()=>{!function(e){let t=[];e&&e.map((e=>{let a=localStorage.getItem("Language");t.push({[e.FieldName]:e[{English:"FieldDescription",Arabic:"ArabicLang",Other:"OtherLang"}[a]]})})),re(Object.assign({},...t))}($)}),[$]),(0,l.useImperativeHandle)(t,(()=>({clear:()=>{me()},CreateEasyProps:(e=!0,t)=>{J(!0),t?(Te(t),y(e)):(me(),y(e))},AddOpen:e=>{me(),y(!0)}})));const ce=(t,a)=>{Object.keys(t).forEach((function(e){0==t[e]&&(t[e]=null)})),C(t.IsDraft),"SetDefaultWorkPerPrecationID"==a?Y(t.WorkPerPrecationIDPK):(_(e.primid?Number(e.primid):t.WorkPerPrecationIDPK?t.WorkPerPrecationIDPK:0),G({type:"PrimaryId",payload:t.WorkPerPrecationIDPK})),x({type:"text",name:"WorkPerPreCode",value:t.WorkPerPreCode?t.WorkPerPreCode:""}),x({type:"number",name:"WorkPermitID",number:t.WorkPermitID?Number(t.WorkPermitID):0}),x({type:"text",name:"PerEquipmentName",value:t.PerEquipmentName}),x({type:"number",name:"WPPrecautionID",number:t.WPPrecautionID?Number(t.WPPrecautionID):0}),x({type:"text",name:"PrecautionName",value:t.PrecautionName}),t.IsDraft?u(!0):u(!("1"!=t.IsActive&&!t.IsActive))},me=()=>{w([]),_(0),Y(""),e.createEasy||K.resetImg(),G({type:"PrimaryId",payload:""}),x({type:"text",name:"WorkPerPreCode",value:""}),x({type:"text",name:"WorkPermitID",value:null}),x({type:"text",name:"PerEquipmentName",value:""}),document.getElementById("WorkPerPrecautionDetailsPerEquipmentNameClear")&&document.getElementById("WorkPerPrecautionDetailsPerEquipmentNameClear").click(),x({type:"text",name:"WPPrecautionID",value:null}),x({type:"text",name:"PrecautionName",value:""}),document.getElementById("WorkPerPrecautionDetailsPrecautionNameClear")&&document.getElementById("WorkPerPrecautionDetailsPrecautionNameClear").click(),u(!0),h(""),X(!0)},Ie=t=>{K.loading(!0),K.ConfirmAlert(null);const a=g.v.Api+"FP1303S2/",l={data:[{p1:"SetDefaultWorkPerPrecationID"==t?"NORECORDS"!=U&&U?U:0:V,p2:Be(F.WorkPerPreCode),p3:!1,p4:"SetDefaultWorkPerPrecationID"==t?"SetDefault":null,p5:e.parentId?Number(e.parentId):F.WorkPermitID?F.WorkPermitID:0,p6:F.WPPrecautionID?F.WPPrecautionID:0,p7:m,p8:"SetDefaultWorkPerPrecationID"==t,p9:localStorage.getItem("userid"),p10:k()().format("YYYY-MM-DD hh:mm:ss"),p11:localStorage.getItem("userid"),p12:k()().format("YYYY-MM-DD hh:mm:ss")}]};(0,se.Z)(0).then((t=>{(0,c.Z)(a,l,t).then((t=>{const a=t.Output[0].status;let l=t.Output[0].Data,r=new Array,n=new Array;"200"===a.code?(l.map((e=>{e&&(r.push(e.IsAlert),n.push(e.AlertMessage),e.AlertMessage)})),r.some((e=>"1"==e))?(K.alert({open:!0,color:"warning",message:n}),K.loading(!1)):(t=>{X(!0),K.loading(!0),K.ConfirmAlert(null),G({type:"IsDraft",payload:!1});const a=g.v.Api+"FP1303S1/",l={data:[{p1:V,p2:Be(F.WorkPerPreCode),p3:!1,p4:null,p5:e.parentId?Number(e.parentId):F.WorkPermitID?F.WorkPermitID:0,p6:F.WPPrecautionID?F.WPPrecautionID:0,p7:m,p8:!1,p9:localStorage.getItem("userid"),p10:k()().format("YYYY-MM-DD hh:mm:ss"),p11:localStorage.getItem("userid"),p12:k()().format("YYYY-MM-DD hh:mm:ss")}]};(0,se.Z)(0).then((t=>{(0,S.Z)(a,l,t).then((t=>{const a=t[0].status;200==a.code?(K.alert({open:!0,color:"success",message:[a.message]}),document.getElementById("overlayimgAttWorkPerPrecautionDetails"),K.loading(!1),G({type:"PrimaryId",payload:t[0].Data.IDPK}),e.createEasy||(K.RefreshTable(),K.attachmentSave(t[0].Data.IDPK)),me(),q.AccessRights.IsApproval&&K.Approval(!0),document.getElementById("overlayimgAttWorkPerPrecautionDetails")&&(document.getElementById("overlayimgAttWorkPerPrecautionDetails").style.width="0%",document.getElementById("overlayimgAttWorkPerPrecautionDetails").style.display="none",document.getElementById("divWorkPerPrecautionDetails-Entry").style.width="100%"),e.createEasy||(document.getElementById("WorkPerPrecautionDetails-MainTable").style.display="block")):(K.alert({open:!0,color:"warning",message:[a.message]}),K.loading(!1)),y(!0)}))}))})()):(K.alert({open:!0,color:"warning",message:[t.Output[0].status.message]}),K.loading(!1))}))}))};function ke(e){return CreateEasy(e,q,G,K,j),!1}function Se(e,a){return AdvanceSearch(e,a,Fe,xe(),be,t),!1}const Ne=(t,a,l,r,n,i)=>{const o=g.v.Api+"FP1303S3/",s={data:{p1:null,p2:null,p3:null,p4:null,p5:e.parentId?Number(e.parentId):0,p6:"0"==F.WPPrecautionID?null:F.WPPrecautionID,p7:e.Dialogview?"1":null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:"0"==F.WPApprovalAuthorityID?null:F.WPApprovalAuthorityID,p15:a?"%"+a+"%":null,p16:a?"%"+a+"%":null,p17:"0"==F.WPPermitRequestID?null:F.WPPermitRequestID,p18:a?"%"+a+"%":null,p19:a?"%"+a+"%":null,p20:"0"==F.DivisionID?null:F.DivisionID,p21:a?"%"+a+"%":null,p22:a?"%"+a+"%":null,p23:"0"==F.ContractID?null:F.ContractID,p24:a?"%"+a+"%":null,p25:a?"%"+a+"%":null,p26:"0"==F.LocalityID?null:F.LocalityID,p27:a?"%"+a+"%":null,p28:a?"%"+a+"%":null,p29:"0"==F.BuildingID?null:F.BuildingID,p30:a?"%"+a+"%":null,p31:a?"%"+a+"%":null,p32:"0"==F.FloorID?null:F.FloorID,p33:a?"%"+a+"%":null,p34:a?"%"+a+"%":null,p35:"0"==F.SpotID?null:F.SpotID,p36:a?"%"+a+"%":null,p37:a?"%"+a+"%":null,p38:"0"==F.EmployeeID?null:F.EmployeeID,p39:a?"%"+a+"%":null,p40:a?"%"+a+"%":null,p41:a?"%"+a+"%":null,p42:a?"%"+a+"%":null,p43:a?"%"+a+"%":null,p44:a?"%"+a+"%":null,p45:a?"%"+a+"%":null,p46:a?"%"+a+"%":null,p47:t,p48:10,p49:l,p50:null,p51:null,p52:localStorage.getItem("UserGroupID"),p53:localStorage.getItem("userid")}},d=Object.keys(s.data).slice(0,Object.keys(s.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(s.data).length-8?s.data[t]:null,e)),{});L(!0);const m={data:d};return(0,c.Z)(o,"ClearAll"==l?m:s,"SetDefaultWorkPerPrecationID"==l&&r?r:q.token[0]).then((e=>{const a=e.Output.status.code,r=e.Output.data;if("200"==a){const e=r.length;if(n)return 1==r.length?r[0]:{};O(1==t?e>0?r:[]:R.concat(r)),"SetDefaultWorkPerPrecationID"==l&&(e>0?ce(r[0],"SetDefaultWorkPerPrecationID"):Y("NORECORDS")),L(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),L(!1)}))},We=(t,l,r)=>{const n=g.v.Api+"FP1303S3/",i={data:{p1:null,p2:"WorkPerPreCode"==r&&l?"%"+l+"%":null,p3:null,p4:null,p5:a.WorkPermitRegistryWorkPermitID?a.WorkPermitRegistryWorkPermitID:"0",p6:null,p7:e.Dialogview?"1":null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:t,p48:10,p49:"WorkPerPrecationID",p50:null,p51:null,p52:localStorage.getItem("UserGroupID"),p53:localStorage.getItem("userid")}},o={data:Object.keys(i.data).slice(0,Object.keys(i.data).length).reduce(((e,t,a)=>(e[t]=a>Object.keys(i.data).length-8?i.data[t]:null,e)),{})};L(!0),(0,c.Z)(n,"ClearAll"==r?o:i,q.token[0]).then((e=>{const a=e.Output.status.code,l=e.Output.data;if("200"==a){const e=l.length;1==t?("WorkPerPreCode"==r&&X(e>0),O(l)):("WorkPerPreCode"==r&&X(!0),O(R.concat(l))),L(!1)}else K.alert({open:!0,color:"warning",message:[e.Output.status.message]}),L(!1)}))},be=(0,l.useCallback)((async(e,t,a)=>{"text"==a?x({type:a,name:t,value:e}):"number"==a?x({type:a,name:t,number:Number(e)}):"boolean"==a?x({type:a,name:t,boolean:e}):"date"==a?x({type:"text",name:t,value:e}):"select"==a&&("WorkPermitID"==t||"WPPrecautionID"==t&&(x({type:"text",name:"WPPrecautionID",value:e.WPPrecautionIDPK?e.WPPrecautionIDPK:null}),x({type:"text",name:"PrecautionName",value:e.PrecautionName?e.PrecautionName:null})))}),[F]);function we(e){if("WorkPermitID"==e){if(!F.WorkPermitID)return!1}else if("WPPrecautionID"==e){if(!F.WPPrecautionID)return!1;x({type:"text",name:"WPPrecautionID",value:null}),x({type:"text",name:"PrecautionName",value:""}),document.getElementById("WorkPerPrecautionDetailsPrecautionNameClear")&&document.getElementById("WorkPerPrecautionDetailsPrecautionNameClear").click()}}function Ae(e){if("WorkPermitID"==e){if(!F.WorkPermitID)return!1}else if("WPPrecautionID"==e){if(!F.WPPrecautionID)return!1;x({type:"text",name:"WPPrecautionID",value:null})}}function Te(e){K.ConfirmAlert(null),C(e.IsDraft),_(Number(e.WorkPerPrecationIDPK)?Number(e.WorkPerPrecationIDPK):0),x({type:"text",name:"WorkPerPreCode",value:e.WorkPerPreCode?e.WorkPerPreCode:""}),x({type:"number",name:"WorkPermitID",number:e.WorkPermitID?Number(e.WorkPermitID):0}),x({type:"text",name:"PerEquipmentName",value:e.PerEquipmentName?e.PerEquipmentName:""}),x({type:"number",name:"WPPrecautionID",number:e.WPPrecautionID?Number(e.WPPrecautionID):0}),x({type:"text",name:"PrecautionName",value:e.PrecautionName?e.PrecautionName:""})}const Be=e=>"string"==typeof e?e.trim():e;return r().createElement("div",null,r().createElement(i.Z,{expanded:D,onChange:e=>{}},r().createElement(H.Z,null,r().createElement("div",{className:"displayFlex backgroundLightLev1 borderRadiusTop width100"},D&&r().createElement("div",{style:{width:"100%",height:"35px",display:"flex",justifyContent:"space-between",marginTop:"6px",padding:"0px 4px 0px 0px"}},r().createElement("div",{className:"HeadTxt",title:"10.0.0.59-3:08:17 PM-18-7[1303]"}," ",ne("Add "),ie("1303")),r().createElement("div",{className:"displayFlex EntryHeaderBtn"},r().createElement("div",{className:"GridAlign"},r().createElement("div",{className:"Entry-Checkbox",style:{minWidth:"70px"}},r().createElement(De.Z,{row:!0},r().createElement(Z.Z,{labelPlacement:"bottom",id:"fld1303L1ECEntryCheckbox",control:r().createElement(f.Z,{checked:"1"==m,onChange:e=>u(e.target.checked)}),label:ne(1==m?"Active":"In Active")})))),!e.createEasy&&r().createElement("div",{className:"GridAlign",onClick:()=>{K.AttachExpand(!0)},id:"fld1303L1ECIconButton"},r().createElement("div",{className:"Entry-Checkbox"},r().createElement("div",{disableRipple:!0,disabled:!1},r().createElement(ye.Ypb,{className:"Iconstyles"}))),r().createElement("div",{className:"GridLabel"},r().createElement("p",null,ne("Attach")))),!V&&r().createElement("div",{className:"GridAlign",disabled:!1,onClick:()=>{me()},id:"fld1303L1ECClearBtn"},r().createElement("div",{className:"Entry-Checkbox"},r().createElement(ye.pYJ,{className:"Iconstyles"})),r().createElement("div",{className:"GridLabel"},r().createElement("p",null,ne("Reset")))),q.AccessRights.IsAdd||q.AccessRights.IsEdit?r().createElement(de.Z,{frmctrlid:"fld1303L1ECSaveBtnIsAdd",name:ne(V?"Update":"Save"),disabled:!1,onClick:()=>{(t=>{if(!e.parentId||0==e.parentId)return K.alert({open:!0,color:"warning",message:[ne("Please select the ")+" "+ie("WorkPermitID")]}),!1;K.ConfirmAlert(r().createElement(ue(),{warning:!0,Size:"sm",style:{display:"block",marginTop:"100px"},title:ne("Are you sure?"),onConfirm:()=>Ie(),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:ne("Yes"),cancelBtnText:ne("Cancel"),showCancel:!0},ne(V?"Do you want to Update?":"Do you want to Save?")))})()}}):null,!e.createEasy&&r().createElement(oe.Z,{frmctrlid:"fld1303L1ECCloseBtn",className:"L1AddBtnCommon",disabled:!1,onClick:()=>{me(),y(!1),K.EditClose(!0),K.hideAddBtn(!1),G({type:"Add",payload:!1})}}))))),r().createElement(o.Z,null,r().createElement("div",{id:"WorkPerPrecautionDetails-Main",className:"width100 displayFlex componentMainDiv cardDiv"},r().createElement("div",{id:"WorkPerPrecautionDetails-Detail",className:"detailCard detailDiv"},r().createElement("div",{id:"WorkPerPrecautionDetails-MainBody",className:"padding paddingLeft "},r().createElement("div",null,r().createElement(Ce.Z,null,r().createElement(fe.Z,{color:"info",icon:!0,className:"cardheadvh",style:{display:"none"}},r().createElement(p.Z,null,r().createElement(P.Z,{xs:3,md:3,lg:3,sm:3},r().createElement("div",{className:"GrpViewHeadingTitle"},r().createElement("p",null))))),r().createElement(ve.Z,{style:{padding:"5px 20px 15px"}},r().createElement(p.Z,{spacing:2},r().createElement(P.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},r().createElement(pe.Z,{"data-testid":F.WorkPerPreCode,json:ge,SPName:"WorkPerPrecautionDetails",FieldName:"WorkPerPreCode",tfLabel:ie("WorkPerPreCode"),EnterSave:t=>{t&&e.submitConfirmation(t)},onSelect:t=>!e.createEasy&&(e=>{K.ConfirmAlert(r().createElement(ue(),{Size:"sm",style:{display:"block",marginTop:"100px"},tilte:"",onConfirm:()=>Te(e),onCancel:()=>K.ConfirmAlert(null),confirmBtnCssClass:"swalokbtn",cancelBtnCssClass:"swalcancelbtn",confirmBtnText:ne("Yes"),cancelBtnText:ne("No"),showCancel:!0},ne("Do you want to update this record?")))})(t),onClick:()=>{Q&&We(1,"","ClearAll"),X(!0)},frmctrlid:"fld1303_34862",frmctrlidName:"WorkPerPreCode",fieldorder:"0",data:R,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:R.length>0?R[0].TotalCount:0,onChange:(e,t)=>{Q&&We(e,t,"WorkPerPreCode"),be(t,"WorkPerPreCode","text")},onKeyDown:e=>{"8"!=e.keyCode&&"46"!=e.keyCode||X(!0)},showList:Q,SideEntryView:!1,KeyBack:e=>{},value:F.WorkPerPreCode,loading:B,clear:e=>{e&&(x({type:"text",name:"WorkPerPreCode",value:""}),X(!0))}})),r().createElement(P.Z,{xs:3,md:3,lg:3,sm:3,style:{display:"none"}},r().createElement(pe.Z,{json:ge,id:F.WorkPermitID,"data-testid":F.WorkPermitID,value:F.PerEquipmentName,SPName:"WorkPerPrecautionDetails",FieldName:"WorkPermitID",tfLabel:ie("WorkPermitID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>be(e,"WorkPermitID","select"),onChange:(e,t)=>{Ne(e,t,"WorkPermitIDPK")},KeyBack:e=>{Ae("WorkPermitID")},fieldorder:"0",data:R,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:R.length>0?R[0].TotalCount:0,openSlide:()=>{ke("1300")},Tabledialog:()=>Se("1300","WorkPermitID"),loading:B,clear:e=>{e&&we("WorkPermitID")}}))))),r().createElement(Ce.Z,null,r().createElement(fe.Z,{color:"info",icon:!0,className:"cardheadvh"},r().createElement(p.Z,null,r().createElement(P.Z,{xs:3,md:3,lg:3,sm:3},r().createElement("div",{className:"GrpViewHeadingTitle"},r().createElement("p",null))))),r().createElement(ve.Z,{style:{padding:"5px 20px 15px"}},r().createElement(p.Z,{spacing:2},r().createElement(P.Z,{xs:3,md:3,lg:3,sm:3},r().createElement(pe.Z,{json:ge,id:F.WPPrecautionID,"data-testid":F.WPPrecautionID,value:F.PrecautionName,SPName:"WorkPerPrecautionDetails",FieldName:"WPPrecautionID",tfLabel:ie("WPPrecautionID"),EnterSave:t=>{t&&e.submitConfirmation(t)},SideEntryView:!1,onSelect:e=>be(e,"WPPrecautionID","select"),onChange:(e,t)=>{Ne(e,t,"WPPrecautionIDPK")},KeyBack:e=>{Ae("WPPrecautionID")},fieldorder:"1",data:R,foreign:!1,foreignFld:[],foreignClick:()=>{},totalCount:R.length>0?R[0].TotalCount:0,openSlide:()=>{ke("1305")},Tabledialog:()=>Se("1305","WPPrecautionID"),loading:B,clear:e=>{e&&we("WPPrecautionID")}})))))),r().createElement("div",{id:"WorkPerPrecautionDetailsSideBar",className:"sidenav"},r().createElement("div",{className:"closebtn",onClick:()=>(document.getElementById("WorkPerPrecautionDetailsSideBar").style.width="0",void W(!1))},""),N&&r().createElement("div",{className:"MainDivStyles Maincontent displayFlex width100 SideBarComponent"},A))))))))}));a(77366),a(97829);var Se=a(65197);const Ne=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),[s,d]=((0,n.useSelector)((e=>e.form)),(0,l.useState)([])),[m,u]=(0,l.useState)(!0),[p,P]=(0,l.useState)(e.showDetail),[D,y]=(0,l.useState)(""),[E,C]=r().useState(!1),[v,f]=r().useState(""),[h,k]=r().useState(!1),S=(0,l.useContext)(Fe),{cstate:N,cdispatch:W}=xe(),[b,w]=(0,l.useState)(!1),[A,T]=(0,l.useState)(""),[F,x]=(0,l.useState)(""),[B,L]=(0,l.useState)("");let Z=(0,I.Z)();(0,l.useEffect)((()=>{N.editData.length>0&&(d(N.editData),C(!1),W({type:"PrimaryId",payload:N.editData[0].WorkPerPrecationIDPK}))}),[N.editData]),(0,l.useEffect)((()=>{N.showTableview&&L(N.showTableview)}),[N.showTableview]),(0,l.useEffect)((()=>{u(N.ExpandDetailValue)}),[N.ExpandDetailValue]),(0,l.useImperativeHandle)(t,(()=>({tableClick:e=>{u(e),C(null)},viewtoggle:()=>{C(!1)},viewlistProps:(t,a)=>{!function(t,a=!1){let l=g.v.Api+"FP1303S3/",r={data:{p1:t,p2:null,p3:null,p4:null,p5:null,p6:null,p7:e.Dialogview?"1":null,p8:null,p9:null,p10:null,p11:null,p12:null,p13:null,p14:null,p15:null,p16:null,p17:null,p18:null,p19:null,p20:null,p21:null,p22:null,p23:null,p24:null,p25:null,p26:null,p27:null,p28:null,p29:null,p30:null,p31:null,p32:null,p33:null,p34:null,p35:null,p36:null,p37:null,p38:null,p39:null,p40:null,p41:null,p42:null,p43:null,p44:null,p45:null,p46:null,p47:1,p48:10,p49:N.IsDraft?"DraftWorkPerPrecationID":"WorkPerPrecationID",p50:null,p51:null,p52:localStorage.getItem("UserGroupID"),p53:localStorage.getItem("userid")}};(0,se.Z)(0).then((e=>{(0,c.Z)(l,r,e).then((e=>{S.loading(!1),"200"==e.Output.status.code&&d(e.Output.data)}))}))}(t,a)},clear:()=>{"panel0"===E&&a.current.clear()}})));const R=e=>Z?.[e]?Z?.[e]:e,O=e=>N.language?.[e]?N.language[e]:e;function z(e,t){}const M=(e,t)=>(a,l)=>{f(h?Object.assign(...s.filter((e=>e.WorkPerPrecationIDPK==t)).map((e=>e))):N.editData),C(!l&&e)};return r().createElement("div",null,r().createElement(i.Z,{expanded:m,onChange:()=>()=>{e.expandTable&&u(!m)}},!E&&r().createElement(H.Z,null,r().createElement("div",{className:"padding2 displayFlex backgroundLight borderRadiusTop width100"},m?r().createElement("div",{className:"displayFlex EntryViewHeader"},r().createElement("p",{className:"ListP"},N.IsDraft?R("Draft"):"",O("WorkPerPrecautionDetails"),e.viewonly?" ":"("+N.count+")")):"",m?r().createElement("div",{className:"displayFlex EntryHeaderBtn"},!e.viewonly&&N.AccessRights.IsAdd?r().createElement(X.Z,{name:R("Add"),frmctrlid:"fld1303L1VCAddBtn",className:"AddBtnCommon boxShadowNone",onClick:()=>{S.hideAddBtn(!0),W({type:"editData",payload:[]}),W({type:"ShowDetail",payload:!1}),W({type:"Add",payload:!0})},disabled:!1}):"",!e.viewonly&&N.AccessRights.IsEdit?r().createElement(ce.Z,{frmctrlid:"fld1303L1VCEditBtn",onClick:M("panel0",""),disabled:!1}):N.IsDraft&&N.AccessRights.IsAdd&&r().createElement(ce.Z,{frmctrlid:"fld1303L1VCEditBtnIsAdd",onClick:()=>{M("panel","")},disabled:!1}),!e.viewonly&&r().createElement(oe.Z,{disabled:!1,className:"L1AddBtnCommon",frmctrlid:"fld1303L1VCCloseBtn",onClick:()=>{u(!1),S.hideAddBtn(!1),h&&(W({type:"editData",payload:[]}),d([]))}})):"")),r().createElement(o.Z,{style:{display:"block"}},s.map(((t,l)=>r().createElement("div",{key:l},E==="panel"+l?r().createElement(ke,{ref:a,parentId:e.parentId}):r().createElement(r().Fragment,null,r().createElement(Se.Z,{tableName:"WorkPerPrecautionDetails",tableID:1303,parentID:t.WorkPerPrecationIDPK,fldid:"fld1303L1VCContainer",OpenSlideComponent:z,index:l,refresh:B,val:t,tf:O,t:R,title:"10.0.0.59-3:08:17 PM-18-7[1303]"}))))))))}));var We=a(67698),be=a(55995),we=(a(45965),a(41722)),Ae=a(9175),Te=a.n(Ae);const Fe=(0,l.createContext)(),xe=()=>{const e=(0,l.useContext)(Fe);if(void 0===e)throw new Error("useCont must be used within  WorkPerPrecautionDetailsContext Provider");return e},Be=[],Le=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),i=(0,l.useRef)(),o=(0,l.useRef)(),c=(0,l.useRef)(),s=(0,l.useRef)(),[d,m]=(0,l.useState)(!0),[u,p]=(0,l.useState)(),P=((0,n.useSelector)((e=>e.form)),(0,n.useDispatch)()),[g,D]=(0,l.useState)(0),[y,I]=(0,l.useReducer)(we.D,we.E),[E,C]=(0,l.useState)(""),[v,f]=(0,l.useState)([]),[h,k]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e.loading(!0),e.tableview||i.current.clear(),document.getElementById("divWorkPerPrecautionDetails-Entry").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainTable").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{m(!0),document.getElementById("divWorkPerPrecautionDetails-Entry").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainTable").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.add("displayGrid")}),[]),(0,l.useEffect)((()=>{e.editData&&(I({type:"editData",payload:[e.editData]}),I({type:"ShowDetail",payload:!0}))}),[e.editData]),(0,l.useImperativeHandle)(t,(()=>({AddOpen:(e,t)=>{I(t?{type:"AccessRights",payload:{IsAdd:!0,IsEdit:!0,IsView:!0,IsDelete:!0,IsPrint:!0,IsExport:!0}}:{type:"AccessRights",payload:{IsAdd:!1,IsEdit:!1,IsView:!1,IsDelete:!0,IsPrint:!0,IsExport:!0}}),i.current.AddOpen(e),setTimeout((()=>a.current.HideEntryFields(!0)),500)},AddClose:()=>{setTimeout((()=>a.current.HideEntryFields(!0)),500)}})));const S=e=>{f([]),document.getElementById("divWorkPerPrecautionDetails-Entry").style.width="100%",document.getElementById("WorkPerPrecautionDetailsEntryTable").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainEntry").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainEntry").style.display="block",document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.add("displayFlex"),document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.remove("displayGrid"),document.getElementById("overlayimgAttWorkPerPrecautionDetails").style.width="0%",document.getElementById("overlayimgAttWorkPerPrecautionDetails").style.display="none"};(0,l.useEffect)((()=>{P((e=>{(0,se.Z)(1).then((e=>{var t=new Array;t.push(e),I({type:"token",payload:t}),D(t.length),N(e)}))}))}),[]);const N=t=>{I({type:"AccessRights",payload:e.AccessRights}),k(e.AccessRights?.isNestSendtoApproval)};return r().createElement("div",{style:{width:"100%"}},r().createElement(Fe.Provider,{value:{cstate:y,cdispatch:I,ContextApi:xe,loading:t=>e.loading(t),alert:t=>e.alertmsg(t),ShareTab:(t,a)=>e.TabShare(t,a),ConfirmAlert:t=>e.ConfirmAlert(t),SlideComponentType:t=>e.SlideComponentType(t),openNav:t=>e.openNav(t),RefreshTable:()=>{a.current.tableRefresh(),e.cardRefresh()},searchItem:e=>{0!==g&&a.current.searchItem(e)},openDialog:t=>e.openDialog(t),DialogComponentType:t=>e.DialogComponentType(t),attachmentSave:e=>{s.current.tempsave(e,v),f([])},EditClose:e=>S(),AttachExpand:e=>(c.current.AttachmentData(y.PrimaryId),void(d&&(document.getElementById("overlayPreviewWorkPerPrecautionDetails").style.width="50%",document.getElementById("divWorkPerPrecautionDetails-Entry").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainTable").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainEntry").style.width="100%",document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.remove("displayFlex"),document.getElementById("WorkPerPrecautionDetails-MainDiv").classList.add("displayGrid"),document.getElementById("overlayimgAttWorkPerPrecautionDetails").style.display="block",document.getElementById("overlayimgAttWorkPerPrecautionDetails").style.width="25%"))),Expanded:e=>{y.ShowDetail&&o.current.tableClick(e),I({type:"ExpandDetailValue",payload:e})},viewtoggle:()=>{y.ShowDetail&&o.current.viewtoggle()},clear:e=>{I({type:"ShowDetail",payload:!1}),I({type:"editData",payload:[]}),y.ShowDetail?o.current.clear(e):i.current.clear(e)},hideAddBtn:e=>{a.current.HideEntryFields(e)},ExpandEntry:()=>{y.ShowDetail?o.current.tableClick(!1):i.current.CreateEasyProps(!1)},resetImg:()=>{s.current.tempClear(),c.current.clrImgstate(!0)}}},r().createElement("div",{id:"WorkPerPrecautionDetails-MainDiv",className:"MainDivStyles displayFlex",style:{height:e.subForm&&"fit-content"}},r().createElement("div",{id:"WorkPerPrecautionDetails-MainEntry",className:"",style:{background:"#fff"}},r().createElement("div",{style:{display:"flex"}},r().createElement("div",{id:"WorkPerPrecautionDetailsEntryTable",style:{width:"100%"}},y.ShowDetail?r().createElement("div",null,r().createElement("div",{className:"displayFlex width100"},r().createElement("div",{id:"divWorkPerPrecautionDetails-Entry",style:{width:"100%"}},0!==g?r().createElement(Ne,{ref:o,IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}):null)),r().createElement(be.Z,{ref:s,menurefID:1303,fileId:"LogoImgWorkPerPrecautionDetails",imgloading:t=>{t||y.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:y.PrimaryId,AttachmentVal:e=>c.current.AttachmentData(e),previd:"overlayPreviewWorkPerPrecautionDetails",frmctrlid:"PvwIm_1303_L1_",tempImg:e=>{y.PrimaryId?c.current.AttachmentData(y.PrimaryId):c.current.tempImg(e),f(e)},clearTempData:y.Add})):r().createElement("div",null,r().createElement("div",{className:"displayFlex width100"},r().createElement("div",{id:"divWorkPerPrecautionDetails-Entry",style:{width:"100%"}},!e.tableview&&r().createElement(ke,{ref:i,clrImgstate:e=>c.current.clrImgstate(e),IsEditOpen:e.AddOpen,IsDraftEdit:e.IsDraft,parentId:e.parentId}))),r().createElement(be.Z,{ref:s,menurefID:1303,fileId:"LogoImgWorkPerPrecautionDetails",imgloading:t=>{t||y.PrimaryId?e.loading(t):a.current.tableRefresh()},valueIDPK:y.PrimaryId,AttachmentVal:e=>c.current.AttachmentData(e),previd:"overlayPreviewWorkPerPrecautionDetails",frmctrlid:"PvwIm_1303_L1_",tempImg:e=>{y.PrimaryId?c.current.AttachmentData(y.PrimaryId):c.current.tempImg(e),f(e)},clearTempData:y.Add})),r().createElement("div",{id:"WorkPerPrecautionDetails-MainTable"},0!==g?r().createElement(ie,{ref:a,parentId:e.parentId,IsCollapse:e.IsCollapse,tableview:e.tableview}):null)),r().createElement(We.Z,{ImgAttachment:e=>S(),menurefID:1303,fileId:"AttImgWorkPerPrecautionDetails",imgid:"overlayimgAttWorkPerPrecautionDetails",valueIDPK:y.PrimaryId,PriviewData:(e,t,a,l)=>{s.current.PriviewItem(e,t,a,l)},previd:"overlayPreviewWorkPerPrecautionDetails",ref:c,imgloading:u,ConfirmAlert:t=>{e.ConfirmAlert(t)},frmctrlid:"Imgatt_1303_L1_",timglist:e=>{s.current.timglist(e),f(e)},clearTempData:y.Add}))),r().createElement("div",{id:"WorkPerPrecautionDetails-DetailDiv",style:{display:"none",height:"81vh",overflowY:"auto"}}))),h&&r().createElement(Te(),{openDialog:h,closeDialog:e=>k(e),formID:1303,PrimID:e.parentId,alert:(t,a,l)=>{"Approval Sent Succesfully"==t.message&&e.cardRefresh()},loading:t=>{e.loading(t)}}))}))}}]);