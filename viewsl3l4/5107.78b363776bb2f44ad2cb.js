"use strict";(self.webpackChunk_shared_routing_viewsl3l4=self.webpackChunk_shared_routing_viewsl3l4||[]).push([[5107],{65107:(e,t,l)=>{l.d(t,{Z:()=>H});var a=l(92950),n=l.n(a),i=l(79895),c=l(82302),d=l(99613),r=l(88222),s=l(56847),o=l(83750),m=l(57394),u=l(77256),y=l(49174),g=l(99173),p=l(88995),b=l(39431),h=l(868),E=l(59067),f=l(28428),S=l(20067),x=l(52795),C=l(51115),w=l(25281),v=l(66037),k=l(17812),Z=(l(40826),l(87429),l(8981)),T=l(26537),I=l(77366),N=l(21392),B=l(70329),A=l(58965),D=l(79117),V=l.n(D),P=(l(14439),l(55918)),M=l.n(P),j=l(25108);window.headercellid="",window.row={};const L=(0,a.forwardRef)(((e,t)=>{const{order:l,orderBy:i,onRequestSort:c,headCells:d,isDraft:s,TableSearchParams:h}=e,[E]=(0,a.useState)(localStorage.getItem("Language")),[f]=(0,a.useState)(localStorage.getItem("Language")),[S,C]=(0,a.useState)({}),[w,v]=(0,a.useState)({}),k=["By","Contact","NROT","COT","SNA","VIA","Remark","tax","value","UserName","Status","No","Total","Rate","Cnt","Time","Type","Code","Amount","Quantity","Unit","Is","TAT","Cost","Number"],T=(0,a.useRef)();(0,a.useEffect)((()=>{s?(C({}),v({})):(Object.keys(h).map((e=>{C({...S,[e]:!!h[e]})})),v(h))}),[h,s]),(0,a.useImperativeHandle)(t,(()=>({clearValue:()=>{if(Object.values(w).some((e=>null!==e&&""!==e))&&T.current){T.current.clear();const t=Object.keys(w).slice(0,Object.keys(w).length).reduce(((e,t,l)=>(e[t]=l>Object.keys(w).length?w[t]:"",e)),{});v(t),e.value(t,"onlyClear")}}})));let I=(0,Z.Z)();const N=e=>"English"==E?e:I?.[e]?I[e]:e,B=(e,t,l)=>{C({...S,[t]:!S[t]}),setTimeout((function(){var e=document.getElementById(l+"headcell");e&&(e.focus(),document.getElementById(l+"headcell").onclick=function(e){e.stopPropagation()})}),1e3),e.stopPropagation()},A=(t,l)=>{window.headercellid=l,0===t.length&&e.value({...w,[l]:""}),v({...w,[l]:t})};return n().createElement(x.Z,{onClickAway:()=>{C({})}},n().createElement(o.Z,{id:e.frmctrlid+"_TableHead"},n().createElement(m.Z,null,"none"==e.action?null:!0===e.isexpanded&&!e.IsSub&&n().createElement(r.Z,{className:"StyledTableCellHeadStyles",style:{minWidth:"60px",textAlign:"center"}},n().createElement("span",{className:"trAction"},N("Action"))),e.multi&&n().createElement(r.Z,{className:"StyledTableCellHeadStyles",style:{minWidth:"60px",textAlign:"center"}},n().createElement(b.Z,{checked:!1,disabled:!1})),!0===e.showMore&&n().createElement(r.Z,{className:"StyledTableCellHeadStyles",style:{minWidth:"60px",textAlign:"center"}},n().createElement("span",{className:"trAction"},N("More"))),d.map((t=>{return n().createElement(r.Z,{className:"StyledTableCellHeadStyles "+(s?"draftColor":e.IsSub?"SublistColor":"listColor"),key:t.id,sortDirection:i===t.id&&l,style:{minWidth:k.some((e=>t.id.toLowerCase().includes(e.toLowerCase())))?"135px":e.colwid?e.colwid:"180px",textAlign:"Is"==t.id.slice(0,2)?"center":"left"}},S[t.id]?t.id.includes("Date")||t.id.includes("date")||t.id.includes("Dt")||t.id.includes("dt")?n().createElement(y.Z,{value:w[t.id],label:t.name,onErr:e=>j.log(e),onChange:l=>{A(l,t.id),j.log(l,"headCell"),e.value({...w,[t.id]:l,[t.id+"Type"]:"Date"})}}):n().createElement(g.Z,{ref:T,frmctrlid:e.frmctrlid+t.id,className:"TableheaderSearchInput",type:"numeric"==t.type||"int"==t.type||"mins"==t.type?"number":"text",labelname:t.name,marginTop:"0",onChange:e=>{A(e,t.id,t.type)},disabled:!1,value:Object.keys(w).length>0?-1===w[t.id].indexOf("%")?w[t.id]:w[t.id].replace(/[%]/g,""):"",clear:(l,a)=>{l&&(A("",t.id),B(a,t.id),e.value({...w,[t.id]:""}))},mandatory:!1,keyPress:!0,onKeyPress:l=>{e.value({...w,[t.id]:"numeric"==t.type||t.id.includes("Date")?l:"%"+l+"%"})}}):w[t.id]?"Date"==t.type?n().createElement(y.Z,{value:w[t.id],id:e.frmctrlid+"cls_"+t.id,Label:t.name,onChange:l=>{A(l,t.id),e.value({...w,[t.id]:l,[t.id+"Type"]:"Date"})}}):n().createElement(g.Z,{ref:T,frmctrlid:e.frmctrlid+t.id,className:"TableheaderSearchInput",type:"numeric"==t.type||"int"==t.type||"mins"==t.type?"number":"text",labelname:t.name,marginTop:"0",onChange:e=>{A(e,t.id,t.type)},disabled:!1,value:Object.keys(w).length>0?-1===w[t.id].indexOf("%")?w[t.id]:w[t.id].replace(/[%]/g,""):"",clear:(l,a)=>((t,l,a)=>{t&&(A("",a.id),B(l,a.id),e.value({...w,[a.id]:""}))})(l,a,t),isDraft:s,mandatory:!1,keyPress:!0,onKeyPress:l=>{e.value({...w,[t.id]:"numeric"==t.type||t.id.includes("Date")?l:"%"+l+"%"})}}):n().createElement("div",{id:`sort_${e.frmctrlid}`},n().createElement(u.Z,{"filter-title":"Sort",active:i===t.id,direction:i===t.id?l:"asc",onClick:(a=t.id,e=>{c(e,a)})},e.tf?n().createElement("p",{style:{width:"max-content"}},t.name?e.tf(t.name.replace(/\s/g,"")):""):n().createElement("p",{style:{width:"max-content"}},t.name?t.name.replace(/\B([A-Z])\B/g," $1"):""),i===t.id?n().createElement("span",{className:"visuallyHidden"},"desc"===l?"sorted descending":"sorted ascending"):null,!S[t.id]&&"Is"!==t.id.substring(0,2)&&!w[t.id]&&!s&&(t.id.includes("Password")||t.id.includes("dt")?null:!e.searchdisabled&&n().createElement("div",{id:e.frmctrlid+""+t.id,onClick:e=>B(e,t.id,t.name)},n().createElement(p.Z,{className:"tableHeadersearch"}))))));var a})))))})),O=e=>{const[t,l]=(0,a.useState)([]);return n().createElement("div",null,n().createElement(h.ZP,{title:"Attactment Preview",placement:"top"},n().createElement("div",{onClick:t=>{(0,T.Z)(0).then((t=>{(0,I.Z)(t,e.id,e.tableID).then((e=>{l(e)}))})),document.getElementById(`${e.tableName}ImgPriv${e.id}`).classList.add("PreviewAnimation"),document.getElementById(`${e.tableName}ImgPriv${e.id}`).style.display="block",document.getElementsByClassName("ThemeSlide1")[0].style.zIndex="0"}},n().createElement(B.Z,{className:"Viewtablecls"}))),n().createElement(N.Z,{id:`${e.tableName}ImgPriv${e.id}`,data:t}))},H=(0,a.forwardRef)(((e,t)=>{const l=(0,a.useRef)(null),[o,u]=(0,a.useState)("asc"),[y,g]=(0,a.useState)(""),[p,x]=n().useState(""),[Z,T]=(0,a.useState)(!1),[I,N]=(0,a.useState)(!1),[B,D]=(0,a.useState)([]),[P,H]=(0,a.useState)([]),[$,_]=(0,a.useState)(null),[R,F]=(0,a.useState)({x:0,y:0}),[q,W]=(0,a.useState)(!1);function K(e,t,l){return t[l]<e[l]?-1:t[l]>e[l]?1:0}(0,a.useImperativeHandle)(t,(()=>({clearItem:()=>{j.log("clear item"),l.current.clearValue()},submit:()=>{const e=P.filter((e=>1==e.checked));j.log(e)}}))),(0,a.useEffect)((()=>{H(e.bodydata),Y(e.id+0)}),[e.bodydata]),(0,a.useEffect)((()=>{e.CloseContxt&&W(!1)}),[e.CloseContxt]);const U=(0,a.useCallback)(((e,t)=>{e.preventDefault(),F({x:e.pageX-200,y:e.pageY-200}),W(t)}),[R]);function z(e,t){if(t.toLowerCase().indexOf("password")>-1){var l="";for(let t=0;t<e.length;t++)l+="*";return l}return"LicenseKey"==t&&e?(e.split("-"),"xxxx-xxxx-xxxx"):e}const Y=e=>{var t=document.querySelectorAll(".MuiTableRow-root");for(let e=0;e<t.length;e++)t[e].style.background="#FFF";setTimeout((function(){document.getElementById(e)&&(document.getElementById(e).style.background="#fff")}),500)};return n().createElement(s.Z,{component:i.Z,style:{height:e.IsSub||e.heightAuto?"auto":"66vh"},className:"tablecontainer scrollY"},n().createElement(c.Z,{stickyHeader:!0,id:"Header"+e.id+e.frmctrlid},n().createElement(L,{order:o,orderBy:y,onRequestSort:(e,t)=>{u(y===t&&"asc"===o?"desc":"asc"),g(t)},headCells:e.headerdata,isDraft:e.isdraft,value:e.searchvalue,action:e.action,TableSearchParams:(Q=e.tablesearchparams,Object.keys(Q).forEach((function(e){(e.toLowerCase().includes("date")||e.toLowerCase().includes("time"))&&delete Q[e]})),Q),isexpanded:e.isexpanded,colwid:e.colwid,ref:l,IsSub:e.IsSub,multi:e.multi,searchdisabled:e.searchdisabled,showMore:e.showMore,frmctrlid:e.frmctrlid,tf:e.tf}),P.length>0?n().createElement(d.Z,{id:e.frmctrlid+"_TableBody"},function(e,t){const l=e.map(((e,t)=>[e,t]));return l.sort(((e,l)=>{const a=t(e[0],l[0]);return 0!==a?a:e[1]-l[1]})),l.map((e=>e[0]))}(P,function(e,t){return"desc"===e?(e,l)=>K(e,l,t):(e,l)=>-K(e,l,t)}(o,y)).map(((t,l)=>n().createElement(n().Fragment,null,n().createElement(m.Z,{key:l,onDoubleClick:a=>{if(e.IsSub&&!e.EditSub)return!1;e.edit(t,e.isdraft,!0),e.expanded(!0),x(""),T(!1),(e=>{var t=document.querySelectorAll(".MuiTableRow-root");for(let e=0;e<t.length;e++)t[e].style.background="#FFF";setTimeout((function(){document.getElementById(e)&&(document.getElementById(e).style.background="#e3e4e9")}),500)})(e.id+l),!0===e.isexpanded&&document.getElementById(e.id)},id:e.id+l},"none"==e.action?null:!0===e.isexpanded&&!e.IsSub&&n().createElement(r.Z,{className:"StyledTableCellBodyStyles",style:{textAlign:"center"}},n().createElement("div",{className:"CardDisplay"},e.IsView&&e.tableExp&&n().createElement(k.Z,{"aria-label":"expand row",size:"small",onClick:()=>{return e=l,j.log("buttonl0l2",e),void(p===e?(x(""),T(!1)):(x(e),T(!0)));var e}},p===l?n().createElement(w.Z,null):n().createElement(C.Z,null)),"none"==e.visibilityIcon?null:n().createElement(h.ZP,{title:"View",placement:"top"},n().createElement("div",{id:`view_${e.frmctrlid}`,onClick:()=>{e.edit(t,e.isdraft,!0),e.expanded(!0),e.viewtoggle()}},n().createElement(S.Z,{className:"Viewtablecls"}))),"none"==e.editIcon?null:e.accessrights.IsEdit?n().createElement(h.ZP,{title:"Edit",placement:"top"},n().createElement("div",{id:`edit_${e.frmctrlid}`,onClick:()=>{e.edit(t,e.isdraft,!1),e.expanded(!0)}},n().createElement(E.Z,{className:"Edittablecls"}))):null,e.delete&&n().createElement(h.ZP,{title:"Delete",placement:"top"},n().createElement("div",{id:`edit_${e.frmctrlid}`,onClick:()=>{e.onDelete(t)}},n().createElement(f.Z,{style:{color:"red"},className:"Edittablecls"}))),t.FilePath?n().createElement(O,{id:Object.values(t)[0],tableID:e.tableID,tableName:e.id,hidescreenComp:t=>e.hidescreenComp(t)}):n().createElement("div",{style:{height:"24px",width:"36px"}}))),e.multi&&n().createElement(r.Z,{className:"StyledTableCellBodyStyles",style:{minWidth:"60px",textAlign:"center"}},n().createElement(b.Z,{checked:1==t.checked,onClick:l=>{j.log("1check",l,t),((t,l)=>{const a=Object.keys(l).filter((e=>e.includes("IDPK")))[0];j.log("id",a,l[a]);const n=[...P];let i={checked:t};const c=n.findIndex((e=>e[a]==l[a]));j.log("index",c);const d=n[c];j.log("item",d),n.splice(c,1,{...d,...i}),j.log("newdata",n),H(n),e.showData&&e.multiselect(n.filter((e=>1==e.checked)))})(l,t)},disabled:!1,id:`checkbox_${e.frmctrlid}`})),1==e.showMore&&n().createElement(r.Z,{className:"StyledTableCellBodyStyles",style:{textAlign:"center"}},n().createElement(V(),{id:e.formID,cstate:e.cstate,cdispatch:e.cdispatch,context:e.context,parentId:t[e.idpk],parentData:t,sentToAppr:"",model:"IsTable",AccessRights:e.accessrights})),e.bodyitem.map(((a,i)=>{let c=e.visibleitem.filter((e=>e.id==a));return"Is"==a.slice(0,2)?n().createElement(r.Z,{className:"StyledTableCellBodyStyles",key:i,style:{textAlign:"center"}},n().createElement("div",{className:"gdotTable ",style:{backgroundColor:"1"==t[a]?"#03AC13":"#dddddd"}})):c.length>0?n().createElement(r.Z,{className:"StyledTableCellBodyStyles",onContextMenu:t=>{e.contextMenu&&U(t,l+a)},key:i,style:{textAlign:"numeric"==c[0].type||"smallint"==c[0].type||"int"==c[0].type?"right":"left"}},"MailSubject"==a?n().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t),e.MailSubject(t.MailSubject)}},z(t[a],a)):e.iframeVal&&e.iframeVal==a?n().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t)}},z(t[a],a)):n().createElement("div",{className:`cell${e.color?t[a]:""} ${"RequestDetailsDesc"==a?"CellEllipse":""}`,title:t[a]},"mins"==c[0]?.type?M()(t[a]):z(t[a],a)),q==l+a?n().createElement("div",{className:"Contextmenu",style:{top:R.y,left:R.x}},e.contextMenu&&e.contextView(t)):null):n().createElement(r.Z,{className:"StyledTableCellBodyStyles ",key:i},"MailSubject"==a?n().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t),e.MailSubject(t.MailSubject)}},z(t[a],a)):e.iframeVal&&e.iframeVal==a?n().createElement("a",{className:"ViewBodypTag ViewHightLight ViewBodyForeignTag",onClick:()=>{e.iframe(t)}},z(t[a],a)):n().createElement("div",{className:`cell${e.color?t[a]:""}`,title:t[a]},"mins"==c[0]?.type?M()(t[a]):z(t[a],a)))}))),n().createElement(m.Z,null,n().createElement(r.Z,{style:{paddingBottom:0,paddingTop:0,paddingLeft:0,borderLeft:"20px solid #ccc"},key:"cell"+l,colSpan:e.Colspan?e.Colspan:8},n().createElement(v.Z,{in:p===l,timeout:"auto",unmountOnExit:!0},p===l&&e.ViewComp(Z,t)))))))):!e.IsSub&&n().createElement(d.Z,{id:e.frmctrlid+"_TableBody"},n().createElement(m.Z,null,n().createElement(r.Z,{colSpan:e.headerdata.length+1,style:{padding:"0px"}},n().createElement(A.Z,{heightAuto:e.heightAuto,MUITable:"0"}))))));var Q}))}}]);