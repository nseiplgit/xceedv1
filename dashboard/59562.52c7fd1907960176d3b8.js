"use strict";(self.webpackChunk_shared_routing_dashboard=self.webpackChunk_shared_routing_dashboard||[]).push([[59562],{99090:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(92950),l=a.n(r),o=a(282),s=a(868),n=a(8981);function i(e){let t=(0,n.Z)();return l().createElement(s.ZP,{placement:"top",title:e.title?e.title:""},l().createElement(o.Z,{className:e.className+" ClearButton boxShadowNone",disabled:e.disabled,id:e.frmctrlid?e.frmctrlid:"",onClick:e.onClick},e.name?e.name:(a="Clear",t?.[a]?t[a]:a)));var a}},1695:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(282),l=a(92950),o=a.n(l),s=a(868),n=a(8981);function i(e){let t=(0,n.Z)();const a=e=>t?.[e]?t[e]:e;return o().createElement(s.ZP,{placement:"top",title:e.name?e.name:a("Save")},o().createElement(r.Z,{id:e.id?e.id:e.frmctrlid,className:e.className+" SaveBtnCommon boxShadowNone",disabled:e.disabled,onClick:e.onClick},e.name?e.name:a("Save")))}},59562:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var r=a(92950),l=a.n(r),o=a(52663),s=a(66856),n=a(29525),i=a(82285),c=a(99173),m=(a(61504),a(99090)),p=a(1695),d=a(40900),u=a(26537),D=a(51673),I=a(30553),g=a(13258),f=a(62810),h=a(17149),E=a(92762),v=a(55905),y=a(25108);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},S.apply(this,arguments)}const b=l().forwardRef((function(e,t){return l().createElement(i.Z,S({direction:"down",ref:t},e))}));function N(e){const[t,a]=(0,r.useState)(""),[i,S]=(0,r.useState)([]),[N,C]=(0,r.useState)(!1),[k,U]=(0,r.useState)(""),[Z,P]=(0,r.useState)([]),[w,A]=(0,r.useState)(""),[L,O]=(0,r.useState)(""),[T,F]=(0,r.useState)(""),[x,H]=(0,r.useState)([]),[M,B]=(0,r.useState)(!1),[K,R]=(0,r.useState)({open:!1,color:"",message:[]});(0,r.useEffect)((()=>{e.PrimID&&function(){let t=3;"700"==e.formID&&(t=1),"355"==e.formID&&(t=6),"345"==e.formID&&(t=3),"854"==e.formID&&(t=3),"853"==e.formID&&(t=3),"783"==e.formID&&(t=5),"914"==e.formID&&(t=7),"910"==e.formID&&(t=8),"396"==e.formID&&(t=13),"290"==e.formID&&(t=14),"702"==e.formID&&(t=18),"1787"==e.formID&&(t=19),"682"!=e.formID&&"683"!=e.formID||(t=3),"355"==e.formID&&(t=6),"1302"==e.formID&&(t=20),"430"==e.formID&&(t=17);let r=d.v.Api+"FPC2S3/",l={data:{p1:e.formID,p2:localStorage.getItem("userid"),p3:e.PrimID,p4:e.PrimID,p5:0,p6:t}};y.log("result","userlist--LEVEL DAShBoard"),(0,u.Z)(0).then((t=>{(0,D.Z)(r,l,t).then((t=>{if("200"==t.Output.status.code)if(t.Output.data.length>0){let r=t.Output.data,l=[];a(r[0].Msg),"No Approval"==r[0].Msg.trim()?(e.closeDialog(!1),C(!1),S([]),e.loading(!1)):"Final Approval"==r[0].Msg||"Final Reject"==r[0].Msg?(A(r[0].HierarchyDetailsIDPK),O(r[0].Msg),F(t.Output.data[0].Msg),S([]),C(!0),e.loading(!1)):(S(r),r.map((e=>{l.push({User:e.UserID,UserName:e.UserName})})),A(r[0].HierarchyDetailsIDPK),O(r[0].Msg),F(""),e.openDialog&&C(!0),e.loading(!1))}else{e.alert({open:!0,color:"error",message:"There is no hierarchy"},"","");let a=t.Output.data;S(a)}}))}))}(),y.log("PrimID",e.PrimID)}),[e.PrimID,e.openDialog]);const j=["UserName"],W=e=>{if(x.length>0){const t="UserID".slice(0,-2);return x.filter((a=>a[t]==e.UserID)).length>0}return!1},_=i.map(((e,t)=>l().createElement("li",{key:t},l().createElement("label",{tabIndex:"1",id:"Appr"+e[Object.keys(e)[0]],className:"FilterItemDiv displayFlex "},l().createElement("div",{className:"DropdownLabelValues Level2Tooltip"},l().createElement(I.Z,{style:{marginLeft:0,color:"#3873bb"},onClick:e=>{e.stopPropagation()},control:l().createElement(g.Z,{for:"Appr"+e[Object.keys(e)[0]],style:{padding:" 10px",opacity:"1",position:"relative",height:"100%",width:"auto",minWidth:"auto"},icon:l().createElement(h.Z,{fontSize:"small"}),checkedIcon:l().createElement(f.Z,{fontSize:"small",style:{color:"rgb(52, 179, 68)"}}),checked:W(e),onChange:t=>{((e,t)=>{if(A(e.HierarchyDetailsIDPK),O(e.Msg),0==t){const t="UserID".slice(0,-2);return H(x.filter((a=>a[t]!=e.UserID))),x.filter((a=>a[t]!=e.UserID)),!1}let a=[];a.push({["UserID".slice(0,-2)]:e.UserID,UserName:e.UserName}),H([...x,...a]),y.log([...x,...a])})(e,t.target.checked)}}),label:""})),j.map(((t,a)=>t.includes("Is")?l().createElement("div",{key:a,className:"DropdownLabelValues Level2Tooltip",title:e[t]}):l().createElement("div",{key:a,className:"DropdownLabelValues Level2Tooltip",title:e[t]},e[t])))))));return l().createElement(l().Fragment,null,l().createElement(o.Z,{open:N,TransitionComponent:b,keepMounted:!0,disableEscapeKeyDown:!0,onClose:()=>{e.closeDialog(!1),C(!1)},"aria-labelledby":"classic-modal-slide-title","aria-describedby":"classic-modal-slide-description"},l().createElement(E.Z,{open:K.open,color:K.color,message:K.message,onClose:()=>R({open:!1,color:K.color,message:[]})}),"No Hierarchy"==t?l().createElement(n.Z,{style:{minWidth:"600px",height:"55vh",position:"relative"},id:"classic-modal-slide-description"},l().createElement("p",{className:"pNoHier"}," No Hierarchy")):l().createElement(l().Fragment,null,l().createElement(n.Z,{style:{minWidth:"600px",height:"55vh"},id:"classic-modal-slide-description"},T||l().createElement("div",{className:"L2DropDownListDiv"},l().createElement("p",{className:"htag"},"Send for Approval"),l().createElement("div",{className:"L2DropDownListBorder"}),l().createElement("div",{className:"displayFlex FilterItemDivHeader",onClick:()=>{}},l().createElement("span",{className:"DropdownLabelHMulti"},"Select User"),j.map(((e,t)=>l().createElement("span",{key:t,className:"DropdownLabelHMulti",title:e},e)))),l().createElement("div",{className:"FilterItemDivBody scrollYDefault"},0==i.length?l().createElement(l().Fragment,null,l().createElement("div",{className:"NoDataImage"}),l().createElement("div",{className:"NoDataDesc"},l().createElement("span",null,"Sorry, no results found. Try a different search selection or refresh the list."))):l().createElement("ul",{className:"L2DropDownListUL"},_))),l().createElement(c.Z,{removebrandingclr:!0,labelname:"Remarks",marginTop:"4%",onChange:e=>{a(e.replace(/[^a-zA-Z0-9 ]/g,""))},clear:e=>{e&&a("")},value:t})),l().createElement(s.Z,null,M?l().createElement("span",{style:{padding:"0px 10px"}},"Please Wait..."):l().createElement(p.Z,{name:"Submit",disabled:M,onClick:()=>{!function(){B(!0);var a=3,r=1;"700"==e.formID&&(r=1),"783"==e.formID&&(r=5),"355"==e.formID&&(r=6),"345"==e.formID&&(r=1),"854"==e.formID&&(r=1),"853"==e.formID&&(r=1),"914"==e.formID&&(r=7),"910"==e.formID&&(r=8),"396"==e.formID&&(r=13),"290"==e.formID&&(a=470,r=14),"702"==e.formID&&(a=702,r=18),"701"==e.formID&&(r=3),"1787"==e.formID&&(a=1787,r=19),"1302"==e.formID&&(a=1302,r=20);var l=[],o=[];if(T){if(""===t)return R({open:!0,color:"warning",message:[["Please Enter Remarks"]]}),B(!1),!1;l=[{p1:localStorage.getItem("userid"),p2:localStorage.getItem("userid"),p3:a,p4:e.PrimID,p5:0,p6:0,p7:0,p8:w,p9:0,p10:t,p11:r,p12:"0",p13:L}],o=[{ComplaintID:e.PrimID,WOType:"1",Type:"PORTALNOTIFICATION",Title:"Helpdesk Complaints",Body:"Complaint / Service Request - Closed",UserID:"",UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")}]}else{if(0===x.length)return R({open:!0,color:"warning",message:[["Please Select the Users"]]}),B(!1),!1;if(""===t)return R({open:!0,color:"warning",message:[["Please Enter Remarks"]]}),B(!1),!1;x.map((s=>(l.push({p1:localStorage.getItem("userid"),p2:s.User,p3:a,p4:e.PrimID,p5:0,p6:0,p7:0,p8:w,p9:0,p10:t,p11:r,p12:"0",p13:L}),o.push({ComplaintID:e.PrimID,WOType:"1",Type:"PORTALNOTIFICATION",Title:"Helpdesk Approval",Body:`You have a ${T} sent by ${(0,v.decode)(localStorage.getItem("username"))}`,UserID:s.User,UserGroupKey:localStorage.getItem("UserGroupID"),UserAccessKey:localStorage.getItem("userid")}),l)))}let s={data:l},n=d.v.Api+"FPC3S3/";(0,u.Z)(0).then((t=>{(0,D.Z)(n,s,t).then((t=>{y.log(t),"200"==t.Output[0].status.code&&(e.manual&&e.sendApprBtn(!1),e.alert({open:!0,color:"success",message:"Approval Sent Succesfully"},o,T),setTimeout((()=>{C(!1),B(!1)}),1e3),R({open:!0,color:"success",message:[["Approval Sent Succesfully"]]}))}))}))}()}}),l().createElement(m.Z,{name:"Cancel",disabled:M,onClick:()=>{y.log("calcel DAShBoard"),e.closeDialog(!1),C(!1)}})))))}},61504:(e,t,a)=>{a(92950),a(41823),a(40900),window.EnterIndex=0}}]);