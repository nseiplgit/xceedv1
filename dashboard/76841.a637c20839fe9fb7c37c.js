"use strict";(self.webpackChunk_shared_routing_dashboard=self.webpackChunk_shared_routing_dashboard||[]).push([[76841],{76841:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=a(92950),s=a.n(i),n=(a(71168),a(49375)),r=a(14439),o=a(27848),c=a(40900),l=a(24522),d=a(25108);const m=[{name:"Asset",id:0,active:"btnactvtab",width:"25%",IsConflict:"0",count:0},{name:"Division",id:1,active:"",width:"25%",IsConflict:"0",count:0},{name:"Discipline",id:2,active:"",width:"25%",IsConflict:"0",count:0}],u=function(e){const{classes:t}=e,a=(0,i.useRef)(null),[u,p]=(0,i.useState)(""),[v,g]=(0,i.useState)([]),[h,y]=(0,i.useState)([]),[f,C]=(0,i.useState)([]),[S,b]=(0,i.useState)([]),[N,D]=(0,i.useState)([{id:"SlNo",name:"Sl No",type:"varchar"},{id:"Levels",name:"Levels",type:"varchar"},{id:"AssetTagNo",name:"AssetTag No",type:"varchar"},{id:"BarcodeNo",name:"Barcode No",type:"varchar"},{id:"EquipmentName",name:"Equipment Name",type:"varchar"},{id:"CustomerCode",name:"Customer Code",type:"varchar"},{id:"CustomerName",name:"Customer Name",type:"varchar"},{id:"ContractCode",name:"Contract Code",type:"varchar"},{id:"ContractName",name:"Contract Name",type:"varchar"},{id:"Site",name:"Site",type:"varchar"},{id:"EquipmentRef No",name:"EquipmentRef No",type:"varchar"},{id:"Make",name:"Make",type:"varchar"},{id:"Model",name:"Model",type:"varchar"},{id:"AssCategory",name:"Ass Category",type:"varchar"},{id:"SerialNo",name:"Serial No",type:"varchar"},{id:"SpotCode",name:"Spot Code",type:"varchar"},{id:"Spot",name:"Spot",type:"varchar"},{id:"FloorCode",name:"Floor Code",type:"varchar"},{id:"Floor",name:"Floor",type:"varchar"},{id:"BuildingCode",name:"Building Code",type:"varchar"},{id:"Building",name:"Building",type:"varchar"},{id:"WingCode",name:"Wing Code",type:"varchar"},{id:"Wing",name:"Wing",type:"varchar"},{id:"ServiceArea",name:"Service Area",type:"varchar"},{id:"Division",name:"Division",type:"varchar"},{id:"Discipline",name:"Discipline",type:"varchar"},{id:"Condition",name:"Condition",type:"varchar"},{id:"Priority",name:"Priority",type:"varchar"},{id:"Status",name:"Status",type:"varchar"},{id:"TechSpec",name:"Tech Spec",type:"varchar"},{id:"Category",name:"Category",type:"varchar"}]),[E,A]=(0,i.useState)([]),[M,I]=(0,i.useState)(0),[w,B]=(0,i.useState)([]),[T,k]=(0,i.useState)([]),[F,O]=(0,i.useState)([]),[x,_]=(0,i.useState)({Division:0,Discipline:0,Asset:0}),[R,Z]=(0,i.useState)(m);var L=[...m];const[q,W]=(0,i.useState)("");function P(t){if("200"!=t.Output.status.code)return e.loading(!1),e.alertmsg({open:!0,color:"error",message:[t.Output.status.message]}),!1;{a.current.conflictStage(),e.loading(!0);const i={Asset:{setter:O},Division:{setter:B},Discipline:{setter:k},Assets:{setter:O},DivisionNew:{setter:B},DisciplineNew:{setter:k}};Object.keys(t.Output.data).forEach((e=>{const a=t.Output.data[e],s=a.filter((e=>"1"===e.IsConflict));s.length>0&&V(0,s.length),e in i&&i[e].setter(a)})),e.loading(!1)}}(0,i.useEffect)((()=>{D([])}),[]);const V=(e,t)=>{const a=m.filter((t=>t.id==e)),i={name:a[0].name,id:a[0].id,active:a[0].active,width:a[0].width,IsConflict:"1",count:t},s=[...L],n=s.findIndex((t=>t.id==e)),r=s[n];s.splice(n,1,{...r,...i}),L=s,Z(s)};return s().createElement("div",null,s().createElement("div",{id:"AssetMig-MainDiv",className:"MainDivStyles displayFlex"},s().createElement("div",{id:"AssetMig-MainEntry",className:"Maincontent",style:{width:"98%"}},s().createElement(r.Z,null,s().createElement(o.Z,{sm:12},s().createElement(n.Z,{MigType:"AssetMigration",alertmsg:t=>e.alertmsg(t),conflictFinalData:{Asset:F,Division:w,Discipline:T},data:e=>P(e),reset:()=>(B([]),k([]),O([]),_({Division:0,Discipline:0,Asset:0}),Z(m),p(""),void W("")),filename:e=>p(e),fileData:e=>W(e),importSave:t=>function(t){if(!q)return e.alertmsg({open:!0,color:"error",message:["Kindly Upload file to Import"]}),!1;e.loading(!0);let a=new FileReader;a.readAsDataURL(q[0]),a.onload=()=>{let a=c.v.Api+"uploadExcel/",i=new FormData;i.append("uploadExcel",q[0]),fetch(a,{method:"POST",headers:{"x-userid":localStorage.getItem("userid"),"mig-type":"AssetMigration","mig-btn-type":t,FORM_ID:1},body:i}).then((e=>e.json())).then((a=>{"200"==a.Output.status.code?(P(a),e.loading(!1),e.alertmsg({open:!0,color:"Success",message:[a.Output.status.message]}),"process"!=t&&(p(""),W(""))):(e.loading(!1),e.alertmsg({open:!0,color:"error",message:[a.Output.status.message]}))})).catch((t=>{e.loading(!1),d.error(t)}))}}(t),NameFile:u,excelfile:c.v.excel+"AssetMigration.xlsx",SheetCount:3,ref:a,importdisabled:R.filter((e=>"1"==e.IsConflict)).length>0}))),s().createElement("div",{className:"AssetMig-formtabs formtabs"},R.map(((e,t)=>s().createElement("button",{key:t,disabled:!1,style:{width:e.width,background:"1"==e.IsConflict?"#fad6a5":"#fff"},className:e.active+" secondaryMenuBtn ",onClick:()=>function(e){var t=R.length;for(let e=0;e<t;e++)document.getElementsByClassName("AssetMig-formtabs")[0].getElementsByTagName("button")[e].classList.remove("btnactvtab");document.getElementsByClassName("AssetMig-formtabs")[0].getElementsByTagName("button")[e].classList.add("btnactvtab"),I(e)}(e.id)},e.name,s().createElement("span",null," "),s().createElement("span",null,Number(e.count)>0?"("+e.count+")":""))))),0==M&&s().createElement(l.Z,{tableData:F,TableVisibleItem:N,TableBodyItem:E}),1==M&&s().createElement(l.Z,{tableData:w,TableVisibleItem:v,TableBodyItem:h}),2==M&&s().createElement(l.Z,{tableData:T,TableVisibleItem:f,TableBodyItem:S}))))}}}]);